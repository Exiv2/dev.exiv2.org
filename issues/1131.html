<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<title>Bug #1131: Please explain the RCSID macro at the start of every .cpp file. - Exiv2</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="description" content="Redmine" />
<meta name="keywords" content="issue,bug,tracker" />
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="4magYUbjXExMDHRSchBym/4Sow+2dSLIHlqcKS656WIAKwuONJmQTBloa17Nx36owYD3dkeWg3LjegyhbYAODQ==" />
<link rel='shortcut icon' href='/favicon.ico?1550767427' />
<link rel="stylesheet" media="all" href="/stylesheets/jquery/jquery-ui-1.11.0.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/application.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/responsive.css?1550767427" />

<script src="/javascripts/jquery-1.11.1-ui-1.11.0-ujs-4.3.1.js?1550767427"></script>
<script src="/javascripts/application.js?1550767427"></script>
<script src="/javascripts/responsive.js?1550767427"></script>
<script>
//<![CDATA[
$(window).load(function(){ warnLeavingUnsaved('The current page contains unsaved text that will be lost if you leave this page.'); });
//]]>
</script>


<!-- page specific tags -->
    <link rel="alternate" type="application/atom+xml" title="Exiv2 - Bug #1131: Please explain the RCSID macro at the start of every .cpp file." href="https://dev.exiv2.org/issues/1131.atom" />
<script src="/javascripts/context_menu.js?1550767427"></script><link rel="stylesheet" media="screen" href="/stylesheets/context_menu.css?1550767427" /></head>
<body class="project-exiv2 has-main-menu controller-issues action-show avatars-off">

<div id="wrapper">

<div class="flyout-menu js-flyout-menu">


        <div class="flyout-menu__search">
            <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
            <input type="hidden" name="issues" value="1" />
            <label class="search-magnifier search-magnifier--flyout" for="flyout-search">&#9906;</label>
            <input type="text" name="q" id="flyout-search" class="small js-search-input" placeholder="Search" />
</form>        </div>


        <h3>Project</h3>
        <span class="js-project-menu"></span>

    <h3>General</h3>
    <span class="js-general-menu"></span>

    <span class="js-sidebar flyout-menu__sidebar"></span>

    <h3>Profile</h3>
    <span class="js-profile-menu"></span>

</div>

<div id="wrapper2">
<div id="wrapper3">
<div id="top-menu">
    <div id="account">
        <ul><li><a class="login" href="/login">Sign in</a></li></ul>    </div>
    
    <ul><li><a class="home" href="/">Home</a></li><li><a class="projects" href="/projects">Projects</a></li><li><a class="help" href="https://www.redmine.org/guide">Help</a></li></ul></div>

<div id="header">

    <a href="#" class="mobile-toggle-button js-flyout-menu-toggle-button"></a>

    <div id="quick-search">
        <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
        <input type="hidden" name="scope" />
        <input type="hidden" name="issues" value="1" />
        <label for='q'>
          <a accesskey="4" href="/projects/exiv2/search">Search</a>:
        </label>
        <input type="text" name="q" id="q" size="20" class="small" accesskey="f" />
</form>        <div id="project-jump" class="drdn"><span class="drdn-trigger">Exiv2</span><div class="drdn-content"><div class="quick-search"><input type="text" name="q" id="projects-quick-search" value="" class="autocomplete" data-automcomplete-url="/projects/autocomplete.js?jump=issues" autocomplete="off" /></div><div class="drdn-items projects selection"></div><div class="drdn-items all-projects selection"><a href="/projects?jump=issues">All Projects</a></div></div></div>
    </div>

    <h1><span class="current-project">Exiv2</span></h1>

    <div id="main-menu" class="tabs">
        <ul><li><a class="overview" href="/projects/exiv2">Overview</a></li><li><a class="activity" href="/projects/exiv2/activity">Activity</a></li><li><a class="roadmap" href="/projects/exiv2/roadmap">Roadmap</a></li><li><a class="issues selected" href="/projects/exiv2/issues">Issues</a></li><li><a class="news" href="/projects/exiv2/news">News</a></li><li><a class="wiki" href="/projects/exiv2/wiki">Wiki</a></li><li><a class="boards" href="/projects/exiv2/boards">Forums</a></li><li><a class="repository" href="/projects/exiv2/repository">Repository</a></li></ul>
        <div class="tabs-buttons" style="display:none;">
            <button class="tab-left" onclick="moveTabLeft(this); return false;"></button>
            <button class="tab-right" onclick="moveTabRight(this); return false;"></button>
        </div>
    </div>
</div>

<div id="main" class="">
    <div id="sidebar">
          <h3>Issues</h3>

<ul>
<li><a href="/projects/exiv2/issues?set_filter=1">View all issues</a></li>
<li><a href="/projects/exiv2/issues/report">Summary</a></li>

</ul>









        
    </div>

    <div id="content">
        
        <div class="contextual">





</div>


<h2>Bug #1131</h2>

<div class="issue tracker-1 status-5 priority-4 priority-default closed details">

  <div class="gravatar-with-child">
    
    
  </div>

<div class="subject">
<div><h3>Please explain the RCSID macro at the start of every .cpp file.</h3></div>
</div>
        <p class="author">
        Added by <a class="user active" href="/users/2456">Daniel Kaneider</a> <a title="25 Oct 2015 18:01" href="/projects/exiv2/activity?from=2015-10-25">about 6 years</a> ago.
        Updated <a title="30 Oct 2015 10:24" href="/projects/exiv2/activity?from=2015-10-30">about 6 years</a> ago.
        </p>

<div class="attributes">
<div class="splitcontent"><div class="splitcontentleft"><div class="status attribute"><div class="label">Status:</div><div class="value">Closed</div></div><div class="priority attribute"><div class="label">Priority:</div><div class="value">Normal</div></div><div class="assigned-to attribute"><div class="label">Assignee:</div><div class="value"><a class="user active" href="/users/53">Andreas Huggel</a></div></div><div class="category attribute"><div class="label">Category:</div><div class="value">miscellaneous</div></div><div class="fixed-version attribute"><div class="label">Target version:</div><div class="value"><a title="28 Apr 2017" href="/versions/52">0.26</a></div></div></div><div class="splitcontentleft"><div class="start-date attribute"><div class="label">Start date:</div><div class="value">25 Oct 2015</div></div><div class="due-date attribute"><div class="label">Due date:</div><div class="value"></div></div><div class="progress attribute"><div class="label">% Done:</div><div class="value"><table class="progress progress-100"><tr><td style="width: 100%;" class="closed" title="100%"></td></tr></table><p class="percent">100%</p></div></div><div class="estimated-hours attribute"><div class="label">Estimated time:</div><div class="value">2.00 h</div></div></div></div>


</div>

<hr />
<div class="description">
  <div class="contextual">
  
  </div>

  <p><strong>Description</strong></p>
  <div class="wiki">
  <p>Currently a lot of .cpp files have some EXIV2_RCSID include/macro at the very top. It's fine if those lines are needed. <br />But: Do we really need to include that Id in its expanded form into the repository? <br />Example:<br /><pre>
#include "rcsid_int.hpp" 
EXIV2_RCSID("@(#) $Id: basicio.cpp 3991 2015-10-13 21:19:25Z robinwmills $")
</pre><br />or<br /><pre>
#include "rcsid_int.hpp" 
EXIV2_RCSID("@(#) $Id: error.cpp 3777 2015-05-02 11:55:40Z ahuggel $")

</pre></p>


	<p>Configure scripts / CMAke should be used instead</p>
  </div>
</div>






<hr />
<div id="relations">
<div class="contextual">
</div>

<p><strong>Related issues</strong></p>

<form data-cm-url="/issues/context_menu" action="/issues/1131" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><input type="hidden" name="authenticity_token" value="Rkg16+hso2EAOYkADWQFTARMqyZxn41aeToZEqLHGP2kBZ4EmhZvYVVdlgyyswl/O97/X4B8LOCEGoma4f7/kg==" />
  <table class="list issues odd-even"><tr id="relation-185" class="issue hascontextmenu issue tracker-1 status-5 priority-4 priority-default closed"><td class="checkbox"><input type="checkbox" name="ids[]" value="857" /></td><td class="subject" style="width: 50%">Related to Exiv2 - <a class="issue tracker-1 status-5 priority-4 priority-default closed" href="/issues/857">Bug #857</a>: CMake compilation issue on MacOS-X 4.5.1/Mountain Lion</td><td class="status">Closed</td><td class="start_date">07 Oct 2012</td><td class="due_date"></td><td class="done_ratio"><table class="progress progress-100"><tr><td style="width: 100%;" class="closed" title="100%"></td></tr></table><p class="percent"></p></td><td class="buttons"><a title="Actions" class="icon-only icon-actions js-contextmenu" href="#">Actions</a></td></tr><tr id="relation-186" class="issue hascontextmenu issue tracker-1 status-5 priority-4 priority-default closed"><td class="checkbox"><input type="checkbox" name="ids[]" value="920" /></td><td class="subject" style="width: 50%">Related to Exiv2 - <a class="issue tracker-1 status-5 priority-4 priority-default closed" href="/issues/920">Bug #920</a>: Cross compiling for Android on OSX is keep using &#39;/usr/bin/gcc&#39;</td><td class="status">Closed</td><td class="start_date">22 Sep 2013</td><td class="due_date"></td><td class="done_ratio"><table class="progress progress-100"><tr><td style="width: 100%;" class="closed" title="100%"></td></tr></table><p class="percent"></p></td><td class="buttons"><a title="Actions" class="icon-only icon-actions js-contextmenu" href="#">Actions</a></td></tr></table>
</form>
<form class="new_relation" id="new-relation-form" style="display: none;" action="/issues/1131/relations" accept-charset="UTF-8" data-remote="true" method="post"><input name="utf8" type="hidden" value="&#x2713;" />


<p><select onchange="setPredecessorFieldsVisibility();" name="relation[relation_type]" id="relation_relation_type"><option selected="selected" value="relates">Related to</option>
<option value="duplicates">Is duplicate of</option>
<option value="duplicated">Has duplicate</option>
<option value="blocks">Blocks</option>
<option value="blocked">Blocked by</option>
<option value="precedes">Precedes</option>
<option value="follows">Follows</option>
<option value="copied_to">Copied to</option>
<option value="copied_from">Copied from</option></select>
Issue #<input size="10" type="text" name="relation[issue_to_id]" id="relation_issue_to_id" />
<span id="predecessor_fields" style="display:none;">
Delay: <input size="3" type="text" name="relation[delay]" id="relation_delay" /> days
</span>
<input type="submit" name="commit" value="Add" data-disable-with="Add" />
<a href="#" onclick="$(&quot;#new-relation-form&quot;).hide();; return false;">Cancel</a>
</p>

<script>
//<![CDATA[
observeAutocompleteField('relation_issue_to_id', '/issues/auto_complete?issue_id=1131&project_id=exiv2&scope=all')
//]]>
</script>

<script>
//<![CDATA[
setPredecessorFieldsVisibility();
//]]>
</script>

</form>
</div>

</div>




<div id="history">
<h3>History</h3>
  <div id="change-4401" class="journal has-notes has-details">
    <div id="note-1">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-1" class="journal-link">#1</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="25 Oct 2015 18:15" href="/projects/exiv2/activity?from=2015-10-25">about 6 years</a> ago
      <span id="journal-4401-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>New</i> to <i>Feedback</i></li>
       <li><strong>Assignee</strong> set to <i>Andreas Huggel</i></li>
    </ul>
    <div id="journal-4401-notes" class="wiki"><p>The EXIV2_RCSID stuff has been there since before I joined the project.  I believe it has some magically version control property when compiled by GCC.  You'll see I added something to neuter it for Clang and Visual Studio.</p>


	<p><a class="external" href="https://www.quora.com/Whats-the-use-of-rcsid-string-in-C-comment">https://www.quora.com/Whats-the-use-of-rcsid-string-in-C-comment</a></p>


	<p>Andreas has strongly defended this in the past.  So, I'll ask Andreas for feedback concerning this.</p></div>
    </div>
  </div>
  
  <div id="change-4404" class="journal has-details">
    <div id="note-2">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-2" class="journal-link">#2</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="26 Oct 2015 20:33" href="/projects/exiv2/activity?from=2015-10-26">about 6 years</a> ago
      <span id="journal-4404-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Subject</strong> changed from <i>Polluted .cpp files with RCSID</i> to <i>Please explain the RCSID at the start of very .cpp file.</i></li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-4405" class="journal has-notes">
    <div id="note-3">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-3" class="journal-link">#3</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/53">Andreas Huggel</a> <a title="27 Oct 2015 02:25" href="/projects/exiv2/activity?from=2015-10-27">about 6 years</a> ago
      <span id="journal-4405-private_notes" class=""></span>
    </h4>

    <div id="journal-4405-notes" class="wiki"><p>This is just an old convention to 'stamp' each file that is compiled with some versioning info. It allows you to do something like</p>


<pre>
$ strings /usr/local/lib/libexiv2.so | grep '@(#)'
</pre>

	<p>to get a list of all the compilation modules with their revisions that make up the particular library you're using. Some kind of inventory if you like, which can be useful for debugging when you're not sure what version of the software you're looking at. I added that originally because it had proven crucial in some other projects I worked on in my early days as a developer. Those were much bigger projects than Exiv2 and it was not so simple to just ask clients to compile the trunk and try with that instead. I don't think I ever actually needed to use it with Exiv2.</p>


	<p>There is no magic involved, other than some contortions to avoid duplicate symbol errors and compiler warnings about an unused variable while still making sure it actually compiles. It just adds a variable with that string to the code. That is independent of the compiler. It only depends on the version control system (SVN) to expand the $Id$ tag.</p>


	<p>That macro has generally not resulted in any problems as far as I know and it doesn't do any harm, although Robin's experience may be different, and although I don't feel as strongly about these strings as I used to, I also don't see why we should remove them. The argument given in this issue seems vague. Repository files only contain the string '$Id$', not in its expanded form as claimed, and SVN only expands it when you check it out from the repository. You may also want to explain 'Configure scripts / CMAke should be used instead' and show what you have in mind.</p></div>
    </div>
  </div>
  
  <div id="change-4406" class="journal has-notes has-details">
    <div id="note-4">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-4" class="journal-link">#4</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="27 Oct 2015 10:14" href="/projects/exiv2/activity?from=2015-10-27">about 6 years</a> ago
      <span id="journal-4406-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Subject</strong> changed from <i>Please explain the RCSID at the start of very .cpp file.</i> to <i>Please explain the RCSID macro at the start of very .cpp file.</i></li>
       <li><strong>Category</strong> set to <i>miscellaneous</i></li>
       <li><strong>Status</strong> changed from <i>Feedback</i> to <i>Closed</i></li>
       <li><strong>% Done</strong> changed from <i>0</i> to <i>100</i></li>
       <li><strong>Estimated time</strong> set to <i>2.00 h</i></li>
    </ul>
    <div id="journal-4406-notes" class="wiki"><p>Thanks for the explanation, Andreas.</p>


	<p>I wrote a utility 'vercheck' that was used by many projects at Adobe to test version strings in all manner of files.  It was a kind of 'strings on steroids'. The utility read vercheck.txt in any/ever directory of a project and searched for the string <code>@</code>@VERCHECK something@<code>@</code> in every file listed.   It's remarkable some of the stuff it discovered.  You need something like this to manage a monster like Acrobat with 25 million lines of code, 10,000 .cpp files and probably another 10,000-20,000 files of localisation, installers and stuff.  There is no way for anybody to understand or know all about the beast.</p>


	<p>I'm closing this issue.  No further discussion of this matter is constructive.</p></div>
    </div>
  </div>
  
  <div id="change-4407" class="journal has-details">
    <div id="note-5">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-5" class="journal-link">#5</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="27 Oct 2015 10:17" href="/projects/exiv2/activity?from=2015-10-27">about 6 years</a> ago
      <span id="journal-4407-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Subject</strong> changed from <i>Please explain the RCSID macro at the start of very .cpp file.</i> to <i>Please explain the RCSID macro at the start of every .cpp file.</i></li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-4410" class="journal has-notes">
    <div id="note-6">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-6" class="journal-link">#6</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/53">Andreas Huggel</a> <a title="29 Oct 2015 03:57" href="/projects/exiv2/activity?from=2015-10-29">about 6 years</a> ago
      <span id="journal-4410-private_notes" class=""></span>
    </h4>

    <div id="journal-4410-notes" class="wiki"><p>Just a last comment: The entire concept of each file having a version number is an old-fashioned notion from the SCCS and RCS days. It doesn't make sense with today's distributed source code management systems. So this macro will become obsolete latest when we move from SVN to such a tool.</p></div>
    </div>
  </div>
  
  <div id="change-4414" class="journal has-notes">
    <div id="note-7">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-7" class="journal-link">#7</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/360">Thomas Beutlich</a> <a title="29 Oct 2015 20:13" href="/projects/exiv2/activity?from=2015-10-29">about 6 years</a> ago
      <span id="journal-4414-private_notes" class=""></span>
    </h4>

    <div id="journal-4414-notes" class="wiki"><p>There already is a working read-only git mirror at <a href="https://github.com/svn2github/exiv2_" class="external">GitHub</a>.</p></div>
    </div>
  </div>
  
  <div id="change-4417" class="journal has-notes">
    <div id="note-8">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-8" class="journal-link">#8</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="29 Oct 2015 20:48" href="/projects/exiv2/activity?from=2015-10-29">about 6 years</a> ago
      <span id="journal-4417-private_notes" class=""></span>
    </h4>

    <div id="journal-4417-notes" class="wiki"><p>We have no plan to move to GIT at this time.  This matter was discussed about a year ago.  <a class="external" href="http://dev.exiv2.org/boards/3/topics/1786?r=1792#message-1792">http://dev.exiv2.org/boards/3/topics/1786?r=1792#message-1792</a></p>


	<p>I will admit that I don't know GIT and believe it has a considerable learning curve.  I'm happy with SVN.  As the main contributor to exiv2, I don't want to use such a complex tool without support from another team member.</p>


	<p>Andreas said:</p>


<blockquote>

	<p>I agree with Gilles: Git is not a simple tool, and I have no problem getting myself into a situation where I don't know what to do anymore after issuing just a few git commands.</p>


</blockquote>

	<p>Gilles said:</p>


<blockquote>

	<p>As KDE developer who has follow svn to git transition, i can said, that git, is powerful, but too powerful. It's a bulldozer to make a small hole (if i talk about Exiv2 project). This tool is perfect to manage huge projects, with a large amount of developers / contributors (as Linux), but for medium and small projects, git is not very well adapted.</p>


</blockquote></div>
    </div>
  </div>
  
  <div id="change-4418" class="journal has-notes">
    <div id="note-9">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-9" class="journal-link">#9</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/360">Thomas Beutlich</a> <a title="30 Oct 2015 09:23" href="/projects/exiv2/activity?from=2015-10-30">about 6 years</a> ago
      <span id="journal-4418-private_notes" class=""></span>
    </h4>

    <div id="journal-4418-notes" class="wiki"><p><img src="http://imgs.xkcd.com/comics/git.png" alt="" /></p></div>
    </div>
  </div>
  
  <div id="change-4419" class="journal has-notes">
    <div id="note-10">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-10" class="journal-link">#10</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="30 Oct 2015 10:24" href="/projects/exiv2/activity?from=2015-10-30">about 6 years</a> ago
      <span id="journal-4419-private_notes" class=""></span>
    </h4>

    <div id="journal-4419-notes" class="wiki"><p>Thanks for the cartoon, Thomas.  That just about sums up GIT.</p>


	<p>I've been developing software for a living for 30+ years and have heard many stories about how the world would be a better place if I used ... Pascal, C, UNIX, X-Windows, C++, OO, Windows, Obj-C, Perl, Java, Python, Ant, CMake, RCS, CVS, SVN, GIT, vi, Emacs, Visual Studio, Eclipse, Xcode and on and on and on.  I know the pain involved in adopting new tools.  I've seldom seen much gain.  In the case of moving from SVN to GIT, I'm sure one day Exiv2 will use GIT.  However, while the number of contributors is (1-4 contributors/month making about 25 commits month), I don't see any gain.  There's a lot of work to be done for v0.26 and learning GIT isn't on my list.</p>


	<p>My open source buddies on CopperSpice (an amazing rewrite of Qt in C++11) say <em>"you have months of bewilderment with GIT and one day you <strong>just get it</strong>"</em>.  I have no desire to be bewildered by the tools for months.</p>


	<p>This sales pitch about "you won't believe how good the new tools are" is never true.  It is a move from one bed of nails to a different bed of nails.</p></div>
    </div>
  </div>
  


</div>

<div style="clear: both;"></div>
<div class="contextual">





</div>


<div style="clear: both;"></div>


<p class="other-formats">Also available in:  <span><a class="atom" rel="nofollow" href="/issues/1131.atom">Atom</a></span>
  <span><a class="pdf" rel="nofollow" href="/issues/1131.pdf">PDF</a></span>
</p>





        
        <div style="clear:both;"></div>
    </div>
</div>
</div>

<div id="ajax-indicator" style="display:none;"><span>Loading...</span></div>
<div id="ajax-modal" style="display:none;"></div>

<div id="footer">
  <div class="bgl"><div class="bgr">
    Powered by <a href="https://www.redmine.org/">Redmine</a> &copy; 2006-2018 Jean-Philippe Lang
  </div></div>
</div>
</div>
</div>

</body>
</html>
