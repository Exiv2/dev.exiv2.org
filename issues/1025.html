<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<title>Bug #1025: Camera model names are defined as localized strings, causing automatic defaults to report incorrect names  - Exiv2</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="description" content="Redmine" />
<meta name="keywords" content="issue,bug,tracker" />
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="aVnTiqNP0+iQdTXOrTMCq6AlxMSx20SBvI8PUA54BmaLFHhl0TUf6MURKsIS5A6Yn7eQvUA45TtBr5/YTUHhCQ==" />
<link rel='shortcut icon' href='/favicon.ico?1550767427' />
<link rel="stylesheet" media="all" href="/stylesheets/jquery/jquery-ui-1.11.0.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/application.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/responsive.css?1550767427" />

<script src="/javascripts/jquery-1.11.1-ui-1.11.0-ujs-4.3.1.js?1550767427"></script>
<script src="/javascripts/application.js?1550767427"></script>
<script src="/javascripts/responsive.js?1550767427"></script>
<script>
//<![CDATA[
$(window).load(function(){ warnLeavingUnsaved('The current page contains unsaved text that will be lost if you leave this page.'); });
//]]>
</script>


<!-- page specific tags -->
    <link rel="alternate" type="application/atom+xml" title="Exiv2 - Bug #1025: Camera model names are defined as localized strings, causing automatic defaults to report incorrect names " href="https://dev.exiv2.org/issues/1025.atom" />
<script src="/javascripts/context_menu.js?1550767427"></script><link rel="stylesheet" media="screen" href="/stylesheets/context_menu.css?1550767427" /></head>
<body class="project-exiv2 has-main-menu controller-issues action-show avatars-off">

<div id="wrapper">

<div class="flyout-menu js-flyout-menu">


        <div class="flyout-menu__search">
            <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
            <input type="hidden" name="issues" value="1" />
            <label class="search-magnifier search-magnifier--flyout" for="flyout-search">&#9906;</label>
            <input type="text" name="q" id="flyout-search" class="small js-search-input" placeholder="Search" />
</form>        </div>


        <h3>Project</h3>
        <span class="js-project-menu"></span>

    <h3>General</h3>
    <span class="js-general-menu"></span>

    <span class="js-sidebar flyout-menu__sidebar"></span>

    <h3>Profile</h3>
    <span class="js-profile-menu"></span>

</div>

<div id="wrapper2">
<div id="wrapper3">
<div id="top-menu">
    <div id="account">
        <ul><li><a class="login" href="/login">Sign in</a></li></ul>    </div>
    
    <ul><li><a class="home" href="/">Home</a></li><li><a class="projects" href="/projects">Projects</a></li><li><a class="help" href="https://www.redmine.org/guide">Help</a></li></ul></div>

<div id="header">

    <a href="#" class="mobile-toggle-button js-flyout-menu-toggle-button"></a>

    <div id="quick-search">
        <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
        <input type="hidden" name="scope" />
        <input type="hidden" name="issues" value="1" />
        <label for='q'>
          <a accesskey="4" href="/projects/exiv2/search">Search</a>:
        </label>
        <input type="text" name="q" id="q" size="20" class="small" accesskey="f" />
</form>        <div id="project-jump" class="drdn"><span class="drdn-trigger">Exiv2</span><div class="drdn-content"><div class="quick-search"><input type="text" name="q" id="projects-quick-search" value="" class="autocomplete" data-automcomplete-url="/projects/autocomplete.js?jump=issues" autocomplete="off" /></div><div class="drdn-items projects selection"></div><div class="drdn-items all-projects selection"><a href="/projects?jump=issues">All Projects</a></div></div></div>
    </div>

    <h1><span class="current-project">Exiv2</span></h1>

    <div id="main-menu" class="tabs">
        <ul><li><a class="overview" href="/projects/exiv2">Overview</a></li><li><a class="activity" href="/projects/exiv2/activity">Activity</a></li><li><a class="roadmap" href="/projects/exiv2/roadmap">Roadmap</a></li><li><a class="issues selected" href="/projects/exiv2/issues">Issues</a></li><li><a class="news" href="/projects/exiv2/news">News</a></li><li><a class="wiki" href="/projects/exiv2/wiki">Wiki</a></li><li><a class="boards" href="/projects/exiv2/boards">Forums</a></li><li><a class="repository" href="/projects/exiv2/repository">Repository</a></li></ul>
        <div class="tabs-buttons" style="display:none;">
            <button class="tab-left" onclick="moveTabLeft(this); return false;"></button>
            <button class="tab-right" onclick="moveTabRight(this); return false;"></button>
        </div>
    </div>
</div>

<div id="main" class="">
    <div id="sidebar">
          <h3>Issues</h3>

<ul>
<li><a href="/projects/exiv2/issues?set_filter=1">View all issues</a></li>
<li><a href="/projects/exiv2/issues/report">Summary</a></li>

</ul>









        
    </div>

    <div id="content">
        
        <div class="contextual">





</div>


<h2>Bug #1025</h2>

<div class="issue tracker-1 status-5 priority-4 priority-default closed details">
    <div class="next-prev-links contextual">
      « Previous |
        <span class="position">
          <a href="/issues?f%5B%5D=status_id&amp;f%5B%5D=author_id&amp;op%5Bauthor_id%5D=%3D&amp;op%5Bstatus_id%5D=%2A&amp;page=1&amp;per_page=100&amp;set_filter=1&amp;sort=id%3Adesc&amp;v%5Bauthor_id%5D%5B%5D=4313&amp;v%5Bstatus_id%5D%5B%5D=">1 of 2</a>
        </span> |
      <a title="#1021" accesskey="n" href="/issues/1021">Next »</a>
    </div>

  <div class="gravatar-with-child">
    
    
  </div>

<div class="subject">
<div><h3>Camera model names are defined as localized strings, causing automatic defaults to report incorrect names </h3></div>
</div>
        <p class="author">
        Added by <a class="user active" href="/users/4313">Thomas Schmidt</a> <a title="15 Jan 2015 19:20" href="/projects/exiv2/activity?from=2015-01-15">almost 7 years</a> ago.
        Updated <a title="21 Jun 2015 16:39" href="/projects/exiv2/activity?from=2015-06-21">over 6 years</a> ago.
        </p>

<div class="attributes">
<div class="splitcontent"><div class="splitcontentleft"><div class="status attribute"><div class="label">Status:</div><div class="value">Closed</div></div><div class="priority attribute"><div class="label">Priority:</div><div class="value">Normal</div></div><div class="assigned-to attribute"><div class="label">Assignee:</div><div class="value"><a class="user active" href="/users/4313">Thomas Schmidt</a></div></div><div class="category attribute"><div class="label">Category:</div><div class="value">translation</div></div><div class="fixed-version attribute"><div class="label">Target version:</div><div class="value"><a title="17 May 2015" href="/versions/51">0.25</a></div></div></div><div class="splitcontentleft"><div class="start-date attribute"><div class="label">Start date:</div><div class="value">15 Jan 2015</div></div><div class="due-date attribute"><div class="label">Due date:</div><div class="value">24 Jan 2015</div></div><div class="progress attribute"><div class="label">% Done:</div><div class="value"><table class="progress progress-100"><tr><td style="width: 100%;" class="closed" title="100%"></td></tr></table><p class="percent">100%</p></div></div><div class="estimated-hours attribute"><div class="label">Estimated time:</div><div class="value"></div></div></div></div>


</div>

<hr />
<div class="description">
  <div class="contextual">
  
  </div>

  <p><strong>Description</strong></p>
  <div class="wiki">
  <p>In src/canonmn.cpp, there are definitions like this:<br />    extern const TagDetails canonModelId[] = {<br />    ...
        { (long int)0x3000000, N_("PowerShot ELPH 500 HS / IXUS 310 HS / IXY 31S") },<br />    ...<br />This means that the localization tools generate an entry in the .pot table for this string, and try to find a default for a specific language.</p>


	<p>BUT: This generates a lot of wrong assignments (note the "fuzzy" flag), e.g.</p>


	<p>po/pl.po-#: src/canonmn.cpp:218<br />po/pl.po-#, fuzzy<br />po/pl.po:msgid "PowerShot ELPH 310 HS / IXUS 230 HS / IXY 600F" <br />po/pl.po-msgstr "PowerShot S300 / Digital IXUS 300 / IXY Digital 300" <br />po/pl.po-<br />--<br />po/ru.po-#: src/canonmn.cpp:218<br />po/ru.po-#, fuzzy<br />po/ru.po:msgid "PowerShot ELPH 310 HS / IXUS 230 HS / IXY 600F" <br />po/ru.po-msgstr "PowerShot S300 / Digital IXUS 300 / IXY Digital 300" <br />po/ru.po-<br />--<br />po/sk.po-#: src/canonmn.cpp:218<br />po/sk.po-#, fuzzy<br />po/sk.po:msgid "PowerShot ELPH 310 HS / IXUS 230 HS / IXY 600F" <br />po/sk.po-msgstr "PowerShot S300 / Digital IXUS 300 / IXY Digital 300" <br />po/sk.po-</p>


	<p>-> For all languages but the default (i.e. English), many camera models will be reported incorrectly!</p>


	<p>=> IMHO there is no reason why these string should be localized. In the code, the N_ should be removed?!</p>
  </div>
</div>
  <hr />
  <p><strong>Files</strong></p>
  <div class="attachments">
<div class="contextual">
  
</div>
<table>
<tr>
  <td>
    <a class="icon icon-attachment" href="/attachments/711">T1025.patch</a>    <span class="size">(81.4 KB)</span>
    <a class="icon-only icon-download" title="Download" href="/attachments/download/711/T1025.patch">T1025.patch</a>  </td>
  <td></td>
  <td>
      <span class="author">Thomas Schmidt, 16 Jan 2015 21:45</span>
  </td>
  <td>
  </td>
</tr>
</table>
</div>








</div>

<div id="issue-changesets">
<h3>Associated revisions</h3>
    <div class="changeset">
    <p><a title="Revision 3569" href="/projects/exiv2/repository/exiv2/revisions/3569">Revision 3569</a>
        (<a href="/projects/exiv2/repository/exiv2/revisions/3569/diff">diff</a>)
        <br />
        <span class="author">Added by <a class="user active" href="/users/119">Robin Mills</a> <a title="16 Jan 2015 23:00" href="/projects/exiv2/activity?from=2015-01-16">almost 7 years</a> ago</span></p>
    <div class="wiki changeset-comments">
        <p><a class="issue tracker-1 status-5 priority-4 priority-default closed" title="Bug: Camera model names are defined as localized strings, causing automatic defaults to report incorre... (Closed)" href="/issues/1025">#1025</a>.  Thank You Thomas for the patch.</p>
    </div>
    </div>
    <div class="changeset">
    <p><a title="Revision 3578" href="/projects/exiv2/repository/exiv2/revisions/3578">Revision 3578</a>
        (<a href="/projects/exiv2/repository/exiv2/revisions/3578/diff">diff</a>)
        <br />
        <span class="author">Added by <a class="user active" href="/users/134">Niels Kristian Bech Jensen</a> <a title="25 Jan 2015 04:25" href="/projects/exiv2/activity?from=2015-01-25">almost 7 years</a> ago</span></p>
    <div class="wiki changeset-comments">
        <p>Fix bug <a class="issue tracker-1 status-5 priority-4 priority-default closed" title="Bug: Camera model names are defined as localized strings, causing automatic defaults to report incorre... (Closed)" href="/issues/1025">#1025</a>: Only recognize two versions of the Nikon 18-200mm lens (like ExifTool).</p>
    </div>
    </div>

</div>



<div id="history">
<h3>History</h3>
  <div id="change-3098" class="journal has-notes has-details">
    <div id="note-1">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-1" class="journal-link">#1</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="15 Jan 2015 19:58" href="/projects/exiv2/activity?from=2015-01-15">almost 7 years</a> ago
      <span id="journal-3098-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Category</strong> set to <i>translation</i></li>
       <li><strong>Status</strong> changed from <i>New</i> to <i>Assigned</i></li>
       <li><strong>Assignee</strong> set to <i>Niels Kristian Bech Jensen</i></li>
       <li><strong>Target version</strong> set to <i>0.25</i></li>
    </ul>
    <div id="journal-3098-notes" class="wiki"><p>I can't think of a reason why those strings should be localised.  I've assigned this to Niels to get his opinion.  Niels, if you think this should be fixed, can you assign it to Thomas to be fixed?  Of you might want to assign it to Andreas to get his opinion.  I'll add Andreas as a "watcher" for this issue to be sure he is aware.</p></div>
    </div>
  </div>
  
  <div id="change-3100" class="journal has-notes has-details">
    <div id="note-2">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-2" class="journal-link">#2</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/134">Niels Kristian Bech Jensen</a> <a title="16 Jan 2015 05:37" href="/projects/exiv2/activity?from=2015-01-16">almost 7 years</a> ago
      <span id="journal-3100-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Assignee</strong> changed from <i>Niels Kristian Bech Jensen</i> to <i>Thomas Schmidt</i></li>
    </ul>
    <div id="journal-3100-notes" class="wiki"><p>Hi Thomas.</p>


	<p>Welcome to the team.</p>


	<p>I agree that these strings should not be localised. The 'N_(' and ')' must be removed from the strings to fix this. The po files will then be updated automatically during the release process.</p>


	<p>Best regards,<br />Niels Kristian Bech Jensen</p></div>
    </div>
  </div>
  
  <div id="change-3102" class="journal has-notes has-details">
    <div id="note-3">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-3" class="journal-link">#3</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4313">Thomas Schmidt</a> <a title="16 Jan 2015 21:45" href="/projects/exiv2/activity?from=2015-01-16">almost 7 years</a> ago
      <span id="journal-3102-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>File</strong> <a href="/attachments/711">T1025.patch</a> <a class="icon-only icon-download" title="Download" href="/attachments/download/711/T1025.patch">T1025.patch</a> added</li>
       <li><strong>Assignee</strong> changed from <i>Thomas Schmidt</i> to <i>Robin Mills</i></li>
    </ul>
    <div id="journal-3102-notes" class="wiki"><p>Attached is a patch that removes the N_ declaration from strings in .cpp files that should not be localized. When this is not obvious (i.e. not a camera or lens model name, or a simple number like a dimension), the N_ should remain.</p></div>
    </div>
  </div>
  
  <div id="change-3103" class="journal has-notes">
    <div id="note-4">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-4" class="journal-link">#4</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="16 Jan 2015 23:16" href="/projects/exiv2/activity?from=2015-01-16">almost 7 years</a> ago
      <span id="journal-3103-private_notes" class=""></span>
    </h4>

    <div id="journal-3103-notes" class="wiki"><p>Submitted <a class="changeset" title="#1025.  Thank You Thomas for the patch." href="/projects/exiv2/repository/exiv2/revisions/3569">r3569</a>.  Thank you Thomas for the patch.</p>


	<p>I'm not sure we can readily test the effectiveness of this patch without images from affected devices.  However by code inspection it seems safe to be marked as resolved.  It has built on the build server and passed the test suite.  <a class="external" href="http://exiv2.dyndns.org:8080/job/Exiv2-trunk/1838/">http://exiv2.dyndns.org:8080/job/Exiv2-trunk/1838/</a>  It's very pleasing to see the .gmo files being regenerated by the build server.</p>


	<p>I've discovered today that my submission <a class="changeset" title="#917.  Thank you Thomas for the patch.  Very much appreciated." href="/projects/exiv2/repository/exiv2/revisions/3566">r3566</a> in connection with <a class="issue tracker-2 status-5 priority-4 priority-default closed" title="Feature: Modify exiv2/actions.cpp return -3/253 when no metadata has been found. (Closed)" href="/issues/917">#917</a> has introduced an error in the test suite.  I will mark this issue (<a class="issue tracker-1 status-5 priority-4 priority-default closed" title="Bug: Camera model names are defined as localized strings, causing automatic defaults to report incorre... (Closed)" href="/issues/1025">#1025</a>) "Resolved" when I fix <a class="changeset" title="#917.  Thank you Thomas for the patch.  Very much appreciated." href="/projects/exiv2/repository/exiv2/revisions/3566">r3566</a> tomorrow.</p>


	<p>Very good team work by everybody involved in fixing this.  Thank You, Gentlemen.</p></div>
    </div>
  </div>
  
  <div id="change-3114" class="journal has-notes">
    <div id="note-5">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-5" class="journal-link">#5</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/134">Niels Kristian Bech Jensen</a> <a title="24 Jan 2015 14:34" href="/projects/exiv2/activity?from=2015-01-24">almost 7 years</a> ago
      <span id="journal-3114-private_notes" class=""></span>
    </h4>

    <div id="journal-3114-notes" class="wiki"><p>Hi Robin.</p>


	<p>I have removed the offending lines from bugfixes-test.out with <a class="changeset" title="Fix broken test output introduced by r3566." href="/projects/exiv2/repository/exiv2/revisions/3577">r3577</a>. Tests run clean on my systems now.</p>


	<p>Best regards,<br />Niels Kristian Bech Jensen</p></div>
    </div>
  </div>
  
  <div id="change-3115" class="journal has-details">
    <div id="note-6">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-6" class="journal-link">#6</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/134">Niels Kristian Bech Jensen</a> <a title="24 Jan 2015 14:58" href="/projects/exiv2/activity?from=2015-01-24">almost 7 years</a> ago
      <span id="journal-3115-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Due date</strong> set to <i>24 Jan 2015</i></li>
       <li><strong>Status</strong> changed from <i>Assigned</i> to <i>Resolved</i></li>
       <li><strong>Assignee</strong> changed from <i>Robin Mills</i> to <i>Thomas Schmidt</i></li>
       <li><strong>% Done</strong> changed from <i>0</i> to <i>100</i></li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-3116" class="journal has-notes">
    <div id="note-7">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-7" class="journal-link">#7</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="24 Jan 2015 17:49" href="/projects/exiv2/activity?from=2015-01-24">almost 7 years</a> ago
      <span id="journal-3116-private_notes" class=""></span>
    </h4>

    <div id="journal-3116-notes" class="wiki"><p>Thanks very much for dealing with this, Niels.  I've checked the build server and all tests pass on all 5 platforms (MSVC/Mac/Linux/Cygwin/MinGW).</p>


	<p><a class="external" href="http://exiv2.dyndns.org:8080/job/Exiv2-trunk/1845/">http://exiv2.dyndns.org:8080/job/Exiv2-trunk/1845/</a></p>


	<p>Thanks for doing, I had forgotten about this.  Resolved.  On to the next challenge!</p></div>
    </div>
  </div>
  
  <div id="change-3813" class="journal has-details">
    <div id="note-8">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-8" class="journal-link">#8</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/53">Andreas Huggel</a> <a title="21 Jun 2015 16:39" href="/projects/exiv2/activity?from=2015-06-21">over 6 years</a> ago
      <span id="journal-3813-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>Resolved</i> to <i>Closed</i></li>
    </ul>
    
    </div>
  </div>
  


</div>

<div style="clear: both;"></div>
<div class="contextual">





</div>


<div style="clear: both;"></div>


<p class="other-formats">Also available in:  <span><a class="atom" rel="nofollow" href="/issues/1025.atom">Atom</a></span>
  <span><a class="pdf" rel="nofollow" href="/issues/1025.pdf">PDF</a></span>
</p>





        
        <div style="clear:both;"></div>
    </div>
</div>
</div>

<div id="ajax-indicator" style="display:none;"><span>Loading...</span></div>
<div id="ajax-modal" style="display:none;"></div>

<div id="footer">
  <div class="bgl"><div class="bgr">
    Powered by <a href="https://www.redmine.org/">Redmine</a> &copy; 2006-2018 Jean-Philippe Lang
  </div></div>
</div>
</div>
</div>

</body>
</html>
