<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<title>Bug #1130: Fails to build without XMP: xmp.cpp:432:12: error: &#39;XMP_Status&#39; does not name a type - Exiv2</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="description" content="Redmine" />
<meta name="keywords" content="issue,bug,tracker" />
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="lmr2UoaYV4mRLmjJLbMjPXbqvf2JB1ZaTXkzTbyOrj90J1299OKbicRKd8WSZC8OSXjphHjk9+CwWaPF/7dJUA==" />
<link rel='shortcut icon' href='/favicon.ico?1550767427' />
<link rel="stylesheet" media="all" href="/stylesheets/jquery/jquery-ui-1.11.0.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/application.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/responsive.css?1550767427" />

<script src="/javascripts/jquery-1.11.1-ui-1.11.0-ujs-4.3.1.js?1550767427"></script>
<script src="/javascripts/application.js?1550767427"></script>
<script src="/javascripts/responsive.js?1550767427"></script>
<script>
//<![CDATA[
$(window).load(function(){ warnLeavingUnsaved('The current page contains unsaved text that will be lost if you leave this page.'); });
//]]>
</script>


<!-- page specific tags -->
    <link rel="alternate" type="application/atom+xml" title="Exiv2 - Bug #1130: Fails to build without XMP: xmp.cpp:432:12: error: &#39;XMP_Status&#39; does not name a type" href="https://dev.exiv2.org/issues/1130.atom" />
<script src="/javascripts/context_menu.js?1550767427"></script><link rel="stylesheet" media="screen" href="/stylesheets/context_menu.css?1550767427" /></head>
<body class="project-exiv2 has-main-menu controller-issues action-show avatars-off">

<div id="wrapper">

<div class="flyout-menu js-flyout-menu">


        <div class="flyout-menu__search">
            <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
            <input type="hidden" name="issues" value="1" />
            <label class="search-magnifier search-magnifier--flyout" for="flyout-search">&#9906;</label>
            <input type="text" name="q" id="flyout-search" class="small js-search-input" placeholder="Search" />
</form>        </div>


        <h3>Project</h3>
        <span class="js-project-menu"></span>

    <h3>General</h3>
    <span class="js-general-menu"></span>

    <span class="js-sidebar flyout-menu__sidebar"></span>

    <h3>Profile</h3>
    <span class="js-profile-menu"></span>

</div>

<div id="wrapper2">
<div id="wrapper3">
<div id="top-menu">
    <div id="account">
        <ul><li><a class="login" href="/login">Sign in</a></li></ul>    </div>
    
    <ul><li><a class="home" href="/">Home</a></li><li><a class="projects" href="/projects">Projects</a></li><li><a class="help" href="https://www.redmine.org/guide">Help</a></li></ul></div>

<div id="header">

    <a href="#" class="mobile-toggle-button js-flyout-menu-toggle-button"></a>

    <div id="quick-search">
        <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
        <input type="hidden" name="scope" />
        <input type="hidden" name="issues" value="1" />
        <label for='q'>
          <a accesskey="4" href="/projects/exiv2/search">Search</a>:
        </label>
        <input type="text" name="q" id="q" size="20" class="small" accesskey="f" />
</form>        <div id="project-jump" class="drdn"><span class="drdn-trigger">Exiv2</span><div class="drdn-content"><div class="quick-search"><input type="text" name="q" id="projects-quick-search" value="" class="autocomplete" data-automcomplete-url="/projects/autocomplete.js?jump=issues" autocomplete="off" /></div><div class="drdn-items projects selection"></div><div class="drdn-items all-projects selection"><a href="/projects?jump=issues">All Projects</a></div></div></div>
    </div>

    <h1><span class="current-project">Exiv2</span></h1>

    <div id="main-menu" class="tabs">
        <ul><li><a class="overview" href="/projects/exiv2">Overview</a></li><li><a class="activity" href="/projects/exiv2/activity">Activity</a></li><li><a class="roadmap" href="/projects/exiv2/roadmap">Roadmap</a></li><li><a class="issues selected" href="/projects/exiv2/issues">Issues</a></li><li><a class="news" href="/projects/exiv2/news">News</a></li><li><a class="wiki" href="/projects/exiv2/wiki">Wiki</a></li><li><a class="boards" href="/projects/exiv2/boards">Forums</a></li><li><a class="repository" href="/projects/exiv2/repository">Repository</a></li></ul>
        <div class="tabs-buttons" style="display:none;">
            <button class="tab-left" onclick="moveTabLeft(this); return false;"></button>
            <button class="tab-right" onclick="moveTabRight(this); return false;"></button>
        </div>
    </div>
</div>

<div id="main" class="">
    <div id="sidebar">
          <h3>Issues</h3>

<ul>
<li><a href="/projects/exiv2/issues?set_filter=1">View all issues</a></li>
<li><a href="/projects/exiv2/issues/report">Summary</a></li>

</ul>









        
    </div>

    <div id="content">
        
        <div class="contextual">





</div>


<h2>Bug #1130</h2>

<div class="issue tracker-1 status-2 priority-4 priority-default details">

  <div class="gravatar-with-child">
    
    
  </div>

<div class="subject">
<div><h3>Fails to build without XMP: xmp.cpp:432:12: error: &#39;XMP_Status&#39; does not name a type</h3></div>
</div>
        <p class="author">
        Added by <a class="user active" href="/users/4490">Jakub Wilk</a> <a title="23 Oct 2015 18:40" href="/projects/exiv2/activity?from=2015-10-23">about 6 years</a> ago.
        Updated <a title="13 Jun 2016 06:22" href="/projects/exiv2/activity?from=2016-06-13">over 5 years</a> ago.
        </p>

<div class="attributes">
<div class="splitcontent"><div class="splitcontentleft"><div class="status attribute"><div class="label">Status:</div><div class="value">Assigned</div></div><div class="priority attribute"><div class="label">Priority:</div><div class="value">Normal</div></div><div class="assigned-to attribute"><div class="label">Assignee:</div><div class="value"><a class="user active" href="/users/119">Robin Mills</a></div></div><div class="category attribute"><div class="label">Category:</div><div class="value">build</div></div><div class="fixed-version attribute"><div class="label">Target version:</div><div class="value"><a title="31 Dec 2020" href="/versions/54">0.28</a></div></div></div><div class="splitcontentleft"><div class="start-date attribute"><div class="label">Start date:</div><div class="value">23 Oct 2015</div></div><div class="due-date attribute"><div class="label">Due date:</div><div class="value"></div></div><div class="progress attribute"><div class="label">% Done:</div><div class="value"><table class="progress progress-30"><tr><td style="width: 30%;" class="closed" title="30%"></td><td style="width: 70%;" class="todo"></td></tr></table><p class="percent">30%</p></div></div><div class="estimated-hours attribute"><div class="label">Estimated time:</div><div class="value">10.00 h</div></div></div></div>


</div>

<hr />
<div class="description">
  <div class="contextual">
  
  </div>

  <p><strong>Description</strong></p>
  <div class="wiki">
  <p>I tried to build current svn checkout (<a class="changeset" title="[cmake-webready] align VS header files" href="/projects/exiv2/repository/exiv2/revisions/3992">r3992</a>) with XMP support disabled (<code>./configure --disable-xmp</code>), but the build failed:<br /><pre>
libtool: compile:  g++ -O2 -fvisibility=hidden -fvisibility-inlines-hidden -Wall -Wcast-align -Wpointer-arith -Wformat-security -Wmissing-format-attribute -Woverloaded-virtual -W -Wundef -pedantic -MMD -I../src -I../include/ -I../include/exiv2 -DEXV_LOCALEDIR=\"/usr/local/share/locale\" -c -DEXV_BUILDING_LIB=1 xmp.cpp  -fPIC -DPIC -o .libs/xmp.o
xmp.cpp:397:54: warning: unused parameter 'xmpLockFct' [-Wunused-parameter]
     bool XmpParser::initialize(XmpParser::XmpLockFct xmpLockFct, void* pLockData)
                                                      ^
xmp.cpp:397:72: warning: unused parameter 'pLockData' [-Wunused-parameter]
     bool XmpParser::initialize(XmpParser::XmpLockFct xmpLockFct, void* pLockData)
                                                                        ^
xmp.cpp:432:12: error: 'XMP_Status' does not name a type
     static XMP_Status nsDumper
            ^
xmp.cpp: In static member function 'static void Exiv2::XmpParser::registeredNamespaces(Exiv2::Dictionary&#38;)':
xmp.cpp:478:24: error: ISO C++ forbids declaration of 'XMP_Error' with no type [-fpermissive]
         } catch (const XMP_Error&#38; e) {
                        ^
xmp.cpp:478:33: error: expected ')' before '&#38;' token
         } catch (const XMP_Error&#38; e) {
                                 ^
xmp.cpp:478:33: error: expected '{' before '&#38;' token
xmp.cpp:478:35: error: 'e' was not declared in this scope
         } catch (const XMP_Error&#38; e) {
                                   ^
xmp.cpp: At global scope:
xmp.cpp:469:61: warning: unused parameter 'dict' [-Wunused-parameter]
     void XmpParser::registeredNamespaces(Exiv2::Dictionary&#38; dict)
                                                             ^
xmp.cpp:913:28: warning: 'Exiv2::XmpKey::AutoPtr {anonymous}::makeXmpKey(const string&#38;, const string&#38;)' defined but not used [-Wunused-function]
     Exiv2::XmpKey::AutoPtr makeXmpKey(const std::string&#38; schemaNs,
                            ^
Makefile:193: recipe for target 'xmp.o' failed
</pre></p>
  </div>
</div>







</div>

<div id="issue-changesets">
<h3>Associated revisions</h3>
    <div class="changeset">
    <p><a title="Revision 3997" href="/projects/exiv2/repository/exiv2/revisions/3997">Revision 3997</a>
        (<a href="/projects/exiv2/repository/exiv2/revisions/3997/diff">diff</a>)
        <br />
        <span class="author">Added by <a class="user active" href="/users/119">Robin Mills</a> <a title="29 Oct 2015 19:33" href="/projects/exiv2/activity?from=2015-10-29">about 6 years</a> ago</span></p>
    <div class="wiki changeset-comments">
        <p><a class="issue tracker-1 status-2 priority-4 priority-default" title="Bug: Fails to build without XMP: xmp.cpp:432:12: error: &#39;XMP_Status&#39; does not name a type (Assigned)" href="/issues/1130">#1130</a>.  Thank You Jakub for reporting this.</p>
    </div>
    </div>
    <div class="changeset">
    <p><a title="Revision 3999" href="/projects/exiv2/repository/exiv2/revisions/3999">Revision 3999</a>
        (<a href="/projects/exiv2/repository/exiv2/revisions/3999/diff">diff</a>)
        <br />
        <span class="author">Added by <a class="user active" href="/users/119">Robin Mills</a> <a title="29 Oct 2015 19:46" href="/projects/exiv2/activity?from=2015-10-29">about 6 years</a> ago</span></p>
    <div class="wiki changeset-comments">
        <p><a class="issue tracker-1 status-2 priority-4 priority-default" title="Bug: Fails to build without XMP: xmp.cpp:432:12: error: &#39;XMP_Status&#39; does not name a type (Assigned)" href="/issues/1130">#1130</a>.  Correction to <a class="changeset" title="#1130.  Thank You Jakub for reporting this." href="/projects/exiv2/repository/exiv2/revisions/3997">r3997</a>.</p>
    </div>
    </div>

</div>



<div id="history">
<h3>History</h3>
  <div id="change-4399" class="journal has-notes has-details">
    <div id="note-1">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-1" class="journal-link">#1</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="23 Oct 2015 19:55" href="/projects/exiv2/activity?from=2015-10-23">about 6 years</a> ago
      <span id="journal-4399-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>New</i> to <i>Assigned</i></li>
       <li><strong>Assignee</strong> set to <i>Robin Mills</i></li>
       <li><strong>Target version</strong> set to <i>0.26</i></li>
    </ul>
    <div id="journal-4399-notes" class="wiki"><p>Thanks for reporting this (and your other issue updates).  I'm not sure I've every tried to build without libexpat or libz</p>


	<p>When I use your command line: <pre>./configure --disable-xmp</pre>I get errors on the Mac such as <pre>
version.cpp:395:5: warning: 'EXV_HAVE_XMP_TOOLKIT' is not defined, evaluates to 0 [-Wundef]
#if EXV_HAVE_XMP_TOOLKIT</pre>I'll have a look at this, and your other issue updates,  in the next few days.</p>


	<p>Thanks for reporting this stuff.  The only way we can discover these matters is your contribution. Thank You.</p></div>
    </div>
  </div>
  
  <div id="change-4412" class="journal has-notes has-details">
    <div id="note-2">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-2" class="journal-link">#2</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="29 Oct 2015 19:35" href="/projects/exiv2/activity?from=2015-10-29">about 6 years</a> ago
      <span id="journal-4412-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>% Done</strong> changed from <i>0</i> to <i>50</i></li>
       <li><strong>Estimated time</strong> set to <i>2.00 h</i></li>
    </ul>
    <div id="journal-4412-notes" class="wiki"><p>Fix submitted: <a class="changeset" title="#1130.  Thank You Jakub for reporting this." href="/projects/exiv2/repository/exiv2/revisions/3997">r3997</a>  I'll set the status to 50% done for now while I wait for the buildServer to confirm that it builds/tests correctly on all platforms.</p></div>
    </div>
  </div>
  
  <div id="change-4415" class="journal has-notes has-details">
    <div id="note-3">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-3" class="journal-link">#3</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="29 Oct 2015 20:34" href="/projects/exiv2/activity?from=2015-10-29">about 6 years</a> ago
      <span id="journal-4415-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Estimated time</strong> changed from <i>2.00 h</i> to <i>8.00 h</i></li>
    </ul>
    <div id="journal-4415-notes" class="wiki"><p>BuildServer is good.  However by default he builds with xmp support enabled.  I've manually built ./configure --disable-xmp on Mac/Linux/Cygwin.  Two matters arising:</p>


	<ol>
	<li>Test harness generates lots of messages.  I should visit the test harness and refactor to keep XMP tests apart from 'normal' and reduce the thunder when XMP is disabled</li>
		<li>&lt;exiv2dir&gt;/Makefile is modified by ./configure.  This isn't good because that file is checked into the repos.</li>
	</ol>


	<p>I'm not going to give much priority to those new matters.  I am not promising to visit them for v0.26.</p>


	<p>By the way, we do have a way of detecting this fault.  Our buildServer can build all supported platforms.  At the moment, the UI for the buildServer is only available to registered users of our Jenkins Server.  For v0.26, I am developing a public version which will enable any user to select any supported build configuration.  Here's the UI.  It doesn't build anything yet.  <a class="issue tracker-2 status-5 priority-4 priority-default closed" title="Feature: User ability to request a build from Jenkins (Closed)" href="/issues/1109">#1109</a>  <a class="external" href="http://www.exiv2.org/buildServer.html">http://www.exiv2.org/buildServer.html</a></p></div>
    </div>
  </div>
  
  <div id="change-4416" class="journal has-details">
    <div id="note-4">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-4" class="journal-link">#4</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="29 Oct 2015 20:36" href="/projects/exiv2/activity?from=2015-10-29">about 6 years</a> ago
      <span id="journal-4416-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>% Done</strong> changed from <i>50</i> to <i>30</i></li>
       <li><strong>Estimated time</strong> changed from <i>8.00 h</i> to <i>10.00 h</i></li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-5145" class="journal has-notes has-details">
    <div id="note-5">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-5" class="journal-link">#5</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="13 Jun 2016 06:22" href="/projects/exiv2/activity?from=2016-06-13">over 5 years</a> ago
      <span id="journal-5145-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Target version</strong> changed from <i>0.26</i> to <i>0.28</i></li>
    </ul>
    <div id="journal-5145-notes" class="wiki"><p>Deferred to v0.27 to make the schedule for v0.26.</p></div>
    </div>
  </div>
  


</div>

<div style="clear: both;"></div>
<div class="contextual">





</div>


<div style="clear: both;"></div>


<p class="other-formats">Also available in:  <span><a class="atom" rel="nofollow" href="/issues/1130.atom">Atom</a></span>
  <span><a class="pdf" rel="nofollow" href="/issues/1130.pdf">PDF</a></span>
</p>





        
        <div style="clear:both;"></div>
    </div>
</div>
</div>

<div id="ajax-indicator" style="display:none;"><span>Loading...</span></div>
<div id="ajax-modal" style="display:none;"></div>

<div id="footer">
  <div class="bgl"><div class="bgr">
    Powered by <a href="https://www.redmine.org/">Redmine</a> &copy; 2006-2018 Jean-Philippe Lang
  </div></div>
</div>
</div>
</div>

</body>
</html>
