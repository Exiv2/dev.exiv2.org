<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<title>Feature #937: Support Darwin Core (DwC) XMP metadata - Exiv2</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="description" content="Redmine" />
<meta name="keywords" content="issue,bug,tracker" />
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="Ac9yhm7n+yXiRQIisXxr0/qc1zwWdpiRscihTSLnCAzjgtlpHJ03JbchHS4Oq2fgxQ6DReeVOStM6DHFYd7vYw==" />
<link rel='shortcut icon' href='/favicon.ico?1550767427' />
<link rel="stylesheet" media="all" href="/stylesheets/jquery/jquery-ui-1.11.0.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/application.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/responsive.css?1550767427" />

<script src="/javascripts/jquery-1.11.1-ui-1.11.0-ujs-4.3.1.js?1550767427"></script>
<script src="/javascripts/application.js?1550767427"></script>
<script src="/javascripts/responsive.js?1550767427"></script>
<script>
//<![CDATA[
$(window).load(function(){ warnLeavingUnsaved('The current page contains unsaved text that will be lost if you leave this page.'); });
//]]>
</script>


<!-- page specific tags -->
    <link rel="alternate" type="application/atom+xml" title="Exiv2 - Feature #937: Support Darwin Core (DwC) XMP metadata" href="https://dev.exiv2.org/issues/937.atom" />
<script src="/javascripts/context_menu.js?1550767427"></script><link rel="stylesheet" media="screen" href="/stylesheets/context_menu.css?1550767427" /></head>
<body class="project-exiv2 has-main-menu controller-issues action-show avatars-off">

<div id="wrapper">

<div class="flyout-menu js-flyout-menu">


        <div class="flyout-menu__search">
            <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
            <input type="hidden" name="issues" value="1" />
            <label class="search-magnifier search-magnifier--flyout" for="flyout-search">&#9906;</label>
            <input type="text" name="q" id="flyout-search" class="small js-search-input" placeholder="Search" />
</form>        </div>


        <h3>Project</h3>
        <span class="js-project-menu"></span>

    <h3>General</h3>
    <span class="js-general-menu"></span>

    <span class="js-sidebar flyout-menu__sidebar"></span>

    <h3>Profile</h3>
    <span class="js-profile-menu"></span>

</div>

<div id="wrapper2">
<div id="wrapper3">
<div id="top-menu">
    <div id="account">
        <ul><li><a class="login" href="/login">Sign in</a></li></ul>    </div>
    
    <ul><li><a class="home" href="/">Home</a></li><li><a class="projects" href="/projects">Projects</a></li><li><a class="help" href="https://www.redmine.org/guide">Help</a></li></ul></div>

<div id="header">

    <a href="#" class="mobile-toggle-button js-flyout-menu-toggle-button"></a>

    <div id="quick-search">
        <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
        <input type="hidden" name="scope" />
        <input type="hidden" name="issues" value="1" />
        <label for='q'>
          <a accesskey="4" href="/projects/exiv2/search">Search</a>:
        </label>
        <input type="text" name="q" id="q" size="20" class="small" accesskey="f" />
</form>        <div id="project-jump" class="drdn"><span class="drdn-trigger">Exiv2</span><div class="drdn-content"><div class="quick-search"><input type="text" name="q" id="projects-quick-search" value="" class="autocomplete" data-automcomplete-url="/projects/autocomplete.js?jump=issues" autocomplete="off" /></div><div class="drdn-items projects selection"></div><div class="drdn-items all-projects selection"><a href="/projects?jump=issues">All Projects</a></div></div></div>
    </div>

    <h1><span class="current-project">Exiv2</span></h1>

    <div id="main-menu" class="tabs">
        <ul><li><a class="overview" href="/projects/exiv2">Overview</a></li><li><a class="activity" href="/projects/exiv2/activity">Activity</a></li><li><a class="roadmap" href="/projects/exiv2/roadmap">Roadmap</a></li><li><a class="issues selected" href="/projects/exiv2/issues">Issues</a></li><li><a class="news" href="/projects/exiv2/news">News</a></li><li><a class="wiki" href="/projects/exiv2/wiki">Wiki</a></li><li><a class="boards" href="/projects/exiv2/boards">Forums</a></li><li><a class="repository" href="/projects/exiv2/repository">Repository</a></li></ul>
        <div class="tabs-buttons" style="display:none;">
            <button class="tab-left" onclick="moveTabLeft(this); return false;"></button>
            <button class="tab-right" onclick="moveTabRight(this); return false;"></button>
        </div>
    </div>
</div>

<div id="main" class="">
    <div id="sidebar">
          <h3>Issues</h3>

<ul>
<li><a href="/projects/exiv2/issues?set_filter=1">View all issues</a></li>
<li><a href="/projects/exiv2/issues/report">Summary</a></li>

</ul>









        
    </div>

    <div id="content">
        
        <div class="contextual">





</div>


<h2>Feature #937</h2>

<div class="issue tracker-2 status-5 priority-4 priority-default closed details">

  <div class="gravatar-with-child">
    
    
  </div>

<div class="subject">
<div><h3>Support Darwin Core (DwC) XMP metadata</h3></div>
</div>
        <p class="author">
        Added by <a class="user active" href="/users/555">Jim Nelson</a> <a title="04 Dec 2013 12:04" href="/projects/exiv2/activity?from=2013-12-04">almost 8 years</a> ago.
        Updated <a title="21 Jun 2015 16:42" href="/projects/exiv2/activity?from=2015-06-21">over 6 years</a> ago.
        </p>

<div class="attributes">
<div class="splitcontent"><div class="splitcontentleft"><div class="status attribute"><div class="label">Status:</div><div class="value">Closed</div></div><div class="priority attribute"><div class="label">Priority:</div><div class="value">Normal</div></div><div class="assigned-to attribute"><div class="label">Assignee:</div><div class="value"><a class="user active" href="/users/4035">Alan Pater</a></div></div><div class="category attribute"><div class="label">Category:</div><div class="value">xmp</div></div><div class="fixed-version attribute"><div class="label">Target version:</div><div class="value"><a title="17 May 2015" href="/versions/51">0.25</a></div></div></div><div class="splitcontentleft"><div class="start-date attribute"><div class="label">Start date:</div><div class="value">04 Dec 2013</div></div><div class="due-date attribute"><div class="label">Due date:</div><div class="value"></div></div><div class="progress attribute"><div class="label">% Done:</div><div class="value"><table class="progress progress-100"><tr><td style="width: 100%;" class="closed" title="100%"></td></tr></table><p class="percent">100%</p></div></div><div class="estimated-hours attribute"><div class="label">Estimated time:</div><div class="value"></div></div></div></div>


</div>

<hr />
<div class="description">
  <div class="contextual">
  
  </div>

  <p><strong>Description</strong></p>
  <div class="wiki">
  <p>There has been a request from the GIMP project to support Darwin Core (DwC) metadata.  This was discussed on the Exiv2 forums at <a class="external" href="http://dev.exiv2.org/boards/3/topics/1675">http://dev.exiv2.org/boards/3/topics/1675</a> but I couldn't find a ticket for it.</p>


	<p>More information about Darwin Core can be found at <a class="external" href="http://rs.tdwg.org/dwc/">http://rs.tdwg.org/dwc/</a></p>
  </div>
</div>
  <hr />
  <p><strong>Files</strong></p>
  <div class="attachments">
<div class="contextual">
  
</div>
<table>
<tr>
  <td>
    <a class="icon icon-attachment" href="/attachments/580">DwCproperties.cpp</a>    <span class="size">(41.4 KB)</span>
    <a class="icon-only icon-download" title="Download" href="/attachments/download/580/DwCproperties.cpp">DwCproperties.cpp</a>  </td>
  <td>List of DwC properties</td>
  <td>
      <span class="author">Alan Pater, 08 Dec 2013 23:04</span>
  </td>
  <td>
  </td>
</tr>
<tr>
  <td>
    <a class="icon icon-attachment" href="/attachments/581">DwC-SampleImage.jpg</a>    <span class="size">(52.3 KB)</span>
    <a class="icon-only icon-download" title="Download" href="/attachments/download/581/DwC-SampleImage.jpg">DwC-SampleImage.jpg</a>  </td>
  <td>Sample Image DwC</td>
  <td>
      <span class="author">Alan Pater, 08 Dec 2013 23:04</span>
  </td>
  <td>
  </td>
</tr>
<tr>
  <td>
    <a class="icon icon-attachment" href="/attachments/582">DwC2.txt</a>    <span class="size">(20.3 KB)</span>
    <a class="icon-only icon-download" title="Download" href="/attachments/download/582/DwC2.txt">DwC2.txt</a>  </td>
  <td>Output from running exiv2 -pa DwC2.jpg # DwC2.jpg = DwC-SampleImage.jpg</td>
  <td>
      <span class="author">Robin Mills, 09 Dec 2013 22:54</span>
  </td>
  <td>
  </td>
</tr>
<tr>
  <td>
    <a class="icon icon-attachment" href="/attachments/583">DwC.patch</a>    <span class="size">(42.8 KB)</span>
    <a class="icon-only icon-download" title="Download" href="/attachments/download/583/DwC.patch">DwC.patch</a>  </td>
  <td>Patch generated by svn diff on trunk r3209</td>
  <td>
      <span class="author">Robin Mills, 09 Dec 2013 22:54</span>
  </td>
  <td>
  </td>
</tr>
<tr>
  <td>
    <a class="icon icon-attachment" href="/attachments/589">dwc.patch</a>    <span class="size">(51 KB)</span>
    <a class="icon-only icon-download" title="Download" href="/attachments/download/589/dwc.patch">dwc.patch</a>  </td>
  <td></td>
  <td>
      <span class="author">Alan Pater, 21 Dec 2013 14:29</span>
  </td>
  <td>
  </td>
</tr>
<tr>
  <td>
    <a class="icon icon-attachment" href="/attachments/590">xmp.cpp</a>    <span class="size">(29.5 KB)</span>
    <a class="icon-only icon-download" title="Download" href="/attachments/download/590/xmp.cpp">xmp.cpp</a>  </td>
  <td>DwC patched</td>
  <td>
      <span class="author">Alan Pater, 21 Dec 2013 15:52</span>
  </td>
  <td>
  </td>
</tr>
<tr>
  <td>
    <a class="icon icon-attachment" href="/attachments/591">properties.cpp</a>    <span class="size">(258 KB)</span>
    <a class="icon-only icon-download" title="Download" href="/attachments/download/591/properties.cpp">properties.cpp</a>  </td>
  <td>DwC patched</td>
  <td>
      <span class="author">Alan Pater, 21 Dec 2013 15:52</span>
  </td>
  <td>
  </td>
</tr>
<tr>
  <td>
    <a class="icon icon-attachment" href="/attachments/592">dwc.patch</a>    <span class="size">(67.9 KB)</span>
    <a class="icon-only icon-download" title="Download" href="/attachments/download/592/dwc.patch">dwc.patch</a>  </td>
  <td>Formatting fixes &amp; removed duplicate tags</td>
  <td>
      <span class="author">Alan Pater, 26 Dec 2013 15:23</span>
  </td>
  <td>
  </td>
</tr>
<tr>
  <td>
    <a class="icon icon-attachment" href="/attachments/598">dwc.patch</a>    <span class="size">(72.9 KB)</span>
    <a class="icon-only icon-download" title="Download" href="/attachments/download/598/dwc.patch">dwc.patch</a>  </td>
  <td>DwC patch version 2014.01.20</td>
  <td>
      <span class="author">Alan Pater, 24 Jan 2014 11:50</span>
  </td>
  <td>
  </td>
</tr>
<tr>
  <td>
    <a class="icon icon-attachment" href="/attachments/599">exiv2.dc.dwc.i18n.txt</a>    <span class="size">(10.1 KB)</span>
    <a class="icon-only icon-download" title="Download" href="/attachments/download/599/exiv2.dc.dwc.i18n.txt">exiv2.dc.dwc.i18n.txt</a>  </td>
  <td>text file with commands to add DwC XMP properties</td>
  <td>
      <span class="author">Alan Pater, 24 Jan 2014 11:50</span>
  </td>
  <td>
  </td>
</tr>
<tr>
  <td>
    <a class="icon icon-attachment" href="/attachments/600">exiv2.dc.dwc.i18n.jpg</a>    <span class="size">(24.7 KB)</span>
    <a class="icon-only icon-download" title="Download" href="/attachments/download/600/exiv2.dc.dwc.i18n.jpg">exiv2.dc.dwc.i18n.jpg</a>  </td>
  <td>sample imae with DwC fields added</td>
  <td>
      <span class="author">Alan Pater, 24 Jan 2014 11:50</span>
  </td>
  <td>
  </td>
</tr>
<tr>
  <td>
    <a class="icon icon-attachment" href="/attachments/617">dwc.2014.06.25.patch</a>    <span class="size">(129 KB)</span>
    <a class="icon-only icon-download" title="Download" href="/attachments/download/617/dwc.2014.06.25.patch">dwc.2014.06.25.patch</a>  </td>
  <td>patch on current trunk</td>
  <td>
      <span class="author">Alan Pater, 25 Jun 2014 21:36</span>
  </td>
  <td>
  </td>
</tr>
<tr>
  <td>
    <a class="icon icon-attachment" href="/attachments/618">blank.test.jpg</a>    <span class="size">(13.8 KB)</span>
    <a class="icon-only icon-download" title="Download" href="/attachments/download/618/blank.test.jpg">blank.test.jpg</a>  </td>
  <td>test image without metadata</td>
  <td>
      <span class="author">Alan Pater, 25 Jun 2014 21:36</span>
  </td>
  <td>
  </td>
</tr>
</table>
</div>







<hr />
<div id="relations">
<div class="contextual">
</div>

<p><strong>Related issues</strong></p>

<form data-cm-url="/issues/context_menu" action="/issues/937" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><input type="hidden" name="authenticity_token" value="rVsy7fMQDBUssfqufaHL1Ho0CFcXR2i2nEUnAvlAO+JPFpkCgWrAFXnV5aLCdsfnRaZcLuakyQxhZbeKunncjQ==" />
  <table class="list issues odd-even"><tr id="relation-101" class="issue hascontextmenu issue tracker-2 status-5 priority-4 priority-default closed"><td class="checkbox"><input type="checkbox" name="ids[]" value="941" /></td><td class="subject" style="width: 50%">Related to Exiv2 - <a class="issue tracker-2 status-5 priority-4 priority-default closed" href="/issues/941">Feature #941</a>: Upgrade xmpsdk source to Adobe&#39;s current version</td><td class="status">Closed</td><td class="start_date">27 Dec 2013</td><td class="due_date"></td><td class="done_ratio"><table class="progress progress-100"><tr><td style="width: 100%;" class="closed" title="100%"></td></tr></table><p class="percent"></p></td><td class="buttons"><a title="Actions" class="icon-only icon-actions js-contextmenu" href="#">Actions</a></td></tr></table>
</form>
<form class="new_relation" id="new-relation-form" style="display: none;" action="/issues/937/relations" accept-charset="UTF-8" data-remote="true" method="post"><input name="utf8" type="hidden" value="&#x2713;" />


<p><select onchange="setPredecessorFieldsVisibility();" name="relation[relation_type]" id="relation_relation_type"><option selected="selected" value="relates">Related to</option>
<option value="duplicates">Is duplicate of</option>
<option value="duplicated">Has duplicate</option>
<option value="blocks">Blocks</option>
<option value="blocked">Blocked by</option>
<option value="precedes">Precedes</option>
<option value="follows">Follows</option>
<option value="copied_to">Copied to</option>
<option value="copied_from">Copied from</option></select>
Issue #<input size="10" type="text" name="relation[issue_to_id]" id="relation_issue_to_id" />
<span id="predecessor_fields" style="display:none;">
Delay: <input size="3" type="text" name="relation[delay]" id="relation_delay" /> days
</span>
<input type="submit" name="commit" value="Add" data-disable-with="Add" />
<a href="#" onclick="$(&quot;#new-relation-form&quot;).hide();; return false;">Cancel</a>
</p>

<script>
//<![CDATA[
observeAutocompleteField('relation_issue_to_id', '/issues/auto_complete?issue_id=937&project_id=exiv2&scope=all')
//]]>
</script>

<script>
//<![CDATA[
setPredecessorFieldsVisibility();
//]]>
</script>

</form>
</div>

</div>

<div id="issue-changesets">
<h3>Associated revisions</h3>
    <div class="changeset">
    <p><a title="Revision 3212" href="/projects/exiv2/repository/exiv2/revisions/3212">Revision 3212</a>
        (<a href="/projects/exiv2/repository/exiv2/revisions/3212/diff">diff</a>)
        <br />
        <span class="author">Added by <a class="user active" href="/users/119">Robin Mills</a> <a title="23 Dec 2013 14:58" href="/projects/exiv2/activity?from=2013-12-23">almost 8 years</a> ago</span></p>
    <div class="wiki changeset-comments">
        <p>Issue: <a class="issue tracker-2 status-5 priority-4 priority-default closed" title="Feature: Support Darwin Core (DwC) XMP metadata (Closed)" href="/issues/937">#937</a>.  Thanks to Alan and Jim for raising the issue.  Thanks to Alan for the patch and test file.</p>
    </div>
    </div>
    <div class="changeset">
    <p><a title="Revision 3266" href="/projects/exiv2/repository/exiv2/revisions/3266">Revision 3266</a>
        (<a href="/projects/exiv2/repository/exiv2/revisions/3266/diff">diff</a>)
        <br />
        <span class="author">Added by <a class="user active" href="/users/119">Robin Mills</a> <a title="25 Jun 2014 18:04" href="/projects/exiv2/activity?from=2014-06-25">over 7 years</a> ago</span></p>
    <div class="wiki changeset-comments">
        <p>See <a class="issue tracker-2 status-5 priority-4 priority-default closed" title="Feature: Support Darwin Core (DwC) XMP metadata (Closed)" href="/issues/937">#937</a> (DwC Darwin Core Support).</p>
    </div>
    </div>
    <div class="changeset">
    <p><a title="Revision 3267" href="/projects/exiv2/repository/exiv2/revisions/3267">Revision 3267</a>
        (<a href="/projects/exiv2/repository/exiv2/revisions/3267/diff">diff</a>)
        <br />
        <span class="author">Added by <a class="user active" href="/users/119">Robin Mills</a> <a title="26 Jun 2014 02:34" href="/projects/exiv2/activity?from=2014-06-26">over 7 years</a> ago</span></p>
    <div class="wiki changeset-comments">
        <p><a class="issue tracker-2 status-5 priority-4 priority-default closed" title="Feature: Support Darwin Core (DwC) XMP metadata (Closed)" href="/issues/937">#937</a>.  Thanks to Alan for the patch code and data file.</p>
    </div>
    </div>
    <div class="changeset">
    <p><a title="Revision 3658" href="/projects/exiv2/repository/exiv2/revisions/3658">Revision 3658</a>
        (<a href="/projects/exiv2/repository/exiv2/revisions/3658/diff">diff</a>)
        <br />
        <span class="author">Added by <a class="user active" href="/users/4035">Alan Pater</a> <a title="04 Apr 2015 17:23" href="/projects/exiv2/activity?from=2015-04-04">over 6 years</a> ago</span></p>
    <div class="wiki changeset-comments">
        <p><a class="issue tracker-2 status-5 priority-4 priority-default closed" title="Feature: Support Darwin Core (DwC) XMP metadata (Closed)" href="/issues/937">#937</a> Darwin Core 2015-03-19 schema update, plus doc template for same</p>
    </div>
    </div>

</div>



<div id="history">
<h3>History</h3>
  <div id="change-2662" class="journal has-notes has-details">
    <div id="note-1">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-1" class="journal-link">#1</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4035">Alan Pater</a> <a title="08 Dec 2013 23:04" href="/projects/exiv2/activity?from=2013-12-08">almost 8 years</a> ago
      <span id="journal-2662-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>File</strong> <a href="/attachments/580">DwCproperties.cpp</a> <a class="icon-only icon-download" title="Download" href="/attachments/download/580/DwCproperties.cpp">DwCproperties.cpp</a> added</li>
       <li><strong>File</strong> <a href="/attachments/581">DwC-SampleImage.jpg</a> <a class="icon-only icon-download" title="Download" href="/attachments/download/581/DwC-SampleImage.jpg">DwC-SampleImage.jpg</a> added</li>
    </ul>
    <div id="journal-2662-notes" class="wiki"><p>I slapped together DwCproperties.cpp but it is likely missing some important details, specifically I am unclear on how things like xmpText, xmpExternal, "Integer", signedLong, and xmpInternal are determined.</p>


	<p>I've also attached a sample image with DwC metadata.</p></div>
    </div>
  </div>
  
  <div id="change-2663" class="journal has-notes has-details">
    <div id="note-2">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-2" class="journal-link">#2</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/133">Robin Mills</a> <a title="09 Dec 2013 22:54" href="/projects/exiv2/activity?from=2013-12-09">almost 8 years</a> ago
      <span id="journal-2663-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>File</strong> <a href="/attachments/582">DwC2.txt</a> <a class="icon-only icon-download" title="Download" href="/attachments/download/582/DwC2.txt">DwC2.txt</a> added</li>
       <li><strong>File</strong> <a href="/attachments/583">DwC.patch</a> <a class="icon-only icon-download" title="Download" href="/attachments/download/583/DwC.patch">DwC.patch</a> added</li>
    </ul>
    <div id="journal-2663-notes" class="wiki"><p>Guys</p>


	<p>I have a confession to make.  I didn't write Exiv2 and don't exactly know how it works.  I have to read the code to figure it out (or hope Andreas will help if/when I'm in trouble).  I suspect xmpText (and cohorts) relate to the XMP specification which I have not read.  However, I have no fear of the unknown and push on with enthusiastic uncertainty and use the time honored software development approach of adding code, then finding out if it's wrong!</p>


	<p>I have positive progress to report.  I grafted your code into properties.cpp, built and ran exiv2 against your sample image.  Good News.  It's producing impressive output:</p>


<pre>
566 rmills@rmills-mbp:~/gnu/exiv2/trunk $ bin/.libs/exiv2 -pa DwC2.jpg 2&gt; /dev/null | grep dwc | wc
    173    1015   14841
567 rmills@rmills-mbp:~/gnu/exiv2/trunk $ bin/.libs/exiv2 -pa DwC2.jpg 2&gt; /dev/null | grep dwc 
Xmp.dwc.Record                               XmpText     0  type="Struct" 
Xmp.dwc.Record/dwc:institutionID             XmpText    25  Charles Darwin Foundation
Xmp.dwc.Record/dwc:collectionID              XmpText    29  urn:lsid:biocol.org:col:34818
Xmp.dwc.Record/dwc:institutionCode           XmpText     3  CDS
Xmp.dwc.Record/dwc:datasetID                 XmpText     3  MVZ
Xmp.dwc.Record/dwc:collectionCode            XmpText     7  Mammals
Xmp.dwc.Record/dwc:datasetName               XmpText    25  Grinnell Resurvey Mammals
Xmp.dwc.Record/dwc:ownerInstitutionCode      XmpText     3  NPS
...
Xmp.dwc.MeasurementOrFact/dwc:measurementDeterminedDate XmpText    25  2013-01-27T00:00:00-06:00
Xmp.dwc.MeasurementOrFact/dwc:measurementDeterminedBy XmpText    18  Javier de la Torre
</pre><br />I assume Grinnell Resurvey Mammals is something to do with Mr Grinnell of Grinnell Glacier, Montana.  I've been there (photo below).

	<p>I attach a couple of files:<br />1) The output of exiv2 -pa DwC2.jpg (I shorted the filename from DwC-SampleImage.jpg<br />2) A Patch (which you can apply to the current trunk <a class="changeset" title="Update camera and lens lists to match ExifTool version 9.43." href="/projects/exiv2/repository/exiv2/revisions/3209">r3209</a>)</p>


	<p>I've run our test suite (on the Mac) and it passes.  We released 0.24 last week - so this will probably be the first submission for 0.25.  The patch can be applied to the 0.24 release.  As this is a graft to existing code, there are no build changes and I expect this will run on all supported platforms and build environments.</p>


	<p>Your code had formatting difficulties with "" (consecutive double-quotes.).  I suspect your code was machine generated from Perl and isn't valid C++.  I've fixed it to compile.  Perhaps you can review, repair my changes and attach your version of the patch.  I'll be happy to submit your version to the trunk provided it compiles and passes the test suite.  I will also update the test suite with your test image to guarantee DwC support going forward.</p>


	<p>Robin<br /><img src="http://clanmills.com/files/Grinnell.jpg" alt="" /></p></div>
    </div>
  </div>
  
  <div id="change-2664" class="journal has-details">
    <div id="note-3">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-3" class="journal-link">#3</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="09 Dec 2013 23:14" href="/projects/exiv2/activity?from=2013-12-09">almost 8 years</a> ago
      <span id="journal-2664-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>New</i> to <i>Assigned</i></li>
       <li><strong>Assignee</strong> set to <i>Robin Mills</i></li>
       <li><strong>Target version</strong> set to <i>0.25</i></li>
       <li><strong>% Done</strong> changed from <i>0</i> to <i>50</i></li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-2665" class="journal has-notes">
    <div id="note-4">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-4" class="journal-link">#4</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4035">Alan Pater</a> <a title="10 Dec 2013 15:58" href="/projects/exiv2/activity?from=2013-12-10">almost 8 years</a> ago
      <span id="journal-2665-private_notes" class=""></span>
    </h4>

    <div id="journal-2665-notes" class="wiki"><p>Very cool, thanks a bunch Robin. I'm downloading the trunk and the patch as we speak and will try to figure out where to go from here. My coding skills are pretty basic ...</p>


	<p>Just as a note, I ran an older version of exiv2 tool on the DwC image and, as a comparison, exiftool. exiv2 appears to be outputting the raw XMP data.</p>


<pre>
asp@devel:~$ exiv2 -pa DwC-SampleImage.jpg | grep Grinnel
Warning: Unsupported time format

Xmp.dwc.Event/dwc:fieldNotes                 XmpText    42  notes available in Grinnell-Miller Library
Xmp.dwc.Record/dwc:datasetName               XmpText    25  Grinnell Resurvey Mammals

asp@devel:~$ exiftool DwC-SampleImage.jpg | grep Grinnel

Event Field Notes               : notes available in Grinnell-Miller Library
Record Dataset Name             : Grinnell Resurvey Mammals

</pre></div>
    </div>
  </div>
  
  <div id="change-2666" class="journal has-notes">
    <div id="note-5">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-5" class="journal-link">#5</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/133">Robin Mills</a> <a title="10 Dec 2013 16:44" href="/projects/exiv2/activity?from=2013-12-10">almost 8 years</a> ago
      <span id="journal-2666-private_notes" class=""></span>
    </h4>

    <div id="journal-2666-notes" class="wiki"><p>Hold your guns there, buster.</p>


	<p>I don't believe your code is achieving anything.  When I saw all the dwc output, I assumed it came from your code.  I've just done a rebuild of the trunk (without your code).  The output is the same with/without your code!</p>


	<p>Which begs two obvious questions:<br />1) Is the current output from Exiv2 sufficient for your purposes?<br />2) what is your code intended to achieve?</p>


	<p>As far as fixing the "" (double quotes).  In C++, a string is ".........".  If you want to embed a double quote, you say \" within the string.  For example "I am a \"Rockstar"\ you know".  Some of your strings are a mostly incompressible mix of " comma space (e.g. line#168).  Perhaps you know the intended string.</p>


	<p>Robin</p></div>
    </div>
  </div>
  
  <div id="change-2667" class="journal has-notes">
    <div id="note-6">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-6" class="journal-link">#6</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4035">Alan Pater</a> <a title="10 Dec 2013 16:53" href="/projects/exiv2/activity?from=2013-12-10">almost 8 years</a> ago
      <span id="journal-2667-private_notes" class=""></span>
    </h4>

    <div id="journal-2667-notes" class="wiki"><p>Looks that way, doesn't it? Sorry for the bad attempt, I have a lot to learn about this stuff!</p>


	<p>I see that exiv2 is capable of displaying raw XMP data, even if it is not cognizant of the underlying schema. What I am hoping for is that we can get it capable of fully understanding the schema and therefor being able to write and edit DwC fields.</p>


	<p>I also don't have a good understanding of how exiv2 works. Are there other functions that take care of editing metadata fields and of displaying those fields in a pretty manner?</p></div>
    </div>
  </div>
  
  <div id="change-2668" class="journal has-notes">
    <div id="note-7">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-7" class="journal-link">#7</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/133">Robin Mills</a> <a title="10 Dec 2013 16:57" href="/projects/exiv2/activity?from=2013-12-10">almost 8 years</a> ago
      <span id="journal-2668-private_notes" class=""></span>
    </h4>

    <div id="journal-2668-notes" class="wiki"><p>Let me read the code relating to this after work and see what's going on.  I'll get back to you.</p>


	<p>Robin</p></div>
    </div>
  </div>
  
  <div id="change-2669" class="journal has-notes">
    <div id="note-8">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-8" class="journal-link">#8</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/133">Robin Mills</a> <a title="10 Dec 2013 20:42" href="/projects/exiv2/activity?from=2013-12-10">almost 8 years</a> ago
      <span id="journal-2669-private_notes" class=""></span>
    </h4>

    <div id="journal-2669-notes" class="wiki"><p>Guys</p>


	<p>I'm going to have to ask Andreas for help with this.</p>


	<p>Andreas:<br />Do you know how the Xmp and properties get connected?  We can list the "raw" XMP data, however I can't change it.<br /><pre>
753 rmills@rmills-mbp:~/gnu/exiv2/gsoc13 $ exiv2 -pa DwC2.jpg | grep -i missing
Warning: Unsupported time format
Xmp.dwc.MeasurementOrFact/dwc:measurementRemarks XmpText    19  tip of tail missing
754 rmills@rmills-mbp:~/gnu/exiv2/gsoc13 $ exiv2 -M"set Xmp.dwc.MearsurementOrFact/dwc:meansurementRemarks xmpText Missing" DwC2.jpg 
-M option 1: Invalid key `Xmp.dwc.MearsurementOrFact/dwc:meansurementRemarks'
exiv2: Error parsing -M option arguments
Usage: exiv2 [ options ] [ action ] file ...

Manipulate the Exif metadata of images.
755 rmills@rmills-mbp:~/gnu/exiv2/gsoc13 $ 
</pre></p>


	<p>The code that Jim and Alan have provided seems to set up the correct mapping.  I've got their code to build, however it has no effect.  Can you help us, please?</p>


	<p>_<em><i></em></i>__<em>_</em>___________________________________________<br />Guys</p>


	<p>Just, so you don't think that I am lazy, I have spend a couple of hours in the debugger without making progress.  So I turned to a different tool.  In our gsoc13 branch, we have a new feature for 0.25 which enables dumping the structure of a JPG.  Currently, this is exercised from samples/exifprint.<br /><pre>
733 rmills@rmills-mbp:~/gnu/exiv2/gsoc13 $ bin/exifprint --struc DwC2.jpg
STRUCTURE OF FILE:
  offset | marker     | size | signature
       2   0xd8 SOI          
       4   0xe0 APP0      16   JFIF.....`.`..
      22   0xe1 APP1    2015   Exif..II*...............b.....
    2039   0xe1 APP1   15936   http://ns.adobe.com/xap/1.0/.&lt;
   17977   0xed APP13   3164   Photoshop 3.0.8BIM..........7.
   21143   0xee APP14     14   Adobe.d.....
   21159   0xdb DQT      132   
   21293   0xc0 SOF0      17   
   21312   0xdd DRI        4   
   21318   0xc4 DHT      418   
   21738   0xda SOS       12   
-----------------
</pre><br />We can then take the numbers for the position of the APP1 xap block, extract it - and push it through xmllint<br /><pre>
734 rmills@rmills-mbp:~/gnu/exiv2/gsoc13 $ dd skip=$((2039+32-1)) bs=1 count=$((17977-33-2039)) if=DwC2.jpg 2&gt;/dev/null | head -2 | tail -1 | xmllint --format 2 - 2&gt;/dev/null
&lt;?xml version="1.0"?&gt;
&lt;x:xmpmeta xmlns:x="adobe:ns:meta/" x:xmptk="Toolkit=IDimager;Version=2.4.0.9;"&gt;
  &lt;rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"&gt;
    .....
      &lt;dwc:MeasurementOrFact&gt;
        &lt;rdf:Description xmlns:dwc="http://rs.tdwg.org/dwc/index.htm" rdf:about=""&gt;
          &lt;dwc:measurementID&gt;1234&lt;/dwc:measurementID&gt;
          &lt;dwc:measurementType&gt;tail length&lt;/dwc:measurementType&gt;
          &lt;dwc:measurementValue&gt;45&lt;/dwc:measurementValue&gt;
          &lt;dwc:measurementAccuracy&gt;0.01&lt;/dwc:measurementAccuracy&gt;
          &lt;dwc:measurementUnit&gt;mm&lt;/dwc:measurementUnit&gt;
          &lt;dwc:measurementDeterminedDate&gt;2013-01-27T00:00:00-06:00&lt;/dwc:measurementDeterminedDate&gt;
          &lt;dwc:measurementDeterminedBy&gt;Javier de la Torre&lt;/dwc:measurementDeterminedBy&gt;
          &lt;dwc:measurementMethod&gt;barometric altimeter&lt;/dwc:measurementMethod&gt;
          &lt;dwc:measurementRemarks&gt;tip of tail missing&lt;/dwc:measurementRemarks&gt;
        &lt;/rdf:Description&gt;
      &lt;/dwc:MeasurementOrFact&gt;
    &lt;/rdf:Description&gt;
    &lt;rdf:Description xmlns:MicrosoftPhoto="http://ns.microsoft.com/photo/1.0" rdf:about="" MicrosoftPhoto:Rating="75"/&gt;
  &lt;/rdf:RDF&gt;
&lt;/x:xmpmeta&gt;
</pre><br />I don't know that this is useful, however it's fun.  If the xap block is rewritten externally, the JPG can be reassembled using dd.  I discussed this a few months ago on a thread in connection with IPTC data.  <a class="external" href="http://dev.exiv2.org/boards/3/topics/1608">http://dev.exiv2.org/boards/3/topics/1608</a></p>


	<p>Robin</p></div>
    </div>
  </div>
  
  <div id="change-2670" class="journal has-details">
    <div id="note-9">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-9" class="journal-link">#9</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="10 Dec 2013 20:43" href="/projects/exiv2/activity?from=2013-12-10">almost 8 years</a> ago
      <span id="journal-2670-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Assignee</strong> changed from <i>Robin Mills</i> to <i>Andreas Huggel</i></li>
       <li><strong>% Done</strong> changed from <i>50</i> to <i>30</i></li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-2683" class="journal has-notes has-details">
    <div id="note-10">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-10" class="journal-link">#10</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4035">Alan Pater</a> <a title="21 Dec 2013 14:29" href="/projects/exiv2/activity?from=2013-12-21">almost 8 years</a> ago
      <span id="journal-2683-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>File</strong> <a href="/attachments/589">dwc.patch</a> <a class="icon-only icon-download" title="Download" href="/attachments/download/589/dwc.patch">dwc.patch</a> added</li>
    </ul>
    <div id="journal-2683-notes" class="wiki"><p>Hi folks</p>


	<p>I finally found some time to dig in and try to create a valid patch. I've cleaned up the formatting a bit, hopefully it is an improvement and not as ugly as the previous version.</p>


	<p>Unfortunately, I have not been able to compile the result, my poor computer seems to be dying. I'll give it a try again later and see how it goes.</p>


	<p>Apart from cleaning up the formatting on the list of DwC properties, I've added a line to xmp.cpp:<br />    SXMPMeta::RegisterNamespace("http://rs.tdwg.org/dwc/terms/", "dwc");</p>


	<p>Hopefully that will be help to get things working.</p></div>
    </div>
  </div>
  
  <div id="change-2684" class="journal has-notes">
    <div id="note-11">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-11" class="journal-link">#11</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="21 Dec 2013 14:44" href="/projects/exiv2/activity?from=2013-12-21">almost 8 years</a> ago
      <span id="journal-2684-private_notes" class=""></span>
    </h4>

    <div id="journal-2684-notes" class="wiki"><p>This isn't my lucky days for patches using SmartSVN.  It won't accept your patch - and it wouldn't accept one yesterday from another user.  Grrrrr software.   I've replaced all trunk.dwc with trunk in the file, without success.</p>


	<p>Did you create this with the command svn diff > foo.patch ?</p>


	<p>Robin</p></div>
    </div>
  </div>
  
  <div id="change-2685" class="journal has-details">
    <div id="note-12">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-12" class="journal-link">#12</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="21 Dec 2013 14:44" href="/projects/exiv2/activity?from=2013-12-21">almost 8 years</a> ago
      <span id="journal-2685-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Assignee</strong> changed from <i>Andreas Huggel</i> to <i>Robin Mills</i></li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-2686" class="journal has-notes">
    <div id="note-13">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-13" class="journal-link">#13</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4035">Alan Pater</a> <a title="21 Dec 2013 15:03" href="/projects/exiv2/activity?from=2013-12-21">almost 8 years</a> ago
      <span id="journal-2686-private_notes" class=""></span>
    </h4>

    <div id="journal-2686-notes" class="wiki"><p>Robin, yes, I used svn diff, but I am brand new to svn so I likely messed something up. I may not have setup or are using svn correctly.</p></div>
    </div>
  </div>
  
  <div id="change-2687" class="journal has-notes">
    <div id="note-14">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-14" class="journal-link">#14</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="21 Dec 2013 15:20" href="/projects/exiv2/activity?from=2013-12-21">almost 8 years</a> ago
      <span id="journal-2687-private_notes" class=""></span>
    </h4>

    <div id="journal-2687-notes" class="wiki"><p>Thanks.  I'll get it to work.  I'll deal with this tomorrow.  We're off to dinner at friends in San Francisco this evening.</p>


	<p>Robin</p></div>
    </div>
  </div>
  
  <div id="change-2688" class="journal has-notes">
    <div id="note-15">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-15" class="journal-link">#15</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="21 Dec 2013 15:23" href="/projects/exiv2/activity?from=2013-12-21">almost 8 years</a> ago
      <span id="journal-2688-private_notes" class=""></span>
    </h4>

    <div id="journal-2688-notes" class="wiki"><p>Hey, you've only changed a couple of files.  Can you send me them and we'll be done in a few minutes.</p>


	<p>xmp.cpp and properties.cpp</p>


	<p>Robin<pre>599 rmills@rmills-mbp:~/gnu/exiv2/trunk $ grep trunk dwc2.patch 
Index: trunk/src/xmp.cpp
--- trunk/src/xmp.cpp    (revision 3211)
+++ trunk/src/xmp.cpp    (working copy)
Index: trunk/src/properties.cpp
--- trunk/src/properties.cpp    (revision 3211)
+++ trunk/src/properties.cpp    (working copy)
600 rmills@rmills-mbp:~/gnu/exiv2/trunk $ </pre></p></div>
    </div>
  </div>
  
  <div id="change-2689" class="journal has-notes has-details">
    <div id="note-16">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-16" class="journal-link">#16</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4035">Alan Pater</a> <a title="21 Dec 2013 15:52" href="/projects/exiv2/activity?from=2013-12-21">almost 8 years</a> ago
      <span id="journal-2689-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>File</strong> <a href="/attachments/590">xmp.cpp</a> <a class="icon-only icon-download" title="Download" href="/attachments/download/590/xmp.cpp">xmp.cpp</a> added</li>
       <li><strong>File</strong> <a href="/attachments/591">properties.cpp</a> <a class="icon-only icon-download" title="Download" href="/attachments/download/591/properties.cpp">properties.cpp</a> added</li>
    </ul>
    <div id="journal-2689-notes" class="wiki"><p>Here you go :-)</p></div>
    </div>
  </div>
  
  <div id="change-2690" class="journal has-notes">
    <div id="note-17">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-17" class="journal-link">#17</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4035">Alan Pater</a> <a title="22 Dec 2013 09:54" href="/projects/exiv2/activity?from=2013-12-22">almost 8 years</a> ago
      <span id="journal-2690-private_notes" class=""></span>
    </h4>

    <div id="journal-2690-notes" class="wiki"><p>Well, I convinced my poor computer to build the package, and it seems to be able to modify DwC fields. However, output still appears to be in a raw XMP format:<br /><pre>
~$ exiv2 -px dwc.jpg | grep Count
Xmp.dwc.Occurrence/dwc:individualCount       XmpText     1  1</pre>While I would expect something like:<br /><pre>Xmp.DwC.IndividualCount       XmpText     1  1</pre>On the other hand, it looks like I can modify the contents of this field<br /><pre>~$ exiv2 -M"add Xmp.dwc.Occurrence/dwc:individualCount XmpText 3" dwc.jpg
~$ exiv2 -px dwc.jpg | grep Count
Xmp.dwc.Occurrence/dwc:individualCount       XmpText     1  3</pre>So that part is working, without my patch the result of that command is<pre>-M option 1: Invalid key `Xmp.dwc.Occurrence/dwc:individualCount'</pre>So I have a bit more work to do to figure out how to display DwC tags nicely.</p></div>
    </div>
  </div>
  
  <div id="change-2691" class="journal has-notes">
    <div id="note-18">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-18" class="journal-link">#18</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="23 Dec 2013 15:03" href="/projects/exiv2/activity?from=2013-12-23">almost 8 years</a> ago
      <span id="journal-2691-private_notes" class=""></span>
    </h4>

    <div id="journal-2691-notes" class="wiki"><p>Thanks, Alan.  I've submitted your code and extended test/bugfixes-test.sh to use your test file. <a class="changeset" title="Issue: #937.  Thanks to Alan and Jim for raising the issue.  Thanks to Alan for the patch and tes..." href="/projects/exiv2/repository/exiv2/revisions/3212">r3212</a>.  It's clear that although we're making progress, we're not done here.  However it's better than before, so it's worth submitting.  I expect we'll be talking more about this in 2014.  Maybe Andreas will have a little time during the holidays to really fix this for us.</p>


	<p>Anyway.  Ho Ho Ho.  Happy Holidays.</p>


	<p>Robin</p></div>
    </div>
  </div>
  
  <div id="change-2692" class="journal has-notes has-details">
    <div id="note-19">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-19" class="journal-link">#19</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4035">Alan Pater</a> <a title="26 Dec 2013 15:23" href="/projects/exiv2/activity?from=2013-12-26">almost 8 years</a> ago
      <span id="journal-2692-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>File</strong> <a href="/attachments/592">dwc.patch</a> <a class="icon-only icon-download" title="Download" href="/attachments/download/592/dwc.patch">dwc.patch</a> added</li>
    </ul>
    <div id="journal-2692-notes" class="wiki"><p>This version cleans up the formatting, removes duplicate tags and adds some doc files.</p>


	<p>I tested it on a wider (but still limited) range of fields and did not see any errors.</p>


	<p>However, it still does not display things nicely compared to other XMP namespaces.<br /><pre>
~$ exiv2 -PXkyctl DwC-SampleImage.jpg | grep Date
Xmp.xmp.CreateDate                           Create Date                    XmpText    24  2008-03-14T20:59:26.535Z
Xmp.xmp.MetadataDate                         Metadata Date                  XmpText    29  2013-02-07T21:56:33.820-06:00
Xmp.xmp.ModifyDate                           Modify Date                    XmpText    25  2013-01-27T14:02:29-06:00
Xmp.dwc.Event/dwc:earliestDate               Event/dwc:earliestDate         XmpText    25  2012-09-03T00:00:00-06:00
Xmp.dwc.Event/dwc:latestDate                 Event/dwc:latestDate           XmpText    25  2013-01-27T00:00:00-06:00
Xmp.dwc.Event/dwc:verbatimEventDate          Event/dwc:verbatimEventDate    XmpText    11  spring 1910
</pre>Might it have something to do with the fact that the DwC namespace involves nested tags? Would I have to something special to accommodate that structure?</p></div>
    </div>
  </div>
  
  <div id="change-2693" class="journal has-notes">
    <div id="note-20">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-20" class="journal-link">#20</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="26 Dec 2013 21:45" href="/projects/exiv2/activity?from=2013-12-26">almost 8 years</a> ago
      <span id="journal-2693-private_notes" class=""></span>
    </h4>

    <div id="journal-2693-notes" class="wiki"><p>Thanks very much, Alan.  I have submitted <a class="changeset" title="Issue: 937.  Thanks to Alan for the patch." href="/projects/exiv2/repository/exiv2/revisions/3213">r3213</a>.  I reverted the changes to xmp.cpp and properties.cpp in <a class="changeset" title="Issue: #937.  Thanks to Alan and Jim for raising the issue.  Thanks to Alan for the patch and tes..." href="/projects/exiv2/repository/exiv2/revisions/3212">r3212</a> and applied your patch.  I also added a variant of your command to the test suite (test/bug-fixes.sh 937).<pre>
560 rmills@rmills-mbp:~/gnu/exiv2/trunk $ exiv2 -q -PXkyctl -g Date test/data/exiv2-bug937.jpg 
Xmp.exif.DateTimeDigitized                   Date and Time Digitized        XmpText    29  2008-03-14T11:31:48.098-07:00
Xmp.exif.DateTimeOriginal                    Date and Time Original         XmpText    25  2008-03-14T13:59:26-06:00
Xmp.photoshop.DateCreated                    Date Created                   XmpText    29  2008-03-14T13:59:26.054-06:00
Xmp.xmp.MetadataDate                         Metadata Date                  XmpText    29  2013-02-07T21:56:33.820-06:00
Xmp.xmp.CreateDate                           Create Date                    XmpText    24  2008-03-14T20:59:26.535Z
Xmp.xmp.ModifyDate                           Modify Date                    XmpText    25  2013-01-27T14:02:29-06:00
Xmp.dwc.Event/dwc:earliestDate               Event/dwc:earliestDate         XmpText    25  2012-09-03T00:00:00-06:00
Xmp.dwc.Event/dwc:latestDate                 Event/dwc:latestDate           XmpText    25  2013-01-27T00:00:00-06:00
Xmp.dwc.Event/dwc:verbatimEventDate          Event/dwc:verbatimEventDate    XmpText    11  spring 1910
Xmp.dwc.ResourceRelationship/dwc:relationshipEstablishedDate ResourceRelationship/dwc:relationshipEstablishedDate XmpText    25  2013-01-27T00:00:00-06:00
Xmp.dwc.MeasurementOrFact/dwc:measurementDeterminedDate MeasurementOrFact/dwc:measurementDeterminedDate XmpText    25  2013-01-27T00:00:00-06:00
561 rmills@rmills-mbp:~/gnu/exiv2/trunk $ 
</pre><br />Thanks very much for persevering with this.  I especially appreciate that you updated the documentation.  I don't recall any of our users providing a documentation update.  Thanks.</p>


	<p>Does dwc use "a language within a language" with syntax such as Xmp.dwc.Event/dwc:verbatimEventDate?   Should xmpsdk be handling this, or do we need an extension to xmpsdk to handle dwc?  What do you think?</p>


	<p>Robin</p></div>
    </div>
  </div>
  
  <div id="change-2696" class="journal has-notes">
    <div id="note-21">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-21" class="journal-link">#21</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4035">Alan Pater</a> <a title="27 Dec 2013 04:30" href="/projects/exiv2/activity?from=2013-12-27">almost 8 years</a> ago
      <span id="journal-2696-private_notes" class=""></span>
    </h4>

    <div id="journal-2696-notes" class="wiki"><p>Robin, thank you for keeping on top of my changes.</p>


	<p>I don't think we need to extend the xmpsdk. My reading of the XMP specification (part 1, 6.3.3) indicates that these types of structures are part of the specification. I left out these base structures in my changes, as I don't understand how to implement them and was not sure that they are needed. Then again, if they are part of the DwC namespace, I suppose they need to be implemented. But how?</p>


	<p>It looks to me like DwC has 9 base structures, with the individual tags nested under those: <br /><pre>
Xmp.dwc.Record                               XmpText     0  type="Struct" 
Xmp.dwc.Occurrence                           XmpText     0  type="Struct" 
Xmp.dwc.Event                                XmpText     0  type="Struct" 
Xmp.dwc.dctermsLocation                      XmpText     0  type="Struct" 
Xmp.dwc.GeologicalContext                    XmpText     0  type="Struct" 
Xmp.dwc.Identification                       XmpText     0  type="Struct" 
Xmp.dwc.Taxon                                XmpText     0  type="Struct" 
Xmp.dwc.ResourceRelationship                 XmpText     0  type="Struct" 
Xmp.dwc.MeasurementOrFact                    XmpText     0  type="Struct" 
</pre></p></div>
    </div>
  </div>
  
  <div id="change-2697" class="journal has-notes">
    <div id="note-22">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-22" class="journal-link">#22</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="27 Dec 2013 19:35" href="/projects/exiv2/activity?from=2013-12-27">almost 8 years</a> ago
      <span id="journal-2697-private_notes" class=""></span>
    </h4>

    <div id="journal-2697-notes" class="wiki"><p>Alan</p>


	<p>I'd like to get all of this fixed for you, however the only way I can do that is to study XMP and the xmpsdk.  Would you like to talk 1-to-1 on Skype about this?  Neither of us know how to fix this, however together we might make progress.  And of course I'm having a break this week from work.</p>


	<p>I downloaded the latest version from Adobe today and I can see the code's changed.  Time for us to refresh xmpsdk in our code base.  However that'll have to wait.</p>


	<p>Robin</p></div>
    </div>
  </div>
  
  <div id="change-2701" class="journal has-notes">
    <div id="note-23">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-23" class="journal-link">#23</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4035">Alan Pater</a> <a title="29 Dec 2013 15:59" href="/projects/exiv2/activity?from=2013-12-29">almost 8 years</a> ago
      <span id="journal-2701-private_notes" class=""></span>
    </h4>

    <div id="journal-2701-notes" class="wiki"><p>Yeah, looks like the update to the xmpsdk is a bit overdue: <a class="external" href="http://dev.exiv2.org/issues/742">http://dev.exiv2.org/issues/742</a></p>


	<p>That said, exiv2 does provide for XmpStruct. It just looks like nobody has used it until now, so I don't have an example I can just adapt. I'm not a programmer, so get lost really quickly looking through the source.</p></div>
    </div>
  </div>
  
  <div id="change-2702" class="journal has-notes">
    <div id="note-24">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-24" class="journal-link">#24</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="29 Dec 2013 17:29" href="/projects/exiv2/activity?from=2013-12-29">almost 8 years</a> ago
      <span id="journal-2702-private_notes" class=""></span>
    </h4>

    <div id="journal-2702-notes" class="wiki"><p>Alan</p>


	<p>I have opened another issue <a class="issue tracker-2 status-5 priority-4 priority-default closed" title="Feature: Upgrade xmpsdk source to Adobe&#39;s current version (Closed)" href="/issues/941">#941</a> to update the SDK.  There has been very little discussion about XMP on the forum and issue reports, so it hasn't demanded attention.  I will look at this, however I'm not promising anything.  I don't get lost in code, however it usually takes time to get oriented with something on which I haven't worked.</p>


	<p>Robin</p></div>
    </div>
  </div>
  
  <div id="change-2703" class="journal has-notes">
    <div id="note-25">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-25" class="journal-link">#25</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/53">Andreas Huggel</a> <a title="29 Dec 2013 19:40" href="/projects/exiv2/activity?from=2013-12-29">almost 8 years</a> ago
      <span id="journal-2703-private_notes" class=""></span>
    </h4>

    <div id="journal-2703-notes" class="wiki"><p>Sorry Robin for not responding earlier.</p>


	<p><a class="changeset" title="Added iView Media Pro and MS Expression Media XMP schemas. (Steve Wright)" href="/projects/exiv2/repository/exiv2/revisions/2031">r2031</a> is a minimal example of the changes necessary to add support for a new XMP schema, the related doc was added with <a class="changeset" title="Added HTML doc for new XMP schemas mediapro, expressionmedia and kipi." href="/projects/exiv2/repository/exiv2/revisions/2248">r2248</a> and <a class="changeset" title="Added templates for HTTP doc of new XMP schemas." href="/projects/exiv2/repository/exiv2/revisions/2252">r2252</a>. It's really mostly about making the new namespace known to Exiv2. You should be able to work with a schema that Exiv2 doesn't know just as well, except that you'd have to register the namespace first, there is <a href="http://www.exiv2.org/example5.html" class="external">an example</a> on the homepage which shows how.</p>


	<p>We don't have much support for nested tags, there is no built-in way to make these look better (remove the namespace). In fact, the way we deal with XMP namespaces in general is a bit too simplistic.</p>


	<p>HTH</p></div>
    </div>
  </div>
  
  <div id="change-2706" class="journal has-notes">
    <div id="note-26">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-26" class="journal-link">#26</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4035">Alan Pater</a> <a title="30 Dec 2013 10:27" href="/projects/exiv2/activity?from=2013-12-30">almost 8 years</a> ago
      <span id="journal-2706-private_notes" class=""></span>
    </h4>

    <div id="journal-2706-notes" class="wiki"><p>Hi Andreas</p>


	<p>I looked at those revisions (along with others) to get an idea of what changes would be needed, and it works, write support for DwC XMP fields is working. DwC fields can be set and modified using exiv2, interchangeably with exiftool. I can use either tool to write and modify the field values, and the other tool has no problems with the changes. This is good! So maybe we don't really need nesting?</p>


	<p>Thanks for clarifying that there is no current way to get them looking prettier, Feels good to stop beating my head against the wall!</p>


	<p>I've added the class level fields to my working copy, but without any nesting, so it doesn't really do anything that I can tell. I don't know how to implement that, if it is even possible. Perhaps a real programmer could take a look at the following to see how to nest the terms under the class level?<br /><pre>
   extern const XmpPropertyInfo xmpDwCInfo[] = {

        // Material Sample Level Class
        { "MaterialSample",                 N_("Material Sample"),                         "bag Struct",    xmpBag,   xmpInternal, 
                                            N_("The category of information pertaining to the physical results of a sampling (or subsampling) event. In biological collections, the material sample is typically collected, and either preserved or destructively processed."),
        },
            // Material Sample Level Terms
            { "materialSampleID",               N_("Material Sample ID"),                    "Text",      xmpText,    xmpExternal,      
                                                N_("An identifier for the MaterialSample (as opposed to a particular digital record of the material sample). In the absence of a persistent global unique identifier, construct one from a combination of identifiers in the record that will most closely make the materialSampleID globally unique.")
            },
        // End of list marker

        { 0, 0, 0, invalidTypeId, xmpInternal, 0 }
    };
</pre></p></div>
    </div>
  </div>
  
  <div id="change-2713" class="journal has-notes">
    <div id="note-27">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-27" class="journal-link">#27</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4035">Alan Pater</a> <a title="01 Jan 2014 15:00" href="/projects/exiv2/activity?from=2014-01-01">almost 8 years</a> ago
      <span id="journal-2713-private_notes" class=""></span>
    </h4>

    <div id="journal-2713-notes" class="wiki"><p>I said that it was working interchangeably with exiftool but I take that back after a bit more thought and testing.</p>


	<p>It CAN work interchangeably with exiftool IF one specifies the full nested tag: <strong>Xmp.dwc.dctermsLocation/dwc:verbatimElevation</strong>.</p>


	<p>But not interchangeably if one specifies the flat tag: <strong>Xmp.dwc.verbatimElevation</strong>.</p>


	<p>That is, my patch of exiv2 can write to both tags, but they are separate. Exiftool can only write to full nested tag.</p>


	<p>As exiftool is following the DwC schema, it is correct. My version is incorrect in that it writes to non-nested fields as well.</p></div>
    </div>
  </div>
  
  <div id="change-2714" class="journal has-notes">
    <div id="note-28">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-28" class="journal-link">#28</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/53">Andreas Huggel</a> <a title="01 Jan 2014 16:33" href="/projects/exiv2/activity?from=2014-01-01">almost 8 years</a> ago
      <span id="journal-2714-private_notes" class=""></span>
    </h4>

    <div id="journal-2714-notes" class="wiki"><blockquote>

	<p>My version is incorrect in that it writes to non-nested fields as well.</p>


</blockquote>

	<p>Only if you instruct it to do so, right? Meaning, it doesn't refuse to add an unknown property to the dwc namespace but I presume it doesn't write the flat one at the same time with the nested property by itself? That is how Exiv2 is designed to work in general. It won't restrict you to only known properties and leaves the control to the user. Exiftool may be more restrictive (by default?), but as long as Exiv2 can deal with the correct nested property, the test should be considered passed. On the other hand, if you write a non-standard tag, then it's up to the other software what that wants do with it.</p></div>
    </div>
  </div>
  
  <div id="change-2716" class="journal has-notes">
    <div id="note-29">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-29" class="journal-link">#29</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4035">Alan Pater</a> <a title="02 Jan 2014 08:52" href="/projects/exiv2/activity?from=2014-01-02">almost 8 years</a> ago
      <span id="journal-2716-private_notes" class=""></span>
    </h4>

    <div id="journal-2716-notes" class="wiki"><p>Well, I wouldn't want to upset the DwC schema by ignoring it's chosen hierarchy. ;-)</p>


	<p>But seriously, I'd be a bit nervous about allowing non-nested DwC properties to be written. If exiv2 was the only game in town, that would not be an issue, we could just implement a flat schema and everyone would have to follow. But I feel that we should maintain 100% compatibility with exiftool and any other tools that may come up in the future. If exiv2 can write properties that the others can't, we could be forcing some users to write two tags for each desired property, just to maintain compatibility.</p>


	<p>At the moment, when I view the generated HTML documentation, users can see that flat properties are available. We could hack the documentation to only show the correctly nested properties, but I suspect that someone will discover the non-nested properties in other ways. Those non-nested properties fall outside of the DwC schema, following the schema is the objective, no?</p>


	<p>Or is there a way to completely hide the non-nested properties? Or alias them to nested properties? Seems like that would be extra work compared to implementing a nested structure in the first place.</p></div>
    </div>
  </div>
  
  <div id="change-2724" class="journal has-notes">
    <div id="note-30">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-30" class="journal-link">#30</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4035">Alan Pater</a> <a title="19 Jan 2014 12:14" href="/projects/exiv2/activity?from=2014-01-19">almost 8 years</a> ago
      <span id="journal-2724-private_notes" class=""></span>
    </h4>

    <div id="journal-2724-notes" class="wiki"><p>I am running into a bit of a glitch with some DwC fields. If I write several alt-lang fields in a image, Adobe apps can no longer see the data in simple text fields. To test, I wrote the same fields using both my patched version of exiv2 and exiftool. Adobe apps can see all the data of the image written using exiftool, but only the vernacularName field for the exiv2 version. Extracting the XMP data shows the following difference in how exiftool &#38; exiv2 are writting the fields:<br /><pre>
// DwC written using: exiv2 -m taxon.txt DwC-taxon.jpg

&lt;?xpacket begin="&lt;U+FEFF&gt;" id="W5M0MpCehiHzreSzNTczkc9d"?&gt;
&lt;x:xmpmeta xmlns:x="adobe:ns:meta/" x:xmptk="XMP Core 4.4.0-Exiv2"&gt;
&lt;rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"&gt;

 &lt;rdf:Description rdf:about="" xmlns:dwc="http://rs.tdwg.org/dwc/terms/"&gt;
  &lt;dwc:Taxon&gt;
   &lt;rdf:Description dwc:class="Vertebrata" dwc:family="Felidae" dwc:genus="Puma" dwc:infraspecificEpithet="concolor" dwc:kingdom="Animalia" dwc:order="Mammalia" dwc:phylum="Chordata" dwc:specificEpithet="concolor" dwc:subgenus="Puma" 
   &lt;dwc:vernacularName&gt;
    &lt;rdf:Alt&gt;
     &lt;rdf:li xml:lang='en-US'&gt;Cougar&lt;/rdf:li&gt;
     &lt;rdf:li xml:lang='es-ES'&gt;Puma&lt;/rdf:li&gt;
     &lt;rdf:li xml:lang='fr-FR'&gt;Puma&lt;/rdf:li&gt;
    &lt;/rdf:Alt&gt;
   &lt;/dwc:vernacularName&gt;
   &lt;/rdf:Description&gt;
  &lt;/dwc:Taxon&gt;
 &lt;/rdf:Description&gt;
&lt;/rdf:RDF&gt;
&lt;/x:xmpmeta&gt;
&lt;?xpacket end="w"?&gt;
</pre></p>


<pre>
// DwC written using: exiftool -csv=taxon.csv DwC-taxon.jpg

&lt;?xpacket begin='&lt;U+FEFF&gt;' id='W5M0MpCehiHzreSzNTczkc9d'?&gt;
&lt;x:xmpmeta xmlns:x='adobe:ns:meta/' x:xmptk='Image::ExifTool 9.27'&gt;
&lt;rdf:RDF xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns#'&gt;

 &lt;rdf:Description rdf:about='' xmlns:dwc='http://rs.tdwg.org/dwc/terms/'&gt;
  &lt;dwc:Taxon rdf:parseType='Resource'&gt;
   &lt;dwc:class&gt;Vertebrata&lt;/dwc:class&gt;
   &lt;dwc:family&gt;Felidae&lt;/dwc:family&gt;
   &lt;dwc:genus&gt;Puma&lt;/dwc:genus&gt;
   &lt;dwc:infraspecificEpithet&gt;concolor&lt;/dwc:infraspecificEpithet&gt;
   &lt;dwc:kingdom&gt;Animalia&lt;/dwc:kingdom&gt;
   &lt;dwc:order&gt;Mammalia&lt;/dwc:order&gt;
   &lt;dwc:phylum&gt;Chordata&lt;/dwc:phylum&gt;
   &lt;dwc:specificEpithet&gt;concolor&lt;/dwc:specificEpithet&gt;
   &lt;dwc:subgenus&gt;Puma&lt;/dwc:subgenus&gt;
   &lt;dwc:vernacularName&gt;
    &lt;rdf:Alt&gt;
     &lt;rdf:li xml:lang='en-US'&gt;Cougar&lt;/rdf:li&gt;
     &lt;rdf:li xml:lang='es-ES'&gt;Puma&lt;/rdf:li&gt;
     &lt;rdf:li xml:lang='fr-FR'&gt;Puma&lt;/rdf:li&gt;
    &lt;/rdf:Alt&gt;
   &lt;/dwc:vernacularName&gt;
  &lt;/dwc:Taxon&gt;
 &lt;/rdf:Description&gt;
&lt;/rdf:RDF&gt;
&lt;/x:xmpmeta&gt;
&lt;?xpacket end='w'?&gt;
</pre><br />Do I need to be writing these fields differently? exiv2 is dumping all the text fields into a second &lt;rdf:Description ... /&gt; structure.</div>
    </div>
  </div>
  
  <div id="change-2725" class="journal has-notes">
    <div id="note-31">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-31" class="journal-link">#31</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/3100">Phil Harvey</a> <a title="20 Jan 2014 06:37" href="/projects/exiv2/activity?from=2014-01-20">almost 8 years</a> ago
      <span id="journal-2725-private_notes" class=""></span>
    </h4>

    <div id="journal-2725-notes" class="wiki"><p>Alan Pater wrote:</p>


<blockquote>

	<p>Do I need to be writing these fields differently? exiv2 is dumping all the text fields into a second &lt;rdf:Description ... /&gt; structure.</p>


</blockquote>

	<p>The second description shouldn't be a problem.  ExifTool avoids this with the "rdf:parseType='Resource'" attribute, but this isn't the only way to do it.</p>


	<p>The problem seems to be that the Exiv2 has only written the vernacularName, and nothing else.</p>


	<p>- Phil</p></div>
    </div>
  </div>
  
  <div id="change-2726" class="journal has-notes">
    <div id="note-32">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-32" class="journal-link">#32</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/3100">Phil Harvey</a> <a title="20 Jan 2014 06:42" href="/projects/exiv2/activity?from=2014-01-20">almost 8 years</a> ago
      <span id="journal-2726-private_notes" class=""></span>
    </h4>

    <div id="journal-2726-notes" class="wiki"><p>Alan Pater wrote:</p>


<blockquote>

	<p>Do I need to be writing these fields differently? exiv2 is dumping all the text fields into a second &lt;rdf:Description ... /&gt; structure.</p>


</blockquote>

	<p>The second description shouldn't be a problem.  ExifTool avoids this with the "rdf:parseType='Resource'" attribute, but this isn't the only way to do it.</p>


	<p>The problem seems to be that the Exiv2 has only written the vernacularName, and nothing else.</p>


	<p>- Phil</p>


	<p>P.S.  I am a bit confused about the problems you seem to be have having with the dwc structure.  The standard exif schema has similar one-level structures.</p></div>
    </div>
  </div>
  
  <div id="change-2727" class="journal has-notes">
    <div id="note-33">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-33" class="journal-link">#33</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4035">Alan Pater</a> <a title="20 Jan 2014 09:09" href="/projects/exiv2/activity?from=2014-01-20">almost 8 years</a> ago
      <span id="journal-2727-private_notes" class=""></span>
    </h4>

    <div id="journal-2727-notes" class="wiki"><p>I think most of my confusion comes from my lack of a solid programing background ...</p>


	<p>To sum up that example, it seems that Adobe apps have trouble reading the fields in this structure:<br />  &lt;rdf:Description dwc:class="Vertebrata" dwc:family="Felidae" ...&gt;</p>


	<p>Here's another example of what exiv2 is writing and that Adobe apps don't understand. This example tries to write both DC &#38; DWC fields:<br /><pre>&lt;rdf:Description rdf:about="" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:dwc="http://rs.tdwg.org/dwc/terms/" dc:source="Alan Pater"&gt;

     &lt;dc:type&gt;
          &lt;rdf:Bag&gt;
               &lt;rdf:li&gt;
                test image with DC
               &lt;/rdf:li&gt;
          &lt;/rdf:Bag&gt;
     &lt;/dc:type&gt;

     &lt;dwc:Taxon dwc:kingdom="Animalia" dwc:phylum="Chordata" dwc:class="Vertebrata" dwc:order="Mammalia" dwc:family="Felidae" dwc:genus="Puma" dwc:subgenus="Puma" dwc:specificEpithet="concolor"/&gt;

&lt;/rdf:Description&gt; </pre><br />Shouldn't the two different namespace have seperate rdf:Description containers? Something like:<br /><pre>&lt;rdf:Description rdf:about="" xmlns:dc="http://purl.org/dc/elements/1.1/"&gt;

    &lt;dc:source&gt;"Alan Pater"&lt;/dc:source&gt;

     &lt;dc:type&gt;
          &lt;rdf:Bag&gt;
               &lt;rdf:li&gt;
                test image with DC
               &lt;/rdf:li&gt;
          &lt;/rdf:Bag&gt;
     &lt;/dc:type&gt;

&lt;/rdf:Description&gt; 

&lt;rdf:Description rdf:about="" xmlns:dwc="http://rs.tdwg.org/dwc/terms/"&gt;

     &lt;dwc:Taxon dwc:kingdom="Animalia" dwc:phylum="Chordata" dwc:class="Vertebrata" dwc:order="Mammalia" dwc:family="Felidae" dwc:genus="Puma" dwc:subgenus="Puma" dwc:specificEpithet="concolor"/&gt;

&lt;/rdf:Description&gt; </pre></p></div>
    </div>
  </div>
  
  <div id="change-2728" class="journal has-notes">
    <div id="note-34">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-34" class="journal-link">#34</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/3100">Phil Harvey</a> <a title="21 Jan 2014 05:40" href="/projects/exiv2/activity?from=2014-01-21">almost 8 years</a> ago
      <span id="journal-2728-private_notes" class=""></span>
    </h4>

    <div id="journal-2728-notes" class="wiki"><p>Ah, yes.  I missed that the structure elements were added as attributes of the Description.   You can't mix attributes and elements like this.  From the XMP 2012 specification Part1, section 7.9.2.4: "All fields of a structure shall be written in the same manner, either as nested elements or as attributes." (But note that ExifTool will read it anyway -- ExifTool uses <em>very</em> relaxed parsing rules.)</p>


	<p>In your last exiv2 example, combining the namespaces under a single Description is fine, but structure elements need to either be contained inside another level of Description, or the structure property itself needs to be rdf:parseType='Resource'.  In this example, neither is true,  so it isn't valid XMP.</p>


	<p>- Phil</p></div>
    </div>
  </div>
  
  <div id="change-2730" class="journal has-notes">
    <div id="note-35">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-35" class="journal-link">#35</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4035">Alan Pater</a> <a title="21 Jan 2014 09:58" href="/projects/exiv2/activity?from=2014-01-21">almost 8 years</a> ago
      <span id="journal-2730-private_notes" class=""></span>
    </h4>

    <div id="journal-2730-notes" class="wiki"><p>Thanks Phil, I think most of that was me messing up the dc and dwc namespaces. I've built a new version with what I think are now proper namespace separation.</p>


	<p>It results in the following. Is this valid XMP?<br /><pre>&lt;rdf:Description rdf:about="" xmlns:dwc="http://rs.tdwg.org/dwc/index.htm" xmlns:dc="http://purl.org/dc/elements/1.1/"&gt; 

    &lt;dwc:Taxon&gt; 
    &lt;rdf:Description dwc:class="Vertebrata" dwc:family="Felidae" dwc:genus="Puma" dwc:kingdom="Animalia"&gt; 
    &lt;dwc:taxonRemarks&gt; 
        &lt;rdf:Alt&gt; 
            &lt;rdf:li xml:lang="en-US"&gt;this name ...&lt;/rdf:li&gt; 
        &lt;/rdf:Alt&gt; 
    &lt;/dwc:taxonRemarks&gt; 
    &lt;dwc:vernacularName&gt; 
        &lt;rdf:Alt&gt; 
            &lt;rdf:li xml:lang="en-US"&gt;Cougar&lt;/rdf:li&gt; 
            &lt;rdf:li xml:lang="es-ES"&gt;Puma&lt;/rdf:li&gt; 
        &lt;/rdf:Alt&gt; 
    &lt;/dwc:vernacularName&gt; 
    &lt;/rdf:Description&gt; 
    &lt;/dwc:Taxon&gt; 

    &lt;dc:rights&gt; 
        &lt;rdf:Alt&gt; 
            &lt;rdf:li xml:lang="en-US"&gt;Alan Pater CC&lt;/rdf:li&gt; 
            &lt;rdf:li xml:lang="es-ES"&gt;CC Alan Pater&lt;/rdf:li&gt; 
        &lt;/rdf:Alt&gt; 
    &lt;/dc:rights&gt; 

&lt;/rdf:Description&gt; 
</pre></p></div>
    </div>
  </div>
  
  <div id="change-2731" class="journal has-notes">
    <div id="note-36">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-36" class="journal-link">#36</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/3100">Phil Harvey</a> <a title="21 Jan 2014 10:17" href="/projects/exiv2/activity?from=2014-01-21">almost 8 years</a> ago
      <span id="journal-2731-private_notes" class=""></span>
    </h4>

    <div id="journal-2731-notes" class="wiki"><p>Alan Pater wrote:</p>


<blockquote>

	<p>Is this valid XMP?</p>


</blockquote>

	<p>I don't think so.   It violates section 7.9.2.4 of the XMP specification.  You're still mixing nested elements (ie. taxonRemarks) with attributes (ie. class).</p>


	<p>- Phil</p></div>
    </div>
  </div>
  
  <div id="change-2734" class="journal has-notes">
    <div id="note-37">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-37" class="journal-link">#37</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/3100">Phil Harvey</a> <a title="22 Jan 2014 04:19" href="/projects/exiv2/activity?from=2014-01-22">almost 8 years</a> ago
      <span id="journal-2734-private_notes" class=""></span>
    </h4>

    <div id="journal-2734-notes" class="wiki"><p>Phil Harvey wrote:</p>


<blockquote>

	<p>I don't think so.</p>


</blockquote>

	<p>I take this back.  Maybe I have misinterpreted the specification, because this is the way that Photoshop writes dwc.</p>


	<p>- Phil</p></div>
    </div>
  </div>
  
  <div id="change-2735" class="journal has-notes">
    <div id="note-38">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-38" class="journal-link">#38</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/3100">Phil Harvey</a> <a title="22 Jan 2014 04:55" href="/projects/exiv2/activity?from=2014-01-22">almost 8 years</a> ago
      <span id="journal-2735-private_notes" class=""></span>
    </h4>

    <div id="journal-2735-notes" class="wiki"><p>I've spent some time studying the XMP 2012 specification.  I had not appreciated the significant changes made since the 2010 version.  I was wrong with what I said earlier.  Section 7.9.2.4 deals with a new type of structure that does not use either an inner rdf:Description or a rdf:parseType='Resource'.  So this is valid, and I was wrong about what I said earlier.  The restriction on not mixing nested elements and attributes applies only to this form of a structure (because, according to the spec, this form must have an empty element content).</p>


	<p>The bottom line is that the last XMP you posted is fine.</p>


	<p>- Phil</p></div>
    </div>
  </div>
  
  <div id="change-2736" class="journal has-notes">
    <div id="note-39">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-39" class="journal-link">#39</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4035">Alan Pater</a> <a title="22 Jan 2014 12:31" href="/projects/exiv2/activity?from=2014-01-22">almost 8 years</a> ago
      <span id="journal-2736-private_notes" class=""></span>
    </h4>

    <div id="journal-2736-notes" class="wiki"><p>I wonder what is going on then. I've been sending my test images to Frank Bungartz at the Charles Darwin Foundation and he can't see (with the IDimager app he uses) some of the DwC I am writing with my patch of DwC. And yet it appears that IDimager and exiv2 are writing these fields in a similiar manner.</p>


	<p>exiv2.dc.dwc.i18n.jpg: Idimager can see taxonRemarks and vernacularName, but none of the other field values.  <pre>&lt;dwc:Taxon&gt; 

    &lt;rdf:Description dwc:acceptedNameUsage="Tamias minimus" dwc:acceptedNameUsageID="8fa58e08-08de-4ac1-b69c-1235340b7001" dwc:class="Vertebrata" dwc:family="Felidae" dwc:genus="Puma" dwc:higherClassification="Animalia;Chordata;Vertebrata;Mammalia;Theria;Eutheria" dwc:infraspecificEpithet="concolor" dwc:kingdom="Animalia" dwc:nameAccordingTo="McCranie, J. comments" dwc:nameAccordingToID="doi:10.1016/S0269-915X(97)80026-2" dwc:namePublishedIn="Pearson O." dwc:namePublishedInID="http://hdl.handle.net/10199/7" dwc:namePublishedInYear="2059" dwc:nomenclaturalCode="ICBN" dwc:nomenclaturalStatus="nom. ambig." dwc:order="Mammalia" dwc:originalNameUsage="Gasterosteus saltatrix" dwc:parentNameUsage="Rubiaceae" dwc:parentNameUsageID="8fa58e08-08de-4ac1-b69c-1235340b7001" dwc:phylum="Chordata" dwc:scientificName="Ctenomys sociabilis" dwc:scientificNameAuthorship="(Torr.) J.T." dwc:scientificNameID="urn:lsid:ipni.org:names:37829-1:1.3" dwc:specificEpithet="concolor" dwc:subgenus="Puma" dwc:taxonConceptID="8fa58e08-08de-4ac1-b69c-1235340b7001" dwc:taxonID="8fa58e08-08de-4ac1-b69c-1235340b7001" dwc:taxonRank="subspecies" dwc:taxonomicStatus="invalid" dwc:verbatimTaxonRank="Agamospecies"&gt; 

    &lt;dwc:taxonRemarks&gt; 
        &lt;rdf:Alt&gt; 
            &lt;rdf:li xml:lang="en-US"&gt;this name ...&lt;/rdf:li&gt; 
        &lt;/rdf:Alt&gt; 
    &lt;/dwc:taxonRemarks&gt; 

    &lt;dwc:vernacularName&gt; 
        &lt;rdf:Alt&gt; 
            &lt;rdf:li xml:lang="en-US"&gt;Cougar&lt;/rdf:li&gt; 
            &lt;rdf:li xml:lang="es-ES"&gt;Puma&lt;/rdf:li&gt; 
        &lt;/rdf:Alt&gt; 
    &lt;/dwc:vernacularName&gt; 

    &lt;/rdf:Description&gt; 

&lt;/dwc:Taxon&gt; </pre></p>


	<p>Test_IdimagerTaxonXMP.jpg: <pre>    &lt;dwc:Taxon&gt; 

        &lt;rdf:Description dwc:taxonID="test" dwc:scientificNameID="test" dwc:acceptedNameUsageID="test" dwc:parentNameUsageID="test" dwc:nameAccordingToID="test" dwc:namePublishedInID="test" dwc:taxonConceptID="test" dwc:scientificName="test" dwc:acceptedNameUsage="test" dwc:parentNameUsage="test" dwc:originalNameUsage="test" dwc:nameAccordingTo="test" dwc:namePublishedIn="test" dwc:higherClassification="test" dwc:kingdom="test" dwc:phylum="test" dwc:class="test" dwc:order="test" dwc:family="test" dwc:genus="test" dwc:subgenus="test" dwc:specificEpithet="test" dwc:taxonRank="test" dwc:verbatimTaxonRank="test" dwc:infraspecificEpithet="test" dwc:scientificNameAuthorship="test" dwc:nomenclaturalCode="test" dwc:taxonomicStatus="test" dwc:nomenclaturalStatus="test" dwc:taxonRemarks="test"&gt; 

            &lt;dwc:vernacularName&gt; 
                &lt;rdf:Alt&gt; 
                    &lt;rdf:li xml:lang="x-default"&gt;test&lt;/rdf:li&gt; 
                    &lt;rdf:li xml:lang="en-US"/&gt; 
                    &lt;rdf:li xml:lang="es-ES"/&gt; 
                    &lt;rdf:li xml:lang="fr-FR"/&gt; 
                &lt;/rdf:Alt&gt; 
            &lt;/dwc:vernacularName&gt; 

        &lt;/rdf:Description&gt; 

    &lt;/dwc:Taxon&gt; 
</pre></p></div>
    </div>
  </div>
  
  <div id="change-2737" class="journal has-notes">
    <div id="note-40">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-40" class="journal-link">#40</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/3100">Phil Harvey</a> <a title="23 Jan 2014 05:13" href="/projects/exiv2/activity?from=2014-01-23">almost 8 years</a> ago
      <span id="journal-2737-private_notes" class=""></span>
    </h4>

    <div id="journal-2737-notes" class="wiki"><p>I think this is a question for Idimager.</p>


	<p>Photoshop reads this OK, which indicates that the XMP is well-structured.</p>


	<p>The tags written all correspond to known tags in ExifTool (with the exception of Taxon namePublishedInYear, which I need to add).</p>


	<p>- Phil</p></div>
    </div>
  </div>
  
  <div id="change-2738" class="journal has-notes">
    <div id="note-41">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-41" class="journal-link">#41</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/53">Andreas Huggel</a> <a title="23 Jan 2014 19:45" href="/projects/exiv2/activity?from=2014-01-23">almost 8 years</a> ago
      <span id="journal-2738-private_notes" class=""></span>
    </h4>

    <div id="journal-2738-notes" class="wiki"><p>Alan, could you share the Exiv2 commands (or command files) you used to create your examples?</p>


	<p>Andreas</p></div>
    </div>
  </div>
  
  <div id="change-2739" class="journal has-notes has-details">
    <div id="note-42">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-42" class="journal-link">#42</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4035">Alan Pater</a> <a title="24 Jan 2014 11:50" href="/projects/exiv2/activity?from=2014-01-24">almost 8 years</a> ago
      <span id="journal-2739-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>File</strong> <a href="/attachments/598">dwc.patch</a> <a class="icon-only icon-download" title="Download" href="/attachments/download/598/dwc.patch">dwc.patch</a> added</li>
       <li><strong>File</strong> <a href="/attachments/599">exiv2.dc.dwc.i18n.txt</a> <a class="icon-only icon-download" title="Download" href="/attachments/download/599/exiv2.dc.dwc.i18n.txt">exiv2.dc.dwc.i18n.txt</a> added</li>
       <li><strong>File</strong> <a href="/attachments/600">exiv2.dc.dwc.i18n.jpg</a> <a class="icon-only icon-download" title="Download" href="/attachments/download/600/exiv2.dc.dwc.i18n.jpg">exiv2.dc.dwc.i18n.jpg</a> added</li>
    </ul>
    <div id="journal-2739-notes" class="wiki"><p>Certainly.</p>


	<p>exiv2.dc.dwc.i18n.jpg was created using the convert command from imagemagick, and then the metadata was added from a text file using the command: <pre> exiv2 -m exiv2.dc.dwc.i18n.txt exiv2.dc.dwc.i18n.jpg </pre>The text file contains a list of commands such as<pre>set Xmp.dwc.Record/dwc:basisOfRecord "FossilSpecimen" 
set Xmp.dwc.Taxon/dwc:vernacularName "lang=es-es Puma" 
</pre></p>


	<p>Also attached is the patch version used.</p></div>
    </div>
  </div>
  
  <div id="change-2746" class="journal has-notes">
    <div id="note-43">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-43" class="journal-link">#43</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4035">Alan Pater</a> <a title="20 Apr 2014 20:23" href="/projects/exiv2/activity?from=2014-04-20">over 7 years</a> ago
      <span id="journal-2746-private_notes" class=""></span>
    </h4>

    <div id="journal-2746-notes" class="wiki"><p>I'm still trying to figure out why exiv2 can print pretty other nested tags but not my DwC ones. For example:<br /><pre>
$ exiv2 -PXkyctl DwC-SampleImage.jpg | grep City

Xmp.iptc.CreatorContactInfo/Iptc4xmpCore:CiAdrCity      Contact Info-City     XmpText 4    Xela

$ exiv2 -PXkyctl DwC-SampleImage.jpg | grep eventID

Xmp.dwc.Event/dwc:eventID                               Event/dwc:eventID     XmpText 4    1234
</pre></p>


	<p>Instead of Event/dwc:eventID it should read:  Event ID</p>


	<p>Why doesn't it?</p></div>
    </div>
  </div>
  
  <div id="change-2784" class="journal has-notes">
    <div id="note-44">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-44" class="journal-link">#44</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="25 Jun 2014 18:09" href="/projects/exiv2/activity?from=2014-06-25">over 7 years</a> ago
      <span id="journal-2784-private_notes" class=""></span>
    </h4>

    <div id="journal-2784-notes" class="wiki"><p>Alan</p>


	<p>I can't answer your question about the differences.</p>


	<p>However I've looked at your patch and test files.  I believe the code in xml.cpp and properties.cpp has been submitted.  I've added an additional test to bugfixes-test.sh using the your files in <a class="changeset" title="See #937 (DwC Darwin Core Support)." href="/projects/exiv2/repository/exiv2/revisions/3266">r3266</a><br /><pre>
    num=937a
    filename=exiv2.dc.dwc.i18n.jpg
    dataname=exiv2.dc.dwc.i18n.txt
    diffname=exiv2.dc.dwc.i18n.diff
    printf "$num " &gt;&#38;3
    echo '------&gt;' Bug $num '&lt;-------' &gt;&#38;2
    copyTestFile         $filename
    copyTestFile         $dataname
    copyTestFile         $diffname
    runTest exiv2 -pa    $filename | sort  &gt; $num-before.txt
    exiv2 -m $dataname   $filename
    runTest exiv2 -pa    $filename | sort  &gt; $num-after.txt
    diff $num-before.txt $num-after.txt    &gt; $num.txt
    diff $num.txt        $diffname
</pre><br />Effectively, this does: <br />1) exiv2 -pa exiv2.dc.dwc.i18n.jpg                                   > before.txt<br />2) exiv2 -m  exiv2.dc.dwc.i18n.txt exiv2.dc.dwc.i18n.jpg # apply the data file<br />3) exiv2 -pa exiv2.dc.dwc.i18n.jpg | sort                          > after.txt<br />4) diff before.txt after.txt</p>


	<p>The changes feel trivial to me. <br /><pre>
1c1
&lt; Xmp.dc.language                              XmpBag      1  latin
---
&gt; Xmp.dc.language                              XmpBag      2  latin, latin
</pre><br /> Is it possible to provide a version of exiv2.dc.dwc.i18n.jpg which has no DwC data and then we can be very confident that lots of DwC data has been correctly added.</p>


	<p>If you want me to make changes to xml.cpp and properties.cpp, could you prepare a new patch file against the current head of trunk and I will submit your code.</p>


	<p>Robin</p></div>
    </div>
  </div>
  
  <div id="change-2785" class="journal has-notes has-details">
    <div id="note-45">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-45" class="journal-link">#45</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4035">Alan Pater</a> <a title="25 Jun 2014 21:36" href="/projects/exiv2/activity?from=2014-06-25">over 7 years</a> ago
      <span id="journal-2785-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>File</strong> <a href="/attachments/617">dwc.2014.06.25.patch</a> <a class="icon-only icon-download" title="Download" href="/attachments/download/617/dwc.2014.06.25.patch">dwc.2014.06.25.patch</a> added</li>
       <li><strong>File</strong> <a href="/attachments/618">blank.test.jpg</a> <a class="icon-only icon-download" title="Download" href="/attachments/download/618/blank.test.jpg">blank.test.jpg</a> added</li>
    </ul>
    <div id="journal-2785-notes" class="wiki"><p>Robin, yes, please submit this new patch. The one from back on December had a few errors, this one uses the compatible namespace. Also attached is a blank test image without any metadata.</p></div>
    </div>
  </div>
  
  <div id="change-2786" class="journal has-notes has-details">
    <div id="note-46">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-46" class="journal-link">#46</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="26 Jun 2014 02:42" href="/projects/exiv2/activity?from=2014-06-26">over 7 years</a> ago
      <span id="journal-2786-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>Assigned</i> to <i>Resolved</i></li>
    </ul>
    <div id="journal-2786-notes" class="wiki"><p>Thanks, Alan.  I've submitted the patch code to xml.cpp and properties.cpp. <a class="changeset" title="#937.  Thanks to Alan for the patch code and data file." href="/projects/exiv2/repository/exiv2/revisions/3267">r3267</a>.</p>


	<p>I've also updated exiv2.dc.dwc.i18n.jpg and added exiv2.dc.dwc.i18n.diff (which I forgot to submit into <a class="changeset" title="See #937 (DwC Darwin Core Support)." href="/projects/exiv2/repository/exiv2/revisions/3266">r3266</a>).</p>


	<p>I think we're complete on this, so I'll set the status to "Resolved".  We'll close this issue during our review process prior to shipping Exiv2 v0.25.  If anything else comes to light before we close, we can track in this issue report.  Once we have closed, we'll require a new issue to track DwC.</p></div>
    </div>
  </div>
  
  <div id="change-3127" class="journal has-notes">
    <div id="note-47">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-47" class="journal-link">#47</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4035">Alan Pater</a> <a title="28 Jan 2015 19:06" href="/projects/exiv2/activity?from=2015-01-28">almost 7 years</a> ago
      <span id="journal-3127-private_notes" class=""></span>
    </h4>

    <div id="journal-3127-notes" class="wiki"><p>As 0.25 gets closer, can I be greedy and ask for my name under Assignee on this issue? <br />From a comment on an other issue, I understand that will get my name in the release notes/get my name in lights ...</p></div>
    </div>
  </div>
  
  <div id="change-3128" class="journal has-notes has-details">
    <div id="note-48">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-48" class="journal-link">#48</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="28 Jan 2015 23:38" href="/projects/exiv2/activity?from=2015-01-28">almost 7 years</a> ago
      <span id="journal-3128-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Assignee</strong> changed from <i>Robin Mills</i> to <i>Alan Pater</i></li>
    </ul>
    <div id="journal-3128-notes" class="wiki"><p>No problem.  And you've been promoted to "Contributor".  With promotion comes great responsibility.  I think you can assign status and priority to issues.  Use your powers wisely and may the force be with you.</p>


	<p>Thanks for helping to develop Exiv2.</p>


	<p>We hope that Exiv2 v0.25 will be released towards the end of February.  Of course, we could be delayed by unexpected issues or team members having higher priorities in their life.  Here's the current status:  <a class="external" href="http://dev.exiv2.org/boards/3/topics/1765">http://dev.exiv2.org/boards/3/topics/1765</a></p>


	<p>Robin</p></div>
    </div>
  </div>
  
  <div id="change-3634" class="journal has-details">
    <div id="note-49">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-49" class="journal-link">#49</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4035">Alan Pater</a> <a title="08 May 2015 16:22" href="/projects/exiv2/activity?from=2015-05-08">over 6 years</a> ago
      <span id="journal-3634-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>% Done</strong> changed from <i>30</i> to <i>100</i></li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-3934" class="journal has-details">
    <div id="note-50">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-50" class="journal-link">#50</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/53">Andreas Huggel</a> <a title="21 Jun 2015 16:42" href="/projects/exiv2/activity?from=2015-06-21">over 6 years</a> ago
      <span id="journal-3934-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>Resolved</i> to <i>Closed</i></li>
    </ul>
    
    </div>
  </div>
  


</div>

<div style="clear: both;"></div>
<div class="contextual">





</div>


<div style="clear: both;"></div>


<p class="other-formats">Also available in:  <span><a class="atom" rel="nofollow" href="/issues/937.atom">Atom</a></span>
  <span><a class="pdf" rel="nofollow" href="/issues/937.pdf">PDF</a></span>
</p>





        
        <div style="clear:both;"></div>
    </div>
</div>
</div>

<div id="ajax-indicator" style="display:none;"><span>Loading...</span></div>
<div id="ajax-modal" style="display:none;"></div>

<div id="footer">
  <div class="bgl"><div class="bgr">
    Powered by <a href="https://www.redmine.org/">Redmine</a> &copy; 2006-2018 Jean-Philippe Lang
  </div></div>
</div>
</div>
</div>

</body>
</html>
