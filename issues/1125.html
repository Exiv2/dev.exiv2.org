<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<title>Bug #1125: CMake: does not support overriding/selecting correct libdir (lib64) - Exiv2</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="description" content="Redmine" />
<meta name="keywords" content="issue,bug,tracker" />
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="dr0GKxNOfuQ3HtleFGjFPsB6c7V5RJgQ3tMKGYEQyGmU8K3EYTSy5GJ6xlKrv8kN/+gnzIinOaoj85qRwikvBg==" />
<link rel='shortcut icon' href='/favicon.ico?1550767427' />
<link rel="stylesheet" media="all" href="/stylesheets/jquery/jquery-ui-1.11.0.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/application.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/responsive.css?1550767427" />

<script src="/javascripts/jquery-1.11.1-ui-1.11.0-ujs-4.3.1.js?1550767427"></script>
<script src="/javascripts/application.js?1550767427"></script>
<script src="/javascripts/responsive.js?1550767427"></script>
<script>
//<![CDATA[
$(window).load(function(){ warnLeavingUnsaved('The current page contains unsaved text that will be lost if you leave this page.'); });
//]]>
</script>


<!-- page specific tags -->
    <link rel="alternate" type="application/atom+xml" title="Exiv2 - Bug #1125: CMake: does not support overriding/selecting correct libdir (lib64)" href="https://dev.exiv2.org/issues/1125.atom" />
<script src="/javascripts/context_menu.js?1550767427"></script><link rel="stylesheet" media="screen" href="/stylesheets/context_menu.css?1550767427" /></head>
<body class="project-exiv2 has-main-menu controller-issues action-show avatars-off">

<div id="wrapper">

<div class="flyout-menu js-flyout-menu">


        <div class="flyout-menu__search">
            <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
            <input type="hidden" name="issues" value="1" />
            <label class="search-magnifier search-magnifier--flyout" for="flyout-search">&#9906;</label>
            <input type="text" name="q" id="flyout-search" class="small js-search-input" placeholder="Search" />
</form>        </div>


        <h3>Project</h3>
        <span class="js-project-menu"></span>

    <h3>General</h3>
    <span class="js-general-menu"></span>

    <span class="js-sidebar flyout-menu__sidebar"></span>

    <h3>Profile</h3>
    <span class="js-profile-menu"></span>

</div>

<div id="wrapper2">
<div id="wrapper3">
<div id="top-menu">
    <div id="account">
        <ul><li><a class="login" href="/login">Sign in</a></li></ul>    </div>
    
    <ul><li><a class="home" href="/">Home</a></li><li><a class="projects" href="/projects">Projects</a></li><li><a class="help" href="https://www.redmine.org/guide">Help</a></li></ul></div>

<div id="header">

    <a href="#" class="mobile-toggle-button js-flyout-menu-toggle-button"></a>

    <div id="quick-search">
        <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
        <input type="hidden" name="scope" />
        <input type="hidden" name="issues" value="1" />
        <label for='q'>
          <a accesskey="4" href="/projects/exiv2/search">Search</a>:
        </label>
        <input type="text" name="q" id="q" size="20" class="small" accesskey="f" />
</form>        <div id="project-jump" class="drdn"><span class="drdn-trigger">Exiv2</span><div class="drdn-content"><div class="quick-search"><input type="text" name="q" id="projects-quick-search" value="" class="autocomplete" data-automcomplete-url="/projects/autocomplete.js?jump=issues" autocomplete="off" /></div><div class="drdn-items projects selection"></div><div class="drdn-items all-projects selection"><a href="/projects?jump=issues">All Projects</a></div></div></div>
    </div>

    <h1><span class="current-project">Exiv2</span></h1>

    <div id="main-menu" class="tabs">
        <ul><li><a class="overview" href="/projects/exiv2">Overview</a></li><li><a class="activity" href="/projects/exiv2/activity">Activity</a></li><li><a class="roadmap" href="/projects/exiv2/roadmap">Roadmap</a></li><li><a class="issues selected" href="/projects/exiv2/issues">Issues</a></li><li><a class="news" href="/projects/exiv2/news">News</a></li><li><a class="wiki" href="/projects/exiv2/wiki">Wiki</a></li><li><a class="boards" href="/projects/exiv2/boards">Forums</a></li><li><a class="repository" href="/projects/exiv2/repository">Repository</a></li></ul>
        <div class="tabs-buttons" style="display:none;">
            <button class="tab-left" onclick="moveTabLeft(this); return false;"></button>
            <button class="tab-right" onclick="moveTabRight(this); return false;"></button>
        </div>
    </div>
</div>

<div id="main" class="">
    <div id="sidebar">
          <h3>Issues</h3>

<ul>
<li><a href="/projects/exiv2/issues?set_filter=1">View all issues</a></li>
<li><a href="/projects/exiv2/issues/report">Summary</a></li>

</ul>









        
    </div>

    <div id="content">
        
        <div class="contextual">





</div>


<h2>Bug #1125</h2>

<div class="issue tracker-1 status-5 priority-4 priority-default closed details">

  <div class="gravatar-with-child">
    
    
  </div>

<div class="subject">
<div><h3>CMake: does not support overriding/selecting correct libdir (lib64)</h3></div>
</div>
        <p class="author">
        Added by <a class="user active" href="/users/4526">Michał Górny</a> <a title="04 Oct 2015 11:44" href="/projects/exiv2/activity?from=2015-10-04">about 6 years</a> ago.
        Updated <a title="08 Nov 2015 18:42" href="/projects/exiv2/activity?from=2015-11-08">about 6 years</a> ago.
        </p>

<div class="attributes">
<div class="splitcontent"><div class="splitcontentleft"><div class="status attribute"><div class="label">Status:</div><div class="value">Closed</div></div><div class="priority attribute"><div class="label">Priority:</div><div class="value">Normal</div></div><div class="assigned-to attribute"><div class="label">Assignee:</div><div class="value"><a class="user active" href="/users/119">Robin Mills</a></div></div><div class="category attribute"><div class="label">Category:</div><div class="value">build</div></div><div class="fixed-version attribute"><div class="label">Target version:</div><div class="value"><a title="28 Apr 2017" href="/versions/52">0.26</a></div></div></div><div class="splitcontentleft"><div class="start-date attribute"><div class="label">Start date:</div><div class="value">04 Oct 2015</div></div><div class="due-date attribute"><div class="label">Due date:</div><div class="value"></div></div><div class="progress attribute"><div class="label">% Done:</div><div class="value"><table class="progress progress-100"><tr><td style="width: 100%;" class="closed" title="100%"></td></tr></table><p class="percent">100%</p></div></div><div class="estimated-hours attribute"><div class="label">Estimated time:</div><div class="value">1.00 h</div></div></div></div>


</div>

<hr />
<div class="description">
  <div class="contextual">
  
  </div>

  <p><strong>Description</strong></p>
  <div class="wiki">
  <p>The CMake build system hardcodes 'lib' as installation directory for libraries. This is incorrect on most modern 64-bit systems where the directory should be 'lib64'.</p>


	<p>There are two common ways of solving this:</p>


	<p>1. using GNUInstallDirs cmake module, and the directories defined by it (${CMAKE_INSTALL_LIBDIR} in particular),</p>


	<p>2. defining LIB_SUFFIX or a similar variable, and appending it to hardcoded 'lib'.</p>


	<p>An example patch doing the latter can be found in Fedora: <a class="external" href="http://pkgs.fedoraproject.org/cgit/exiv2.git/tree/exiv2-0.25-cmake_LIB_SUFFIX.patch">http://pkgs.fedoraproject.org/cgit/exiv2.git/tree/exiv2-0.25-cmake_LIB_SUFFIX.patch</a></p>
  </div>
</div>







</div>

<div id="issue-changesets">
<h3>Associated revisions</h3>
    <div class="changeset">
    <p><a title="Revision 3977" href="/projects/exiv2/repository/exiv2/revisions/3977">Revision 3977</a>
        (<a href="/projects/exiv2/repository/exiv2/revisions/3977/diff">diff</a>)
        <br />
        <span class="author">Added by <a class="user active" href="/users/119">Robin Mills</a> <a title="04 Oct 2015 18:21" href="/projects/exiv2/activity?from=2015-10-04">about 6 years</a> ago</span></p>
    <div class="wiki changeset-comments">
        <p><a class="issue tracker-1 status-5 priority-4 priority-default closed" title="Bug: CMake: does not support overriding/selecting correct libdir (lib64) (Closed)" href="/issues/1125">#1125</a>.  Thank You to  Michał for reporting and providing the patch.</p>
    </div>
    </div>

</div>



<div id="history">
<h3>History</h3>
  <div id="change-4333" class="journal has-notes has-details">
    <div id="note-1">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-1" class="journal-link">#1</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="04 Oct 2015 12:32" href="/projects/exiv2/activity?from=2015-10-04">about 6 years</a> ago
      <span id="journal-4333-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>New</i> to <i>Assigned</i></li>
       <li><strong>Assignee</strong> set to <i>Robin Mills</i></li>
       <li><strong>Target version</strong> set to <i>0.26</i></li>
    </ul>
    <div id="journal-4333-notes" class="wiki"><p>Thanks for reporting this.  I'll investigate and give you an update in the next few days.</p></div>
    </div>
  </div>
  
  <div id="change-4336" class="journal has-notes">
    <div id="note-2">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-2" class="journal-link">#2</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4526">Michał Górny</a> <a title="04 Oct 2015 15:16" href="/projects/exiv2/activity?from=2015-10-04">about 6 years</a> ago
      <span id="journal-4336-private_notes" class=""></span>
    </h4>

    <div id="journal-4336-notes" class="wiki"><p>Alternatively, here's a patch using GNUInstallDirs that also fixes manpage install: <a class="external" href="https://gitweb.gentoo.org/repo/gentoo.git/plain/media-gfx/exiv2/files/exiv2-0.25-fix-install-dirs.patch?id=3e09d75a96b8f864847a96daee2e255bda10f0d2">https://gitweb.gentoo.org/repo/gentoo.git/plain/media-gfx/exiv2/files/exiv2-0.25-fix-install-dirs.patch?id=3e09d75a96b8f864847a96daee2e255bda10f0d2</a></p>


	<p>Though for completeness, it should have also used ${CMAKE_INSTALL_BINDIR} for binaries.</p></div>
    </div>
  </div>
  
  <div id="change-4337" class="journal has-notes">
    <div id="note-3">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-3" class="journal-link">#3</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="04 Oct 2015 18:27" href="/projects/exiv2/activity?from=2015-10-04">about 6 years</a> ago
      <span id="journal-4337-private_notes" class=""></span>
    </h4>

    <div id="journal-4337-notes" class="wiki"><p>Submitted <a class="changeset" title="#1125.  Thank You to  Michał for reporting and providing the patch." href="/projects/exiv2/repository/exiv2/revisions/3977">r3977</a>.  Thank you  Michał for reporting this and providing a patch.</p>


	<p>I'm a little surprised that you have commented off: <pre>#SET(CMAKE_INSTALL_RPATH "${CMAKE_INSTALL_PREFIX}/${CMAKE_INSTALL_LIBDIR</pre>in the topmost CMakeList.txt file.  However, I've built this on the Mac (El Capitain) and it passes the test suite.  The other changes look fine.  I've submitted you complete patch without modification.  Thanks very much for working on this.</p></div>
    </div>
  </div>
  
  <div id="change-4338" class="journal has-notes has-details">
    <div id="note-4">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-4" class="journal-link">#4</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="04 Oct 2015 18:28" href="/projects/exiv2/activity?from=2015-10-04">about 6 years</a> ago
      <span id="journal-4338-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>Assigned</i> to <i>Resolved</i></li>
       <li><strong>% Done</strong> changed from <i>0</i> to <i>100</i></li>
       <li><strong>Estimated time</strong> set to <i>1.00 h</i></li>
    </ul>
    <div id="journal-4338-notes" class="wiki"><p>I'm setting the status to Resolved/100% and don't intend further work on this.  It nothing else arises on this, I'll close this before we ship v0.26 (expected Spring 2016).</p></div>
    </div>
  </div>
  
  <div id="change-4339" class="journal has-notes">
    <div id="note-5">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-5" class="journal-link">#5</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4526">Michał Górny</a> <a title="04 Oct 2015 19:13" href="/projects/exiv2/activity?from=2015-10-04">about 6 years</a> ago
      <span id="journal-4339-private_notes" class=""></span>
    </h4>

    <div id="journal-4339-notes" class="wiki"><p>I'm sorry that I didn't mention this earlier but the author of the patch is Andreas Sturmlechner, so he deserves the credit for it. (as can be seen on <a class="external" href="https://gitweb.gentoo.org/repo/gentoo.git/commit/media-gfx/exiv2/files/exiv2-0.25-fix-install-dirs.patch?id=3e09d75a96b8f864847a96daee2e255bda10f0d2">https://gitweb.gentoo.org/repo/gentoo.git/commit/media-gfx/exiv2/files/exiv2-0.25-fix-install-dirs.patch?id=3e09d75a96b8f864847a96daee2e255bda10f0d2</a>)</p></div>
    </div>
  </div>
  
  <div id="change-4340" class="journal has-notes">
    <div id="note-6">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-6" class="journal-link">#6</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="04 Oct 2015 19:47" href="/projects/exiv2/activity?from=2015-10-04">about 6 years</a> ago
      <span id="journal-4340-private_notes" class=""></span>
    </h4>

    <div id="journal-4340-notes" class="wiki"><p>Thanks for bringing this to my attention.  I will email and Thank Andreas for working on this (and copy you).  Regrettably, I can't edit the SVN commit message on <a class="changeset" title="#1125.  Thank You to  Michał for reporting and providing the patch." href="/projects/exiv2/repository/exiv2/revisions/3977">r3977</a> as we don't have editing enabled on our SVN server.</p></div>
    </div>
  </div>
  
  <div id="change-4341" class="journal has-notes">
    <div id="note-7">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-7" class="journal-link">#7</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4526">Michał Górny</a> <a title="04 Oct 2015 19:56" href="/projects/exiv2/activity?from=2015-10-04">about 6 years</a> ago
      <span id="journal-4341-private_notes" class=""></span>
    </h4>

    <div id="journal-4341-notes" class="wiki"><p>I've already talked to him and he doesn't mind that. Just wanted to make things clear.</p></div>
    </div>
  </div>
  
  <div id="change-4443" class="journal has-notes has-details">
    <div id="note-8">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-8" class="journal-link">#8</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="08 Nov 2015 18:42" href="/projects/exiv2/activity?from=2015-11-08">about 6 years</a> ago
      <span id="journal-4443-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>Resolved</i> to <i>Closed</i></li>
    </ul>
    <div id="journal-4443-notes" class="wiki"><p>I'm going to set the status of this to closed.  It has been 100% resolved for some time without further incident.</p></div>
    </div>
  </div>
  


</div>

<div style="clear: both;"></div>
<div class="contextual">





</div>


<div style="clear: both;"></div>


<p class="other-formats">Also available in:  <span><a class="atom" rel="nofollow" href="/issues/1125.atom">Atom</a></span>
  <span><a class="pdf" rel="nofollow" href="/issues/1125.pdf">PDF</a></span>
</p>





        
        <div style="clear:both;"></div>
    </div>
</div>
</div>

<div id="ajax-indicator" style="display:none;"><span>Loading...</span></div>
<div id="ajax-modal" style="display:none;"></div>

<div id="footer">
  <div class="bgl"><div class="bgr">
    Powered by <a href="https://www.redmine.org/">Redmine</a> &copy; 2006-2018 Jean-Philippe Lang
  </div></div>
</div>
</div>
</div>

</body>
</html>
