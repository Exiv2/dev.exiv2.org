<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<title>Feature #756: Access to ICC Profile (TAG: 0x8773) data in Exif as uninterpretted binary - Exiv2</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="description" content="Redmine" />
<meta name="keywords" content="issue,bug,tracker" />
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="kTegz9mRq0Ne6oXuk50H2RlopCNdARGP+zjow/b+jG9zegsgq+tnQwuOmuIsSgvqJvrwWqzisDUGGHhLtcdrAA==" />
<link rel='shortcut icon' href='/favicon.ico?1550767427' />
<link rel="stylesheet" media="all" href="/stylesheets/jquery/jquery-ui-1.11.0.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/application.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/responsive.css?1550767427" />

<script src="/javascripts/jquery-1.11.1-ui-1.11.0-ujs-4.3.1.js?1550767427"></script>
<script src="/javascripts/application.js?1550767427"></script>
<script src="/javascripts/responsive.js?1550767427"></script>
<script>
//<![CDATA[
$(window).load(function(){ warnLeavingUnsaved('The current page contains unsaved text that will be lost if you leave this page.'); });
//]]>
</script>


<!-- page specific tags -->
    <link rel="alternate" type="application/atom+xml" title="Exiv2 - Feature #756: Access to ICC Profile (TAG: 0x8773) data in Exif as uninterpretted binary" href="https://dev.exiv2.org/issues/756.atom" />
<script src="/javascripts/context_menu.js?1550767427"></script><link rel="stylesheet" media="screen" href="/stylesheets/context_menu.css?1550767427" /></head>
<body class="project-exiv2 has-main-menu controller-issues action-show avatars-off">

<div id="wrapper">

<div class="flyout-menu js-flyout-menu">


        <div class="flyout-menu__search">
            <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
            <input type="hidden" name="issues" value="1" />
            <label class="search-magnifier search-magnifier--flyout" for="flyout-search">&#9906;</label>
            <input type="text" name="q" id="flyout-search" class="small js-search-input" placeholder="Search" />
</form>        </div>


        <h3>Project</h3>
        <span class="js-project-menu"></span>

    <h3>General</h3>
    <span class="js-general-menu"></span>

    <span class="js-sidebar flyout-menu__sidebar"></span>

    <h3>Profile</h3>
    <span class="js-profile-menu"></span>

</div>

<div id="wrapper2">
<div id="wrapper3">
<div id="top-menu">
    <div id="account">
        <ul><li><a class="login" href="/login">Sign in</a></li></ul>    </div>
    
    <ul><li><a class="home" href="/">Home</a></li><li><a class="projects" href="/projects">Projects</a></li><li><a class="help" href="https://www.redmine.org/guide">Help</a></li></ul></div>

<div id="header">

    <a href="#" class="mobile-toggle-button js-flyout-menu-toggle-button"></a>

    <div id="quick-search">
        <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
        <input type="hidden" name="scope" />
        <input type="hidden" name="issues" value="1" />
        <label for='q'>
          <a accesskey="4" href="/projects/exiv2/search">Search</a>:
        </label>
        <input type="text" name="q" id="q" size="20" class="small" accesskey="f" />
</form>        <div id="project-jump" class="drdn"><span class="drdn-trigger">Exiv2</span><div class="drdn-content"><div class="quick-search"><input type="text" name="q" id="projects-quick-search" value="" class="autocomplete" data-automcomplete-url="/projects/autocomplete.js?jump=issues" autocomplete="off" /></div><div class="drdn-items projects selection"></div><div class="drdn-items all-projects selection"><a href="/projects?jump=issues">All Projects</a></div></div></div>
    </div>

    <h1><span class="current-project">Exiv2</span></h1>

    <div id="main-menu" class="tabs">
        <ul><li><a class="overview" href="/projects/exiv2">Overview</a></li><li><a class="activity" href="/projects/exiv2/activity">Activity</a></li><li><a class="roadmap" href="/projects/exiv2/roadmap">Roadmap</a></li><li><a class="issues selected" href="/projects/exiv2/issues">Issues</a></li><li><a class="news" href="/projects/exiv2/news">News</a></li><li><a class="wiki" href="/projects/exiv2/wiki">Wiki</a></li><li><a class="boards" href="/projects/exiv2/boards">Forums</a></li><li><a class="repository" href="/projects/exiv2/repository">Repository</a></li></ul>
        <div class="tabs-buttons" style="display:none;">
            <button class="tab-left" onclick="moveTabLeft(this); return false;"></button>
            <button class="tab-right" onclick="moveTabRight(this); return false;"></button>
        </div>
    </div>
</div>

<div id="main" class="">
    <div id="sidebar">
          <h3>Issues</h3>

<ul>
<li><a href="/projects/exiv2/issues?set_filter=1">View all issues</a></li>
<li><a href="/projects/exiv2/issues/report">Summary</a></li>

</ul>









        
    </div>

    <div id="content">
        
        <div class="contextual">





</div>


<h2>Feature #756</h2>

<div class="issue tracker-2 status-5 priority-4 priority-default closed details">

  <div class="gravatar-with-child">
    
    
  </div>

<div class="subject">
<div><h3>Access to ICC Profile (TAG: 0x8773) data in Exif as uninterpretted binary</h3></div>
</div>
        <p class="author">
        Added by <a class="user active" href="/users/1818">Ray NA</a> <a title="04 Feb 2011 15:05" href="/projects/exiv2/activity?from=2011-02-04">almost 11 years</a> ago.
        Updated <a title="22 Aug 2015 16:14" href="/projects/exiv2/activity?from=2015-08-22">about 6 years</a> ago.
        </p>

<div class="attributes">
<div class="splitcontent"><div class="splitcontentleft"><div class="status attribute"><div class="label">Status:</div><div class="value">Closed</div></div><div class="priority attribute"><div class="label">Priority:</div><div class="value">Normal</div></div><div class="assigned-to attribute"><div class="label">Assignee:</div><div class="value"><a class="user active" href="/users/119">Robin Mills</a></div></div><div class="category attribute"><div class="label">Category:</div><div class="value">metadata</div></div><div class="fixed-version attribute"><div class="label">Target version:</div><div class="value"><a title="28 Apr 2017" href="/versions/52">0.26</a></div></div></div><div class="splitcontentleft"><div class="start-date attribute"><div class="label">Start date:</div><div class="value">04 Feb 2011</div></div><div class="due-date attribute"><div class="label">Due date:</div><div class="value"></div></div><div class="progress attribute"><div class="label">% Done:</div><div class="value"><table class="progress progress-100"><tr><td style="width: 100%;" class="closed" title="100%"></td></tr></table><p class="percent">100%</p></div></div><div class="estimated-hours attribute"><div class="label">Estimated time:</div><div class="value"></div></div></div></div>


</div>

<hr />
<div class="description">
  <div class="contextual">
  
  </div>

  <p><strong>Description</strong></p>
  <div class="wiki">
  <p>Reference to: <a class="external" href="http://dev.exiv2.org/boards/3/topics/794">http://dev.exiv2.org/boards/3/topics/794</a></p>


	<p>Embedded ICC profiles (TIFF TAG: 0x8773) can be found in the IFD0 (see attached Nikon NEF) or in JPEG APP2 areas.</p>


	<p>Request for access to the embedded raw data; Exiv2 i/f needs only provide access - interpretation will do done elsewhere by SampleICC API for example.</p>


	<p>Attachments:</p>


	<p>1x Nikon NEF (processed by Nikon Capture NX2 2.2.5)<br />1x exiftool decode of NEF, showing ICC in IFD0</p>


	<p>1x JPEG, generated from Nikon NEF using Capture NX2 2.2.5<br />1x exiftool decode of jpeg, showing ICC in JPEG APP2</p>
  </div>
</div>
  <hr />
  <p><strong>Files</strong></p>
  <div class="attachments">
<div class="contextual">
  
</div>
<table>
<tr>
  <td>
    <a class="icon icon-attachment" href="/attachments/232">DSC-IFD0_ICCprofile.NEF</a>    <span class="size">(7.73 MB)</span>
    <a class="icon-only icon-download" title="Download" href="/attachments/download/232/DSC-IFD0_ICCprofile.NEF">DSC-IFD0_ICCprofile.NEF</a>  </td>
  <td>Nikon NEF (processed by Nikon Capture NX2 2.2.5)</td>
  <td>
      <span class="author">Ray NA, 04 Feb 2011 15:05</span>
  </td>
  <td>
  </td>
</tr>
<tr>
  <td>
    <a class="icon icon-attachment" href="/attachments/233">nef.txt</a>    <span class="size">(71.8 KB)</span>
    <a class="icon-only icon-download" title="Download" href="/attachments/download/233/nef.txt">nef.txt</a>  </td>
  <td>exiftool decode of NEF, showing ICC in IFD0</td>
  <td>
      <span class="author">Ray NA, 04 Feb 2011 15:05</span>
  </td>
  <td>
  </td>
</tr>
<tr>
  <td>
    <a class="icon icon-attachment" href="/attachments/234">DSC-IFD0_ICCprofile.jpg</a>    <span class="size">(1.55 MB)</span>
    <a class="icon-only icon-download" title="Download" href="/attachments/download/234/DSC-IFD0_ICCprofile.jpg">DSC-IFD0_ICCprofile.jpg</a>  </td>
  <td>JPEG, generated from Nikon NEF using Capture NX2 2.2.5</td>
  <td>
      <span class="author">Ray NA, 04 Feb 2011 15:05</span>
  </td>
  <td>
  </td>
</tr>
<tr>
  <td>
    <a class="icon icon-attachment" href="/attachments/235">jpg.txt</a>    <span class="size">(39.2 KB)</span>
    <a class="icon-only icon-download" title="Download" href="/attachments/download/235/jpg.txt">jpg.txt</a>  </td>
  <td>exiftool decode of jpeg, showing ICC in JPEG APP2</td>
  <td>
      <span class="author">Ray NA, 04 Feb 2011 15:05</span>
  </td>
  <td>
  </td>
</tr>
</table>
</div>







<hr />
<div id="relations">
<div class="contextual">
</div>

<p><strong>Related issues</strong></p>

<form data-cm-url="/issues/context_menu" action="/issues/756" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><input type="hidden" name="authenticity_token" value="dfSaTy4aEJysUxmzGzHAFS9L8BH9OcEvMub7RAcxLbOXuTGgXGDcnPk3Br+k5swmENmkaAzaYJXPxmvMRAjK3A==" />
  <table class="list issues odd-even"><tr id="relation-82" class="issue hascontextmenu issue tracker-4 status-5 priority-4 priority-default closed"><td class="checkbox"><input type="checkbox" name="ids[]" value="676" /></td><td class="subject" style="width: 50%">Related to Exiv2 - <a class="issue tracker-4 status-5 priority-4 priority-default closed" href="/issues/676">Patch #676</a>: Patch for reading ICC color profiles</td><td class="status">Closed</td><td class="start_date">26 Jan 2010</td><td class="due_date"></td><td class="done_ratio"><table class="progress progress-100"><tr><td style="width: 100%;" class="closed" title="100%"></td></tr></table><p class="percent"></p></td><td class="buttons"><a title="Actions" class="icon-only icon-actions js-contextmenu" href="#">Actions</a></td></tr><tr id="relation-153" class="issue hascontextmenu issue tracker-2 status-5 priority-4 priority-default closed"><td class="checkbox"><input type="checkbox" name="ids[]" value="1074" /></td><td class="subject" style="width: 50%">Related to Exiv2 - <a class="issue tracker-2 status-5 priority-4 priority-default closed" href="/issues/1074">Feature #1074</a>: ICC Profile in APP2 segment.</td><td class="status">Closed</td><td class="start_date">07 May 2015</td><td class="due_date"></td><td class="done_ratio"><table class="progress progress-100"><tr><td style="width: 100%;" class="closed" title="100%"></td></tr></table><p class="percent"></p></td><td class="buttons"><a title="Actions" class="icon-only icon-actions js-contextmenu" href="#">Actions</a></td></tr></table>
</form>
<form class="new_relation" id="new-relation-form" style="display: none;" action="/issues/756/relations" accept-charset="UTF-8" data-remote="true" method="post"><input name="utf8" type="hidden" value="&#x2713;" />


<p><select onchange="setPredecessorFieldsVisibility();" name="relation[relation_type]" id="relation_relation_type"><option selected="selected" value="relates">Related to</option>
<option value="duplicates">Is duplicate of</option>
<option value="duplicated">Has duplicate</option>
<option value="blocks">Blocks</option>
<option value="blocked">Blocked by</option>
<option value="precedes">Precedes</option>
<option value="follows">Follows</option>
<option value="copied_to">Copied to</option>
<option value="copied_from">Copied from</option></select>
Issue #<input size="10" type="text" name="relation[issue_to_id]" id="relation_issue_to_id" />
<span id="predecessor_fields" style="display:none;">
Delay: <input size="3" type="text" name="relation[delay]" id="relation_delay" /> days
</span>
<input type="submit" name="commit" value="Add" data-disable-with="Add" />
<a href="#" onclick="$(&quot;#new-relation-form&quot;).hide();; return false;">Cancel</a>
</p>

<script>
//<![CDATA[
observeAutocompleteField('relation_issue_to_id', '/issues/auto_complete?issue_id=756&project_id=exiv2&scope=all')
//]]>
</script>

<script>
//<![CDATA[
setPredecessorFieldsVisibility();
//]]>
</script>

</form>
</div>

</div>




<div id="history">
<h3>History</h3>
  <div id="change-1989" class="journal has-details">
    <div id="note-1">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-1" class="journal-link">#1</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/53">Andreas Huggel</a> <a title="31 Aug 2011 05:34" href="/projects/exiv2/activity?from=2011-08-31">about 10 years</a> ago
      <span id="journal-1989-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Target version</strong> deleted (<del><i>0.22</i></del>)</li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-2591" class="journal has-notes has-details">
    <div id="note-2">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-2" class="journal-link">#2</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="24 Jul 2013 16:07" href="/projects/exiv2/activity?from=2013-07-24">over 8 years</a> ago
      <span id="journal-2591-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Category</strong> set to <i>metadata</i></li>
       <li><strong>Status</strong> changed from <i>New</i> to <i>Assigned</i></li>
       <li><strong>Target version</strong> set to <i>0.25</i></li>
    </ul>
    <div id="journal-2591-notes" class="wiki"><p>Deferred to 0.25.</p></div>
    </div>
  </div>
  
  <div id="change-3536" class="journal has-notes">
    <div id="note-3">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-3" class="journal-link">#3</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="26 Apr 2015 20:00" href="/projects/exiv2/activity?from=2015-04-26">over 6 years</a> ago
      <span id="journal-3536-private_notes" class=""></span>
    </h4>

    <div id="journal-3536-notes" class="wiki"><p>This looks like an easy one now that we have -pS to dump structure and -pX option to dump XMP.  I could easily add -pI to say extract ICC profile.<pre>$ exiv2 -pS ~/Downloads/DSC-IFD0_ICCprofile.jpg
STRUCTURE OF JPEG FILE: /Users/rmills/Downloads/DSC-IFD0_ICCprofile.jpg
 address | marker     | length  | data
       2 | 0xd8 SOI  
       4 | 0xe0 APP0  |      16 | JFIF.....,.,..
      22 | 0xe1 APP1  |   39577 | Exif..II*.....................
   39601 | 0xe2 APP2  |    8700 | ICC_PROFILE.....!.NKON. ..mntr
   48303 | 0xdb DQT   |     132 
   48437 | 0xc4 DHT   |     232 
   48671 | 0xc0 SOF0  |      17 
   48690 | 0xda SOS   |      12 
$ exiv2 -pS ~/Downloads/DSC-IFD0_ICCprofile.NEF
STRUCTURE OF TIFF FILE: /Users/rmills/Downloads/DSC-IFD0_ICCprofile.NEF
 address |    tag                      |      type |    count |   offset | value
      10 | 0x00fe NewSubfileType       |      LONG |        1 |        1 | 1
      22 | 0x0100 ImageWidth           |      LONG |        1 |      320 | 320
      34 | 0x0101 ImageLength          |      LONG |        1 |      212 | 212
      46 | 0x0102 BitsPerSample        |     SHORT |        3 |      314 | 
      58 | 0x0103 Compression          |     SHORT |        1 |        1 | 1
      70 | 0x0106 PhotometricInterpret |     SHORT |        1 |        2 | 2
      82 | 0x010f Make                 |     ASCII |       18 |      320 | NIKON CORPORATION.
      94 | 0x0110 Model                |     ASCII |       10 |      338 | NIKON D40.
     106 | 0x0111 StripOffsets         |      LONG |        1 |    44800 | 44800
     118 | 0x0112 Orientation          |     SHORT |        1 |        1 | 1
     130 | 0x0115 SamplesPerPixel      |     SHORT |        1 |        3 | 3
     142 | 0x0116 RowsPerStrip         |      LONG |        1 |      212 | 212
     154 | 0x0117 StripByteCounts      |      LONG |        1 |   203520 | 6912
     166 | 0x011a XResolution          |  RATIONAL |        1 |      348 | 
     178 | 0x011b YResolution          |  RATIONAL |        1 |      356 | 
     190 | 0x011c PlanarConfiguration  |     SHORT |        1 |        1 | 1
     202 | 0x0128 ResolutionUnit       |     SHORT |        1 |        2 | 2
     214 | 0x0131 Software             |     ASCII |       19 |      364 | Capture NX 2.2.5 W.
     226 | 0x0132 DateTime             |     ASCII |       20 |      384 | 2011:02:04 22:48:55.
     238 | 0x014a SubIFDs              |      LONG |        2 |      404 | 
     250 | 0x0214 ReferenceBlackWhite  |  RATIONAL |        6 |      412 | 
     262 | 0x8769 ExifTag              |      LONG |        1 |     9164 | 9164
     274 | 0x8773 InterColorProfile    | UNDEFINED |     8684 |      460 | 
     286 | 0x9003 DateTimeOriginal     |     ASCII |       20 |     9144 | 2011:02:04 22:46:11.
     298 | 0x9216 TIFFEPStandardID     |      BYTE |        4 |        1 | I*..
$ </pre>On the other hand, I'm wondering if this is our concern.  A color profile isn't really metadata.  Once we have a feature to extract the profile, somebody will ask us to be able to insert it.  Or even worse, to be able to edit the data within the profile.  We are really adding a fourth type of metadata.  So we will be supporting Exif, Iptc, Xmp and now Icc.</p>


	<p>It's possible to write a little script to read the output of exiv2 -pS and extract the profile with dd.  There's an example of extracting XMP with dd in this document:  <a class="external" href="http://dev.exiv2.org/projects/exiv2/wiki/The_Metadata_in_TIFF_files">http://dev.exiv2.org/projects/exiv2/wiki/The_Metadata_in_TIFF_files</a></p>


	<p>I feel we should set this to Resolved and decline to implement this.</p></div>
    </div>
  </div>
  
  <div id="change-3780" class="journal has-details">
    <div id="note-4">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-4" class="journal-link">#4</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4035">Alan Pater</a> <a title="02 Jun 2015 23:07" href="/projects/exiv2/activity?from=2015-06-02">over 6 years</a> ago
      <span id="journal-3780-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Target version</strong> changed from <i>0.25</i> to <i>0.26</i></li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-3992" class="journal has-notes has-details">
    <div id="note-5">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-5" class="journal-link">#5</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="21 Aug 2015 16:47" href="/projects/exiv2/activity?from=2015-08-21">about 6 years</a> ago
      <span id="journal-3992-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>Assigned</i> to <i>Closed</i></li>
       <li><strong>Assignee</strong> changed from <i>Andreas Huggel</i> to <i>Robin Mills</i></li>
    </ul>
    <div id="journal-3992-notes" class="wiki"><p>I'm going to close this issue.  However it remains linked to <a class="issue tracker-2 status-5 priority-4 priority-default closed" title="Feature: ICC Profile in APP2 segment. (Closed)" href="/issues/1074">#1074</a> which is active.  The test files provided here will be useful when <a class="issue tracker-2 status-5 priority-4 priority-default closed" title="Feature: ICC Profile in APP2 segment. (Closed)" href="/issues/1074">#1074</a> is implemented.</p></div>
    </div>
  </div>
  
  <div id="change-4046" class="journal has-details">
    <div id="note-6">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-6" class="journal-link">#6</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="22 Aug 2015 16:14" href="/projects/exiv2/activity?from=2015-08-22">about 6 years</a> ago
      <span id="journal-4046-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>% Done</strong> changed from <i>0</i> to <i>100</i></li>
    </ul>
    
    </div>
  </div>
  


</div>

<div style="clear: both;"></div>
<div class="contextual">





</div>


<div style="clear: both;"></div>


<p class="other-formats">Also available in:  <span><a class="atom" rel="nofollow" href="/issues/756.atom">Atom</a></span>
  <span><a class="pdf" rel="nofollow" href="/issues/756.pdf">PDF</a></span>
</p>





        
        <div style="clear:both;"></div>
    </div>
</div>
</div>

<div id="ajax-indicator" style="display:none;"><span>Loading...</span></div>
<div id="ajax-modal" style="display:none;"></div>

<div id="footer">
  <div class="bgl"><div class="bgr">
    Powered by <a href="https://www.redmine.org/">Redmine</a> &copy; 2006-2018 Jean-Philippe Lang
  </div></div>
</div>
</div>
</div>

</body>
</html>
