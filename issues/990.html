<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<title>Support #990: Get tag type from key - Exiv2</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="description" content="Redmine" />
<meta name="keywords" content="issue,bug,tracker" />
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="CiMgeyPKr+F+co3+LAyCxX5fZqF9Y0sLoHeuNZOIlULobouUUbBj4SsWkvKT2472Qc0y2IyA6rFdVz690LFyLQ==" />
<link rel='shortcut icon' href='/favicon.ico?1550767427' />
<link rel="stylesheet" media="all" href="/stylesheets/jquery/jquery-ui-1.11.0.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/application.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/responsive.css?1550767427" />

<script src="/javascripts/jquery-1.11.1-ui-1.11.0-ujs-4.3.1.js?1550767427"></script>
<script src="/javascripts/application.js?1550767427"></script>
<script src="/javascripts/responsive.js?1550767427"></script>
<script>
//<![CDATA[
$(window).load(function(){ warnLeavingUnsaved('The current page contains unsaved text that will be lost if you leave this page.'); });
//]]>
</script>


<!-- page specific tags -->
    <link rel="alternate" type="application/atom+xml" title="Exiv2 - Support #990: Get tag type from key" href="https://dev.exiv2.org/issues/990.atom" />
<script src="/javascripts/context_menu.js?1550767427"></script><link rel="stylesheet" media="screen" href="/stylesheets/context_menu.css?1550767427" /></head>
<body class="project-exiv2 has-main-menu controller-issues action-show avatars-off">

<div id="wrapper">

<div class="flyout-menu js-flyout-menu">


        <div class="flyout-menu__search">
            <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
            <input type="hidden" name="issues" value="1" />
            <label class="search-magnifier search-magnifier--flyout" for="flyout-search">&#9906;</label>
            <input type="text" name="q" id="flyout-search" class="small js-search-input" placeholder="Search" />
</form>        </div>


        <h3>Project</h3>
        <span class="js-project-menu"></span>

    <h3>General</h3>
    <span class="js-general-menu"></span>

    <span class="js-sidebar flyout-menu__sidebar"></span>

    <h3>Profile</h3>
    <span class="js-profile-menu"></span>

</div>

<div id="wrapper2">
<div id="wrapper3">
<div id="top-menu">
    <div id="account">
        <ul><li><a class="login" href="/login">Sign in</a></li></ul>    </div>
    
    <ul><li><a class="home" href="/">Home</a></li><li><a class="projects" href="/projects">Projects</a></li><li><a class="help" href="https://www.redmine.org/guide">Help</a></li></ul></div>

<div id="header">

    <a href="#" class="mobile-toggle-button js-flyout-menu-toggle-button"></a>

    <div id="quick-search">
        <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
        <input type="hidden" name="scope" />
        <input type="hidden" name="issues" value="1" />
        <label for='q'>
          <a accesskey="4" href="/projects/exiv2/search">Search</a>:
        </label>
        <input type="text" name="q" id="q" size="20" class="small" accesskey="f" />
</form>        <div id="project-jump" class="drdn"><span class="drdn-trigger">Exiv2</span><div class="drdn-content"><div class="quick-search"><input type="text" name="q" id="projects-quick-search" value="" class="autocomplete" data-automcomplete-url="/projects/autocomplete.js?jump=issues" autocomplete="off" /></div><div class="drdn-items projects selection"></div><div class="drdn-items all-projects selection"><a href="/projects?jump=issues">All Projects</a></div></div></div>
    </div>

    <h1><span class="current-project">Exiv2</span></h1>

    <div id="main-menu" class="tabs">
        <ul><li><a class="overview" href="/projects/exiv2">Overview</a></li><li><a class="activity" href="/projects/exiv2/activity">Activity</a></li><li><a class="roadmap" href="/projects/exiv2/roadmap">Roadmap</a></li><li><a class="issues selected" href="/projects/exiv2/issues">Issues</a></li><li><a class="news" href="/projects/exiv2/news">News</a></li><li><a class="wiki" href="/projects/exiv2/wiki">Wiki</a></li><li><a class="boards" href="/projects/exiv2/boards">Forums</a></li><li><a class="repository" href="/projects/exiv2/repository">Repository</a></li></ul>
        <div class="tabs-buttons" style="display:none;">
            <button class="tab-left" onclick="moveTabLeft(this); return false;"></button>
            <button class="tab-right" onclick="moveTabRight(this); return false;"></button>
        </div>
    </div>
</div>

<div id="main" class="">
    <div id="sidebar">
          <h3>Issues</h3>

<ul>
<li><a href="/projects/exiv2/issues?set_filter=1">View all issues</a></li>
<li><a href="/projects/exiv2/issues/report">Summary</a></li>

</ul>









        
    </div>

    <div id="content">
        
        <div class="contextual">





</div>


<h2>Support #990</h2>

<div class="issue tracker-3 status-5 priority-4 priority-default closed details">

  <div class="gravatar-with-child">
    
    
  </div>

<div class="subject">
<div><h3>Get tag type from key</h3></div>
</div>
        <p class="author">
        Added by <a class="user active" href="/users/360">Thomas Beutlich</a> <a title="05 Sep 2014 12:31" href="/projects/exiv2/activity?from=2014-09-05">about 7 years</a> ago.
        Updated <a title="21 Jun 2015 16:42" href="/projects/exiv2/activity?from=2015-06-21">over 6 years</a> ago.
        </p>

<div class="attributes">
<div class="splitcontent"><div class="splitcontentleft"><div class="status attribute"><div class="label">Status:</div><div class="value">Closed</div></div><div class="priority attribute"><div class="label">Priority:</div><div class="value">Normal</div></div><div class="assigned-to attribute"><div class="label">Assignee:</div><div class="value"><a class="user active" href="/users/53">Andreas Huggel</a></div></div><div class="category attribute"><div class="label">Category:</div><div class="value">design</div></div><div class="fixed-version attribute"><div class="label">Target version:</div><div class="value"><a title="17 May 2015" href="/versions/51">0.25</a></div></div></div><div class="splitcontentleft"><div class="start-date attribute"><div class="label">Start date:</div><div class="value">05 Sep 2014</div></div><div class="due-date attribute"><div class="label">Due date:</div><div class="value"></div></div><div class="progress attribute"><div class="label">% Done:</div><div class="value"><table class="progress progress-0"><tr><td style="width: 100%;" class="todo"></td></tr></table><p class="percent">0%</p></div></div><div class="estimated-hours attribute"><div class="label">Estimated time:</div><div class="value"></div></div></div></div>


</div>

<hr />
<div class="description">
  <div class="contextual">
  
  </div>

  <p><strong>Description</strong></p>
  <div class="wiki">
  <p>In the addmodel sample there is the type knowledge given at compile time e.g. tag <em>Exif.Image.PrimaryChromaticities</em> is of tag type <code>Exiv2::URationalValue</code>. Now assume that only the key name is given but the tag type is not known a priori. Is there any chance to retrieve the type info from the <code>TagInfo</code> structure?</p>
  </div>
</div>







</div>




<div id="history">
<h3>History</h3>
  <div id="change-2899" class="journal has-notes has-details">
    <div id="note-1">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-1" class="journal-link">#1</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="05 Sep 2014 13:55" href="/projects/exiv2/activity?from=2014-09-05">about 7 years</a> ago
      <span id="journal-2899-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Category</strong> set to <i>design</i></li>
       <li><strong>Status</strong> changed from <i>New</i> to <i>Assigned</i></li>
       <li><strong>Assignee</strong> set to <i>Robin Mills</i></li>
       <li><strong>Target version</strong> set to <i>0.25</i></li>
    </ul>
    <div id="journal-2899-notes" class="wiki"><p>Thomas</p>


	<p>Can you help me to understand your expectation here.  Are you requesting an option for Exiv2(.exe) to list all known tags and their data types?   Currently, exiv2(.exe) reports data type and value.  However it only lists tag, type and value when used in an image.</p>


	<p>Or do you want something changed in addmoddel.cpp  to report data type?</p>


	<p>Robin</p></div>
    </div>
  </div>
  
  <div id="change-2901" class="journal has-notes">
    <div id="note-2">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-2" class="journal-link">#2</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/360">Thomas Beutlich</a> <a title="06 Sep 2014 00:32" href="/projects/exiv2/activity?from=2014-09-06">about 7 years</a> ago
      <span id="journal-2901-private_notes" class=""></span>
    </h4>

    <div id="journal-2901-notes" class="wiki"><p>Robin,</p>


	<p>what I would need is the tag type of any tag (not yet necessary in the image) at run-time. In the addmodel sample there is redundant knowledge that tag <em>Exif.Image.PrimaryChromaticities</em> is of tag type <code>Exiv2::URationalValue</code>. But say a user wants to add any tag at rum-time how do I find out its tag type? Basically I then need to write a switch/case on the tag type to consider all different types. Is this possible?</p>


	<p>Regards,<br />Thomas</p></div>
    </div>
  </div>
  
  <div id="change-2902" class="journal has-notes">
    <div id="note-3">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-3" class="journal-link">#3</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/53">Andreas Huggel</a> <a title="06 Sep 2014 01:32" href="/projects/exiv2/activity?from=2014-09-06">about 7 years</a> ago
      <span id="journal-2902-private_notes" class=""></span>
    </h4>

    <div id="journal-2902-notes" class="wiki"><p>Thomas, I think you're looking for <a href="http://www.exiv2.org/doc/classExiv2_1_1ExifKey.html#483892a376d7cb58d2a02a037b8f4c63" class="external">ExifKey::defaultTypeId()</a>. For your example (user wants to add tag at run-time but doesn't know its type) you don't need to use that though:</p>


	<p><code>exifData["Exif.Image.PrimaryChromaticities"] = "1"</code></p>


	<p>creates an <a href="http://www.exiv2.org/doc/classExiv2_1_1Exifdatum.html" class="external">Exifdatum</a> without a value and the assignment operator calls <a href="http://www.exiv2.org/doc/classExiv2_1_1Exifdatum.html#0fc1f52444c8d7026265f6b327197c47" class="external">Exifdatum::setValue()</a>, which creates a value of the default type for the Exifdatum.</p>


	<p>Andreas</p></div>
    </div>
  </div>
  
  <div id="change-2907" class="journal has-notes">
    <div id="note-4">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-4" class="journal-link">#4</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/360">Thomas Beutlich</a> <a title="09 Sep 2014 12:50" href="/projects/exiv2/activity?from=2014-09-09">about 7 years</a> ago
      <span id="journal-2907-private_notes" class=""></span>
    </h4>

    <div id="journal-2907-notes" class="wiki"><p>Indeed, that is what I was looking for. Thank you!</p>


<pre>
Exiv2::ExifKey key = Exiv2::ExifKey("Exif.Image.PrimaryChromaticities");
Exiv2::TypeId typeId = key.defaultTypeId();
</pre>

	<p>Ticket can be closed.</p></div>
    </div>
  </div>
  
  <div id="change-2908" class="journal has-notes has-details">
    <div id="note-5">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-5" class="journal-link">#5</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="09 Sep 2014 14:06" href="/projects/exiv2/activity?from=2014-09-09">about 7 years</a> ago
      <span id="journal-2908-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>Assigned</i> to <i>Resolved</i></li>
       <li><strong>Assignee</strong> changed from <i>Robin Mills</i> to <i>Andreas Huggel</i></li>
    </ul>
    <div id="journal-2908-notes" class="wiki"><p>I'm going to mark this as "Resolved".  It'll be Closed during review as part of the v0.25 release process.</p>


	<p>I've also assigned this to Andreas as he's the guy who's provided the solution.  Thanks, Andreas.</p></div>
    </div>
  </div>
  
  <div id="change-3890" class="journal has-details">
    <div id="note-6">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-6" class="journal-link">#6</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/53">Andreas Huggel</a> <a title="21 Jun 2015 16:41" href="/projects/exiv2/activity?from=2015-06-21">over 6 years</a> ago
      <span id="journal-3890-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>Resolved</i> to <i>Closed</i></li>
    </ul>
    
    </div>
  </div>
  


</div>

<div style="clear: both;"></div>
<div class="contextual">





</div>


<div style="clear: both;"></div>


<p class="other-formats">Also available in:  <span><a class="atom" rel="nofollow" href="/issues/990.atom">Atom</a></span>
  <span><a class="pdf" rel="nofollow" href="/issues/990.pdf">PDF</a></span>
</p>





        
        <div style="clear:both;"></div>
    </div>
</div>
</div>

<div id="ajax-indicator" style="display:none;"><span>Loading...</span></div>
<div id="ajax-modal" style="display:none;"></div>

<div id="footer">
  <div class="bgl"><div class="bgr">
    Powered by <a href="https://www.redmine.org/">Redmine</a> &copy; 2006-2018 Jean-Philippe Lang
  </div></div>
</div>
</div>
</div>

</body>
</html>
