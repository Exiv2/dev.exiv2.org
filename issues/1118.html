<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<title>Feature #1118: Add support for ZEISS Loxia 2/50 lens - Exiv2</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="description" content="Redmine" />
<meta name="keywords" content="issue,bug,tracker" />
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="dt0/Rct+c2aIYLmkl4TuDnQBWV1MGoVRM7pKHLyGQ3mUkJSquQS/Zt0EpqgoU+I9S5MNJL35JOvOmtqU/7+kFg==" />
<link rel='shortcut icon' href='/favicon.ico?1550767427' />
<link rel="stylesheet" media="all" href="/stylesheets/jquery/jquery-ui-1.11.0.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/application.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/responsive.css?1550767427" />

<script src="/javascripts/jquery-1.11.1-ui-1.11.0-ujs-4.3.1.js?1550767427"></script>
<script src="/javascripts/application.js?1550767427"></script>
<script src="/javascripts/responsive.js?1550767427"></script>
<script>
//<![CDATA[
$(window).load(function(){ warnLeavingUnsaved('The current page contains unsaved text that will be lost if you leave this page.'); });
//]]>
</script>


<!-- page specific tags -->
    <link rel="alternate" type="application/atom+xml" title="Exiv2 - Feature #1118: Add support for ZEISS Loxia 2/50 lens" href="https://dev.exiv2.org/issues/1118.atom" />
<script src="/javascripts/context_menu.js?1550767427"></script><link rel="stylesheet" media="screen" href="/stylesheets/context_menu.css?1550767427" /></head>
<body class="project-exiv2 has-main-menu controller-issues action-show avatars-off">

<div id="wrapper">

<div class="flyout-menu js-flyout-menu">


        <div class="flyout-menu__search">
            <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
            <input type="hidden" name="issues" value="1" />
            <label class="search-magnifier search-magnifier--flyout" for="flyout-search">&#9906;</label>
            <input type="text" name="q" id="flyout-search" class="small js-search-input" placeholder="Search" />
</form>        </div>


        <h3>Project</h3>
        <span class="js-project-menu"></span>

    <h3>General</h3>
    <span class="js-general-menu"></span>

    <span class="js-sidebar flyout-menu__sidebar"></span>

    <h3>Profile</h3>
    <span class="js-profile-menu"></span>

</div>

<div id="wrapper2">
<div id="wrapper3">
<div id="top-menu">
    <div id="account">
        <ul><li><a class="login" href="/login">Sign in</a></li></ul>    </div>
    
    <ul><li><a class="home" href="/">Home</a></li><li><a class="projects" href="/projects">Projects</a></li><li><a class="help" href="https://www.redmine.org/guide">Help</a></li></ul></div>

<div id="header">

    <a href="#" class="mobile-toggle-button js-flyout-menu-toggle-button"></a>

    <div id="quick-search">
        <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
        <input type="hidden" name="scope" />
        <input type="hidden" name="issues" value="1" />
        <label for='q'>
          <a accesskey="4" href="/projects/exiv2/search">Search</a>:
        </label>
        <input type="text" name="q" id="q" size="20" class="small" accesskey="f" />
</form>        <div id="project-jump" class="drdn"><span class="drdn-trigger">Exiv2</span><div class="drdn-content"><div class="quick-search"><input type="text" name="q" id="projects-quick-search" value="" class="autocomplete" data-automcomplete-url="/projects/autocomplete.js?jump=issues" autocomplete="off" /></div><div class="drdn-items projects selection"></div><div class="drdn-items all-projects selection"><a href="/projects?jump=issues">All Projects</a></div></div></div>
    </div>

    <h1><span class="current-project">Exiv2</span></h1>

    <div id="main-menu" class="tabs">
        <ul><li><a class="overview" href="/projects/exiv2">Overview</a></li><li><a class="activity" href="/projects/exiv2/activity">Activity</a></li><li><a class="roadmap" href="/projects/exiv2/roadmap">Roadmap</a></li><li><a class="issues selected" href="/projects/exiv2/issues">Issues</a></li><li><a class="news" href="/projects/exiv2/news">News</a></li><li><a class="wiki" href="/projects/exiv2/wiki">Wiki</a></li><li><a class="boards" href="/projects/exiv2/boards">Forums</a></li><li><a class="repository" href="/projects/exiv2/repository">Repository</a></li></ul>
        <div class="tabs-buttons" style="display:none;">
            <button class="tab-left" onclick="moveTabLeft(this); return false;"></button>
            <button class="tab-right" onclick="moveTabRight(this); return false;"></button>
        </div>
    </div>
</div>

<div id="main" class="">
    <div id="sidebar">
          <h3>Issues</h3>

<ul>
<li><a href="/projects/exiv2/issues?set_filter=1">View all issues</a></li>
<li><a href="/projects/exiv2/issues/report">Summary</a></li>

</ul>









        
    </div>

    <div id="content">
        
        <div class="contextual">





</div>


<h2>Feature #1118</h2>

<div class="issue tracker-2 status-5 priority-4 priority-default closed details">

  <div class="gravatar-with-child">
    
    
  </div>

<div class="subject">
<div><h3>Add support for ZEISS Loxia 2/50 lens</h3></div>
</div>
        <p class="author">
        Added by <a class="user active" href="/users/4517">Eugen Neu</a> <a title="19 Sep 2015 07:11" href="/projects/exiv2/activity?from=2015-09-19">about 6 years</a> ago.
        Updated <a title="06 Dec 2015 21:12" href="/projects/exiv2/activity?from=2015-12-06">almost 6 years</a> ago.
        </p>

<div class="attributes">
<div class="splitcontent"><div class="splitcontentleft"><div class="status attribute"><div class="label">Status:</div><div class="value">Closed</div></div><div class="priority attribute"><div class="label">Priority:</div><div class="value">Normal</div></div><div class="assigned-to attribute"><div class="label">Assignee:</div><div class="value"><a class="user active" href="/users/119">Robin Mills</a></div></div><div class="category attribute"><div class="label">Category:</div><div class="value">lens</div></div><div class="fixed-version attribute"><div class="label">Target version:</div><div class="value"><a title="28 Apr 2017" href="/versions/52">0.26</a></div></div></div><div class="splitcontentleft"><div class="start-date attribute"><div class="label">Start date:</div><div class="value">19 Sep 2015</div></div><div class="due-date attribute"><div class="label">Due date:</div><div class="value"></div></div><div class="progress attribute"><div class="label">% Done:</div><div class="value"><table class="progress progress-100"><tr><td style="width: 100%;" class="closed" title="100%"></td></tr></table><p class="percent">100%</p></div></div><div class="estimated-hours attribute"><div class="label">Estimated time:</div><div class="value">2.00 h</div></div></div></div>


</div>

<hr />
<div class="description">
  <div class="contextual">
  
  </div>

  <p><strong>Description</strong></p>
  <div class="wiki">
  <p>Hi,</p>


	<p>I am using a ZEISS Loxia 2/50 lens on a Sony Alpha 7 II (ILCE-7M2) body. The lens seems not to be supported by my currently installed version (0.24 on Ubuntu 15.04) and I could not find an entry in the current source code for it. Find below the necessary information and a sample jpeg. If there is anything else I could try or provide, I would be glad to help.</p>


	<p>Kind regards,<br />Eugen</p>


	<p>exiv2 output from raw file:<br />$ exiv2 -pt DSC00479.ARW |grep -ai lens<br />Exif.Sony2.LensID                            Long        1  E-Mount, T-Mount, Other Lens or No Lens<br />Exif.Photo.LensSpecification                 Rational    4  500/10 500/10 20/10 20/10<br />Exif.Photo.LensModel                         Ascii      10  E 50mm F2</p>


	<p>exiv2 output from jpeg file:<br />exiv2 -pt LRG_DSC00972.JPG| grep -ai lens<br />Warning: Directory Sony1, entry 0x0000 has unknown Exif (TIFF) type 0; setting type size 1.<br />Warning: Directory Sony1, entry 0x0000 has unknown Exif (TIFF) type 0; setting type size 1.<br />Exif.Sony1.LensID                            Long        1  E-Mount, T-Mount, Other Lens or No Lens<br />Exif.Photo.LensSpecification                 Rational    4  500/10 500/10 20/10 20/10<br />Exif.Photo.LensModel                         Ascii      10  E 50mm F2</p>


	<p>Lens name:<br />ZEISS Loxia 2/50</p>


	<p>Link to product page:<br /><a class="external" href="http://www.zeiss.com/camera-lenses/en_de/camera_lenses/loxia/loxia250.html">http://www.zeiss.com/camera-lenses/en_de/camera_lenses/loxia/loxia250.html</a></p>
  </div>
</div>
  <hr />
  <p><strong>Files</strong></p>
  <div class="attachments">
<div class="contextual">
  
</div>
<table>
<tr>
  <td>
    <a class="icon icon-attachment" href="/attachments/834">LRG_DSC00972.JPG</a>    <span class="size">(525 KB)</span>
    <a class="icon-only icon-download" title="Download" href="/attachments/download/834/LRG_DSC00972.JPG">LRG_DSC00972.JPG</a>  </td>
  <td></td>
  <td>
      <span class="author">Eugen Neu, 19 Sep 2015 07:11</span>
  </td>
  <td>
  </td>
</tr>
</table>
</div>








</div>




<div id="history">
<h3>History</h3>
  <div id="change-4229" class="journal has-notes has-details">
    <div id="note-1">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-1" class="journal-link">#1</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="19 Sep 2015 09:37" href="/projects/exiv2/activity?from=2015-09-19">about 6 years</a> ago
      <span id="journal-4229-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>New</i> to <i>Assigned</i></li>
       <li><strong>Assignee</strong> set to <i>Robin Mills</i></li>
       <li><strong>Target version</strong> set to <i>0.26</i></li>
       <li><strong>% Done</strong> changed from <i>0</i> to <i>50</i></li>
    </ul>
    <div id="journal-4229-notes" class="wiki"><p>Thanks for reporting this and providing the sample JPG.  And congrats on your new camera and lens.  My neighbour has that camera and says its wonderful.</p>


	<p>I'm using the current trunk:<pre>644 rmills@rmillsmbp:~/gnu/exiv2/trunk $ exiv2 --verbose --version --grep svn --grep version
exiv2 0.25 001900 (64 bit build)
version=4.2.1 Compatible Apple LLVM 7.0.0 (clang-700.0.72)
svn=3947
id=$Id: version.cpp 3931 2015-09-08 13:01:05Z robinwmills $ </pre>I've run your file with the -pv and -pt options.  -pv = print 'vanilla values' -pt = print 'translated'.</p>


	<p>'Vanilla values' means we present raw data.<pre>646 rmills@rmillsmbp:~/gnu/exiv2/trunk $ exiv2 -pv --grep Lens http://dev.exiv2.org/attachments/download/834/LRG_DSC00972.JPG 
Warning: Directory Sony1, entry 0x0000 has unknown Exif (TIFF) type 0; setting type size 1.
Warning: Directory Sony1, entry 0x0000 has unknown Exif (TIFF) type 0; setting type size 1.
0xb027 Sony1        LensID                      Long        1  65535
0xa432 Photo        LensSpecification           Rational    4  500/10 500/10 20/10 20/10
0xa434 Photo        LensModel                   Ascii      10  E 50mm F2
647 rmills@rmillsmbp:~/gnu/exiv2/trunk $ </pre>'Translated' means we pass values through a presentation filter to make them more human readable.<pre>645 rmills@rmillsmbp:~/gnu/exiv2/trunk $ exiv2 -pt --grep Lens http://dev.exiv2.org/attachments/download/834/LRG_DSC00972.JPG 
Warning: Directory Sony1, entry 0x0000 has unknown Exif (TIFF) type 0; setting type size 1.
Warning: Directory Sony1, entry 0x0000 has unknown Exif (TIFF) type 0; setting type size 1.
Exif.Sony1.LensID                            Long        1  Manual lens
Exif.Photo.LensSpecification                 Rational    4  500/10 500/10 20/10 20/10
Exif.Photo.LensModel                         Ascii      10  E 50mm F2</pre>So it seems:</p>


	<p>Exif.Sony1.LensID = 65535 = "Manual lens" <br />Long 65535 == SShort -1, it's a kind of "don't know, or not a Sony Lens"</p>


	<p>Exif.Photo.LensModel is an Ascii string of 10 bytes that your camera wrote.<br />Perhaps E = ZEISS</p>


	<p>Exif.Photo.LensSpecification                 Rational    4  500/10 500/10 20/10 20/10<br />Exif uses rational to represent a floating point number.  500/10 = 50.0, 20/10 = 2.0<br />This is an array of 4 Rationals which record min/max Fnumbers and Focal length for the lens .  The code in tags.cpp says: <pre>TagInfo(0xa432, "LensSpecification", N_("Lens Specification"),
                N_("This tag notes minimum focal length, maximum focal length, " 
                "minimum F number in the minimum focal length, and minimum F number " 
                "in the maximum focal length, which are specification information " 
                "for the lens that was used in photography. When the minimum F " 
                "number is unknown, the notation is 0/0"),
                exifId, otherTags, unsignedRational, 4, printValue),</pre>Our wonderful contributor Niels has been looking after our MakerNote support for several years and has recently started a college course in addition to his full-time demanding job.  I will take on support for MakerNotes, however  this is my first case in this part of the code.  I don't really think I can take further action on this.</p>


	<p>Perhaps Niels or Andreas will step into this and provide a solution.</p></div>
    </div>
  </div>
  
  <div id="change-4230" class="journal has-notes has-details">
    <div id="note-2">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-2" class="journal-link">#2</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="19 Sep 2015 09:59" href="/projects/exiv2/activity?from=2015-09-19">about 6 years</a> ago
      <span id="journal-4230-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>% Done</strong> changed from <i>50</i> to <i>100</i></li>
       <li><strong>Estimated time</strong> set to <i>2.00 h</i></li>
    </ul>
    <div id="journal-4230-notes" class="wiki"><p>I've downloaded the latest version of Phil's wonderful exiftool (v10.02) and here's the output:<pre>512 rmills@rmillsmbp:~/gnu/exiv2/trunk $ exiftool -all LRG_DSC00972.JPG | grep -e Lens -e F
File Name                       : LRG_DSC00972.JPG
File Size                       : 525 kB
File Modification Date/Time     : 2015:09:19 10:48:47+01:00
File Access Date/Time           : 2015:09:19 10:56:50+01:00
File Inode Change Date/Time     : 2015:09:19 10:48:47+01:00
File Permissions                : rw-r--r--
File Type                       : JPEG
File Type Extension             : jpg
F Number                        : 4.0
Flash                           : Off, Did not fire
Focal Length                    : 50.0 mm
Flashpix Version                : 0100
Interoperability Index          : R98 - DCF basic file (sRGB)
File Source                     : Digital Camera
Focal Length In 35mm Format     : 50 mm
Lens Info                       : 50mm f/2
Lens Model                      : E 50mm F2
MPF Version                     : 0100
MP Image Flags                  : Representative image
MP Image Format                 : JPEG
Scale Factor To 35 mm Equivalent: 1.0
Field Of View                   : 39.6 deg
Focal Length                    : 50.0 mm (35 mm equivalent: 50.0 mm)
513 rmills@rmillsmbp:~/gnu/exiv2/trunk $ </pre>As you can see, exiftool also reports E 50mm F2.</p></div>
    </div>
  </div>
  
  <div id="change-4245" class="journal has-notes">
    <div id="note-3">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-3" class="journal-link">#3</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4517">Eugen Neu</a> <a title="21 Sep 2015 18:20" href="/projects/exiv2/activity?from=2015-09-21">about 6 years</a> ago
      <span id="journal-4245-private_notes" class=""></span>
    </h4>

    <div id="journal-4245-notes" class="wiki"><p>Dear Robin,</p>


	<p>first of all thank you for the very fast reply and for your work! I'm not sure if I understand your last update correctly. Does this mean that everything is fine, no additional steps are necessary and the lens will just report as "E 50mm F2" in the future? Or did you add something to the code and it will be released with 0.26?</p>


	<p>I looked up exiftool and the lens name and found the following:</p>


	<p>6553.37    = Zeiss Loxia 50mm F2<br /><a class="external" href="http://www.sno.phy.queensu.ca/~phil/exiftool/TagNames/Sony.html">http://www.sno.phy.queensu.ca/~phil/exiftool/TagNames/Sony.html</a></p>


	<p>However, I am new to the combination of digital photography and open source software. Therefore I am still in the "learning phase" and try to understand how all the different tools (exiv2, exiftool, darktable) are interconnected and how this is related to MakerNote (file format?) and what has to happen to make everything work together. Sorry, if the answer to my question is pretty obvious.</p>


	<p>Kind regards,<br />Eugen</p></div>
    </div>
  </div>
  
  <div id="change-4246" class="journal has-notes">
    <div id="note-4">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-4" class="journal-link">#4</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="21 Sep 2015 19:40" href="/projects/exiv2/activity?from=2015-09-21">about 6 years</a> ago
      <span id="journal-4246-private_notes" class=""></span>
    </h4>

    <div id="journal-4246-notes" class="wiki"><p>Well, what I was trying to say is "exiftool and exiv2" are reporting the same information and therefore I do not intend further action.<pre>$ exiftool -ver
10.02
$ exiftool LRG_DSC00972.JPG | grep -i Lens
Lens Info                       : 50mm f/2
Lens Model                      : E 50mm F2
$ exiv2 -pt -g Lens LRG_DSC00972.JPG 2&gt;/dev/null
Exif.Sony1.LensID                            Long        1  Manual lens
Exif.Photo.LensSpecification                 Rational    4  500/10 500/10 20/10 20/10
Exif.Photo.LensModel                         Ascii      10  E 50mm F2
$ </pre>Your discovery on this page <a class="external" href="http://www.sno.phy.queensu.ca/~phil/exiftool/TagNames/Sony.html">http://www.sno.phy.queensu.ca/~phil/exiftool/TagNames/Sony.html</a> of: <pre>6553.37    = Zeiss Loxia 50mm F2</pre>The page does say: <em>"Special logic is employed to identify the attached lens when a Metabones Canon EF adapter is used."</em></p>


	<p>Do you have output from exiftool which reports a Zeiss lens, or do you also get <em><strong>"Lens Model                      : E 50mm F2"</strong></em> ?</p>


	<p>Although I've been contributing to Exiv2 for 7 years, this is my first dive into this part of the code.  So we're learning together!</p>


	<p><em><strong>Exiv2, darktable and exiftool</strong></em></p>


	<p><strong>Exiv2</strong> is a command-line application <em>exiv2</em> and a library <em>libexiv2</em>.  The code is written in portable C++.<br /><strong>darktable</strong> use <em>libexiv2</em> as a shared library.  <em>darktable</em> and <em>exiv2</em> will normally report the same metadata.<br /><strong>exiftool</strong> is a <em>command-line utility</em> and <em>Perl library</em>.  The underlying implementation technology is quite different.  Generally, <em>exiftool</em> leads the metadata community.  It's very good when you have perl on the system.</p>


	<p><em>exiv2</em> and <em>exiftool</em> are not competitors. <a class="external" href="http://dev.exiv2.org/projects/exiv2/wiki/How_does_Exiv2_compare_to_Exiftool">http://dev.exiv2.org/projects/exiv2/wiki/How_does_Exiv2_compare_to_Exiftool</a></p>


	<p><em><strong>MakerNote</strong></em><br />The MakerNote is a single Exif tag (0x927c) into which the manufacturer can store anything he wishes in a format of his choosing.  <a class="external" href="http://www.exiv2.org/makernote.html">http://www.exiv2.org/makernote.html</a></p>


	<p>For you:<pre>$ exiv2 -pt -g Maker LRG_DSC00972.JPG 2&gt;/dev/null
Exif.Photo.MakerNote                         Undefined 37228  (Binary value suppressed)
Exif.MakerNote.Offset                        Long        1  922
Exif.MakerNote.ByteOrder                     Ascii       3  II
$</pre>You have 37k bytes of stuff.  libexiv2 (and exiftool) know how to decode most of that data and report it as Exif.Sony1 tags:<pre>$ exiv2 -pt -g Sony LRG_DSC00972.JPG 2&gt;/dev/null
Exif.Sony1.Contrast                          SLong       1  0
Exif.Sony1.Saturation                        SLong       1  0
Exif.Sony1.AutoHDR                           Long        1  Off
Exif.Sony1.ShotInfo                          Undefined 390  (Binary value suppressed)
Exif.Sony1.ColorReproduction                 Ascii      16  Standard
Exif.Sony1.ColorTemperature                  Long        1  0
Exif.Sony1.ColorCompensationFilter           Long        1  0
Exif.Sony1.SceneMode                         Long        1  Standard
Exif.Sony1.ZoneMatching                      Long        1  ISO Setting Used
Exif.Sony1.DynamicRangeOptimizer             Long        1  Auto
Exif.Sony1.ImageStabilization                Long        1  On
Exif.Sony1.ColorMode                         Long        1  Standard
Exif.Sony1.FullImageSize                     Long        2  4000 x 6000
Exif.Sony1.PreviewImageSize                  Long        2  1080 x 1616
Exif.Sony1.FileFormat                        Byte        4  (3 3 1 0)
Exif.Sony1.Quality                           Long        1  Standard
Exif.Sony1.FlashExposureComp                 SRational   1  0 EV
Exif.Sony1.WhiteBalanceFineTune              Long        1  0
Exif.Sony1.WhiteBalance                      Long        1  Auto
Exif.Sony1.SonyModelID                       Short       1  (340)
Exif.Sony1.LensID                            Long        1  Manual lens
Exif.Sony1.ExposureMode                      Short       1  Aperture priority
Exif.Sony1.JPEGQuality                       Short       1  n/a
Exif.Sony1.FlashLevel                        SShort      1  Normal
Exif.Sony1.ReleaseMode                       Short       1  Burst
Exif.Sony1.SequenceNumber                    Short       1  (1)
Exif.Sony1.AntiBlur                          Short       1  On (Shooting)
Exif.Sony1.DynamicRangeOptimizer             Short       1  Standard
Exif.Sony1.IntelligentAuto                   Short       1  Off
Exif.Sony1.WhiteBalance2                     Short       1  Auto
542 rmills@rmillsmbp:~/gnu/exiv2/trunk $ </pre></p></div>
    </div>
  </div>
  
  <div id="change-4273" class="journal has-notes">
    <div id="note-5">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-5" class="journal-link">#5</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4517">Eugen Neu</a> <a title="23 Sep 2015 19:20" href="/projects/exiv2/activity?from=2015-09-23">about 6 years</a> ago
      <span id="journal-4273-private_notes" class=""></span>
    </h4>

    <div id="journal-4273-notes" class="wiki"><p>Robin,</p>


	<p>thank you once again for your detailed description. I really appreciate that.</p>


<blockquote>

	<p>Do you have output from exiftool which reports a Zeiss lens, or do you also get "Lens Model : E 50mm F2" ?</p>


</blockquote>

	<p>No, I get exactly the same exiftool output as you do.</p>


<blockquote>

	<p><em>"Special logic is employed to identify the attached lens when a Metabones Canon EF adapter is used."</em></p>


</blockquote>

	<p>I think this comment only concerns lenses that are adapted to the camera using a Metabones adapter. However, the Loxia is a native E-Mount lens.</p>


	<p>Actually, I am perfectly fine with the camera reporting as "E 50mm F2". The reason why I thought this would be a problem in the first place was because I loaded a raw file into darktable and when I changed to the "lens correction" module, the lens was reported as</p>


<pre>
E 50mm F2
camera/lens not found - please select manually
</pre>

	<p>I looked it up and came to this page<br /><a class="external" href="https://www.darktable.org/2015/02/on-lens-detection-and-correction/">https://www.darktable.org/2015/02/on-lens-detection-and-correction/</a><br />where it says at some point that one should fill a feature request here.</p>


	<p>I found one additional interesting point when I compared the output from the raw file with the output of the jpg file. There seem to be some additional "Lens Type" fields which are not present in the jpg file. exiv2 does not report them. Unfortunately, the raw files are larger than the file size limit. Hence, I can't attach one.</p>


<pre>
$ ./exiftool -ver
10.02
$ ./exiftool -all DSC00479.ARW|grep -i Lens
Lens Type                       : E-Mount, T-Mount, Other Lens or no lens
Lens Spec                       : E 50mm F2
Lens Zoom Position              : 0%
Lens Mount 2                    : E-mount
Lens Type 3                     : Unknown (49232)
Lens E-mount Version            : 1.50
Lens Firmware Version           : Ver.02
Lens Mount                      : E-mount
Lens Format                     : Full-frame
Lens Type 2                     : Unknown (49232)
Lens Spec Features              : E
Lens Info                       : 50mm f/2
Lens Model                      : E 50mm F2
Lens ID                         : E 50mm F2
</pre>

<pre>
$ exiv2 -V
exiv2 0.24 001800 (64 bit build)
$ exiv2 -pt -g Lens DSC00479.ARW
Exif.Sony2.LensID                            Long        1  E-Mount, T-Mount, Other Lens or No Lens
Exif.Photo.LensSpecification                 Rational    4  500/10 500/10 20/10 20/10
Exif.Photo.LensModel                         Ascii      10  E 50mm F2
</pre>

	<p>I am not sure how to proceed from here. Do you thing it would be helpful to know what some commercial tools or the Sony Image Data Converter reports? I don't have installed them but I could try to find out. Or should we leave it that way for the moment and I contact the darktable-user mailing list and try to find out why the camera/lens is not detected properly?</p>


	<p>Kind regards<br />Eugen</p></div>
    </div>
  </div>
  
  <div id="change-4274" class="journal has-notes">
    <div id="note-6">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-6" class="journal-link">#6</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="23 Sep 2015 19:41" href="/projects/exiv2/activity?from=2015-09-23">about 6 years</a> ago
      <span id="journal-4274-private_notes" class=""></span>
    </h4>

    <div id="journal-4274-notes" class="wiki"><p>Eugen:</p>


	<p>Can I ask the obvious question "What's bothering you, buddy?".  Do you want darktable to recognise your equipment precisely?</p>


	<p>There are a couple of interesting fields in the exiftool "Raw" file output:<pre>Lens Type 2                     : Unknown (49232)
Lens Spec Features              : E</pre>Can you send me the raw file, please?  There's a file-size limit in Redmine.  I think it's 20mb.  If it's bigger than that, can you share it on Dropbox (or anyother file-sharing service).  As a last resort, email it to me: <a class="email" href="mailto:robin@clanmills.com">robin@clanmills.com</a></p>


	<p>You could try Adobe's DNG (free) convertor to convert raw files into "Digital Negative".  I believe DNG is a kind catch all "Grand Unified File Format for Raw Digital Images".  And try that in darktable.</p>


	<p>I don't have any suggestions about how to proceed with marketable.  I occasionally have dealings with the darktable engineers, however I've never really used the application.  I've never heard of Sony Image Data Convertor.</p></div>
    </div>
  </div>
  
  <div id="change-4290" class="journal has-notes">
    <div id="note-7">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-7" class="journal-link">#7</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4517">Eugen Neu</a> <a title="25 Sep 2015 07:27" href="/projects/exiv2/activity?from=2015-09-25">about 6 years</a> ago
      <span id="journal-4290-private_notes" class=""></span>
    </h4>

    <div id="journal-4290-notes" class="wiki"><p>Robin,</p>


	<p>this made me laugh. :) Good question. I just wanted to try the lens correction function in darktable, did notice that the camera/lens combo was not supported, one thing came after the other and now I am here. I will check Adobe DNG. Sony's Image Data Convertor is the raw processor the camera comes with. I will try a few things over the next days and will send an update when I have gathered enough infos. In the mean time find bellow the link to a raw file:</p>


	<p><a class="external" href="https://spideroak.com/share/NZSXK/sample/home/neu/Pictures/share/DSC00479.ARW">https://spideroak.com/share/NZSXK/sample/home/neu/Pictures/share/DSC00479.ARW</a></p>


	<p>Kind regards,<br />Eugen</p></div>
    </div>
  </div>
  
  <div id="change-4292" class="journal has-notes">
    <div id="note-8">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-8" class="journal-link">#8</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="25 Sep 2015 08:55" href="/projects/exiv2/activity?from=2015-09-25">about 6 years</a> ago
      <span id="journal-4292-private_notes" class=""></span>
    </h4>

    <div id="journal-4292-notes" class="wiki"><p>Thanks for the file.  On Wednesday I had a look on the darktable web site and I see they dumped me (exiv2) with the responsibility for their metadata support.  I'd do the same if I were working on darktable.  Metadata is a minor part of darktable and they are wrapping our code in their GUI.</p>


	<p>We've had a discussion, both on the darktable forum and ours, about providing a file for camera/accessory updates.  This would let you "tweak" our recognition.  So you could define 65535 to be your lens.  And new cameras/accessories could be added between releases of Exiv2.  We'd like to do this project, however we don't have a volunteer and I'm fully loaded for v0.26.</p>


	<p>I dumped your file with the -pS option in v0.25 (-pS = print Structure).  I asked for the file to run this command.  There's nothing interesting hidden in the file.<pre>$ exiv2 -pS https://spideroak.com/share/NZSXK/sample/home/neu/Pictures/share/DSC00479.ARW
STRUCTURE OF TIFF FILE (II): https://spideroak.com/share/NZSXK/sample/home/neu/Pictures/share/DSC00479.ARW
 address |    tag                           |      type |    count |   offset | value
      10 | 0x00fe NewSubfileType            |      LONG |        1 |        1 | 1
      22 | 0x0103 Compression               |     SHORT |        1 |        6 | 6
      34 | 0x010e ImageDescription          |     ASCII |       32 |      230 |                                
      46 | 0x010f Make                      |     ASCII |        5 |      262 | SONY
      58 | 0x0110 Model                     |     ASCII |        9 |      268 | ILCE-7M2
      70 | 0x0112 Orientation               |     SHORT |        1 |        8 | 8
      82 | 0x011a XResolution               |  RATIONAL |        1 |      278 | 278/0
      94 | 0x011b YResolution               |  RATIONAL |        1 |      286 | 286/0
     106 | 0x0128 ResolutionUnit            |     SHORT |        1 |        2 | 2
     118 | 0x0131 Software                  |     ASCII |       15 |      294 | ILCE-7M2 v1.21
     130 | 0x0132 DateTime                  |     ASCII |       20 |      310 | 2015:09:14 14:46:54
     142 | 0x014a SubIFDs                   |      LONG |        1 |   147600 | 147600
     154 | 0x0201 JPEGInterchangeFormat     |      LONG |        1 |   148642 | 148642
     166 | 0x0202 JPEGInterchangeFormatLeng |      LONG |        1 |  1114012 | 1114012
     178 | 0x0213 YCbCrPositioning          |     SHORT |        1 |        2 | 2
     190 | 0x8769 ExifTag                   |      LONG |        1 |      436 | 436
     202 | 0xc4a5 PrintImageMatching        | UNDEFINED |      106 |      330 |  ...
     214 | 0xc634 DNGPrivateData            |      BYTE |        4 |    53658 | ...r
   38428 | 0x00fe NewSubfileType            |      LONG |        1 |        1 | 1
   38440 | 0x0103 Compression               |     SHORT |        1 |        6 | 6
   38452 | 0x010e ImageDescription          |     ASCII |       32 |    38600 |                                
   38464 | 0x010f Make                      |     ASCII |        5 |    38632 | SONY
   38476 | 0x0110 Model                     |     ASCII |        9 |    38638 | ILCE-7M2
   38488 | 0x0112 Orientation               |     SHORT |        1 |        8 | 8
   38500 | 0x011a XResolution               |  RATIONAL |        1 |    38648 | 38648/0
   38512 | 0x011b YResolution               |  RATIONAL |        1 |    38656 | 38656/0
   38524 | 0x0128 ResolutionUnit            |     SHORT |        1 |        2 | 2
   38536 | 0x0131 Software                  |     ASCII |       15 |    38664 | ILCE-7M2 v1.21
   38548 | 0x0132 DateTime                  |     ASCII |       20 |    38680 | 2015:09:14 14:46:54
   38560 | 0x0201 JPEGInterchangeFormat     |      LONG |        1 |    38700 | 38700
   38572 | 0x0202 JPEGInterchangeFormatLeng |      LONG |        1 |    13365 | 13365
   38584 | 0x0213 YCbCrPositioning          |     SHORT |        1 |        2 | 2
$ </pre>You will of course notice that Exiv2 can read files using https.  Good, eh?  RemoteIO (http, https, ftp, sftp, ssh) is an optional feature of Exiv2 that was added in v0.25.  By default, it's not available (although http is always available). To build webready support, build Exiv2 as follows:<pre>$ make config
$ ./configure --enable-webready
$ make -j
$ sudo make install</pre>This requires libcurl, openssl and libssh which you should download, build and install.</p></div>
    </div>
  </div>
  
  <div id="change-4294" class="journal has-notes">
    <div id="note-9">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-9" class="journal-link">#9</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="25 Sep 2015 09:42" href="/projects/exiv2/activity?from=2015-09-25">about 6 years</a> ago
      <span id="journal-4294-private_notes" class=""></span>
    </h4>

    <div id="journal-4294-notes" class="wiki"><p>I like your photo.  Pyracantha and ivy I believe.  I was cutting my neighbour's pyracantha last weekend.  Damn thing suddenly moved and ripped my finger.  I needed 4 stitches at the emergency room.</p></div>
    </div>
  </div>
  
  <div id="change-4363" class="journal has-notes has-details">
    <div id="note-10">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-10" class="journal-link">#10</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="10 Oct 2015 09:48" href="/projects/exiv2/activity?from=2015-10-10">about 6 years</a> ago
      <span id="journal-4363-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>Assigned</i> to <i>Resolved</i></li>
    </ul>
    <div id="journal-4363-notes" class="wiki"><p>I'm going to mark this "Resolved" which means that I do not intend to do any more work on this.  Of course, if you provide further information it will be investigated.  This issue will be closed during review before shipping v0.26.</p></div>
    </div>
  </div>
  
  <div id="change-4534" class="journal has-details">
    <div id="note-11">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-11" class="journal-link">#11</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="06 Dec 2015 21:12" href="/projects/exiv2/activity?from=2015-12-06">almost 6 years</a> ago
      <span id="journal-4534-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>Resolved</i> to <i>Closed</i></li>
    </ul>
    
    </div>
  </div>
  


</div>

<div style="clear: both;"></div>
<div class="contextual">





</div>


<div style="clear: both;"></div>


<p class="other-formats">Also available in:  <span><a class="atom" rel="nofollow" href="/issues/1118.atom">Atom</a></span>
  <span><a class="pdf" rel="nofollow" href="/issues/1118.pdf">PDF</a></span>
</p>





        
        <div style="clear:both;"></div>
    </div>
</div>
</div>

<div id="ajax-indicator" style="display:none;"><span>Loading...</span></div>
<div id="ajax-modal" style="display:none;"></div>

<div id="footer">
  <div class="bgl"><div class="bgr">
    Powered by <a href="https://www.redmine.org/">Redmine</a> &copy; 2006-2018 Jean-Philippe Lang
  </div></div>
</div>
</div>
</div>

</body>
</html>
