<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<title>Feature #1149: Support for metadata in FLIR One thermal images (jpeg) - Exiv2</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="description" content="Redmine" />
<meta name="keywords" content="issue,bug,tracker" />
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="1drbTlrLq5ifLnFtgnCRlX0FhZ/v86mSsedn9uuoDD43l3ChKLFnmMpKbmE9p52mQpfR5h4QCChMx/d+qJHrUQ==" />
<link rel='shortcut icon' href='/favicon.ico?1550767427' />
<link rel="stylesheet" media="all" href="/stylesheets/jquery/jquery-ui-1.11.0.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/application.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/responsive.css?1550767427" />

<script src="/javascripts/jquery-1.11.1-ui-1.11.0-ujs-4.3.1.js?1550767427"></script>
<script src="/javascripts/application.js?1550767427"></script>
<script src="/javascripts/responsive.js?1550767427"></script>
<script>
//<![CDATA[
$(window).load(function(){ warnLeavingUnsaved('The current page contains unsaved text that will be lost if you leave this page.'); });
//]]>
</script>


<!-- page specific tags -->
    <link rel="alternate" type="application/atom+xml" title="Exiv2 - Feature #1149: Support for metadata in FLIR One thermal images (jpeg)" href="https://dev.exiv2.org/issues/1149.atom" />
<script src="/javascripts/context_menu.js?1550767427"></script><link rel="stylesheet" media="screen" href="/stylesheets/context_menu.css?1550767427" /></head>
<body class="project-exiv2 has-main-menu controller-issues action-show avatars-off">

<div id="wrapper">

<div class="flyout-menu js-flyout-menu">


        <div class="flyout-menu__search">
            <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
            <input type="hidden" name="issues" value="1" />
            <label class="search-magnifier search-magnifier--flyout" for="flyout-search">&#9906;</label>
            <input type="text" name="q" id="flyout-search" class="small js-search-input" placeholder="Search" />
</form>        </div>


        <h3>Project</h3>
        <span class="js-project-menu"></span>

    <h3>General</h3>
    <span class="js-general-menu"></span>

    <span class="js-sidebar flyout-menu__sidebar"></span>

    <h3>Profile</h3>
    <span class="js-profile-menu"></span>

</div>

<div id="wrapper2">
<div id="wrapper3">
<div id="top-menu">
    <div id="account">
        <ul><li><a class="login" href="/login">Sign in</a></li></ul>    </div>
    
    <ul><li><a class="home" href="/">Home</a></li><li><a class="projects" href="/projects">Projects</a></li><li><a class="help" href="https://www.redmine.org/guide">Help</a></li></ul></div>

<div id="header">

    <a href="#" class="mobile-toggle-button js-flyout-menu-toggle-button"></a>

    <div id="quick-search">
        <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
        <input type="hidden" name="scope" />
        <input type="hidden" name="issues" value="1" />
        <label for='q'>
          <a accesskey="4" href="/projects/exiv2/search">Search</a>:
        </label>
        <input type="text" name="q" id="q" size="20" class="small" accesskey="f" />
</form>        <div id="project-jump" class="drdn"><span class="drdn-trigger">Exiv2</span><div class="drdn-content"><div class="quick-search"><input type="text" name="q" id="projects-quick-search" value="" class="autocomplete" data-automcomplete-url="/projects/autocomplete.js?jump=issues" autocomplete="off" /></div><div class="drdn-items projects selection"></div><div class="drdn-items all-projects selection"><a href="/projects?jump=issues">All Projects</a></div></div></div>
    </div>

    <h1><span class="current-project">Exiv2</span></h1>

    <div id="main-menu" class="tabs">
        <ul><li><a class="overview" href="/projects/exiv2">Overview</a></li><li><a class="activity" href="/projects/exiv2/activity">Activity</a></li><li><a class="roadmap" href="/projects/exiv2/roadmap">Roadmap</a></li><li><a class="issues selected" href="/projects/exiv2/issues">Issues</a></li><li><a class="news" href="/projects/exiv2/news">News</a></li><li><a class="wiki" href="/projects/exiv2/wiki">Wiki</a></li><li><a class="boards" href="/projects/exiv2/boards">Forums</a></li><li><a class="repository" href="/projects/exiv2/repository">Repository</a></li></ul>
        <div class="tabs-buttons" style="display:none;">
            <button class="tab-left" onclick="moveTabLeft(this); return false;"></button>
            <button class="tab-right" onclick="moveTabRight(this); return false;"></button>
        </div>
    </div>
</div>

<div id="main" class="">
    <div id="sidebar">
          <h3>Issues</h3>

<ul>
<li><a href="/projects/exiv2/issues?set_filter=1">View all issues</a></li>
<li><a href="/projects/exiv2/issues/report">Summary</a></li>

</ul>









        
    </div>

    <div id="content">
        
        <div class="contextual">





</div>


<h2>Feature #1149</h2>

<div class="issue tracker-2 status-1 priority-4 priority-default details">
    <div class="next-prev-links contextual">
      <a title="#1104" accesskey="p" href="/issues/1104">« Previous</a> |
        <span class="position">
          <a href="/issues?f%5B%5D=status_id&amp;op%5Bstatus_id%5D=o&amp;page=1&amp;per_page=100&amp;set_filter=1&amp;sort=updated_on%3Adesc%2Cstatus%2Cid%3Adesc&amp;v%5Bstatus_id%5D%5B%5D=">71 of 78</a>
        </span> |
      <a title="#814" accesskey="n" href="/issues/814">Next »</a>
    </div>

  <div class="gravatar-with-child">
    
    
  </div>

<div class="subject">
<div><h3>Support for metadata in FLIR One thermal images (jpeg)</h3></div>
</div>
        <p class="author">
        Added by <a class="user active" href="/users/4413">Max Pozdeev</a> <a title="09 Jan 2016 11:34" href="/projects/exiv2/activity?from=2016-01-09">almost 6 years</a> ago.
        Updated <a title="10 Jan 2016 14:43" href="/projects/exiv2/activity?from=2016-01-10">almost 6 years</a> ago.
        </p>

<div class="attributes">
<div class="splitcontent"><div class="splitcontentleft"><div class="status attribute"><div class="label">Status:</div><div class="value">New</div></div><div class="priority attribute"><div class="label">Priority:</div><div class="value">Normal</div></div><div class="assigned-to attribute"><div class="label">Assignee:</div><div class="value">-</div></div><div class="category attribute"><div class="label">Category:</div><div class="value">metadata</div></div><div class="fixed-version attribute"><div class="label">Target version:</div><div class="value"><a href="/versions/31">1.0</a></div></div></div><div class="splitcontentleft"><div class="start-date attribute"><div class="label">Start date:</div><div class="value">09 Jan 2016</div></div><div class="due-date attribute"><div class="label">Due date:</div><div class="value"></div></div><div class="progress attribute"><div class="label">% Done:</div><div class="value"><table class="progress progress-0"><tr><td style="width: 100%;" class="todo"></td></tr></table><p class="percent">0%</p></div></div><div class="estimated-hours attribute"><div class="label">Estimated time:</div><div class="value"></div></div></div></div>


</div>

<hr />
<div class="description">
  <div class="contextual">
  
  </div>

  <p><strong>Description</strong></p>
  <div class="wiki">
  <p>Attached image is produced by FLIR One 2nd gen for Ios.<br />Exiftool shows more information (like Relative Humidity, Field Of View, Palette Name, ...)</p>
  </div>
</div>
  <hr />
  <p><strong>Files</strong></p>
  <div class="attachments">
<div class="contextual">
  
</div>
<table>
<tr>
  <td>
    <a class="icon icon-attachment" href="/attachments/881">flir.jpeg</a>    <span class="size">(363 KB)</span>
    <a class="icon-only icon-download" title="Download" href="/attachments/download/881/flir.jpeg">flir.jpeg</a>  </td>
  <td></td>
  <td>
      <span class="author">Max Pozdeev, 09 Jan 2016 11:34</span>
  </td>
  <td>
  </td>
</tr>
</table>
</div>







<hr />
<div id="relations">
<div class="contextual">
</div>

<p><strong>Related issues</strong></p>

<form data-cm-url="/issues/context_menu" action="/issues/1149" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><input type="hidden" name="authenticity_token" value="TttsCnMYSFELPuLUy7/SPz60Vpt8x063hBRJCuQqETaslsflAWKEUV5a/dh0aN4MASYC4o0k7w15NNmCpxP2WQ==" />
  <table class="list issues odd-even"><tr id="relation-198" class="issue hascontextmenu issue tracker-1 status-5 priority-4 priority-default closed"><td class="checkbox"><input type="checkbox" name="ids[]" value="1150" /></td><td class="subject" style="width: 50%">Related to Exiv2 - <a class="issue tracker-1 status-5 priority-4 priority-default closed" href="/issues/1150">Bug #1150</a>: Unable to build for Mac OSX 10.6</td><td class="status">Closed</td><td class="start_date">09 Jan 2016</td><td class="due_date"></td><td class="done_ratio"><table class="progress progress-100"><tr><td style="width: 100%;" class="closed" title="100%"></td></tr></table><p class="percent"></p></td><td class="buttons"><a title="Actions" class="icon-only icon-actions js-contextmenu" href="#">Actions</a></td></tr></table>
</form>
<form class="new_relation" id="new-relation-form" style="display: none;" action="/issues/1149/relations" accept-charset="UTF-8" data-remote="true" method="post"><input name="utf8" type="hidden" value="&#x2713;" />


<p><select onchange="setPredecessorFieldsVisibility();" name="relation[relation_type]" id="relation_relation_type"><option selected="selected" value="relates">Related to</option>
<option value="duplicates">Is duplicate of</option>
<option value="duplicated">Has duplicate</option>
<option value="blocks">Blocks</option>
<option value="blocked">Blocked by</option>
<option value="precedes">Precedes</option>
<option value="follows">Follows</option>
<option value="copied_to">Copied to</option>
<option value="copied_from">Copied from</option></select>
Issue #<input size="10" type="text" name="relation[issue_to_id]" id="relation_issue_to_id" />
<span id="predecessor_fields" style="display:none;">
Delay: <input size="3" type="text" name="relation[delay]" id="relation_delay" /> days
</span>
<input type="submit" name="commit" value="Add" data-disable-with="Add" />
<a href="#" onclick="$(&quot;#new-relation-form&quot;).hide();; return false;">Cancel</a>
</p>

<script>
//<![CDATA[
observeAutocompleteField('relation_issue_to_id', '/issues/auto_complete?issue_id=1149&project_id=exiv2&scope=all')
//]]>
</script>

<script>
//<![CDATA[
setPredecessorFieldsVisibility();
//]]>
</script>

</form>
</div>

</div>

<div id="issue-changesets">
<h3>Associated revisions</h3>
    <div class="changeset">
    <p><a title="Revision 4178" href="/projects/exiv2/repository/exiv2/revisions/4178">Revision 4178</a>
        (<a href="/projects/exiv2/repository/exiv2/revisions/4178/diff">diff</a>)
        <br />
        <span class="author">Added by <a class="user active" href="/users/119">Robin Mills</a> <a title="10 Jan 2016 14:41" href="/projects/exiv2/activity?from=2016-01-10">almost 6 years</a> ago</span></p>
    <div class="wiki changeset-comments">
        <p><a class="issue tracker-2 status-1 priority-4 priority-default" title="Feature: Support for metadata in FLIR One thermal images (jpeg) (New)" href="/issues/1149">#1149</a>.  Modify -pR to find and report the tiff in an APP1/FLIR segment.</p>
    </div>
    </div>
    <div class="changeset">
    <p><a title="Revision 4179" href="/projects/exiv2/repository/exiv2/revisions/4179">Revision 4179</a>
        (<a href="/projects/exiv2/repository/exiv2/revisions/4179/diff">diff</a>)
        <br />
        <span class="author">Added by <a class="user active" href="/users/119">Robin Mills</a> <a title="10 Jan 2016 19:02" href="/projects/exiv2/activity?from=2016-01-10">almost 6 years</a> ago</span></p>
    <div class="wiki changeset-comments">
        <p><a class="issue tracker-2 status-1 priority-4 priority-default" title="Feature: Support for metadata in FLIR One thermal images (jpeg) (New)" href="/issues/1149">#1149</a>.  Added fff.h (from plir.com) and code strengthening.</p>
    </div>
    </div>

</div>



<div id="history">
<h3>History</h3>
  <div id="change-4660" class="journal has-notes has-details">
    <div id="note-1">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-1" class="journal-link">#1</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="09 Jan 2016 11:44" href="/projects/exiv2/activity?from=2016-01-09">almost 6 years</a> ago
      <span id="journal-4660-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Category</strong> set to <i>metadata</i></li>
       <li><strong>Target version</strong> set to <i>1.0</i></li>
    </ul>
    <div id="journal-4660-notes" class="wiki"><p>Thanks for reporting this.  This is an interesting issue.  I see there are a couple of APP1 segments in your file that contain this data.<pre>$ exiv2 -pS http://dev.exiv2.org/attachments/download/881/flir.jpeg
STRUCTURE OF JPEG FILE: http://dev.exiv2.org/attachments/download/881/flir.jpeg
 address | marker     | length  | data
       2 | 0xd8 SOI   |       0 
       4 | 0xe0 APP0  |      16 | JFIF............
      22 | 0xe1 APP1  |    3986 | Exif..II*......................
    4010 | 0xe1 APP1  |   65534 | FLIR....FFF....................d
   69546 | 0xe1 APP1  |   34618 | FLIR....|..z.....0...a.$.. xt.!.
  104166 | 0xdb DQT   |      67 
  104235 | 0xdb DQT   |      67 
  104304 | 0xc0 SOF0  |      17 
  104323 | 0xc4 DHT   |      31 
  104356 | 0xc4 DHT   |     181 
  104539 | 0xc4 DHT   |      31 
  104572 | 0xc4 DHT   |     181 
  104755 | 0xda SOS   |      12 
545 rmills@rmillsmbp:~/gnu/exiv2/trunk $ </pre>I'm going to assign this to Target Version 1.0 as I don't have time to deal with this for v0.26.  <a class="external" href="http://dev.exiv2.org/projects/exiv2/news">http://dev.exiv2.org/projects/exiv2/news</a>  It's quite likely that I'll deal with this for v0.27, however I haven't started scheduling v0.27 yet.</p>


	<p>What is FLIR?</p></div>
    </div>
  </div>
  
  <div id="change-4661" class="journal has-notes">
    <div id="note-2">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-2" class="journal-link">#2</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4413">Max Pozdeev</a> <a title="09 Jan 2016 12:08" href="/projects/exiv2/activity?from=2016-01-09">almost 6 years</a> ago
      <span id="journal-4661-private_notes" class=""></span>
    </h4>

    <div id="journal-4661-notes" class="wiki"><p>FLIR is a manufacturer of thermal imaging devices, <a class="external" href="http://www.flir.com">www.flir.com</a><br />FLIR ONE - <a class="external" href="http://www.flir.com/flirone/">http://www.flir.com/flirone/</a></p></div>
    </div>
  </div>
  
  <div id="change-4663" class="journal has-notes">
    <div id="note-3">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-3" class="journal-link">#3</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="09 Jan 2016 14:04" href="/projects/exiv2/activity?from=2016-01-09">almost 6 years</a> ago
      <span id="journal-4663-private_notes" class=""></span>
    </h4>

    <div id="journal-4663-notes" class="wiki"><p>Can you tell me a little more about this to help me understand how the importance of FLIR.  Are there millions of those devices in use, or is this an obscure and unusual device.</p>


	<p>We have outstanding item on the schedule for v0.26 to use exiftool for lens detection when we don't know what the lens is.  My plan is to run exiftool as a webservice.  So, it might be possible to take advantage in v0.26.  I've looked at the webpages on Phil's ExifTool web site.  It looks like quite an undertaking to deal with this.  However the web-service approach might be a useful "stop gap" in the short term.  <a class="external" href="http://dev.exiv2.org/issues/1034">http://dev.exiv2.org/issues/1034</a></p></div>
    </div>
  </div>
  
  <div id="change-4664" class="journal has-notes">
    <div id="note-4">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-4" class="journal-link">#4</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4413">Max Pozdeev</a> <a title="09 Jan 2016 14:39" href="/projects/exiv2/activity?from=2016-01-09">almost 6 years</a> ago
      <span id="journal-4664-private_notes" class=""></span>
    </h4>

    <div id="journal-4664-notes" class="wiki"><p>Thermal cameras are very specific and used mostly by professionals because of their price.  But recently the market shows "cheap" thermal cameras like FLIR ONE so the number of such devices will grow. <br />I'm not a professional user of such devices but still I think this is a low-priority feature as for now.</p>


	<p>As for me the web-service is good solution but I will not use it often. I use exiv2 as a library for fast processing in my app (I have commercial license).</p>


	<p>P.S. Just for info. I can't build the last revision from trunk with -stdlib=libstdc++ flag. Should I create new issue?</p></div>
    </div>
  </div>
  
  <div id="change-4665" class="journal has-notes">
    <div id="note-5">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-5" class="journal-link">#5</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="09 Jan 2016 14:53" href="/projects/exiv2/activity?from=2016-01-09">almost 6 years</a> ago
      <span id="journal-4665-private_notes" class=""></span>
    </h4>

    <div id="journal-4665-notes" class="wiki"><p>Thanks for the insight.  The web service will be a fallback and there will be an API to enable/disable it.</p>


	<p>Please create an issue about the build and I'll deal with it.  Thanks for letting me know. The build matrix is very large and, although we have a build server, we cannot build every possible build configuration.  So I have to rely on users to let me know when an untested build configuration is broken.</p></div>
    </div>
  </div>
  
  <div id="change-4672" class="journal has-notes">
    <div id="note-6">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-6" class="journal-link">#6</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="10 Jan 2016 14:43" href="/projects/exiv2/activity?from=2016-01-10">almost 6 years</a> ago
      <span id="journal-4672-private_notes" class=""></span>
    </h4>

    <div id="journal-4672-notes" class="wiki"><p><a class="changeset" title="#1149.  Modify -pR to find and report the tiff in an APP1/FLIR segment." href="/projects/exiv2/repository/exiv2/revisions/4178">r4178</a> I've "tweaked" the code in <strong><code>exiv2 -pR</code></strong> to find the TIFF in the APP1/FLIR segment.  This reveals:<pre>    4010 | 0xe1 APP1  |   65534 | FLIR....FFF....................d
  STRUCTURE OF TIFF FILE (II): MemIo
   address |    tag                           |      type |    count |   offset | value
        10 | 0x010f Make                      |     ASCII |       16 |      122 | FLIR Systems AB
        22 | 0x0110 Model                     |     ASCII |        5 |      138 | FLIR
        34 | 0x0112 Orientation               |     SHORT |        1 |        0 | 0
        46 | 0x011a XResolution               |  RATIONAL |        1 |      144 | 144/0
        58 | 0x011b YResolution               |  RATIONAL |        1 |      152 | 152/0
        70 | 0x0128 ResolutionUnit            |     SHORT |        1 |        2 | 2
        82 | 0x0131 Software                  |     ASCII |        2 |       42 | .
        94 | 0x0213 YCbCrPositioning          |     SHORT |        1 |        1 | 1
       106 | 0x8769 ExifTag                   |      LONG |        1 |      160 | 160
    STRUCTURE OF TIFF FILE (II): MemIo
     address |    tag                           |      type |    count |   offset | value
         162 | 0x9000 ExifVersion               |     ASCII |        4 |808596016 | STRU
         174 | 0x9101 ComponentsConfiguration   | UNDEFINED |        4 | 16909056 | 
         186 | 0x927c MakerNote                 | UNDEFINED |       54 |      274 |  ...
         198 | 0xa000 FlashpixVersion           |     ASCII |        4 |808464688 | ...
         210 | 0xa001 ColorSpace                |     SHORT |        1 |        1 | 1
         222 | 0xa002 PixelXDimension           |     SHORT |        1 |      640 | 640
         234 | 0xa003 PixelYDimension           |     SHORT |        1 |      480 | 480
         246 | 0xa404 DigitalZoomRatio          |  RATIONAL |        1 |      328 | 328/0
         258 | 0xa420 ImageUniqueID             |     ASCII |        1 |      336 | 
    END MemIo
       340 | 0x0103 Compression               |     SHORT |        1 |        6 | 6
       352 | 0x0112 Orientation               |     SHORT |        1 |        0 | 0
       364 | 0x011a XResolution               |  RATIONAL |        1 |      428 | 428/0
       376 | 0x011b YResolution               |  RATIONAL |        1 |      436 | 436/0
       388 | 0x0128 ResolutionUnit            |     SHORT |        1 |        2 | 2
       400 | 0x0201 JPEGInterchangeFormat     |      LONG |        1 |      444 | 444
       412 | 0x0202 JPEGInterchangeFormatLeng |      LONG |        1 |     1971 | 1971</pre>Some tag labels are wrong, however I can easily fix that.</p>


	<p>I downloaded the SDK from Flir.com.  The SDK is for iOS and Android.  The SDK is precompiled (.framework for iOS, .jar for Android).  The sample code is for creating apps for their device.  There doesn't appear to be anything to give us a quick start on the metadata.</p>


	<p>I've raised a query on their forum and perhaps somebody will help.  <a class="external" href="http://developer.flir.com/forums/topic/metadata-format/">http://developer.flir.com/forums/topic/metadata-format/</a></p>


	<p>Phil has published documentation:  <a class="external" href="http://owl.phy.queensu.ca/~phil/exiftool/TagNames/FLIR.html">http://owl.phy.queensu.ca/~phil/exiftool/TagNames/FLIR.html</a>  And there's beautiful Perl code to decode it here:  <a class="external" href="http://sourceforge.net/p/exiftool/code/ci/master/tree/lib/Image/ExifTool/FLIR.pm">http://sourceforge.net/p/exiftool/code/ci/master/tree/lib/Image/ExifTool/FLIR.pm</a></p></div>
    </div>
  </div>
  


</div>

<div style="clear: both;"></div>
<div class="contextual">





</div>


<div style="clear: both;"></div>


<p class="other-formats">Also available in:  <span><a class="atom" rel="nofollow" href="/issues/1149.atom">Atom</a></span>
  <span><a class="pdf" rel="nofollow" href="/issues/1149.pdf">PDF</a></span>
</p>





        
        <div style="clear:both;"></div>
    </div>
</div>
</div>

<div id="ajax-indicator" style="display:none;"><span>Loading...</span></div>
<div id="ajax-modal" style="display:none;"></div>

<div id="footer">
  <div class="bgl"><div class="bgr">
    Powered by <a href="https://www.redmine.org/">Redmine</a> &copy; 2006-2018 Jean-Philippe Lang
  </div></div>
</div>
</div>
</div>

</body>
</html>
