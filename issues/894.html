<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<title>Feature #894: Canon Highlight Tone Priority - Exiv2</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="description" content="Redmine" />
<meta name="keywords" content="issue,bug,tracker" />
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="+PNU2G0s1QIuCd349533yHejl3e/jXgrfAtbf5uMO+Iavv83H1YZAnttwvRISvv7SDHDDk5u2ZGBK8v32LXcjQ==" />
<link rel='shortcut icon' href='/favicon.ico?1550767427' />
<link rel="stylesheet" media="all" href="/stylesheets/jquery/jquery-ui-1.11.0.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/application.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/responsive.css?1550767427" />

<script src="/javascripts/jquery-1.11.1-ui-1.11.0-ujs-4.3.1.js?1550767427"></script>
<script src="/javascripts/application.js?1550767427"></script>
<script src="/javascripts/responsive.js?1550767427"></script>
<script>
//<![CDATA[
$(window).load(function(){ warnLeavingUnsaved('The current page contains unsaved text that will be lost if you leave this page.'); });
//]]>
</script>


<!-- page specific tags -->
    <link rel="alternate" type="application/atom+xml" title="Exiv2 - Feature #894: Canon Highlight Tone Priority" href="https://dev.exiv2.org/issues/894.atom" />
<script src="/javascripts/context_menu.js?1550767427"></script><link rel="stylesheet" media="screen" href="/stylesheets/context_menu.css?1550767427" /></head>
<body class="project-exiv2 has-main-menu controller-issues action-show avatars-off">

<div id="wrapper">

<div class="flyout-menu js-flyout-menu">


        <div class="flyout-menu__search">
            <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
            <input type="hidden" name="issues" value="1" />
            <label class="search-magnifier search-magnifier--flyout" for="flyout-search">&#9906;</label>
            <input type="text" name="q" id="flyout-search" class="small js-search-input" placeholder="Search" />
</form>        </div>


        <h3>Project</h3>
        <span class="js-project-menu"></span>

    <h3>General</h3>
    <span class="js-general-menu"></span>

    <span class="js-sidebar flyout-menu__sidebar"></span>

    <h3>Profile</h3>
    <span class="js-profile-menu"></span>

</div>

<div id="wrapper2">
<div id="wrapper3">
<div id="top-menu">
    <div id="account">
        <ul><li><a class="login" href="/login">Sign in</a></li></ul>    </div>
    
    <ul><li><a class="home" href="/">Home</a></li><li><a class="projects" href="/projects">Projects</a></li><li><a class="help" href="https://www.redmine.org/guide">Help</a></li></ul></div>

<div id="header">

    <a href="#" class="mobile-toggle-button js-flyout-menu-toggle-button"></a>

    <div id="quick-search">
        <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
        <input type="hidden" name="scope" />
        <input type="hidden" name="issues" value="1" />
        <label for='q'>
          <a accesskey="4" href="/projects/exiv2/search">Search</a>:
        </label>
        <input type="text" name="q" id="q" size="20" class="small" accesskey="f" />
</form>        <div id="project-jump" class="drdn"><span class="drdn-trigger">Exiv2</span><div class="drdn-content"><div class="quick-search"><input type="text" name="q" id="projects-quick-search" value="" class="autocomplete" data-automcomplete-url="/projects/autocomplete.js?jump=issues" autocomplete="off" /></div><div class="drdn-items projects selection"></div><div class="drdn-items all-projects selection"><a href="/projects?jump=issues">All Projects</a></div></div></div>
    </div>

    <h1><span class="current-project">Exiv2</span></h1>

    <div id="main-menu" class="tabs">
        <ul><li><a class="overview" href="/projects/exiv2">Overview</a></li><li><a class="activity" href="/projects/exiv2/activity">Activity</a></li><li><a class="roadmap" href="/projects/exiv2/roadmap">Roadmap</a></li><li><a class="issues selected" href="/projects/exiv2/issues">Issues</a></li><li><a class="news" href="/projects/exiv2/news">News</a></li><li><a class="wiki" href="/projects/exiv2/wiki">Wiki</a></li><li><a class="boards" href="/projects/exiv2/boards">Forums</a></li><li><a class="repository" href="/projects/exiv2/repository">Repository</a></li></ul>
        <div class="tabs-buttons" style="display:none;">
            <button class="tab-left" onclick="moveTabLeft(this); return false;"></button>
            <button class="tab-right" onclick="moveTabRight(this); return false;"></button>
        </div>
    </div>
</div>

<div id="main" class="">
    <div id="sidebar">
          <h3>Issues</h3>

<ul>
<li><a href="/projects/exiv2/issues?set_filter=1">View all issues</a></li>
<li><a href="/projects/exiv2/issues/report">Summary</a></li>

</ul>









        
    </div>

    <div id="content">
        
        <div class="contextual">





</div>


<h2>Feature #894</h2>

<div class="issue tracker-2 status-2 priority-4 priority-default details">
    <div class="next-prev-links contextual">
      <a title="#923" accesskey="p" href="/issues/923">« Previous</a> |
        <span class="position">
          <a href="/issues?f%5B%5D=status_id&amp;op%5Bstatus_id%5D=o&amp;page=1&amp;per_page=100&amp;set_filter=1&amp;sort=updated_on%3Adesc%2Csubject%2Cid%3Adesc&amp;v%5Bstatus_id%5D%5B%5D=">41 of 78</a>
        </span> |
      <a title="#1219" accesskey="n" href="/issues/1219">Next »</a>
    </div>

  <div class="gravatar-with-child">
    
    
  </div>

<div class="subject">
<div><h3>Canon Highlight Tone Priority</h3></div>
</div>
        <p class="author">
        Added by <a class="user active" href="/users/3420">Pascal de Bruijn</a> <a title="17 Mar 2013 11:07" href="/projects/exiv2/activity?from=2013-03-17">over 8 years</a> ago.
        Updated <a title="15 Sep 2016 17:06" href="/projects/exiv2/activity?from=2016-09-15">about 5 years</a> ago.
        </p>

<div class="attributes">
<div class="splitcontent"><div class="splitcontentleft"><div class="status attribute"><div class="label">Status:</div><div class="value">Assigned</div></div><div class="priority attribute"><div class="label">Priority:</div><div class="value">Normal</div></div><div class="assigned-to attribute"><div class="label">Assignee:</div><div class="value"><a class="user active" href="/users/4722">Ben Touchette</a></div></div><div class="category attribute"><div class="label">Category:</div><div class="value">exif</div></div><div class="fixed-version attribute"><div class="label">Target version:</div><div class="value"><a title="31 Dec 2020" href="/versions/54">0.28</a></div></div></div><div class="splitcontentleft"><div class="start-date attribute"><div class="label">Start date:</div><div class="value">17 Mar 2013</div></div><div class="due-date attribute"><div class="label">Due date:</div><div class="value"></div></div><div class="progress attribute"><div class="label">% Done:</div><div class="value"><table class="progress progress-50"><tr><td style="width: 50%;" class="closed" title="50%"></td><td style="width: 50%;" class="todo"></td></tr></table><p class="percent">50%</p></div></div><div class="estimated-hours attribute"><div class="label">Estimated time:</div><div class="value">10.00 h</div></div></div></div>


</div>

<hr />
<div class="description">
  <div class="contextual">
  
  </div>

  <p><strong>Description</strong></p>
  <div class="wiki">
  <p>Hi,</p>


	<p>Recent Canon camera's have a feature called Highlight Tone Priority (HTP), which is described as such:</p>


	<p>"Highlight tone priority shoots at an ISO speed one stop lower (1ev underexposure) then compensates for this in RAW processing."</p>


	<p>Currently it seems Exiv2 can't tell us if a file was shot with HTP On or Off.</p>


	<p><a class="external" href="http://files.pcode.nl/temp/HTP.CR2">http://files.pcode.nl/temp/HTP.CR2</a></p>


	<p>On a side note ExifTool apparently can read the HTP status:</p>


	<p>$ exiftool HTP.CR2 | grep -i highlight<br />Highlight Tone Priority         : Enable</p>


	<p>Regards,<br />Pascal de Bruijn</p>
  </div>
</div>
  <hr />
  <p><strong>Files</strong></p>
  <div class="attachments">
<div class="contextual">
  
</div>
<table>
<tr>
  <td>
    <a class="icon icon-attachment" href="/attachments/1063">894-5.diff</a>    <span class="size">(8.04 KB)</span>
    <a class="icon-only icon-download" title="Download" href="/attachments/download/1063/894-5.diff">894-5.diff</a>  </td>
  <td></td>
  <td>
      <span class="author">Ben Touchette, 15 Sep 2016 14:11</span>
  </td>
  <td>
  </td>
</tr>
</table>
</div>







<hr />
<div id="relations">
<div class="contextual">
</div>

<p><strong>Related issues</strong></p>

<form data-cm-url="/issues/context_menu" action="/issues/894" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><input type="hidden" name="authenticity_token" value="U5QGP9vrI7D2LAJLFA5JeDmKP7YtsKVr1jiUkHqYzwux2a3QqZHvsKNIHUer2UVLBhhrz9xTBNErGAQYOaEoZA==" />
  <table class="list issues odd-even"><tr id="relation-239" class="issue hascontextmenu issue tracker-2 status-2 priority-4 priority-default"><td class="checkbox"><input type="checkbox" name="ids[]" value="1219" /></td><td class="subject" style="width: 50%">Related to Exiv2 - <a class="issue tracker-2 status-2 priority-4 priority-default" href="/issues/1219">Feature #1219</a>: Adding Camera Temperature</td><td class="status">Assigned</td><td class="start_date">31 Aug 2016</td><td class="due_date"></td><td class="done_ratio"><table class="progress progress-30"><tr><td style="width: 30%;" class="closed" title="30%"></td><td style="width: 70%;" class="todo"></td></tr></table><p class="percent"></p></td><td class="buttons"><a title="Actions" class="icon-only icon-actions js-contextmenu" href="#">Actions</a></td></tr><tr id="relation-240" class="issue hascontextmenu issue tracker-1 status-2 priority-4 priority-default"><td class="checkbox"><input type="checkbox" name="ids[]" value="1203" /></td><td class="subject" style="width: 50%">Related to Exiv2 - <a class="issue tracker-1 status-2 priority-4 priority-default" href="/issues/1203">Bug #1203</a>: Exif.CanonCs.FocusContinuous reported as Short</td><td class="status">Assigned</td><td class="start_date">11 Aug 2016</td><td class="due_date"></td><td class="done_ratio"><table class="progress progress-0"><tr><td style="width: 100%;" class="todo"></td></tr></table><p class="percent"></p></td><td class="buttons"><a title="Actions" class="icon-only icon-actions js-contextmenu" href="#">Actions</a></td></tr></table>
</form>
<form class="new_relation" id="new-relation-form" style="display: none;" action="/issues/894/relations" accept-charset="UTF-8" data-remote="true" method="post"><input name="utf8" type="hidden" value="&#x2713;" />


<p><select onchange="setPredecessorFieldsVisibility();" name="relation[relation_type]" id="relation_relation_type"><option selected="selected" value="relates">Related to</option>
<option value="duplicates">Is duplicate of</option>
<option value="duplicated">Has duplicate</option>
<option value="blocks">Blocks</option>
<option value="blocked">Blocked by</option>
<option value="precedes">Precedes</option>
<option value="follows">Follows</option>
<option value="copied_to">Copied to</option>
<option value="copied_from">Copied from</option></select>
Issue #<input size="10" type="text" name="relation[issue_to_id]" id="relation_issue_to_id" />
<span id="predecessor_fields" style="display:none;">
Delay: <input size="3" type="text" name="relation[delay]" id="relation_delay" /> days
</span>
<input type="submit" name="commit" value="Add" data-disable-with="Add" />
<a href="#" onclick="$(&quot;#new-relation-form&quot;).hide();; return false;">Cancel</a>
</p>

<script>
//<![CDATA[
observeAutocompleteField('relation_issue_to_id', '/issues/auto_complete?issue_id=894&project_id=exiv2&scope=all')
//]]>
</script>

<script>
//<![CDATA[
setPredecessorFieldsVisibility();
//]]>
</script>

</form>
</div>

</div>




<div id="history">
<h3>History</h3>
  <div id="change-2478" class="journal has-notes has-details">
    <div id="note-1">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-1" class="journal-link">#1</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="22 May 2013 21:02" href="/projects/exiv2/activity?from=2013-05-22">over 8 years</a> ago
      <span id="journal-2478-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>New</i> to <i>Assigned</i></li>
       <li><strong>Assignee</strong> set to <i>Niels Kristian Bech Jensen</i></li>
       <li><strong>Priority</strong> changed from <i>Low</i> to <i>Normal</i></li>
       <li><strong>Target version</strong> set to <i>0.24</i></li>
    </ul>
    <div id="journal-2478-notes" class="wiki"><p>Neils</p>


	<p>May I ask you to take a look at this.  Pascal works on DarkTable - a really awesome open-source project.  I feel guilty that I haven't picked this up already.  I'm a little overwhelmed at the moment (especially with Google Summer of Code).  If you can't deal with this, please assign this back to me.</p>


	<p>Robin</p></div>
    </div>
  </div>
  
  <div id="change-2479" class="journal has-notes">
    <div id="note-2">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-2" class="journal-link">#2</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/134">Niels Kristian Bech Jensen</a> <a title="22 May 2013 21:51" href="/projects/exiv2/activity?from=2013-05-22">over 8 years</a> ago
      <span id="journal-2479-private_notes" class=""></span>
    </h4>

    <div id="journal-2479-notes" class="wiki"><p>Hi Robin.</p>


	<p>I have students up for final exams during the next month, so time is limited. I will look into this when exam season is over.</p>


	<p>Best regards,<br />Niels Kristian Bech Jensen</p></div>
    </div>
  </div>
  
  <div id="change-2480" class="journal has-notes">
    <div id="note-3">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-3" class="journal-link">#3</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/3420">Pascal de Bruijn</a> <a title="24 May 2013 09:33" href="/projects/exiv2/activity?from=2013-05-24">over 8 years</a> ago
      <span id="journal-2480-private_notes" class=""></span>
    </h4>

    <div id="journal-2480-notes" class="wiki"><p>No need for any guilt :)</p>


	<p>Being able to detect HTP isn't critical, but it would be nice too have, as it would allow us to automatically compensate for the cases where people either purposefully or accidentally enabled HTP.</p></div>
    </div>
  </div>
  
  <div id="change-2568" class="journal has-notes has-details">
    <div id="note-4">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-4" class="journal-link">#4</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="24 Jul 2013 15:49" href="/projects/exiv2/activity?from=2013-07-24">over 8 years</a> ago
      <span id="journal-2568-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Target version</strong> changed from <i>0.24</i> to <i>0.25</i></li>
    </ul>
    <div id="journal-2568-notes" class="wiki"><p>Deferred for 0.25.</p></div>
    </div>
  </div>
  
  <div id="change-3539" class="journal has-notes">
    <div id="note-5">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-5" class="journal-link">#5</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4035">Alan Pater</a> <a title="27 Apr 2015 19:12" href="/projects/exiv2/activity?from=2015-04-27">over 6 years</a> ago
      <span id="journal-3539-private_notes" class=""></span>
    </h4>

    <div id="journal-3539-notes" class="wiki"><p>Is there another sample file that can demonstrate this issue? Not even exiftool shows this field for the linked HTP.CR2 file.</p></div>
    </div>
  </div>
  
  <div id="change-3563" class="journal has-notes">
    <div id="note-6">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-6" class="journal-link">#6</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/3420">Pascal de Bruijn</a> <a title="28 Apr 2015 20:05" href="/projects/exiv2/activity?from=2015-04-28">over 6 years</a> ago
      <span id="journal-3563-private_notes" class=""></span>
    </h4>

    <div id="journal-3563-notes" class="wiki"><p>I think I accidentally deleted that file over time, I'll need to dig up a new sample soon. Stay tuned.</p></div>
    </div>
  </div>
  
  <div id="change-3784" class="journal has-details">
    <div id="note-7">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-7" class="journal-link">#7</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4035">Alan Pater</a> <a title="02 Jun 2015 23:22" href="/projects/exiv2/activity?from=2015-06-02">over 6 years</a> ago
      <span id="journal-3784-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Target version</strong> changed from <i>0.25</i> to <i>0.26</i></li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-3944" class="journal has-details">
    <div id="note-8">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-8" class="journal-link">#8</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/134">Niels Kristian Bech Jensen</a> <a title="22 Jun 2015 13:57" href="/projects/exiv2/activity?from=2015-06-22">over 6 years</a> ago
      <span id="journal-3944-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Assignee</strong> deleted (<del><i>Niels Kristian Bech Jensen</i></del>)</li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-5172" class="journal has-notes has-details">
    <div id="note-9">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-9" class="journal-link">#9</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="15 Jun 2016 08:00" href="/projects/exiv2/activity?from=2016-06-15">over 5 years</a> ago
      <span id="journal-5172-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Assignee</strong> set to <i>Robin Mills</i></li>
    </ul>
    <div id="journal-5172-notes" class="wiki"><p>Pascal</p>


	<p>Can you provide an image and I will investigate.  I'm closing on v0.26 at the end of June.  Now's the time.  tick tick tick ....</p>


	<p>Hope you're good.</p>


	<p>Robin</p></div>
    </div>
  </div>
  
  <div id="change-5185" class="journal has-notes">
    <div id="note-10">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-10" class="journal-link">#10</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/3420">Pascal de Bruijn</a> <a title="18 Jun 2016 16:20" href="/projects/exiv2/activity?from=2016-06-18">over 5 years</a> ago
      <span id="journal-5185-private_notes" class=""></span>
    </h4>

    <div id="journal-5185-notes" class="wiki"><p>So I don't own a Canon camera with HTP, but I asked around and I got permission to supply you with these:</p>


	<p>(from a 7D and a 5DmkII, courtesy of andabata)<br /><a class="external" href="http://shell.kees.nl/dt/">http://shell.kees.nl/dt/</a></p>


	<p>(from an 80D, courtesy of dabbill)<br /><a class="external" href="https://www.dropbox.com/sh/9ecn3zi3gfub7tx/AABzvKEBqPk7qglKuJdQKKBTa?dl=0">https://www.dropbox.com/sh/9ecn3zi3gfub7tx/AABzvKEBqPk7qglKuJdQKKBTa?dl=0</a></p></div>
    </div>
  </div>
  
  <div id="change-5578" class="journal has-notes has-details">
    <div id="note-11">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-11" class="journal-link">#11</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4722">Ben Touchette</a> <a title="15 Sep 2016 14:11" href="/projects/exiv2/activity?from=2016-09-15">about 5 years</a> ago
      <span id="journal-5578-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>File</strong> <a href="/attachments/1063">894-5.diff</a> <a class="icon-only icon-download" title="Download" href="/attachments/download/1063/894-5.diff">894-5.diff</a> added</li>
    </ul>
    <div id="journal-5578-notes" class="wiki"><p>Work in progress. Working on differentiating between models with and without highlight tone priority.</p></div>
    </div>
  </div>
  
  <div id="change-5581" class="journal has-notes has-details">
    <div id="note-12">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-12" class="journal-link">#12</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="15 Sep 2016 15:52" href="/projects/exiv2/activity?from=2016-09-15">about 5 years</a> ago
      <span id="journal-5581-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Assignee</strong> changed from <i>Robin Mills</i> to <i>Ben Touchette</i></li>
       <li><strong>Target version</strong> changed from <i>0.26</i> to <i>0.28</i></li>
       <li><strong>% Done</strong> changed from <i>0</i> to <i>50</i></li>
       <li><strong>Estimated time</strong> set to <i>10.00 h</i></li>
    </ul>
    <div id="journal-5581-notes" class="wiki"><p>Thanks for working on this, Ben.  I'm going to defer this for v0.27.  This issue has elements in common with <a class="issue tracker-1 status-2 priority-4 priority-default" title="Bug: Exif.CanonCs.FocusContinuous reported as Short (Assigned)" href="/issues/1203">#1203</a> and <a class="issue tracker-2 status-2 priority-4 priority-default" title="Feature: Adding Camera Temperature (Assigned)" href="/issues/1219">#1219</a>.</p>


	<p>Reading and writing those tags isn't simple and I've never worked in the MakerNote decode/encode code.  Raphael is working on <a class="issue tracker-2 status-2 priority-4 priority-default" title="Feature: Adding Camera Temperature (Assigned)" href="/issues/1219">#1219</a> and I think he's going to visit me in England in October.  We'll discuss all of these issues when he's here.  I know that Shridar is very anxious for <a class="issue tracker-1 status-2 priority-4 priority-default" title="Bug: Exif.CanonCs.FocusContinuous reported as Short (Assigned)" href="/issues/1203">#1203</a> to be included in v0.26.  It may be possible to include fixes for all three issues in v0.26, however the project is already at feature complete.</p></div>
    </div>
  </div>
  
  <div id="change-5582" class="journal has-notes">
    <div id="note-13">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-13" class="journal-link">#13</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="15 Sep 2016 16:25" href="/projects/exiv2/activity?from=2016-09-15">about 5 years</a> ago
      <span id="journal-5582-private_notes" class=""></span>
    </h4>

    <div id="journal-5582-notes" class="wiki"><p>I've built and reviewed your code.  What you have done looks about right to me.  It's reporting lots of metadata that has never seen the light of day before.  The following parts of the test suite have been disturbed by this:<pre>651 rmills@rmillsmbp:~/gnu/exiv2/trunk $ make tests | grep differ
Files test/tmp/bugfixes-test.out-stripped and trunk/test/data/bugfixes-test.out differ
Files test/tmp/exifdata-test.out and test/data/exifdata-test.out differ
Files test/tmp/exiv2-test.out and test/data/exiv2-test.out differ
Copy all tests......
Files test/tmp/table.jpg.c3tst and test/data/table.jpg.c3gd differ
Files test/tmp/smiley1.jpg.c3tst and test/data/smiley1.jpg.c3gd differ
Files test/tmp/write-test.out and test/data/write-test.out differ
652 rmills@rmillsmbp:~/gnu/exiv2/trunk $ </pre>We're going to have to defer this at the moment.</p>


	<p>Incidentally, I had to edit the patch to have it respected by SVN.  The preferred way to make a patch is to use:<pre>$ cd ~/gnu/exiv2/trunk
$ svn diff . &gt; foo.patch</pre>Thanks for working on this.</p></div>
    </div>
  </div>
  
  <div id="change-5583" class="journal has-notes">
    <div id="note-14">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-14" class="journal-link">#14</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4722">Ben Touchette</a> <a title="15 Sep 2016 17:06" href="/projects/exiv2/activity?from=2016-09-15">about 5 years</a> ago
      <span id="journal-5583-private_notes" class=""></span>
    </h4>

    <div id="journal-5583-notes" class="wiki"><p>Thanks and welcome, i concur for the deferment due to the number of issues to make this functional at this time.</p></div>
    </div>
  </div>
  


</div>

<div style="clear: both;"></div>
<div class="contextual">





</div>


<div style="clear: both;"></div>


<p class="other-formats">Also available in:  <span><a class="atom" rel="nofollow" href="/issues/894.atom">Atom</a></span>
  <span><a class="pdf" rel="nofollow" href="/issues/894.pdf">PDF</a></span>
</p>





        
        <div style="clear:both;"></div>
    </div>
</div>
</div>

<div id="ajax-indicator" style="display:none;"><span>Loading...</span></div>
<div id="ajax-modal" style="display:none;"></div>

<div id="footer">
  <div class="bgl"><div class="bgr">
    Powered by <a href="https://www.redmine.org/">Redmine</a> &copy; 2006-2018 Jean-Philippe Lang
  </div></div>
</div>
</div>
</div>

</body>
</html>
