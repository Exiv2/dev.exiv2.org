<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<title>Bug #897: New Compilation Warnings  - Exiv2</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="description" content="Redmine" />
<meta name="keywords" content="issue,bug,tracker" />
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="WNi0ZLOQgrDcgS9dgUudw8Wcwcqg0LKk7DwVKvVEgXe6lR+LwepOsInlMFE+nJHw+g6Vs1EzEx4RHIWitn1mGA==" />
<link rel='shortcut icon' href='/favicon.ico?1550767427' />
<link rel="stylesheet" media="all" href="/stylesheets/jquery/jquery-ui-1.11.0.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/application.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/responsive.css?1550767427" />

<script src="/javascripts/jquery-1.11.1-ui-1.11.0-ujs-4.3.1.js?1550767427"></script>
<script src="/javascripts/application.js?1550767427"></script>
<script src="/javascripts/responsive.js?1550767427"></script>
<script>
//<![CDATA[
$(window).load(function(){ warnLeavingUnsaved('The current page contains unsaved text that will be lost if you leave this page.'); });
//]]>
</script>


<!-- page specific tags -->
    <link rel="alternate" type="application/atom+xml" title="Exiv2 - Bug #897: New Compilation Warnings " href="https://dev.exiv2.org/issues/897.atom" />
<script src="/javascripts/context_menu.js?1550767427"></script><link rel="stylesheet" media="screen" href="/stylesheets/context_menu.css?1550767427" /></head>
<body class="project-exiv2 has-main-menu controller-issues action-show avatars-off">

<div id="wrapper">

<div class="flyout-menu js-flyout-menu">


        <div class="flyout-menu__search">
            <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
            <input type="hidden" name="issues" value="1" />
            <label class="search-magnifier search-magnifier--flyout" for="flyout-search">&#9906;</label>
            <input type="text" name="q" id="flyout-search" class="small js-search-input" placeholder="Search" />
</form>        </div>


        <h3>Project</h3>
        <span class="js-project-menu"></span>

    <h3>General</h3>
    <span class="js-general-menu"></span>

    <span class="js-sidebar flyout-menu__sidebar"></span>

    <h3>Profile</h3>
    <span class="js-profile-menu"></span>

</div>

<div id="wrapper2">
<div id="wrapper3">
<div id="top-menu">
    <div id="account">
        <ul><li><a class="login" href="/login">Sign in</a></li></ul>    </div>
    
    <ul><li><a class="home" href="/">Home</a></li><li><a class="projects" href="/projects">Projects</a></li><li><a class="help" href="https://www.redmine.org/guide">Help</a></li></ul></div>

<div id="header">

    <a href="#" class="mobile-toggle-button js-flyout-menu-toggle-button"></a>

    <div id="quick-search">
        <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
        <input type="hidden" name="scope" />
        <input type="hidden" name="issues" value="1" />
        <label for='q'>
          <a accesskey="4" href="/projects/exiv2/search">Search</a>:
        </label>
        <input type="text" name="q" id="q" size="20" class="small" accesskey="f" />
</form>        <div id="project-jump" class="drdn"><span class="drdn-trigger">Exiv2</span><div class="drdn-content"><div class="quick-search"><input type="text" name="q" id="projects-quick-search" value="" class="autocomplete" data-automcomplete-url="/projects/autocomplete.js?jump=issues" autocomplete="off" /></div><div class="drdn-items projects selection"></div><div class="drdn-items all-projects selection"><a href="/projects?jump=issues">All Projects</a></div></div></div>
    </div>

    <h1><span class="current-project">Exiv2</span></h1>

    <div id="main-menu" class="tabs">
        <ul><li><a class="overview" href="/projects/exiv2">Overview</a></li><li><a class="activity" href="/projects/exiv2/activity">Activity</a></li><li><a class="roadmap" href="/projects/exiv2/roadmap">Roadmap</a></li><li><a class="issues selected" href="/projects/exiv2/issues">Issues</a></li><li><a class="news" href="/projects/exiv2/news">News</a></li><li><a class="wiki" href="/projects/exiv2/wiki">Wiki</a></li><li><a class="boards" href="/projects/exiv2/boards">Forums</a></li><li><a class="repository" href="/projects/exiv2/repository">Repository</a></li></ul>
        <div class="tabs-buttons" style="display:none;">
            <button class="tab-left" onclick="moveTabLeft(this); return false;"></button>
            <button class="tab-right" onclick="moveTabRight(this); return false;"></button>
        </div>
    </div>
</div>

<div id="main" class="">
    <div id="sidebar">
          <h3>Issues</h3>

<ul>
<li><a href="/projects/exiv2/issues?set_filter=1">View all issues</a></li>
<li><a href="/projects/exiv2/issues/report">Summary</a></li>

</ul>









        
    </div>

    <div id="content">
        
        <div class="contextual">





</div>


<h2>Bug #897</h2>

<div class="issue tracker-1 status-5 priority-4 priority-default closed details">

  <div class="gravatar-with-child">
    
    
  </div>

<div class="subject">
<div><h3>New Compilation Warnings </h3></div>
</div>
        <p class="author">
        Added by <a class="user active" href="/users/3290">Abhinav Badola</a> <a title="26 Mar 2013 00:22" href="/projects/exiv2/activity?from=2013-03-26">over 8 years</a> ago.
        Updated <a title="24 Jul 2013 15:06" href="/projects/exiv2/activity?from=2013-07-24">over 8 years</a> ago.
        </p>

<div class="attributes">
<div class="splitcontent"><div class="splitcontentleft"><div class="status attribute"><div class="label">Status:</div><div class="value">Closed</div></div><div class="priority attribute"><div class="label">Priority:</div><div class="value">Normal</div></div><div class="assigned-to attribute"><div class="label">Assignee:</div><div class="value"><a class="user active" href="/users/119">Robin Mills</a></div></div><div class="category attribute"><div class="label">Category:</div><div class="value">build</div></div><div class="fixed-version attribute"><div class="label">Target version:</div><div class="value"><a title="31 Jul 2013" href="/versions/50">0.24</a></div></div></div><div class="splitcontentleft"><div class="start-date attribute"><div class="label">Start date:</div><div class="value">26 Mar 2013</div></div><div class="due-date attribute"><div class="label">Due date:</div><div class="value"></div></div><div class="progress attribute"><div class="label">% Done:</div><div class="value"><table class="progress progress-0"><tr><td style="width: 100%;" class="todo"></td></tr></table><p class="percent">0%</p></div></div><div class="estimated-hours attribute"><div class="label">Estimated time:</div><div class="value"></div></div></div></div>


</div>

<hr />
<div class="description">
  <div class="contextual">
  
  </div>

  <p><strong>Description</strong></p>
  <div class="wiki">
  <pre>
libtool: compile:  g++ -O2 -fvisibility=hidden -fvisibility-inlines-hidden -Wall -Wcast-align -Wpointer-arith -Wformat-security -Wmissing-format-attribute -Woverloaded-virtual -W -MMD -I. -DEXV_LOCALEDIR=\"/usr/local/share/locale\" -I../xmpsdk/include -c -DEXV_BUILDING_LIB=1 basicio.cpp  -fPIC -DPIC -o .libs/basicio.o
canonmn.cpp:184:5: warning: narrowing conversion of ‘2147483649u’ from ‘unsigned int’ to ‘long int’ inside { } is ill-formed in C++11 [-Wnarrowing]
canonmn.cpp:184:5: warning: narrowing conversion of ‘2147484007u’ from ‘unsigned int’ to ‘long int’ inside { } is ill-formed in C++11 [-Wnarrowing]
canonmn.cpp:184:5: warning: narrowing conversion of ‘2147484008u’ from ‘unsigned int’ to ‘long int’ inside { } is ill-formed in C++11 [-Wnarrowing]
canonmn.cpp:184:5: warning: narrowing conversion of ‘2147484009u’ from ‘unsigned int’ to ‘long int’ inside { } is ill-formed in C++11 [-Wnarrowing]
canonmn.cpp:184:5: warning: narrowing conversion of ‘2147484016u’ from ‘unsigned int’ to ‘long int’ inside { } is ill-formed in C++11 [-Wnarrowing]
canonmn.cpp:184:5: warning: narrowing conversion of ‘2147484020u’ from ‘unsigned int’ to ‘long int’ inside { } is ill-formed in C++11 [-Wnarrowing]
canonmn.cpp:184:5: warning: narrowing conversion of ‘2147484021u’ from ‘unsigned int’ to ‘long int’ inside { } is ill-formed in C++11 [-Wnarrowing]
canonmn.cpp:184:5: warning: narrowing conversion of ‘2147484040u’ from ‘unsigned int’ to ‘long int’ inside { } is ill-formed in C++11 [-Wnarrowing]
canonmn.cpp:184:5: warning: narrowing conversion of ‘2147484041u’ from ‘unsigned int’ to ‘long int’ inside { } is ill-formed in C++11 [-Wnarrowing]
canonmn.cpp:184:5: warning: narrowing conversion of ‘2147484179u’ from ‘unsigned int’ to ‘long int’ inside { } is ill-formed in C++11 [-Wnarrowing]
canonmn.cpp:184:5: warning: narrowing conversion of ‘2147484210u’ from ‘unsigned int’ to ‘long int’ inside { } is ill-formed in C++11 [-Wnarrowing]
canonmn.cpp:184:5: warning: narrowing conversion of ‘2147484212u’ from ‘unsigned int’ to ‘long int’ inside { } is ill-formed in C++11 [-Wnarrowing]
canonmn.cpp:184:5: warning: narrowing conversion of ‘2147484214u’ from ‘unsigned int’ to ‘long int’ inside { } is ill-formed in C++11 [-Wnarrowing]
canonmn.cpp:184:5: warning: narrowing conversion of ‘2147484240u’ from ‘unsigned int’ to ‘long int’ inside { } is ill-formed in C++11 [-Wnarrowing]                         
canonmn.cpp:184:5: warning: narrowing conversion of ‘2147484242u’ from ‘unsigned int’ to ‘long int’ inside { } is ill-formed in C++11 [-Wnarrowing]                         
canonmn.cpp:184:5: warning: narrowing conversion of ‘2147484244u’ from ‘unsigned int’ to ‘long int’ inside { } is ill-formed in C++11 [-Wnarrowing]                         
canonmn.cpp:184:5: warning: narrowing conversion of ‘2147484257u’ from ‘unsigned int’ to ‘long int’ inside { } is ill-formed in C++11 [-Wnarrowing]                         
canonmn.cpp:184:5: warning: narrowing conversion of ‘2147484272u’ from ‘unsigned int’ to ‘long int’ inside { } is ill-formed in C++11 [-Wnarrowing]                         
canonmn.cpp:184:5: warning: narrowing conversion of ‘2147484289u’ from ‘unsigned int’ to ‘long int’ inside { } is ill-formed in C++11 [-Wnarrowing]                         
canonmn.cpp:184:5: warning: narrowing conversion of ‘2147484293u’ from ‘unsigned int’ to ‘long int’ inside { } is ill-formed in C++11 [-Wnarrowing]                         
canonmn.cpp:184:5: warning: narrowing conversion of ‘2147484294u’ from ‘unsigned int’ to ‘long int’ inside { } is ill-formed in C++11 [-Wnarrowing]                         
canonmn.cpp:184:5: warning: narrowing conversion of ‘2147484295u’ from ‘unsigned int’ to ‘long int’ inside { } is ill-formed in C++11 [-Wnarrowing]                         
canonmn.cpp:184:5: warning: narrowing conversion of ‘2147484296u’ from ‘unsigned int’ to ‘long int’ inside { } is ill-formed in C++11 [-Wnarrowing]                         
canonmn.cpp:184:5: warning: narrowing conversion of ‘2147484311u’ from ‘unsigned int’ to ‘long int’ inside { } is ill-formed in C++11 [-Wnarrowing]
canonmn.cpp:184:5: warning: narrowing conversion of ‘2147484312u’ from ‘unsigned int’ to ‘long int’ inside { } is ill-formed in C++11 [-Wnarrowing]
canonmn.cpp:184:5: warning: narrowing conversion of ‘2147484417u’ from ‘unsigned int’ to ‘long int’ inside { } is ill-formed in C++11 [-Wnarrowing]
canonmn.cpp:184:5: warning: narrowing conversion of ‘2147484418u’ from ‘unsigned int’ to ‘long int’ inside { } is ill-formed in C++11 [-Wnarrowing]
canonmn.cpp:190:5: warning: narrowing conversion of ‘2415919104u’ from ‘unsigned int’ to ‘long int’ inside { } is ill-formed in C++11 [-Wnarrowing]
canonmn.cpp:190:5: warning: narrowing conversion of ‘2684354560u’ from ‘unsigned int’ to ‘long int’ inside { } is ill-formed in C++11 [-Wnarrowing]

</pre>

	<p>I found these compilation errors are new, and should not occur.<br />Didn't use to occur in previous versions.</p>
  </div>
</div>






<hr />
<div id="relations">
<div class="contextual">
</div>

<p><strong>Related issues</strong></p>

<form data-cm-url="/issues/context_menu" action="/issues/897" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><input type="hidden" name="authenticity_token" value="HH1A6wuUAzLBzg+ukbq586P2ji6rmoF63QvX0rTJFwb+MOsEee7PMpSqEKIubbXAnGTaV1p5IMAgK0da9/DwaQ==" />
  <table class="list issues odd-even"><tr id="relation-95" class="issue hascontextmenu issue tracker-1 status-5 priority-4 priority-default closed"><td class="checkbox"><input type="checkbox" name="ids[]" value="898" /></td><td class="subject" style="width: 50%">Related to Exiv2 - <a class="issue tracker-1 status-5 priority-4 priority-default closed" href="/issues/898">Bug #898</a>: GCC warning when including exiv2.hpp</td><td class="status">Closed</td><td class="start_date">10 Apr 2013</td><td class="due_date"></td><td class="done_ratio"><table class="progress progress-0"><tr><td style="width: 100%;" class="todo"></td></tr></table><p class="percent"></p></td><td class="buttons"><a title="Actions" class="icon-only icon-actions js-contextmenu" href="#">Actions</a></td></tr></table>
</form>
<form class="new_relation" id="new-relation-form" style="display: none;" action="/issues/897/relations" accept-charset="UTF-8" data-remote="true" method="post"><input name="utf8" type="hidden" value="&#x2713;" />


<p><select onchange="setPredecessorFieldsVisibility();" name="relation[relation_type]" id="relation_relation_type"><option selected="selected" value="relates">Related to</option>
<option value="duplicates">Is duplicate of</option>
<option value="duplicated">Has duplicate</option>
<option value="blocks">Blocks</option>
<option value="blocked">Blocked by</option>
<option value="precedes">Precedes</option>
<option value="follows">Follows</option>
<option value="copied_to">Copied to</option>
<option value="copied_from">Copied from</option></select>
Issue #<input size="10" type="text" name="relation[issue_to_id]" id="relation_issue_to_id" />
<span id="predecessor_fields" style="display:none;">
Delay: <input size="3" type="text" name="relation[delay]" id="relation_delay" /> days
</span>
<input type="submit" name="commit" value="Add" data-disable-with="Add" />
<a href="#" onclick="$(&quot;#new-relation-form&quot;).hide();; return false;">Cancel</a>
</p>

<script>
//<![CDATA[
observeAutocompleteField('relation_issue_to_id', '/issues/auto_complete?issue_id=897&project_id=exiv2&scope=all')
//]]>
</script>

<script>
//<![CDATA[
setPredecessorFieldsVisibility();
//]]>
</script>

</form>
</div>

</div>




<div id="history">
<h3>History</h3>
  <div id="change-2442" class="journal has-notes has-details">
    <div id="note-1">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-1" class="journal-link">#1</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="26 Mar 2013 17:22" href="/projects/exiv2/activity?from=2013-03-26">over 8 years</a> ago
      <span id="journal-2442-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Category</strong> set to <i>build</i></li>
       <li><strong>Status</strong> changed from <i>New</i> to <i>Assigned</i></li>
       <li><strong>Assignee</strong> set to <i>Robin Mills</i></li>
       <li><strong>Priority</strong> changed from <i>Low</i> to <i>Normal</i></li>
       <li><strong>Target version</strong> set to <i>0.24</i></li>
    </ul>
    <div id="journal-2442-notes" class="wiki"><p>Abhinav</p>


	<p>Thanks for reporting this.</p>


	<p>I also discovered this last week when one of the GSoC students wanted to use #include &lt;regex&gt; in his code.  All manner of mayhem resulted.  In that case, we skipped the regex code and used string find or something (not as good, however sufficient).  I wasn't willing to take &lt;regex&gt; into the Exiv2 code base because it isn't in older C++ libraries (such an MSVC/2003).</p>


	<p>However you are quite right.  We should fix warning from all compilers.  Warnings are there to help us!  There are also warnings from the Clang compiler to be dealt with.  We could do with another build engineer to work on some of this stuff.  Shawn?  Can you help us?</p>


	<p>Robin</p></div>
    </div>
  </div>
  
  <div id="change-2443" class="journal has-notes">
    <div id="note-2">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-2" class="journal-link">#2</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/134">Niels Kristian Bech Jensen</a> <a title="26 Mar 2013 23:24" href="/projects/exiv2/activity?from=2013-03-26">over 8 years</a> ago
      <span id="journal-2443-private_notes" class=""></span>
    </h4>

    <div id="journal-2443-notes" class="wiki"><p>These warnings came with GCC 4.7+. They can be suppressed by adding static_casts to the declared type like I did in the UFRaw code base: <a class="external" href="http://ufraw.cvs.sourceforge.net/viewvc/ufraw/ufraw/dcraw.cc?r1=1.280&#38;r2=1.281&#38;diff_format=u">http://ufraw.cvs.sourceforge.net/viewvc/ufraw/ufraw/dcraw.cc?r1=1.280&#38;r2=1.281&#38;diff_format=u</a></p>


	<p>Regards,<br />Niels Kristian</p></div>
    </div>
  </div>
  
  <div id="change-2444" class="journal has-notes">
    <div id="note-3">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-3" class="journal-link">#3</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="28 Mar 2013 23:12" href="/projects/exiv2/activity?from=2013-03-28">over 8 years</a> ago
      <span id="journal-2444-private_notes" class=""></span>
    </h4>

    <div id="journal-2444-notes" class="wiki"><p>Niels</p>


	<p>Thanks for the tip/solution.  Much appreciated.</p>


	<p>Abhinav:<br />I never like to say "can't reproduce".  I've built on Linux with three compilers: gcc 4.7.2, gcc 4.8.0 and clang 3.0.6.  I'm building the trunk.<pre>
$ uname -a
Linux rmills-linux 3.5.0-24-generic #37-Ubuntu SMP Thu Feb 7 01:50:30 UTC 2013 x86_64
x86_64 x86_64 GNU/Linux

1035 rmills@rmills-linux:~/gnu/exiv2/test.build $ svn info .
Path: .
Working Copy Root Path: /home/rmills/gnu/exiv2/test.build
URL: svn://dev.exiv2.org/svn/trunk
Repository Root: svn://dev.exiv2.org/svn
Repository UUID: b7c8b350-86e7-0310-a4b4-de8f6a8f16a3
Revision: 3003
Node Kind: directory
Schedule: normal
Last Changed Author: nkbj
Last Changed Rev: 3003
Last Changed Date: 2013-03-28 05:52:21 -0700 (Thu, 28 Mar 2013)

$ C=/usr/bin/g++; T=canonmn ; touch src/$T.cpp ; $C --version ; make src/$T.o CXX=$C 
g++ (Ubuntu/Linaro 4.7.2-2ubuntu1) 4.7.2
Copyright (C) 2012 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

/usr/bin/g++    -c -o src/canonmn.o src/canonmn.cpp

$ C=/usr/local/bin/g++; T=canonmn ; touch src/$T.cpp ; $C --version ; make src/$T.o CXX=$C 
g++ (GCC) 4.8.0
Copyright (C) 2013 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

/usr/local/bin/g++    -c -o src/canonmn.o src/canonmn.cpp

$ C=/usr/bin/clang; T=canonmn ; touch src/$T.cpp ; $C --version ; make src/$T.o CXX=$C 
Ubuntu clang version 3.0-6ubuntu3 (tags/RELEASE_30/final) (based on LLVM 3.0)
Target: x86_64-pc-linux-gnu
Thread model: posix
/usr/bin/clang    -c -o src/canonmn.o src/canonmn.cpp
</pre></p>


	<p>I've built from<pre>
$ make clean ; make config ; ./configure ; make</pre></p>


	<p>with GCC 4.8.0 and the command issued is the same as you have above:<pre>libtool: compile:  g++ -O2 -fvisibility=hidden -fvisibility-inlines-hidden -Wall -Wcast-align -Wpointer-arith -Wformat-security -Wmissing-format-attribute -Woverloaded-virtual -W -MMD -I. -DEXV_LOCALEDIR=\"/usr/local/share/locale\" -I../xmpsdk/include -c -DEXV_BUILDING_LIB=1 basicio.cpp  -fPIC -DPIC -o .libs/basicio.o</pre></p>


	<p>Any ideas?</p></div>
    </div>
  </div>
  
  <div id="change-2445" class="journal has-notes">
    <div id="note-4">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-4" class="journal-link">#4</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/3290">Abhinav Badola</a> <a title="29 Mar 2013 13:31" href="/projects/exiv2/activity?from=2013-03-29">over 8 years</a> ago
      <span id="journal-2445-private_notes" class=""></span>
    </h4>

    <div id="journal-2445-notes" class="wiki"><blockquote>

	<p>I've built from[...]</p>


	<p>with GCC 4.8.0 and the command issued is the same as you have above:[...]</p>


	<p>Any ideas?</p>


</blockquote>

	<p>Hi Robin,<br />Last year, the same happened with me. I was not able to produce compilation warnings at my end.<br />So Andreas suggested me to use,</p>


	<p>-ggdb instead of -O2</p>


	<p>These changes are to be made in <strong>config.mk</strong> file.<br />It worked for me back then, hope it would work for you as well.</p>


	<p><strong>Note</strong><br />[1] config.mk file can be found in <strong>config</strong> folder.<br />[2] config.mk is not created till the step <strong>make config</strong> has been executed.</p></div>
    </div>
  </div>
  
  <div id="change-2448" class="journal has-notes has-details">
    <div id="note-5">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-5" class="journal-link">#5</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="03 Apr 2013 20:17" href="/projects/exiv2/activity?from=2013-04-03">over 8 years</a> ago
      <span id="journal-2448-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>Assigned</i> to <i>Resolved</i></li>
    </ul>
    <div id="journal-2448-notes" class="wiki"><p>Thanks, Abhinav.</p>


	<p>I always try to avoid editing anything in the config directory because magic is best left in its safe hiding place.</p>


	<p>You can change compiler and linker flags using ./configure ENV=value and/or make ENV=value.  CC/CXX=C/C++ compiler, CXXFLAGS/CFLAGS to set compiler flags and LDFLAGS for linking flags.  I'm sure there are many others that I've never thought to use.</p>


	<p>I built with GCC 4.8.0 CXXFLAGS=-std=c++2011 and I'm very pleased to say that exiv2 built and passed the test suite.  There were numerous warnings about <strong><em>'autoptr' is deprecated</em></strong>.  Something to visit in future.</p>


	<p>One curiosity was that exiv2 -v -V threw an exception as it couldn't load library dl to call <strong><em>dlopen</em></strong>.  No problem, I think libtool linked the wrong version of libdl.so<br /><pre>
$ locate libdl | grep x86_64
/lib/x86_64-linux-gnu/libdl-2.15.so
/lib/x86_64-linux-gnu/libdl.so.2
/usr/lib/x86_64-linux-gnu/libdl.a
/usr/lib/x86_64-linux-gnu/libdl.so  &lt;-- that's the one I want

$ touch src/version.cpp ; make LDFLAGS=-L/usr/lib/x86_64-linux=gnu ; sudo make install ; bin/.libs/exiv2 -v -V
....
exiv2=0.23.0
platform=linux
compiler=G++
bits=64
dll=1
debug=0
version=4.8.0
date=Apr  3 2013
time=18:51:58
executable=/home/rmills/gnu/exiv2/test.build/bin/.libs/exiv2
library=/lib/x86_64-linux-gnu/libdl.so.2
library=/usr/local/lib/libexiv2.so.12
...
</pre></p>


	<p>Getting back to this bug report, I still haven't seen those warnings from canonmn.cpp.  So, I'm going to advance this to "resolved" using the lame excuse "Can't replicate".  If anybody knows exactly how to reproduce these messages, then they can explain and change the status to "feedback".  When/if that happens, I'll give this further attention.</p></div>
    </div>
  </div>
  
  <div id="change-2449" class="journal has-notes">
    <div id="note-6">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-6" class="journal-link">#6</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/3290">Abhinav Badola</a> <a title="03 Apr 2013 22:55" href="/projects/exiv2/activity?from=2013-04-03">over 8 years</a> ago
      <span id="journal-2449-private_notes" class=""></span>
    </h4>

    <div id="journal-2449-notes" class="wiki"><p>Thank you Robin for looking into the matter.<br />I will update my compiler and see if the compilation warning exists.</p>


	<p>Niels Kristian Bech Jensen wrote:</p>


<blockquote>

	<p>These warnings came with GCC 4.7+. They can be suppressed by adding static_casts to the declared type like I did in the UFRaw code base: <a class="external" href="http://ufraw.cvs.sourceforge.net/viewvc/ufraw/ufraw/dcraw.cc?r1=1.280&#38;r2=1.281&#38;diff_format=u">http://ufraw.cvs.sourceforge.net/viewvc/ufraw/ufraw/dcraw.cc?r1=1.280&#38;r2=1.281&#38;diff_format=u</a></p>


	<p>Regards,<br />Niels Kristian</p>


</blockquote>

	<p>Hi Niels,<br />I have a doubt, is it possible that by adding static_casts, the data may get deprecated or truncated..?</p></div>
    </div>
  </div>
  
  <div id="change-2450" class="journal has-notes">
    <div id="note-7">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-7" class="journal-link">#7</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="03 Apr 2013 23:13" href="/projects/exiv2/activity?from=2013-04-03">over 8 years</a> ago
      <span id="journal-2450-private_notes" class=""></span>
    </h4>

    <div id="journal-2450-notes" class="wiki"><p>Abhinav</p>


	<p>The deprecated warning has to do with C++2011 - the new C++ standard.  The template std::autoptr will be removed at sometime in the future.<br />[[<a class="external" href="http://en.wikipedia.org/wiki/Auto_ptr">http://en.wikipedia.org/wiki/Auto_ptr</a>]]<br />[[<a class="external" href="http://stackoverflow.com/questions/2404115/is-auto-ptr-deprecated">http://stackoverflow.com/questions/2404115/is-auto-ptr-deprecated</a>]]</p>


	<p>So, I'm not concerned about those warnings (yet).  I'm very pleased that the code has successfully built and passed the test suite using the C++2011 compiler.</p>


	<p>Robin</p></div>
    </div>
  </div>
  
  <div id="change-2507" class="journal has-notes has-details">
    <div id="note-8">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-8" class="journal-link">#8</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="24 Jul 2013 15:06" href="/projects/exiv2/activity?from=2013-07-24">over 8 years</a> ago
      <span id="journal-2507-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>Resolved</i> to <i>Closed</i></li>
    </ul>
    <div id="journal-2507-notes" class="wiki"><p>Fixed in 0.24.</p></div>
    </div>
  </div>
  


</div>

<div style="clear: both;"></div>
<div class="contextual">





</div>


<div style="clear: both;"></div>


<p class="other-formats">Also available in:  <span><a class="atom" rel="nofollow" href="/issues/897.atom">Atom</a></span>
  <span><a class="pdf" rel="nofollow" href="/issues/897.pdf">PDF</a></span>
</p>





        
        <div style="clear:both;"></div>
    </div>
</div>
</div>

<div id="ajax-indicator" style="display:none;"><span>Loading...</span></div>
<div id="ajax-modal" style="display:none;"></div>

<div id="footer">
  <div class="bgl"><div class="bgr">
    Powered by <a href="https://www.redmine.org/">Redmine</a> &copy; 2006-2018 Jean-Philippe Lang
  </div></div>
</div>
</div>
</div>

</body>
</html>
