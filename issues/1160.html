<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<title>Feature #1160: Feature Request - New Lens - Exiv2</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="description" content="Redmine" />
<meta name="keywords" content="issue,bug,tracker" />
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="lBJSosACAB+QPcMi2ZhTVBLa48QwGx5/XN+PdVd3Eqp2X/lNsnjMH8VZ3C5mT19nLUi3vcH4v8Wh/x/9FE71xQ==" />
<link rel='shortcut icon' href='/favicon.ico?1550767427' />
<link rel="stylesheet" media="all" href="/stylesheets/jquery/jquery-ui-1.11.0.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/application.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/responsive.css?1550767427" />

<script src="/javascripts/jquery-1.11.1-ui-1.11.0-ujs-4.3.1.js?1550767427"></script>
<script src="/javascripts/application.js?1550767427"></script>
<script src="/javascripts/responsive.js?1550767427"></script>
<script>
//<![CDATA[
$(window).load(function(){ warnLeavingUnsaved('The current page contains unsaved text that will be lost if you leave this page.'); });
//]]>
</script>


<!-- page specific tags -->
    <link rel="alternate" type="application/atom+xml" title="Exiv2 - Feature #1160: Feature Request - New Lens" href="https://dev.exiv2.org/issues/1160.atom" />
<script src="/javascripts/context_menu.js?1550767427"></script><link rel="stylesheet" media="screen" href="/stylesheets/context_menu.css?1550767427" /></head>
<body class="project-exiv2 has-main-menu controller-issues action-show avatars-off">

<div id="wrapper">

<div class="flyout-menu js-flyout-menu">


        <div class="flyout-menu__search">
            <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
            <input type="hidden" name="issues" value="1" />
            <label class="search-magnifier search-magnifier--flyout" for="flyout-search">&#9906;</label>
            <input type="text" name="q" id="flyout-search" class="small js-search-input" placeholder="Search" />
</form>        </div>


        <h3>Project</h3>
        <span class="js-project-menu"></span>

    <h3>General</h3>
    <span class="js-general-menu"></span>

    <span class="js-sidebar flyout-menu__sidebar"></span>

    <h3>Profile</h3>
    <span class="js-profile-menu"></span>

</div>

<div id="wrapper2">
<div id="wrapper3">
<div id="top-menu">
    <div id="account">
        <ul><li><a class="login" href="/login">Sign in</a></li></ul>    </div>
    
    <ul><li><a class="home" href="/">Home</a></li><li><a class="projects" href="/projects">Projects</a></li><li><a class="help" href="https://www.redmine.org/guide">Help</a></li></ul></div>

<div id="header">

    <a href="#" class="mobile-toggle-button js-flyout-menu-toggle-button"></a>

    <div id="quick-search">
        <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
        <input type="hidden" name="scope" />
        <input type="hidden" name="issues" value="1" />
        <label for='q'>
          <a accesskey="4" href="/projects/exiv2/search">Search</a>:
        </label>
        <input type="text" name="q" id="q" size="20" class="small" accesskey="f" />
</form>        <div id="project-jump" class="drdn"><span class="drdn-trigger">Exiv2</span><div class="drdn-content"><div class="quick-search"><input type="text" name="q" id="projects-quick-search" value="" class="autocomplete" data-automcomplete-url="/projects/autocomplete.js?jump=issues" autocomplete="off" /></div><div class="drdn-items projects selection"></div><div class="drdn-items all-projects selection"><a href="/projects?jump=issues">All Projects</a></div></div></div>
    </div>

    <h1><span class="current-project">Exiv2</span></h1>

    <div id="main-menu" class="tabs">
        <ul><li><a class="overview" href="/projects/exiv2">Overview</a></li><li><a class="activity" href="/projects/exiv2/activity">Activity</a></li><li><a class="roadmap" href="/projects/exiv2/roadmap">Roadmap</a></li><li><a class="issues selected" href="/projects/exiv2/issues">Issues</a></li><li><a class="news" href="/projects/exiv2/news">News</a></li><li><a class="wiki" href="/projects/exiv2/wiki">Wiki</a></li><li><a class="boards" href="/projects/exiv2/boards">Forums</a></li><li><a class="repository" href="/projects/exiv2/repository">Repository</a></li></ul>
        <div class="tabs-buttons" style="display:none;">
            <button class="tab-left" onclick="moveTabLeft(this); return false;"></button>
            <button class="tab-right" onclick="moveTabRight(this); return false;"></button>
        </div>
    </div>
</div>

<div id="main" class="">
    <div id="sidebar">
          <h3>Issues</h3>

<ul>
<li><a href="/projects/exiv2/issues?set_filter=1">View all issues</a></li>
<li><a href="/projects/exiv2/issues/report">Summary</a></li>

</ul>









        
    </div>

    <div id="content">
        
        <div class="contextual">





</div>


<h2>Feature #1160</h2>

<div class="issue tracker-2 status-5 priority-4 priority-default closed details">

  <div class="gravatar-with-child">
    
    
  </div>

<div class="subject">
<div><h3>Feature Request - New Lens</h3></div>
</div>
        <p class="author">
        Added by <a class="user active" href="/users/4614">Mark Mangano</a> <a title="03 Feb 2016 00:55" href="/projects/exiv2/activity?from=2016-02-03">almost 6 years</a> ago.
        Updated <a title="03 Feb 2016 09:05" href="/projects/exiv2/activity?from=2016-02-03">almost 6 years</a> ago.
        </p>

<div class="attributes">
<div class="splitcontent"><div class="splitcontentleft"><div class="status attribute"><div class="label">Status:</div><div class="value">Closed</div></div><div class="priority attribute"><div class="label">Priority:</div><div class="value">Normal</div></div><div class="assigned-to attribute"><div class="label">Assignee:</div><div class="value"><a class="user active" href="/users/119">Robin Mills</a></div></div><div class="category attribute"><div class="label">Category:</div><div class="value">lens</div></div><div class="fixed-version attribute"><div class="label">Target version:</div><div class="value"><a title="28 Apr 2017" href="/versions/52">0.26</a></div></div></div><div class="splitcontentleft"><div class="start-date attribute"><div class="label">Start date:</div><div class="value">03 Feb 2016</div></div><div class="due-date attribute"><div class="label">Due date:</div><div class="value"></div></div><div class="progress attribute"><div class="label">% Done:</div><div class="value"><table class="progress progress-100"><tr><td style="width: 100%;" class="closed" title="100%"></td></tr></table><p class="percent">100%</p></div></div><div class="estimated-hours attribute"><div class="label">Estimated time:</div><div class="value">1.00 h</div></div></div></div>


</div>

<hr />
<div class="description">
  <div class="contextual">
  
  </div>

  <p><strong>Description</strong></p>
  <div class="wiki">
  <p>Hi. Could you add this lens? It's a Sony SEL35F18</p>


	<p>Exif.Sony2.LensID                            Long        1  Manual lens<br />Exif.Photo.LensSpecification                 Rational    4  350/10 350/10 18/10 18/10<br />Exif.Photo.LensModel                         Ascii      16  E 35mm F1.8 OSS</p>


	<p><a class="external" href="http://www.sony.com/electronics/camera-lenses/sel35f18">http://www.sony.com/electronics/camera-lenses/sel35f18</a></p>
  </div>
</div>
  <hr />
  <p><strong>Files</strong></p>
  <div class="attachments">
<div class="contextual">
  
</div>
<table>
<tr>
  <td>
    <a class="icon icon-attachment" href="/attachments/958">DSC01220.jpg</a>    <span class="size">(1.49 MB)</span>
    <a class="icon-only icon-download" title="Download" href="/attachments/download/958/DSC01220.jpg">DSC01220.jpg</a>  </td>
  <td></td>
  <td>
      <span class="author">Mark Mangano, 03 Feb 2016 00:55</span>
  </td>
  <td>
  </td>
</tr>
</table>
</div>







<hr />
<div id="relations">
<div class="contextual">
</div>

<p><strong>Related issues</strong></p>

<form data-cm-url="/issues/context_menu" action="/issues/1160" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><input type="hidden" name="authenticity_token" value="sBRFJ3kUTYRIXHtiy/y49YZA3654OWL7SlfehWmZBhhSWe7IC26BhB04ZG50K7TGudKL14naw0G3d04NKqDhdw==" />
  <table class="list issues odd-even"><tr id="relation-205" class="issue hascontextmenu issue tracker-2 status-5 priority-4 priority-default closed"><td class="checkbox"><input type="checkbox" name="ids[]" value="1034" /></td><td class="subject" style="width: 50%">Related to Exiv2 - <a class="issue tracker-2 status-5 priority-4 priority-default closed" href="/issues/1034">Feature #1034</a>: Camera accessory overflow file</td><td class="status">Closed</td><td class="start_date">19 Feb 2015</td><td class="due_date"></td><td class="done_ratio"><table class="progress progress-100"><tr><td style="width: 100%;" class="closed" title="100%"></td></tr></table><p class="percent"></p></td><td class="buttons"><a title="Actions" class="icon-only icon-actions js-contextmenu" href="#">Actions</a></td></tr><tr id="relation-206" class="issue hascontextmenu issue tracker-2 status-5 priority-4 priority-default closed"><td class="checkbox"><input type="checkbox" name="ids[]" value="1161" /></td><td class="subject" style="width: 50%">Related to Exiv2 - <a class="issue tracker-2 status-5 priority-4 priority-default closed" href="/issues/1161">Feature #1161</a>: Feature request: 1 NIKKOR 10mm f/2.8</td><td class="status">Closed</td><td class="start_date">22 Feb 2016</td><td class="due_date"></td><td class="done_ratio"><table class="progress progress-100"><tr><td style="width: 100%;" class="closed" title="100%"></td></tr></table><p class="percent"></p></td><td class="buttons"><a title="Actions" class="icon-only icon-actions js-contextmenu" href="#">Actions</a></td></tr></table>
</form>
<form class="new_relation" id="new-relation-form" style="display: none;" action="/issues/1160/relations" accept-charset="UTF-8" data-remote="true" method="post"><input name="utf8" type="hidden" value="&#x2713;" />


<p><select onchange="setPredecessorFieldsVisibility();" name="relation[relation_type]" id="relation_relation_type"><option selected="selected" value="relates">Related to</option>
<option value="duplicates">Is duplicate of</option>
<option value="duplicated">Has duplicate</option>
<option value="blocks">Blocks</option>
<option value="blocked">Blocked by</option>
<option value="precedes">Precedes</option>
<option value="follows">Follows</option>
<option value="copied_to">Copied to</option>
<option value="copied_from">Copied from</option></select>
Issue #<input size="10" type="text" name="relation[issue_to_id]" id="relation_issue_to_id" />
<span id="predecessor_fields" style="display:none;">
Delay: <input size="3" type="text" name="relation[delay]" id="relation_delay" /> days
</span>
<input type="submit" name="commit" value="Add" data-disable-with="Add" />
<a href="#" onclick="$(&quot;#new-relation-form&quot;).hide();; return false;">Cancel</a>
</p>

<script>
//<![CDATA[
observeAutocompleteField('relation_issue_to_id', '/issues/auto_complete?issue_id=1160&project_id=exiv2&scope=all')
//]]>
</script>

<script>
//<![CDATA[
setPredecessorFieldsVisibility();
//]]>
</script>

</form>
</div>

</div>




<div id="history">
<h3>History</h3>
  <div id="change-4789" class="journal has-notes has-details">
    <div id="note-1">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-1" class="journal-link">#1</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="03 Feb 2016 09:05" href="/projects/exiv2/activity?from=2016-02-03">almost 6 years</a> ago
      <span id="journal-4789-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>New</i> to <i>Closed</i></li>
       <li><strong>Assignee</strong> set to <i>Robin Mills</i></li>
       <li><strong>Target version</strong> set to <i>0.26</i></li>
       <li><strong>% Done</strong> changed from <i>0</i> to <i>100</i></li>
       <li><strong>Estimated time</strong> set to <i>1.00 h</i></li>
    </ul>
    <div id="journal-4789-notes" class="wiki"><p>Your lens cannot be identified.  It is using the LensID of -1 which is shared by many lenses. I'm not sure why the manufacturer uses LensID of -1.  I suspect it is because the lens is unknown to the camera firmware.  A camera firmware upgrade may help.<pre>$ exiv2 -pv -g lens/i ~/Downloads/DSC01220.jpg 2&gt;/dev/null
0xb027 Sony2        LensID                      Long        1  65535
$ </pre>We have an (optional) new feature in development for v0.26 <a class="issue tracker-2 status-5 priority-4 priority-default closed" title="Feature: Camera accessory overflow file (Closed)" href="/issues/1034">#1034</a> which will use exiftool over a webservice which produces the following output.<pre>$ exiftool ~/Downloads/DSC01220.jpg  | grep Lens
Lens Type                       : E-Mount, T-Mount, Other Lens or no lens
Lens Spec                       : Unknown (00 0 0 0.3 0 3f)
Lens Mount 2                    : Unknown (192)
Lens Type 3                     : Unknown (49344)
Lens E-mount Version            : c0.c0
Lens Firmware Version           : Ver.c0
Lens Format                     : Unknown (64)
Lens Mount                      : Unknown (192)
Lens ID                         : Sony E 35mm F1.8 OSS
$ </pre>So with version v0.26, your lens will be recognised as 'Sony E 35mm F1.8 OSS'.  exiftool is able to perform this recognition using a "heuristic" (a guess).  The "heuristic" works by inspecting other metadata in the image such as FocalLength and Aperture to guess the Lens.<pre>$ exiv2 -pv -g lens/i -g focal/i -g aper/i ~/Downloads/DSC01220.jpg 2&gt;/dev/null
0x9205 Photo        MaxApertureValue            Rational    1  434/256
0x920a Photo        FocalLength                 Rational    1  350/10
0xb027 Sony2        LensID                      Long        1  65535
0xa405 Photo        FocalLengthIn35mmFilm       Short       1  52
$ exiv2 -pa -g lens/i -g focal/i -g aper/i ~/Downloads/DSC01220.jpg 2&gt;/dev/null
Exif.Photo.MaxApertureValue                  Rational    1  F1.8
Exif.Photo.FocalLength                       Rational    1  35.0 mm
Exif.Sony2.LensID                            Long        1  Manual lens
Exif.Photo.FocalLengthIn35mmFilm             Short       1  52.0 mm
$ </pre>Our wonderful makernote engineer, <em><strong>Niels</strong></em> has gone back to college in addition to his very demanding day job.  I have taken over our makernote support in additional to many other roles.  Having fixed about 20 lenses, I've reached the conclusion that Exiv2 is not going to replicate all the code in exiftool for this "heuristic".  The aim of Exiv2 is to reliably read/write metadata in the image.  Lens recognition based on a "heuristic" is non-determistic and therefore can never be reliable.  The web service to call exiftool will be used in future when the LensID = -1 (or any of the many other duplicated LensIDs).</p></div>
    </div>
  </div>
  


</div>

<div style="clear: both;"></div>
<div class="contextual">





</div>


<div style="clear: both;"></div>


<p class="other-formats">Also available in:  <span><a class="atom" rel="nofollow" href="/issues/1160.atom">Atom</a></span>
  <span><a class="pdf" rel="nofollow" href="/issues/1160.pdf">PDF</a></span>
</p>





        
        <div style="clear:both;"></div>
    </div>
</div>
</div>

<div id="ajax-indicator" style="display:none;"><span>Loading...</span></div>
<div id="ajax-modal" style="display:none;"></div>

<div id="footer">
  <div class="bgl"><div class="bgr">
    Powered by <a href="https://www.redmine.org/">Redmine</a> &copy; 2006-2018 Jean-Philippe Lang
  </div></div>
</div>
</div>
</div>

</body>
</html>
