<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<title>Feature #1153: Sony ILCE-6000 + Sony E 50mm F1.8 OSS .JPG files without lens model. - Exiv2</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="description" content="Redmine" />
<meta name="keywords" content="issue,bug,tracker" />
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="C44968UiMuUM2qwagOHl10ZnvCGEXb+PKAXLj2zABrXpw5YEt1j+5Vm+sxY/NunkefXoWHW+HjXVJVsHL/nh2g==" />
<link rel='shortcut icon' href='/favicon.ico?1550767427' />
<link rel="stylesheet" media="all" href="/stylesheets/jquery/jquery-ui-1.11.0.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/application.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/responsive.css?1550767427" />

<script src="/javascripts/jquery-1.11.1-ui-1.11.0-ujs-4.3.1.js?1550767427"></script>
<script src="/javascripts/application.js?1550767427"></script>
<script src="/javascripts/responsive.js?1550767427"></script>
<script>
//<![CDATA[
$(window).load(function(){ warnLeavingUnsaved('The current page contains unsaved text that will be lost if you leave this page.'); });
//]]>
</script>


<!-- page specific tags -->
    <link rel="alternate" type="application/atom+xml" title="Exiv2 - Feature #1153: Sony ILCE-6000 + Sony E 50mm F1.8 OSS .JPG files without lens model." href="https://dev.exiv2.org/issues/1153.atom" />
<script src="/javascripts/context_menu.js?1550767427"></script><link rel="stylesheet" media="screen" href="/stylesheets/context_menu.css?1550767427" /></head>
<body class="project-exiv2 has-main-menu controller-issues action-show avatars-off">

<div id="wrapper">

<div class="flyout-menu js-flyout-menu">


        <div class="flyout-menu__search">
            <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
            <input type="hidden" name="issues" value="1" />
            <label class="search-magnifier search-magnifier--flyout" for="flyout-search">&#9906;</label>
            <input type="text" name="q" id="flyout-search" class="small js-search-input" placeholder="Search" />
</form>        </div>


        <h3>Project</h3>
        <span class="js-project-menu"></span>

    <h3>General</h3>
    <span class="js-general-menu"></span>

    <span class="js-sidebar flyout-menu__sidebar"></span>

    <h3>Profile</h3>
    <span class="js-profile-menu"></span>

</div>

<div id="wrapper2">
<div id="wrapper3">
<div id="top-menu">
    <div id="account">
        <ul><li><a class="login" href="/login">Sign in</a></li></ul>    </div>
    
    <ul><li><a class="home" href="/">Home</a></li><li><a class="projects" href="/projects">Projects</a></li><li><a class="help" href="https://www.redmine.org/guide">Help</a></li></ul></div>

<div id="header">

    <a href="#" class="mobile-toggle-button js-flyout-menu-toggle-button"></a>

    <div id="quick-search">
        <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
        <input type="hidden" name="scope" />
        <input type="hidden" name="issues" value="1" />
        <label for='q'>
          <a accesskey="4" href="/projects/exiv2/search">Search</a>:
        </label>
        <input type="text" name="q" id="q" size="20" class="small" accesskey="f" />
</form>        <div id="project-jump" class="drdn"><span class="drdn-trigger">Exiv2</span><div class="drdn-content"><div class="quick-search"><input type="text" name="q" id="projects-quick-search" value="" class="autocomplete" data-automcomplete-url="/projects/autocomplete.js?jump=issues" autocomplete="off" /></div><div class="drdn-items projects selection"></div><div class="drdn-items all-projects selection"><a href="/projects?jump=issues">All Projects</a></div></div></div>
    </div>

    <h1><span class="current-project">Exiv2</span></h1>

    <div id="main-menu" class="tabs">
        <ul><li><a class="overview" href="/projects/exiv2">Overview</a></li><li><a class="activity" href="/projects/exiv2/activity">Activity</a></li><li><a class="roadmap" href="/projects/exiv2/roadmap">Roadmap</a></li><li><a class="issues selected" href="/projects/exiv2/issues">Issues</a></li><li><a class="news" href="/projects/exiv2/news">News</a></li><li><a class="wiki" href="/projects/exiv2/wiki">Wiki</a></li><li><a class="boards" href="/projects/exiv2/boards">Forums</a></li><li><a class="repository" href="/projects/exiv2/repository">Repository</a></li></ul>
        <div class="tabs-buttons" style="display:none;">
            <button class="tab-left" onclick="moveTabLeft(this); return false;"></button>
            <button class="tab-right" onclick="moveTabRight(this); return false;"></button>
        </div>
    </div>
</div>

<div id="main" class="">
    <div id="sidebar">
          <h3>Issues</h3>

<ul>
<li><a href="/projects/exiv2/issues?set_filter=1">View all issues</a></li>
<li><a href="/projects/exiv2/issues/report">Summary</a></li>

</ul>









        
    </div>

    <div id="content">
        
        <div class="contextual">





</div>


<h2>Feature #1153</h2>

<div class="issue tracker-2 status-5 priority-4 priority-default closed details">

  <div class="gravatar-with-child">
    
    
  </div>

<div class="subject">
<div><h3>Sony ILCE-6000 + Sony E 50mm F1.8 OSS .JPG files without lens model.</h3></div>
</div>
        <p class="author">
        Added by Anonymous <a title="11 Jan 2016 16:37" href="/projects/exiv2/activity?from=2016-01-11">almost 6 years</a> ago.
        Updated <a title="28 Jul 2016 13:33" href="/projects/exiv2/activity?from=2016-07-28">over 5 years</a> ago.
        </p>

<div class="attributes">
<div class="splitcontent"><div class="splitcontentleft"><div class="status attribute"><div class="label">Status:</div><div class="value">Closed</div></div><div class="priority attribute"><div class="label">Priority:</div><div class="value">Normal</div></div><div class="assigned-to attribute"><div class="label">Assignee:</div><div class="value"><a class="user active" href="/users/119">Robin Mills</a></div></div><div class="category attribute"><div class="label">Category:</div><div class="value">lens</div></div><div class="fixed-version attribute"><div class="label">Target version:</div><div class="value"><a title="28 Apr 2017" href="/versions/52">0.26</a></div></div></div><div class="splitcontentleft"><div class="start-date attribute"><div class="label">Start date:</div><div class="value">11 Jan 2016</div></div><div class="due-date attribute"><div class="label">Due date:</div><div class="value"></div></div><div class="progress attribute"><div class="label">% Done:</div><div class="value"><table class="progress progress-100"><tr><td style="width: 100%;" class="closed" title="100%"></td></tr></table><p class="percent">100%</p></div></div><div class="estimated-hours attribute"><div class="label">Estimated time:</div><div class="value">5.00 h</div></div></div></div>


</div>

<hr />
<div class="description">
  <div class="contextual">
  
  </div>

  <p><strong>Description</strong></p>
  <div class="wiki">
  <p>Hey!<br />The lens model is recognized from .ARW, but not in .jpg.(Files from camera, camera in RAW+JPG mode)<br />Exiftool is able to recognize the lens model in the .jpg.<br />The exact .jpg is attached.</p>


	<p>LOG from exiv2 (0.25) and exiftool(9.46):</p>


	<p><code>tim@tim-ESPRIMO-Mobile-U9210 ~/Bilder/Fotosammlung/2016/01/Mezaparks $ exiv2 -pt DSC01769.ARW | grep -ai lens<br />Exif.Sony2.LensID                            Long        1  Manual lens<br />Exif.Photo.LensSpecification                 Rational    4  500/10 500/10 18/10 18/10<br />Exif.Photo.LensModel                         Ascii      16  E 50mm F1.8 OSS<br />tim@tim-ESPRIMO-Mobile-U9210 ~/Bilder/Fotosammlung/2016/01/Mezaparks $ exiv2 -pt DSC01769.JPG | grep -ai lens<br />Error: Offset of directory Sony1, entry 0x2001 is out of bounds: Offset = 0x003ec076; truncating the entry<br />Exif.Sony1.LensID                            Long        1  Manual lens<br />tim@tim-ESPRIMO-Mobile-U9210 ~/Bilder/Fotosammlung/2016/01/Mezaparks $ exiftool DSC01769.JPG | grep -ai lens<br />Lens Type                       : E-Mount, T-Mount, Other Lens or no lens<br />Lens Spec                       : Unknown (e8 300 1 0 0 00)<br />Lens Type 2                     : Unknown (24576)<br />Lens Mount                      : Unknown<br />Lens Format                     : Unknown<br />Lens ID                         : Sony E 50mm F1.8 OSS</code></p>
  </div>
</div>
  <hr />
  <p><strong>Files</strong></p>
  <div class="attachments">
<div class="contextual">
  
</div>
<table>
<tr>
  <td>
    <a class="icon icon-attachment" href="/attachments/882">DSC01769.JPG</a>    <span class="size">(3.92 MB)</span>
    <a class="icon-only icon-download" title="Download" href="/attachments/download/882/DSC01769.JPG">DSC01769.JPG</a>  </td>
  <td></td>
  <td>
      <span class="author">Anonymous, 11 Jan 2016 16:37</span>
  </td>
  <td>
  </td>
</tr>
<tr>
  <td>
    <a class="icon icon-attachment" href="/attachments/883">DSC01769.ARW.7z</a>    <span class="size">(18.8 MB)</span>
    <a class="icon-only icon-download" title="Download" href="/attachments/download/883/DSC01769.ARW.7z">DSC01769.ARW.7z</a>  </td>
  <td></td>
  <td>
      <span class="author">Anonymous, 11 Jan 2016 21:55</span>
  </td>
  <td>
  </td>
</tr>
<tr>
  <td>
    <a class="icon icon-attachment" href="/attachments/979">DSC02521.JPG</a>    <span class="size">(5.72 MB)</span>
    <a class="icon-only icon-download" title="Download" href="/attachments/download/979/DSC02521.JPG">DSC02521.JPG</a>  </td>
  <td></td>
  <td>
      <span class="author">Anonymous, 14 Mar 2016 13:07</span>
  </td>
  <td>
  </td>
</tr>
</table>
</div>







<hr />
<div id="relations">
<div class="contextual">
</div>

<p><strong>Related issues</strong></p>

<form data-cm-url="/issues/context_menu" action="/issues/1153" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><input type="hidden" name="authenticity_token" value="fO+APusJoV1fFbP32oRvOTKDVpNXIlIrRDVGpTv53pyeoivRmXNtXQpxrPtlU2MKDREC6qbB85G5FdYteMA58w==" />
  <table class="list issues odd-even"><tr id="relation-199" class="issue hascontextmenu issue tracker-3 status-5 priority-4 priority-default closed"><td class="checkbox"><input type="checkbox" name="ids[]" value="1151" /></td><td class="subject" style="width: 50%">Related to Exiv2 - <a class="issue tracker-3 status-5 priority-4 priority-default closed" href="/issues/1151">Support #1151</a>: Small raw images size </td><td class="status">Closed</td><td class="start_date">10 Jan 2016</td><td class="due_date"></td><td class="done_ratio"><table class="progress progress-100"><tr><td style="width: 100%;" class="closed" title="100%"></td></tr></table><p class="percent"></p></td><td class="buttons"><a title="Actions" class="icon-only icon-actions js-contextmenu" href="#">Actions</a></td></tr><tr id="relation-200" class="issue hascontextmenu issue tracker-1 status-5 priority-4 priority-default closed"><td class="checkbox"><input type="checkbox" name="ids[]" value="1143" /></td><td class="subject" style="width: 50%">Related to Exiv2 - <a class="issue tracker-1 status-5 priority-4 priority-default closed" href="/issues/1143">Bug #1143</a>: Unable to extract embedded preview from jpg for Sony a77</td><td class="status">Closed</td><td class="start_date">24 Dec 2015</td><td class="due_date"></td><td class="done_ratio"><table class="progress progress-100"><tr><td style="width: 100%;" class="closed" title="100%"></td></tr></table><p class="percent"></p></td><td class="buttons"><a title="Actions" class="icon-only icon-actions js-contextmenu" href="#">Actions</a></td></tr></table>
</form>
<form class="new_relation" id="new-relation-form" style="display: none;" action="/issues/1153/relations" accept-charset="UTF-8" data-remote="true" method="post"><input name="utf8" type="hidden" value="&#x2713;" />


<p><select onchange="setPredecessorFieldsVisibility();" name="relation[relation_type]" id="relation_relation_type"><option selected="selected" value="relates">Related to</option>
<option value="duplicates">Is duplicate of</option>
<option value="duplicated">Has duplicate</option>
<option value="blocks">Blocks</option>
<option value="blocked">Blocked by</option>
<option value="precedes">Precedes</option>
<option value="follows">Follows</option>
<option value="copied_to">Copied to</option>
<option value="copied_from">Copied from</option></select>
Issue #<input size="10" type="text" name="relation[issue_to_id]" id="relation_issue_to_id" />
<span id="predecessor_fields" style="display:none;">
Delay: <input size="3" type="text" name="relation[delay]" id="relation_delay" /> days
</span>
<input type="submit" name="commit" value="Add" data-disable-with="Add" />
<a href="#" onclick="$(&quot;#new-relation-form&quot;).hide();; return false;">Cancel</a>
</p>

<script>
//<![CDATA[
observeAutocompleteField('relation_issue_to_id', '/issues/auto_complete?issue_id=1153&project_id=exiv2&scope=all')
//]]>
</script>

<script>
//<![CDATA[
setPredecessorFieldsVisibility();
//]]>
</script>

</form>
</div>

</div>

<div id="issue-changesets">
<h3>Associated revisions</h3>
    <div class="changeset">
    <p><a title="Revision 4181" href="/projects/exiv2/repository/exiv2/revisions/4181">Revision 4181</a>
        (<a href="/projects/exiv2/repository/exiv2/revisions/4181/diff">diff</a>)
        <br />
        <span class="author">Added by <a class="user active" href="/users/119">Robin Mills</a> <a title="12 Jan 2016 10:18" href="/projects/exiv2/activity?from=2016-01-12">almost 6 years</a> ago</span></p>
    <div class="wiki changeset-comments">
        <p><a class="issue tracker-2 status-5 priority-4 priority-default closed" title="Feature: Sony ILCE-6000 + Sony E 50mm F1.8 OSS .JPG files without lens model. (Closed)" href="/issues/1153">#1153</a> Fix submitted.  Thank You, Tim for reporting this and providing test data.</p>
    </div>
    </div>
    <div class="changeset">
    <p><a title="Revision 4182" href="/projects/exiv2/repository/exiv2/revisions/4182">Revision 4182</a>
        (<a href="/projects/exiv2/repository/exiv2/revisions/4182/diff">diff</a>)
        <br />
        <span class="author">Added by <a class="user active" href="/users/119">Robin Mills</a> <a title="13 Jan 2016 12:21" href="/projects/exiv2/activity?from=2016-01-13">almost 6 years</a> ago</span></p>
    <div class="wiki changeset-comments">
        <p><a class="issue tracker-2 status-5 priority-4 priority-default closed" title="Feature: Sony ILCE-6000 + Sony E 50mm F1.8 OSS .JPG files without lens model. (Closed)" href="/issues/1153">#1153</a>  Fixes for "Sony E PZ 16-50mm F3.5-5.6 OSS"</p>
    </div>
    </div>
    <div class="changeset">
    <p><a title="Revision 4183" href="/projects/exiv2/repository/exiv2/revisions/4183">Revision 4183</a>
        (<a href="/projects/exiv2/repository/exiv2/revisions/4183/diff">diff</a>)
        <br />
        <span class="author">Added by <a class="user active" href="/users/119">Robin Mills</a> <a title="13 Jan 2016 12:42" href="/projects/exiv2/activity?from=2016-01-13">almost 6 years</a> ago</span></p>
    <div class="wiki changeset-comments">
        <p><a class="issue tracker-2 status-5 priority-4 priority-default closed" title="Feature: Sony ILCE-6000 + Sony E 50mm F1.8 OSS .JPG files without lens model. (Closed)" href="/issues/1153">#1153</a> test files</p>
    </div>
    </div>
    <div class="changeset">
    <p><a title="Revision 4208" href="/projects/exiv2/repository/exiv2/revisions/4208">Revision 4208</a>
        (<a href="/projects/exiv2/repository/exiv2/revisions/4208/diff">diff</a>)
        <br />
        <span class="author">Added by <a class="user active" href="/users/119">Robin Mills</a> <a title="27 Feb 2016 15:02" href="/projects/exiv2/activity?from=2016-02-27">over 5 years</a> ago</span></p>
    <div class="wiki changeset-comments">
        <p><a class="issue tracker-2 status-5 priority-4 priority-default closed" title="Feature: Sony ILCE-6000 + Sony E 50mm F1.8 OSS .JPG files without lens model. (Closed)" href="/issues/1153">#1153</a>.  Added missing file to test suite</p>
    </div>
    </div>

</div>



<div id="history">
<h3>History</h3>
  <div id="change-4677" class="journal has-notes has-details">
    <div id="note-1">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-1" class="journal-link">#1</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="11 Jan 2016 17:31" href="/projects/exiv2/activity?from=2016-01-11">almost 6 years</a> ago
      <span id="journal-4677-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Category</strong> set to <i>lens</i></li>
       <li><strong>Status</strong> changed from <i>New</i> to <i>Assigned</i></li>
       <li><strong>Assignee</strong> set to <i>Robin Mills</i></li>
       <li><strong>Target version</strong> set to <i>0.26</i></li>
       <li><strong>% Done</strong> changed from <i>0</i> to <i>20</i></li>
       <li><strong>Estimated time</strong> set to <i>4.00 h</i></li>
    </ul>
    <div id="journal-4677-notes" class="wiki"><p>Tim</p>


	<p>Please ignore the message: <em><strong><code>Error: Offset of directory Sony1, entry 0x2001 is out of bounds: Offset = 0x003ec076; truncating the entry</code></em></strong><br />I dealt with that recently: <a class="issue tracker-2 status-5 priority-4 priority-default closed" title="Feature: Respect Sony/Minolta lenses with shared LensID such as Tamron SP AF 17-50mm F2.8 XR Di II LD (Closed)" href="/issues/1145">#1145</a> so I don't see that message when I run your command on a build from the trunk.</p>


	<p>There is information in the metadata of the ARW:<pre>$ exiv2 -pt DSC01769.ARW | grep -ai lens
Exif.Sony2.LensID Long 1 Manual lens
Exif.Photo.LensSpecification Rational 4 500/10 500/10 18/10 18/10
Exif.Photo.LensModel Ascii 16 E 50mm F1.8 OSS</pre> that has been removed in the JPG:<pre>$ exiv2 -pt DSC01769.JPG | grep -ai lens
Exif.Sony1.LensID Long 1 Manual lens</pre>Did the JPG come from the camera, or was it created by desktop software?  I am wondering "who removed Exif.Photo.LensSepcification" and "Exif.Photo.LensModel" ?</p>


	<p>What is the LensID in the .ARW?  Can you share the .ARW with me, or run the following command:<pre>$ exiv2 -pv --grep Lens DSC01769.ARW</pre></p>


	<p>I can modify the lens detection code to examine the following and deduce the lens:<pre>$ exiv2 -pv --grep lens/i --grep apertu/i --grep focal/i --grep model/i http://dev.exiv2.org/attachments/download/882/DSC01769.JPG 
0x0110 Image        Model                       Ascii      10  ILCE-6000
0x9205 Photo        MaxApertureValue            Rational    1  434/256
0x920a Photo        FocalLength                 Rational    1  500/10
0xb001 Sony1        SonyModelID                 Short       1  312
0xb027 Sony1        LensID                      Long        1  65535
0xa405 Photo        FocalLengthIn35mmFilm       Short       1  75
0x0110 Thumbnail    Model                       Ascii      10  ILCE-6000
$ </pre>I had another idea (which didn't work).  I copied the Lens Specification from the .ARW to the .JPG with:<pre>exiv2 -M"set Exif.Photo.LensSpecification 500/10 500/10 18/10 18/10" DSC01769.JPG</pre>That updated the file, however we still reports LensID == -1 as "Manual Lens" (and ignores the LensSpecification data).</p>


	<p>So four questions:<br />1) Can you share the ARW with me please (attach it, or dropbox it, or something)<br />2) Can you run the command: <em><strong><code>exiv2 -pv DSC01769.ARW</code></strong></em><br />3) Did the JPG come from the Camera or Desktop Software?<br />4) Can you check with Sony for a firmware upgrade for your camera.  The user on <a class="issue tracker-2 status-5 priority-4 priority-default closed" title="Feature: Respect Sony/Minolta lenses with shared LensID such as Tamron SP AF 17-50mm F2.8 XR Di II LD (Closed)" href="/issues/1145">#1145</a> believes that a future firmware upgrade may fix this.  I think you may able to detect the firmware version with a command such as:<pre>$ exiv2 -pa --grep firm/i DSC01769.ARW</pre></p></div>
    </div>
  </div>
  
  <div id="change-4678" class="journal has-notes has-details">
    <div id="note-2">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-2" class="journal-link">#2</a>
    </div>
    <h4>
      
      Updated by Anonymous <a title="11 Jan 2016 21:55" href="/projects/exiv2/activity?from=2016-01-11">almost 6 years</a> ago
      <span id="journal-4678-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>File</strong> <a href="/attachments/883">DSC01769.ARW.7z</a> <a class="icon-only icon-download" title="Download" href="/attachments/download/883/DSC01769.ARW.7z">DSC01769.ARW.7z</a> added</li>
    </ul>
    <div id="journal-4678-notes" class="wiki"><p>Robin Mills wrote:</p>


<blockquote>

	<p>So four questions:<br />1) Can you share the ARW with me please (attach it, or dropbox it, or something)<br />2) Can you run the command: <em><strong><code>exiv2 -pv DSC01769.ARW</code></strong></em><br />3) Did the JPG come from the Camera or Desktop Software?<br />4) Can you check with Sony for a firmware upgrade for your camera.</p>


</blockquote>

	<p>1) Attached the ARW file compressed in .7z<br />2) <a class="external" href="http://pastebin.com/9Y3T2ENK">http://pastebin.com/9Y3T2ENK</a><br />3) It came straight from the Camera by using RAW+JPG mode. I use Geeqie + Darktable. Darktable doesn’t change files, and I don’t change anything when using Geeqie<br />4) My ILCE-6000 is on Version 2.00 which is also the newest firmware.</p></div>
    </div>
  </div>
  
  <div id="change-4679" class="journal has-notes">
    <div id="note-3">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-3" class="journal-link">#3</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="11 Jan 2016 23:06" href="/projects/exiv2/activity?from=2016-01-11">almost 6 years</a> ago
      <span id="journal-4679-private_notes" class=""></span>
    </h4>

    <div id="journal-4679-notes" class="wiki"><p>Thanks for sending this.  It's 11pm in England.  I'll look at this on Tuesday and I hope to get it fixed.  I'd like to extract the metadata from your image and use it in our test suite as a regression detector.  If you can provide more images (at different focal lengths), that would be very helpful.</p>


	<p>Geeqie was mention in an issue yesterday: <a class="issue tracker-3 status-5 priority-4 priority-default closed" title="Support: Small raw images size  (Closed)" href="/issues/1151">#1151</a>.  I thought it was a spelling mistake.  Apparently not. <a class="issue tracker-3 status-5 priority-4 priority-default closed" title="Support: Small raw images size  (Closed)" href="/issues/1151">#1151</a> is unlikely to be resolved without more information.  If you know Geeqie and understand <a class="issue tracker-3 status-5 priority-4 priority-default closed" title="Support: Small raw images size  (Closed)" href="/issues/1151">#1151</a>, I'd appreciate any assistance you can give.  <a class="external" href="http://dev.exiv2.org/issues/1151">http://dev.exiv2.org/issues/1151</a></p></div>
    </div>
  </div>
  
  <div id="change-4680" class="journal has-notes">
    <div id="note-4">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-4" class="journal-link">#4</a>
    </div>
    <h4>
      
      Updated by Anonymous <a title="11 Jan 2016 23:37" href="/projects/exiv2/activity?from=2016-01-11">almost 6 years</a> ago
      <span id="journal-4680-private_notes" class=""></span>
    </h4>

    <div id="journal-4680-notes" class="wiki"><p>Robin Mills wrote:</p>


<blockquote>

	<p>Thanks for sending this.  It's 11pm in England.  I'll look at this on Tuesday and I hope to get it fixed.  I'd like to extract the metadata from your image and use it in our test suite as a regression detector.  If you can provide more images (at different focal lengths), that would be very helpful.</p>


	<p>Geeqie was mention in an issue yesterday: <a class="issue tracker-3 status-5 priority-4 priority-default closed" title="Support: Small raw images size  (Closed)" href="/issues/1151">#1151</a>.  I thought it was a spelling mistake.  Apparently not. <a class="issue tracker-3 status-5 priority-4 priority-default closed" title="Support: Small raw images size  (Closed)" href="/issues/1151">#1151</a> is unlikely to be resolved without more information.  If you know Geeqie and understand <a class="issue tracker-3 status-5 priority-4 priority-default closed" title="Support: Small raw images size  (Closed)" href="/issues/1151">#1151</a>, I'd appreciate any assistance you can give.  <a class="external" href="http://dev.exiv2.org/issues/1151">http://dev.exiv2.org/issues/1151</a></p>


</blockquote>

	<p>Thanks for the support!<br />The used lens is a prime lens ;) But I could provide sample shots with the kit lens (16-55mm). Which focal lengths? ARW or JPG or both? Same behaviour for the kit lens; exiftool recognizes it properly.</p>


	<p>About <a class="issue tracker-3 status-5 priority-4 priority-default closed" title="Support: Small raw images size  (Closed)" href="/issues/1151">#1151</a>: Resolution is not a problem. Geeqie is not a RAW converter and simply displays the JPG thumbnail in RAW files. For my files the cameras .JPGs are 6000x4000 whereas the thumbnails in RAW files get displayed in Geeqie with 1616x1080. Everything working perfect. (exiv2 0.23 + geeqie 1.1 <a class="external" href="http://geeqie.sourceforge.net/">http://geeqie.sourceforge.net/</a>)<br />You should try Geeqie ;) Very very fast and powerful image viewer with features like RAW+JPG+XMP file grouping, color management by .icc profiles, etc!</p></div>
    </div>
  </div>
  
  <div id="change-4682" class="journal has-notes has-details">
    <div id="note-5">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-5" class="journal-link">#5</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="12 Jan 2016 11:03" href="/projects/exiv2/activity?from=2016-01-12">almost 6 years</a> ago
      <span id="journal-4682-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>Assigned</i> to <i>Resolved</i></li>
       <li><strong>% Done</strong> changed from <i>20</i> to <i>80</i></li>
    </ul>
    <div id="journal-4682-notes" class="wiki"><p>Tim</p>


	<p>Fix submitted: <a class="changeset" title="#1153 Fix submitted.  Thank You, Tim for reporting this and providing test data." href="/projects/exiv2/repository/exiv2/revisions/4181">r4181</a>.  Thanks for providing the test data.  I've extracted the metadata from DSC01769.JPG and added it as test/data/exiv2-1153.exv to our test suite.</p>


	<p>Thanks for offering to provide more test data.  Let me explain how the fix works and then you'll understand what kind of test file would be helpful.  There's a long discussion about this in <a class="issue tracker-2 status-5 priority-4 priority-default closed" title="Feature: Respect Sony/Minolta lenses with shared LensID such as Tamron SP AF 17-50mm F2.8 XR Di II LD (Closed)" href="/issues/1145">#1145</a> which I won't repeat here.  Every camera and lens should have a unique ID. <pre>1284 rmills@rmillsmbp:~/gnu/exiv2/ttt $ exiv2 -pv --grep id/i  http://dev.exiv2.org/attachments/download/882/DSC01769.JPG
0xb001 Sony1        SonyModelID                 Short       1  312
0xb027 Sony1        LensID                      Long        1  65535
1285 rmills@rmillsmbp:~/gnu/exiv2/ttt $ </pre><em><code>Exif.Sony1.SonyModelID == 312 ==&gt; ILCE-6000</code></em> <strong>Good.</strong><br /><em><code>LensID == 65535 == 0xffff == "Manual Lens"</code></em>.  <strong>Not good.</strong></p>


	<p>LensID is not unique to your lens.  In fact, 0xffff says "I don't know anything about the lens!".  So the code then inspects FocalLength and MaxAperture to say "Could this be Tim's Lens?".  You can read the code to see how I do this.  <a class="external" href="http://dev.exiv2.org/projects/exiv2/repository/revisions/4181/diff/trunk/src/minoltamn.cpp">http://dev.exiv2.org/projects/exiv2/repository/revisions/4181/diff/trunk/src/minoltamn.cpp</a></p>


	<p>This is pure guesswork.  It's quite likely that Sony will upgrade their firmware to provide a unique LensID and you'll be back to say "Fix <a class="changeset" title="#1153 Fix submitted.  Thank You, Tim for reporting this and providing test data." href="/projects/exiv2/repository/exiv2/revisions/4181">r4181</a> isn't working any more.".</p>


	<p>Exiv2 and ExifTool are tramping the same ground.  I'm working on a cunning plan to enable Phil and I to discover and share knowledge about new lens/cameras.  Work in progress: <a class="issue tracker-2 status-5 priority-4 priority-default closed" title="Feature: Camera accessory overflow file (Closed)" href="/issues/1034">#1034</a>.</p>


	<p>And thanks for providing the .ARW.  There are lots of differences in the Metadata between the .JPG and the .ARW.   I've been working on Exiv2 for almost 8 years, however I only started supporting MakerNotes a few months ago.  <em><strong>Niels</strong> (our wonderful MakerNote Engineer)</em>  has gone back to college <em>(while continuing his very demanding day job)</em> and I've taken on support for the MakerNote code.  I'm on a learning curve and one day I'll will understand all those differences.  Very illuminating.</p>


	<p>Thanks for your help with <a class="issue tracker-3 status-5 priority-4 priority-default closed" title="Support: Small raw images size  (Closed)" href="/issues/1151">#1151</a>.  You can read my comments in that issue, so I won't repeat them here.  I couldn't build geeqie on MacOS-X because I don't have GTK+, however I installed it on kubuntu.  For sure it's fast.  I use Picasa to manage my photo library on the Mac.  I think it's possible that Wil, who reported <a class="issue tracker-3 status-5 priority-4 priority-default closed" title="Support: Small raw images size  (Closed)" href="/issues/1151">#1151</a>, has discovered something here.  However, I want the geeqie team to investigate and, if necessary, raise an issue with us.  I believe our thumbnail/preview code is working well.  As I don't know geeqie, I don't know what to expect when working with DNG and RAW files.</p>


	<p>I've updated this issue to say "80% resolved".  Can you test with other cameras/lens combinations and let me know if you discover other stuff that requires attention.</p>


	<p><img src="http://exiv2.org/Exiv2Logo.png" alt="" /></p></div>
    </div>
  </div>
  
  <div id="change-4683" class="journal has-notes">
    <div id="note-6">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-6" class="journal-link">#6</a>
    </div>
    <h4>
      
      Updated by Anonymous <a title="12 Jan 2016 21:19" href="/projects/exiv2/activity?from=2016-01-12">almost 6 years</a> ago
      <span id="journal-4683-private_notes" class=""></span>
    </h4>

    <div id="journal-4683-notes" class="wiki"><p>Thank you!</p>


	<p>So it basically checks for camera model + settings/capabilities of the lens and then checks what is the most likely lens? Sounds like a mess... So there is no other Tag? Does Exiftool use a similar strategy?</p>


	<p>Just think of the electronic adapters for Canon/Nikon lenses which also support most of the settings.. Those would normally not leave a trace of the name in the EXIF, but will maybe be recognized false positive.</p>


	<p>I also tried the patch. I downloaded trunk, but as there was no .configure, so I got that from 0.25 and compiled with that. Same like before, the Lens Model is still not listed.</p>


	<p>Was the recognition successful for you with my sample files?</p></div>
    </div>
  </div>
  
  <div id="change-4684" class="journal has-notes">
    <div id="note-7">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-7" class="journal-link">#7</a>
    </div>
    <h4>
      
      Updated by Anonymous <a title="12 Jan 2016 21:27" href="/projects/exiv2/activity?from=2016-01-12">almost 6 years</a> ago
      <span id="journal-4684-private_notes" class=""></span>
    </h4>

    <div id="journal-4684-notes" class="wiki"><p>I could just point out to the exiftool documentation for sony. Maybe this helps you understanding how Sony tags work. I don't get anything honestly speaking :D<br /><a class="external" href="http://www.sno.phy.queensu.ca/~phil/exiftool/TagNames/Sony.html">http://www.sno.phy.queensu.ca/~phil/exiftool/TagNames/Sony.html</a></p></div>
    </div>
  </div>
  
  <div id="change-4685" class="journal has-notes">
    <div id="note-8">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-8" class="journal-link">#8</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="12 Jan 2016 22:06" href="/projects/exiv2/activity?from=2016-01-12">almost 6 years</a> ago
      <span id="journal-4685-private_notes" class=""></span>
    </h4>

    <div id="journal-4685-notes" class="wiki"><p>Tim</p>


	<p>To build use:<pre> $ make config ; ./configure ; make -j ; sudo make install ; make -j samples ; make tests</pre></p>


	<p><strong><code>$ make config</code></strong> generates the ./configure script.  It's been this way since before I joined the project.  <a class="external" href="http://dev.exiv2.org/projects/exiv2/wiki/How_do_I_build_Exiv2_on_the_XYZ_platform">http://dev.exiv2.org/projects/exiv2/wiki/How_do_I_build_Exiv2_on_the_XYZ_platform</a></p>


	<p>I agree that this style of Lens recognition is hackery.  When LensID is unambiguously defined, we don't need that nonsense.  I got this method from Phil himself.  There's his code:  <a class="external" href="http://dev.exiv2.org/issues/1143#note-11">http://dev.exiv2.org/issues/1143#note-11</a>  Could you convert that into C++ please?</p>


	<p>Here's the output from the trunk:<pre>$ exiv2 -pa --grep lens/i http://dev.exiv2.org/attachments/download/882/DSC01769.JPG
Exif.Sony1.LensID                            Long        1  Sony E 50mm F1.8 OSS
$ </pre>I suspect the scenario is that your camera's firmware predates the lens and thinks "Don't know what lens this is, so I'll set LensID=0xffff"  However, it's quite likely that a firmware upgrade to your camera will set LensID correctly and unambiguously.</p>


	<p>Uncle Robin and Uncle Phil have to fixed for it for now.  A simple "Thank You, Robin and Phil" would be appreciated.</p></div>
    </div>
  </div>
  
  <div id="change-4686" class="journal has-notes">
    <div id="note-9">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-9" class="journal-link">#9</a>
    </div>
    <h4>
      
      Updated by Anonymous <a title="12 Jan 2016 22:55" href="/projects/exiv2/activity?from=2016-01-12">almost 6 years</a> ago
      <span id="journal-4686-private_notes" class=""></span>
    </h4>

    <div id="journal-4686-notes" class="wiki"><p>Aaahh.. Im sorry. I used -pv instead of -pa :/<br />Works good for me now!</p>


	<p>About the thank you: I said that before, but maybe it didn’t come over in the right way as I had further questions. <br />So here I go: Thank You, Robin and Phil! :) I really appreciate the hard work you are putting into Tags, making life easier for people :)</p>


	<p>I had another look at the code and checked pictures of my kit lens, to understand what the code is doing. <br />It is calculating a number from the used focal length, taking the APS-C sensor in account by also using the 35mm equivalent and this focal length max aperture on this focal length.</p>


	<p>That means that I have to provide: The steps of MaxAperture and the range of focal length it is available for.</p>


	<p>Did I understand that correct?</p></div>
    </div>
  </div>
  
  <div id="change-4687" class="journal has-notes">
    <div id="note-10">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-10" class="journal-link">#10</a>
    </div>
    <h4>
      
      Updated by Anonymous <a title="12 Jan 2016 23:22" href="/projects/exiv2/activity?from=2016-01-12">almost 6 years</a> ago
      <span id="journal-4687-private_notes" class=""></span>
    </h4>

    <div id="journal-4687-notes" class="wiki"><p>Ok. So I figured now that the calculation is always 150, as it just recalculates the crop factor, doesn’t it? :D<br />So I still don’t understand it :/</p>


	<p>But I created a table with all the F-Stops for "Sony E PZ 16-50mm F3.5-5.6 OSS":</p>


	<p>MaxApertureValue: FocalLength(FocalLengthIn35mmFilm)<br />F3.5: 16mm(24mm)-18mm(27mm)<br />F4  : 18mm(27mm)-23mm(34mm)<br />F4.5: 24mm(36mm)-29mm(43mm)<br />F5  : 30mm(45mm)-34mm(51mm)<br />F5.6: 35mm(52mm)-50mm(75mm)</p>


	<p>I will upload all the samples, but I have a very poor upload, so it will take the night :D</p></div>
    </div>
  </div>
  
  <div id="change-4688" class="journal has-notes">
    <div id="note-11">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-11" class="journal-link">#11</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="12 Jan 2016 23:39" href="/projects/exiv2/activity?from=2016-01-12">almost 6 years</a> ago
      <span id="journal-4688-private_notes" class=""></span>
    </h4>

    <div id="journal-4688-notes" class="wiki"><p>Thanks for the files which will arrive overnight.  I'm off to bed (it's 11:36pm).  I'll look at them tomorrow.</p>


	<p>It think the ratio will always be 1.5, however there could be a little rounding - so I test 1.48 .. 1.52 (but not in floating point).  I throw in a 100 multiplier to use range 148 .. 152</p>


<hr />


	<p>Yes.  I know you said thanks up front.  However the pissing and moaning about the solution blunted your appreciation!</p>


<hr />


	<p>The bummer in all of this is that it depends on the Camera/Lens combination what must be computed to make an intelligent guess.  MaxAperture and FocalLength are important ingredients in the "heuristic" code.  However, you'll see that he calculates log-log stuff at times!  Non trivial.</p>


	<p>Here are my current thoughts about how to fix this (in <a class="issue tracker-2 status-5 priority-4 priority-default closed" title="Feature: Camera accessory overflow file (Closed)" href="/issues/1034">#1034</a>)<br />1) I'm going to have a web service running exiftool.<br />2) When exiv2 doesn't recognise the lens, I'll generate a .exv file (metadata only JPG) and send it to the web service.<br />3) If exiftool doesn't recognise it, I'll log that.  It's something new (however we have a metadata file for analysis)<br />4) If exiftool recognises it, I'll log that.  I can analyse the metadata and update our C++ code</p>


	<p>Other ideas that I am not pursuing:<br /><strong>1:</strong> Rewrite the Perl code in C++<br />Not impossible.  Not trivial.</p>


	<p><strong>2:</strong> Execute exiftool on the user's computer<br />I think that will throw up a DOS box on Windows</p>


	<p><strong>3:</strong> To write the Lens recognition in a scripting language that can be executed by exiv2.<br />A sufficiently rich PostScript or Lisp interpreter/run-time can be implemented in 1000-2000 lines of code<br />The scripting code would be in libexiv2.14.script in the same directory as libexiv2.14.so<br />The scripting code could be modified without recompiling libexiv2.14.so<br />The scripting code would only run when the C++ is unable to recognise the lens, so it wouldn't impose much overhead</p>


	<p><strong>4:</strong> To have an SQLite database of lens/camera metadata<br />So the code would ask the database (stored in libexiv2.14.sqlite<br />SELECT "LensType when LensID=0xffff and Camera_Model=ILCE-6000 bla bla" <br />If it fails, it could use exiftool as a web service and update the database on the local computer</p>


	<p><strong>5:</strong> To have an 'overflow' file which is consulted when the lens isn't recognised<br />We didn't make progress beyond arguing about the language of that file (XML, Json, CSV)<br />We made no progress on what should be in the 'overflow' file</p>


	<p>Please remember, we're only doing this when the LensID is not uniquely set.  It's the Camera/Lens manufacturers who have donated this issue to their customers.  As always with firmware/hardware issues, it's the software people who have to clean up and endure the criticism for the deficiency of the firmware.</p>


	<p>Thanks again for your help with geeqie (<a class="issue tracker-3 status-5 priority-4 priority-default closed" title="Support: Small raw images size  (Closed)" href="/issues/1151">#1151</a>).  I haven't heard from Wil since Sunday.  I suspect that will close with "cannot reproduce/insufficient information".</p></div>
    </div>
  </div>
  
  <div id="change-4689" class="journal has-notes">
    <div id="note-12">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-12" class="journal-link">#12</a>
    </div>
    <h4>
      
      Updated by Anonymous <a title="13 Jan 2016 06:21" href="/projects/exiv2/activity?from=2016-01-13">almost 6 years</a> ago
      <span id="journal-4689-private_notes" class=""></span>
    </h4>

    <div id="journal-4689-notes" class="wiki"><p><a class="external" href="https://www.dropbox.com/s/jkgacshdtt4r1kq/Sony%20E%20PZ%2016-50mm%20F3.5-5.6%20OSS.7z?dl=0">https://www.dropbox.com/s/jkgacshdtt4r1kq/Sony%20E%20PZ%2016-50mm%20F3.5-5.6%20OSS.7z?dl=0</a></p></div>
    </div>
  </div>
  
  <div id="change-4690" class="journal has-notes">
    <div id="note-13">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-13" class="journal-link">#13</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="13 Jan 2016 12:44" href="/projects/exiv2/activity?from=2016-01-13">almost 6 years</a> ago
      <span id="journal-4690-private_notes" class=""></span>
    </h4>

    <div id="journal-4690-notes" class="wiki"><p>Fix submitted: <a class="changeset" title="#1153  Fixes for &quot;Sony E PZ 16-50mm F3.5-5.6 OSS&quot;" href="/projects/exiv2/repository/exiv2/revisions/4182">r4182</a>.  Test output below.  I've extracted the metadata from all your test files (both .ARW and .JPG) and added them to our test suite.</p>


	<p>Original test files submitted: <a class="changeset" title="#1153 test files" href="/projects/exiv2/repository/exiv2/revisions/4183">r4183</a>.  I copied your original test files to svn://dev.exiv2.org/svn/testdata/trunk/1153 for future use.  I don't expect to visit those file again as we have the metadata in the test suite.  To constrain the size of the test suite, we avoid adding large JPG and RAW files to code branches.  Thank You for sharing those files.  You may remove your .7z file from Dropbox.</p>


	<p>There is conflict concerning the naming of this lens.  The .ARW (1775-1784) files contain the Ascii string "E 50mm F1.8 OSS" and I've adopted that name for the associated JPG files.  Similarly, 1769 is consistently named "Sony E 50mm F1.8 OSS" by exiv2.</p>


<pre>1590 rmills@rmillsmbp:~/gnu/exiv2/trunk $ exiv2 -pa --grep Lens/i ../testdata/trunk/1153/*.ARW
../testdata/trunk/1153/DSC01769.ARW  Exif.Sony2.LensID                            Long        1  Sony E 50mm F1.8 OSS
../testdata/trunk/1153/DSC01769.ARW  Exif.Photo.LensSpecification                 Rational    4  500/10 500/10 18/10 18/10
../testdata/trunk/1153/DSC01769.ARW  Exif.Photo.LensModel                         Ascii      16  E 50mm F1.8 OSS
../testdata/trunk/1153/DSC01775.ARW  Exif.Sony2.LensID                            Long        1  E PZ 16-50mm F3.5-5.6 OSS
../testdata/trunk/1153/DSC01775.ARW  Exif.Photo.LensSpecification                 Rational    4  160/10 500/10 35/10 56/10
../testdata/trunk/1153/DSC01775.ARW  Exif.Photo.LensModel                         Ascii      26  E PZ 16-50mm F3.5-5.6 OSS
../testdata/trunk/1153/DSC01776.ARW  Exif.Sony2.LensID                            Long        1  E PZ 16-50mm F3.5-5.6 OSS
../testdata/trunk/1153/DSC01776.ARW  Exif.Photo.LensSpecification                 Rational    4  160/10 500/10 35/10 56/10
../testdata/trunk/1153/DSC01776.ARW  Exif.Photo.LensModel                         Ascii      26  E PZ 16-50mm F3.5-5.6 OSS
../testdata/trunk/1153/DSC01777.ARW  Exif.Sony2.LensID                            Long        1  E PZ 16-50mm F3.5-5.6 OSS
../testdata/trunk/1153/DSC01777.ARW  Exif.Photo.LensSpecification                 Rational    4  160/10 500/10 35/10 56/10
../testdata/trunk/1153/DSC01777.ARW  Exif.Photo.LensModel                         Ascii      26  E PZ 16-50mm F3.5-5.6 OSS
../testdata/trunk/1153/DSC01778.ARW  Exif.Sony2.LensID                            Long        1  E PZ 16-50mm F3.5-5.6 OSS
../testdata/trunk/1153/DSC01778.ARW  Exif.Photo.LensSpecification                 Rational    4  160/10 500/10 35/10 56/10
../testdata/trunk/1153/DSC01778.ARW  Exif.Photo.LensModel                         Ascii      26  E PZ 16-50mm F3.5-5.6 OSS
../testdata/trunk/1153/DSC01779.ARW  Exif.Sony2.LensID                            Long        1  E PZ 16-50mm F3.5-5.6 OSS
../testdata/trunk/1153/DSC01779.ARW  Exif.Photo.LensSpecification                 Rational    4  160/10 500/10 35/10 56/10
../testdata/trunk/1153/DSC01779.ARW  Exif.Photo.LensModel                         Ascii      26  E PZ 16-50mm F3.5-5.6 OSS
../testdata/trunk/1153/DSC01780.ARW  Exif.Sony2.LensID                            Long        1  E PZ 16-50mm F3.5-5.6 OSS
../testdata/trunk/1153/DSC01780.ARW  Exif.Photo.LensSpecification                 Rational    4  160/10 500/10 35/10 56/10
../testdata/trunk/1153/DSC01780.ARW  Exif.Photo.LensModel                         Ascii      26  E PZ 16-50mm F3.5-5.6 OSS
../testdata/trunk/1153/DSC01781.ARW  Exif.Sony2.LensID                            Long        1  E PZ 16-50mm F3.5-5.6 OSS
../testdata/trunk/1153/DSC01781.ARW  Exif.Photo.LensSpecification                 Rational    4  160/10 500/10 35/10 56/10
../testdata/trunk/1153/DSC01781.ARW  Exif.Photo.LensModel                         Ascii      26  E PZ 16-50mm F3.5-5.6 OSS
../testdata/trunk/1153/DSC01782.ARW  Exif.Sony2.LensID                            Long        1  E PZ 16-50mm F3.5-5.6 OSS
../testdata/trunk/1153/DSC01782.ARW  Exif.Photo.LensSpecification                 Rational    4  160/10 500/10 35/10 56/10
../testdata/trunk/1153/DSC01782.ARW  Exif.Photo.LensModel                         Ascii      26  E PZ 16-50mm F3.5-5.6 OSS
../testdata/trunk/1153/DSC01783.ARW  Exif.Sony2.LensID                            Long        1  E PZ 16-50mm F3.5-5.6 OSS
../testdata/trunk/1153/DSC01783.ARW  Exif.Photo.LensSpecification                 Rational    4  160/10 500/10 35/10 56/10
../testdata/trunk/1153/DSC01783.ARW  Exif.Photo.LensModel                         Ascii      26  E PZ 16-50mm F3.5-5.6 OSS
../testdata/trunk/1153/DSC01784.ARW  Exif.Sony2.LensID                            Long        1  E PZ 16-50mm F3.5-5.6 OSS
../testdata/trunk/1153/DSC01784.ARW  Exif.Photo.LensSpecification                 Rational    4  160/10 500/10 35/10 56/10
../testdata/trunk/1153/DSC01784.ARW  Exif.Photo.LensModel                         Ascii      26  E PZ 16-50mm F3.5-5.6 OSS
1591 rmills@rmillsmbp:~/gnu/exiv2/trunk $ exiv2 -pa --grep Lens/i ../testdata/trunk/1153/*.JPG
../testdata/trunk/1153/DSC01769.JPG  Exif.Sony1.LensID                            Long        1  Sony E 50mm F1.8 OSS
../testdata/trunk/1153/DSC01775.JPG  Exif.Sony1.LensID                            Long        1  E PZ 16-50mm F3.5-5.6 OSS
../testdata/trunk/1153/DSC01776.JPG  Exif.Sony1.LensID                            Long        1  E PZ 16-50mm F3.5-5.6 OSS
../testdata/trunk/1153/DSC01777.JPG  Exif.Sony1.LensID                            Long        1  E PZ 16-50mm F3.5-5.6 OSS
../testdata/trunk/1153/DSC01778.JPG  Exif.Sony1.LensID                            Long        1  E PZ 16-50mm F3.5-5.6 OSS
../testdata/trunk/1153/DSC01779.JPG  Exif.Sony1.LensID                            Long        1  E PZ 16-50mm F3.5-5.6 OSS
../testdata/trunk/1153/DSC01780.JPG  Exif.Sony1.LensID                            Long        1  E PZ 16-50mm F3.5-5.6 OSS
../testdata/trunk/1153/DSC01781.JPG  Exif.Sony1.LensID                            Long        1  E PZ 16-50mm F3.5-5.6 OSS
../testdata/trunk/1153/DSC01782.JPG  Exif.Sony1.LensID                            Long        1  E PZ 16-50mm F3.5-5.6 OSS
../testdata/trunk/1153/DSC01783.JPG  Exif.Sony1.LensID                            Long        1  E PZ 16-50mm F3.5-5.6 OSS
../testdata/trunk/1153/DSC01784.JPG  Exif.Sony1.LensID                            Long        1  E PZ 16-50mm F3.5-5.6 OSS
1592 rmills@rmillsmbp:~/gnu/exiv2/trunk $ </pre></div>
    </div>
  </div>
  
  <div id="change-4691" class="journal has-details">
    <div id="note-14">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-14" class="journal-link">#14</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="13 Jan 2016 18:49" href="/projects/exiv2/activity?from=2016-01-13">almost 6 years</a> ago
      <span id="journal-4691-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Tracker</strong> changed from <i>Bug</i> to <i>Feature</i></li>
       <li><strong>% Done</strong> changed from <i>80</i> to <i>100</i></li>
       <li><strong>Estimated time</strong> changed from <i>4.00 h</i> to <i>5.00 h</i></li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-4719" class="journal has-notes">
    <div id="note-15">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-15" class="journal-link">#15</a>
    </div>
    <h4>
      
      Updated by Anonymous <a title="14 Jan 2016 22:39" href="/projects/exiv2/activity?from=2016-01-14">almost 6 years</a> ago
      <span id="journal-4719-private_notes" class=""></span>
    </h4>

    <div id="journal-4719-notes" class="wiki"><p>I had an exam, so just now had the time to test it. Thank you very much! Works perfectly! :)<br />If I get a new lens(could take some time.. testing out some old russian lenses recently; obviously without any electronics :D), should I open a new ticket or reuse this one?</p>


	<p>Again, Thank you very much :)</p></div>
    </div>
  </div>
  
  <div id="change-4720" class="journal has-notes">
    <div id="note-16">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-16" class="journal-link">#16</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="14 Jan 2016 22:45" href="/projects/exiv2/activity?from=2016-01-14">almost 6 years</a> ago
      <span id="journal-4720-private_notes" class=""></span>
    </h4>

    <div id="journal-4720-notes" class="wiki"><p>Tim: It's nice to work with you.  You can update this ticket, or raise a new one.  I'm sure you'll find camera/lens combinations that are broken.  You know I will investigate and try to fix things.</p></div>
    </div>
  </div>
  
  <div id="change-4723" class="journal has-notes">
    <div id="note-17">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-17" class="journal-link">#17</a>
    </div>
    <h4>
      
      Updated by Anonymous <a title="14 Jan 2016 23:10" href="/projects/exiv2/activity?from=2016-01-14">almost 6 years</a> ago
      <span id="journal-4723-private_notes" class=""></span>
    </h4>

    <div id="journal-4723-notes" class="wiki"><p>Ok. I didnt expect such a quick update :D<br />Im using Darktable for RAW editing. Built the new exiv2 and tried, without sucess. I went to the darktable IRC to ask, and they said that I'll have to buid it against the new library. Now I didnt do that till now as some dependencies are missing for me, but I discovered that the .ARWs are tagged at Exif.Sony2.LensID and the JPGs at Exif.Sony1.LensID.<br />I asked if that is going to be a problem and houz replied:</p>


<blockquote>

	<p>[00:52] &lt;houz&gt; $ grep Sony exif.cc | grep Lens<br />[00:52] &lt;houz&gt;     if(FIND_EXIF_TAG("Exif.Sony2.LensID") &#38;&#38; pos->toLong() != 65535 &#38;&#38; pos->print().find('|') == std::string::npos)<br />[00:52] &lt;houz&gt; we only look at Sony2</p>


</blockquote>

	<p>So I guess because of this and for consistency also the JPGs should get interpreted as Exif.Sony2.LensID.</p></div>
    </div>
  </div>
  
  <div id="change-4724" class="journal has-notes">
    <div id="note-18">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-18" class="journal-link">#18</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="14 Jan 2016 23:49" href="/projects/exiv2/activity?from=2016-01-14">almost 6 years</a> ago
      <span id="journal-4724-private_notes" class=""></span>
    </h4>

    <div id="journal-4724-notes" class="wiki"><p>Gosh, Tim.  It's 23:48 in England.  I'll look at this tomorrow.</p></div>
    </div>
  </div>
  
  <div id="change-4730" class="journal has-notes">
    <div id="note-19">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-19" class="journal-link">#19</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="15 Jan 2016 11:07" href="/projects/exiv2/activity?from=2016-01-15">almost 6 years</a> ago
      <span id="journal-4730-private_notes" class=""></span>
    </h4>

    <div id="journal-4730-notes" class="wiki"><p>Tim</p>


	<p>I can't understand your message.  I assume exif.cc is darktable code.  I don't know the difference between Sony1 and Sony2 because I didn't write exiv2.  I'm the project build engineer.  However in your test files, the metadata in the .ARW files is Sony2 and in the .JPG files it is Sony1.</p>


	<p>What is your question?</p></div>
    </div>
  </div>
  
  <div id="change-4744" class="journal has-notes">
    <div id="note-20">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-20" class="journal-link">#20</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="16 Jan 2016 10:27" href="/projects/exiv2/activity?from=2016-01-16">almost 6 years</a> ago
      <span id="journal-4744-private_notes" class=""></span>
    </h4>

    <div id="journal-4744-notes" class="wiki"><p>Tim</p>


	<p>Concerning your russian lenses.  Simon recently asked about a couple of "Manual Lenses" and that has been discussed in <a class="issue tracker-2 status-5 priority-4 priority-default closed" title="Feature: Manual lens does not get recogniced: Pentax macro 100mm (Closed)" href="/issues/1141">#1141</a> and <a class="issue tracker-2 status-5 priority-4 priority-default closed" title="Feature: Manual lens does not get recogniced: Beroflex zoom 500mm (Closed)" href="/issues/1142">#1142</a>  As you can see from the discussion, it's generally not possible to determine anything about those lenses.  If you have one, look at metadata such as LensSpecification - if it's almost empty (almost entirely 0s), exiv2 can do nothing to help you.  I believe it's possible to set the lensID in the metadata with exiv2 in every file in a directory with a command such as:<pre>$ exiv2 -M'set Exif.Photo.LensModel my old Russian lens' *.jpg</pre>Dedicated Linux Warriors will use <strong><code>find</code></strong> to traverse trees of images.</p></div>
    </div>
  </div>
  
  <div id="change-4746" class="journal has-notes">
    <div id="note-21">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-21" class="journal-link">#21</a>
    </div>
    <h4>
      
      Updated by Anonymous <a title="16 Jan 2016 20:07" href="/projects/exiv2/activity?from=2016-01-16">almost 6 years</a> ago
      <span id="journal-4746-private_notes" class=""></span>
    </h4>

    <div id="journal-4746-notes" class="wiki"><p>Robin Mills wrote:</p>


<blockquote>

	<p>What is your question?</p>


</blockquote>

	<p>In the .ARW files the lens is specified in the tag "Exif.Sony2.LensID". Now the recognition for the correct lens that you created here for .JPGs basically adds the missing tag of the lens as "Exif.Sony1.LensID". But why as "Exif.Sony1.LensID" when we could simply put it as "Exif.Sony2.LensID", so it has the lens name in the same tag as the .ARW files for consistency.</p>


<blockquote>

	<p>I assume exif.cc is darktable code</p>


</blockquote>

	<p>Correct. It is just looking for the "Exif.Sony2.LensID" tag. So a tag defined in "Exif.Sony1.LensID" will not show up as lens in darktable. I'm not sure what consequences an addition of "Exif.Sony1.LensID" for lens recognition would have for other sony users in darktable. I guess it has less impact if we define the lens for .JPGs in "Exif.Sony2.LensID".</p>


<blockquote>

	<p>Concerning your russian lenses.</p>


</blockquote>

	<p>That's why I wrote "obviously without any electronics" ;D But still thanks for the hint how I can do that manually!</p></div>
    </div>
  </div>
  
  <div id="change-4748" class="journal has-notes">
    <div id="note-22">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-22" class="journal-link">#22</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="16 Jan 2016 21:18" href="/projects/exiv2/activity?from=2016-01-16">almost 6 years</a> ago
      <span id="journal-4748-private_notes" class=""></span>
    </h4>

    <div id="journal-4748-notes" class="wiki"><p>My guess about Sony1 and Sony2 is the MakerNote decoder.  The Exif Spec allows the manufacturer to add a blob of binary data into the tag "MakerNote".  We have reverse engineered that.  I suspect the decoder for the .ARW is Sony2, and his JPG brother is Sony1.  I'll have a read in the code and find out more.</p>


	<p>Probably a better fix is for us to define the tag:  Exif.Photo.LensModel from the Sony1 and Sony2 decoders.  Then, the DarkTable guys should test that tag.  I don't know what DarkTable is doing, however it shouldn't really have to know about Sony1 and Sony2 - that sounds a little odd.</p>


	<p>Tim:  I think I've said this before:  I am the Exiv2 build engineer.  Niels has been looking after the MakerNote code.  I've only taken this on in the last few months.  I'm a volunteer sitting at home.  There's nobody here with whom to discuss any of this.  However I have worked on the project for 8 years, so I know my way around the code and have solved many puzzles.  Be gentle on me.  I am not a guru.  I'm a little old retired engineer.  <a class="external" href="http://dev.exiv2.org/projects/exiv2/wiki/_Robin_Mills_">http://dev.exiv2.org/projects/exiv2/wiki/_Robin_Mills_</a></p></div>
    </div>
  </div>
  
  <div id="change-4749" class="journal has-notes">
    <div id="note-23">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-23" class="journal-link">#23</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4035">Alan Pater</a> <a title="16 Jan 2016 21:47" href="/projects/exiv2/activity?from=2016-01-16">almost 6 years</a> ago
      <span id="journal-4749-private_notes" class=""></span>
    </h4>

    <div id="journal-4749-notes" class="wiki"><p>My limited understanding is that there are 2 distinct Sony FirmWares. Some cameras use the Sony1 firmware, other models use Sony2. The same applies to other camera manufactures.</p></div>
    </div>
  </div>
  
  <div id="change-4750" class="journal has-notes">
    <div id="note-24">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-24" class="journal-link">#24</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="16 Jan 2016 21:54" href="/projects/exiv2/activity?from=2016-01-16">almost 6 years</a> ago
      <span id="journal-4750-private_notes" class=""></span>
    </h4>

    <div id="journal-4750-notes" class="wiki"><p>Thanks for popping up here, Alan.  I'll have a crawl through the code tomorrow.  This metadata business is an enchanted garden.  Around every corner lies something new and mysterious.  When I extract the metadata from one of my favourite test files:<pre>543 rmills@rmillsmbp:~/gnu/exiv2/trunk $ exiv2  -pa --grep Lens/i http://clanmills.com/Stonehenge.jpg
Exif.Nikon3.LensType                         Byte        1  D G VR
Exif.Nikon3.Lens                             Rational    4  18-250mm F3.5-6.3
Exif.Nikon3.LensFStops                       Undefined   4  4.58333
Exif.NikonLd3.LensIDNumber                   Byte        1  Sigma 18-250mm F3.5-6.3 DC OS Macro HSM
Exif.NikonLd3.LensFStops                     Byte        1  F4.6
544 rmills@rmillsmbp:~/gnu/exiv2/trunk $ </pre>What is Nikon3 and NikonLd3?  Ah ..... the metadata garden fairy is at work!</p></div>
    </div>
  </div>
  
  <div id="change-4780" class="journal has-notes has-details">
    <div id="note-25">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-25" class="journal-link">#25</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="01 Feb 2016 11:44" href="/projects/exiv2/activity?from=2016-02-01">almost 6 years</a> ago
      <span id="journal-4780-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>Resolved</i> to <i>Closed</i></li>
    </ul>
    <div id="journal-4780-notes" class="wiki"><p>I'm closing this to help me to focus and concentrate on getting v0.26 finished on schedule.</p></div>
    </div>
  </div>
  
  <div id="change-4838" class="journal has-notes">
    <div id="note-26">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-26" class="journal-link">#26</a>
    </div>
    <h4>
      
      Updated by Anonymous <a title="14 Mar 2016 12:07" href="/projects/exiv2/activity?from=2016-03-14">over 5 years</a> ago
      <span id="journal-4838-private_notes" class=""></span>
    </h4>

    <div id="journal-4838-notes" class="wiki"><p>Hi!<br />Today an update for many Sony Cameras has been released. (<a class="external" href="http://esupport.sony.com/US/p/swu-download.pl?mdl=ILCE6000&#38;upd_id=10716&#38;os_group_id=29">http://esupport.sony.com/US/p/swu-download.pl?mdl=ILCE6000&#38;upd_id=10716&#38;os_group_id=29</a>)</p>


	<p>Excerpt from the changelog:<br />"- The lens name will be correctly recorded in the EXIF"</p>


	<p>I will install this update, test it and report back. But it could turn out that the extra code you created may become obsolete.</p>


	<p>Thank you very much for your efforts!</p></div>
    </div>
  </div>
  
  <div id="change-4839" class="journal has-notes">
    <div id="note-27">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-27" class="journal-link">#27</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="14 Mar 2016 12:42" href="/projects/exiv2/activity?from=2016-03-14">over 5 years</a> ago
      <span id="journal-4839-private_notes" class=""></span>
    </h4>

    <div id="journal-4839-notes" class="wiki"><p>Tim</p>


	<p>I'll be <em><strong>really happy</strong></em> if my code for lens recognition is obsolete.  I'm a retired Adobe Senior Computer Scientist and my happiest projects have been compilers and interpreters.  The compiler is a 100% accurate deterministic software machine.  It doesn't guess anything.  It converts source into code.  I strongly dislike guessing anything.  The lens should be 100% defined by the manufacturer in the metadata.   Anything else is a bodge or hacking.  Thanks for the update.</p></div>
    </div>
  </div>
  
  <div id="change-4840" class="journal has-notes has-details">
    <div id="note-28">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-28" class="journal-link">#28</a>
    </div>
    <h4>
      
      Updated by Anonymous <a title="14 Mar 2016 13:07" href="/projects/exiv2/activity?from=2016-03-14">over 5 years</a> ago
      <span id="journal-4840-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>File</strong> <a href="/attachments/979">DSC02521.JPG</a> <a class="icon-only icon-download" title="Download" href="/attachments/download/979/DSC02521.JPG">DSC02521.JPG</a> added</li>
    </ul>
    <div id="journal-4840-notes" class="wiki"><p>The issue is fixed by Sony.<br />Firmware upgrade from 2.0 to 3.1 on A6000 fixes it.<br />I attached a .JPG for reference.</p>


	<p>Again, thank you for the efforts you made!</p></div>
    </div>
  </div>
  
  <div id="change-4841" class="journal has-notes">
    <div id="note-29">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-29" class="journal-link">#29</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="14 Mar 2016 13:09" href="/projects/exiv2/activity?from=2016-03-14">over 5 years</a> ago
      <span id="journal-4841-private_notes" class=""></span>
    </h4>

    <div id="journal-4841-notes" class="wiki"><p>You've made my day. Thanks for letting me know.  And thanks for using exiv2.</p></div>
    </div>
  </div>
  
  <div id="change-5206" class="journal has-notes">
    <div id="note-30">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-30" class="journal-link">#30</a>
    </div>
    <h4>
      
      Updated by Anonymous <a title="09 Jul 2016 07:17" href="/projects/exiv2/activity?from=2016-07-09">over 5 years</a> ago
      <span id="journal-5206-private_notes" class=""></span>
    </h4>

    <div id="journal-5206-notes" class="wiki"><p>I actually have to revoke what I said. I guess back then I did not properly revert the exiv2 version and checked with the patched one.</p>


	<p>I set up a new system and figured that I was wrong. Nothing changed.</p>


	<p>So the patch should be inserted again :/</p>


	<p>Thanks!</p></div>
    </div>
  </div>
  
  <div id="change-5209" class="journal has-notes">
    <div id="note-31">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-31" class="journal-link">#31</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="24 Jul 2016 09:27" href="/projects/exiv2/activity?from=2016-07-24">over 5 years</a> ago
      <span id="journal-5209-private_notes" class=""></span>
    </h4>

    <div id="journal-5209-notes" class="wiki"><p>Tim.  I can't compute your message.  Do you want me to do something?</p></div>
    </div>
  </div>
  
  <div id="change-5210" class="journal has-notes">
    <div id="note-32">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-32" class="journal-link">#32</a>
    </div>
    <h4>
      
      Updated by Anonymous <a title="24 Jul 2016 14:01" href="/projects/exiv2/activity?from=2016-07-24">over 5 years</a> ago
      <span id="journal-5210-private_notes" class=""></span>
    </h4>

    <div id="journal-5210-notes" class="wiki"><p>Consider comment #28 as wrong. The issue was not fixed by Sony. The patch unfortunately is still required for correct lens recognition.</p></div>
    </div>
  </div>
  
  <div id="change-5214" class="journal has-notes">
    <div id="note-33">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-33" class="journal-link">#33</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="24 Jul 2016 19:46" href="/projects/exiv2/activity?from=2016-07-24">over 5 years</a> ago
      <span id="journal-5214-private_notes" class=""></span>
    </h4>

    <div id="journal-5214-notes" class="wiki"><p>Right.  I think you're saying that the Sony Firmware upgrade is not effective and that we should retain patch r4181/r4182/r4208 in the exiv2 code base.  That's fine. Thanks for updating this issue with this information.</p></div>
    </div>
  </div>
  
  <div id="change-5219" class="journal has-notes">
    <div id="note-34">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-34" class="journal-link">#34</a>
    </div>
    <h4>
      
      Updated by Anonymous <a title="28 Jul 2016 11:18" href="/projects/exiv2/activity?from=2016-07-28">over 5 years</a> ago
      <span id="journal-5219-private_notes" class=""></span>
    </h4>

    <div id="journal-5219-notes" class="wiki"><p>It seems that the behavior is not the same for all lenses. I just tested some other lenses:</p>


	<p>Here the results without the patch:<br />@exiv2 -pv --grep Lens /home/tim/Bilder/Fotosammlung/2016/07/27/DSC07171.JPG<br />0xb027 Sony1        LensID                      Long        1  65535<br />0xa432 Photo        LensSpecification           Rational    4  350/10 350/10 18/10 18/10<br />0xa434 Photo        LensModel                   Ascii      16  E 35mm F1.8 OSS</p>


	<p>tim@Tims-Laptop ~ $ exiv2 -pv --grep Lens /home/tim/Bilder/Fotosammlung/2016/07/27/DSC07178.JPG<br />0xb027 Sony1        LensID                      Long        1  65535<br />0xa432 Photo        LensSpecification           Rational    4  300/10 300/10 28/10 28/10<br />0xa434 Photo        LensModel                   Ascii      12  E 30mm F2.8</p>


	<p>tim@Tims-Laptop ~ $ exiv2 -pv --grep Lens /home/tim/Bilder/Fotosammlung/2016/07/27/DSC07177.JPG<br />0xb027 Sony1        LensID                      Long        1  65535<br />0xa432 Photo        LensSpecification           Rational    4  300/10 300/10 14/10 14/10<br />0xa434 Photo        LensModel                   Ascii      35  30mm F1.4 DC DN | Contemporary 016</p>


	<p>tim@Tims-Laptop ~ $ exiv2 -pv --grep Lens /home/tim/Bilder/Fotosammlung/2016/04/Burger/DSC03880.JPG <br />0xb027 Sony1        LensID                      Long        1  65535</p>


	<p>tim@Tims-Laptop ~ $ exiv2 -pv --grep Lens /home/tim/Bilder/Fotosammlung/2016/04/Burger/DSC03880.ARW<br />0xb027 Sony2        LensID                      Long        1  65535<br />0xa432 Photo        LensSpecification           Rational    4  500/10 500/10 18/10 18/10<br />0xa434 Photo        LensModel                   Ascii      16  E 50mm F1.8 OSS</p>


	<p>exiv2 -pv --grep Lens /home/tim/Bilder/Fotosammlung/2016/05/Stipro\ Skrejiens/DSC04924.ARW <br />0xb027 Sony2        LensID                      Long        1  65535<br />0xa432 Photo        LensSpecification           Rational    4  160/10 500/10 35/10 56/10<br />0xa434 Photo        LensModel                   Ascii      26  E PZ 16-50mm F3.5-5.6 OSS</p>


	<p>tim@Tims-Laptop ~ $ exiv2 -pv --grep Lens /home/tim/Bilder/Fotosammlung/2016/05/Stipro\ Skrejiens/DSC04924.JPG<br />0xb027 Sony1        LensID                      Long        1  65535@</p>


	<p>As you can see, the Lens is correctly detected in JPG files for photos with  "Sony E 35mm F1.8 OSS", "Sigma 30mm F1.4 DC DN" and "Sigma E 30mm F2.8" (I also added the output of the 50mm and 16-50mm, so you see the difference). All photos were shot with A6000 with firmware 3.10. I hope that the patch you included does not interfere with the correct recognition of those lenses.</p>


	<p>Thanks again!</p></div>
    </div>
  </div>
  
  <div id="change-5220" class="journal has-notes">
    <div id="note-35">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-35" class="journal-link">#35</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="28 Jul 2016 13:33" href="/projects/exiv2/activity?from=2016-07-28">over 5 years</a> ago
      <span id="journal-5220-private_notes" class=""></span>
    </h4>

    <div id="journal-5220-notes" class="wiki"><p>I can't recall if we've had this conversation already.  I really dislike the idea that Exiv2 does lens recognition.  Our mission is to read/write/update meta data in images files.  We support many camera manufacturers makernotes, several formats (Exif, IPTC and XMP) and many platforms.</p>


	<p>I believe the Exif standard uses a LensID (and integer) and combined with the manufacturer's id, we can recognised the lens.  However the manufacturers often use the same LensID for many different lenses.  Exiv2 attempts to guess the lens by inspecting other metadata.  I don't know how this feature was added to the library, however it's very time consuming to maintain this as new lenses are introduced.</p>


	<p>I've added a new feature for v0.26 to use a file ~/.exiv2 (or /Users/username/exiv2.ini) to translate the lensID for a manufacturer into a lens definition.  By updating that file on your computer, all applications using exiv2 will know your lens.</p></div>
    </div>
  </div>
  


</div>

<div style="clear: both;"></div>
<div class="contextual">





</div>


<div style="clear: both;"></div>


<p class="other-formats">Also available in:  <span><a class="atom" rel="nofollow" href="/issues/1153.atom">Atom</a></span>
  <span><a class="pdf" rel="nofollow" href="/issues/1153.pdf">PDF</a></span>
</p>





        
        <div style="clear:both;"></div>
    </div>
</div>
</div>

<div id="ajax-indicator" style="display:none;"><span>Loading...</span></div>
<div id="ajax-modal" style="display:none;"></div>

<div id="footer">
  <div class="bgl"><div class="bgr">
    Powered by <a href="https://www.redmine.org/">Redmine</a> &copy; 2006-2018 Jean-Philippe Lang
  </div></div>
</div>
</div>
</div>

</body>
</html>
