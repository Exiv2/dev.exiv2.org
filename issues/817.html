<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<title>Bug #817: zlib 1.2.6 - Exiv2</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="description" content="Redmine" />
<meta name="keywords" content="issue,bug,tracker" />
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="apjBptfH04ZoX7YbFuh5uYr0QDtdBQtzMWL3uG2A/QeI1WpJpb0fhj07qRepP3WKtWYUQqzmqsnMQmcwLrkaaA==" />
<link rel='shortcut icon' href='/favicon.ico?1550767427' />
<link rel="stylesheet" media="all" href="/stylesheets/jquery/jquery-ui-1.11.0.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/application.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/responsive.css?1550767427" />

<script src="/javascripts/jquery-1.11.1-ui-1.11.0-ujs-4.3.1.js?1550767427"></script>
<script src="/javascripts/application.js?1550767427"></script>
<script src="/javascripts/responsive.js?1550767427"></script>
<script>
//<![CDATA[
$(window).load(function(){ warnLeavingUnsaved('The current page contains unsaved text that will be lost if you leave this page.'); });
//]]>
</script>


<!-- page specific tags -->
    <link rel="alternate" type="application/atom+xml" title="Exiv2 - Bug #817: zlib 1.2.6" href="https://dev.exiv2.org/issues/817.atom" />
<script src="/javascripts/context_menu.js?1550767427"></script><link rel="stylesheet" media="screen" href="/stylesheets/context_menu.css?1550767427" /></head>
<body class="project-exiv2 has-main-menu controller-issues action-show avatars-off">

<div id="wrapper">

<div class="flyout-menu js-flyout-menu">


        <div class="flyout-menu__search">
            <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
            <input type="hidden" name="issues" value="1" />
            <label class="search-magnifier search-magnifier--flyout" for="flyout-search">&#9906;</label>
            <input type="text" name="q" id="flyout-search" class="small js-search-input" placeholder="Search" />
</form>        </div>


        <h3>Project</h3>
        <span class="js-project-menu"></span>

    <h3>General</h3>
    <span class="js-general-menu"></span>

    <span class="js-sidebar flyout-menu__sidebar"></span>

    <h3>Profile</h3>
    <span class="js-profile-menu"></span>

</div>

<div id="wrapper2">
<div id="wrapper3">
<div id="top-menu">
    <div id="account">
        <ul><li><a class="login" href="/login">Sign in</a></li></ul>    </div>
    
    <ul><li><a class="home" href="/">Home</a></li><li><a class="projects" href="/projects">Projects</a></li><li><a class="help" href="https://www.redmine.org/guide">Help</a></li></ul></div>

<div id="header">

    <a href="#" class="mobile-toggle-button js-flyout-menu-toggle-button"></a>

    <div id="quick-search">
        <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
        <input type="hidden" name="scope" />
        <input type="hidden" name="issues" value="1" />
        <label for='q'>
          <a accesskey="4" href="/projects/exiv2/search">Search</a>:
        </label>
        <input type="text" name="q" id="q" size="20" class="small" accesskey="f" />
</form>        <div id="project-jump" class="drdn"><span class="drdn-trigger">Exiv2</span><div class="drdn-content"><div class="quick-search"><input type="text" name="q" id="projects-quick-search" value="" class="autocomplete" data-automcomplete-url="/projects/autocomplete.js?jump=issues" autocomplete="off" /></div><div class="drdn-items projects selection"></div><div class="drdn-items all-projects selection"><a href="/projects?jump=issues">All Projects</a></div></div></div>
    </div>

    <h1><span class="current-project">Exiv2</span></h1>

    <div id="main-menu" class="tabs">
        <ul><li><a class="overview" href="/projects/exiv2">Overview</a></li><li><a class="activity" href="/projects/exiv2/activity">Activity</a></li><li><a class="roadmap" href="/projects/exiv2/roadmap">Roadmap</a></li><li><a class="issues selected" href="/projects/exiv2/issues">Issues</a></li><li><a class="news" href="/projects/exiv2/news">News</a></li><li><a class="wiki" href="/projects/exiv2/wiki">Wiki</a></li><li><a class="boards" href="/projects/exiv2/boards">Forums</a></li><li><a class="repository" href="/projects/exiv2/repository">Repository</a></li></ul>
        <div class="tabs-buttons" style="display:none;">
            <button class="tab-left" onclick="moveTabLeft(this); return false;"></button>
            <button class="tab-right" onclick="moveTabRight(this); return false;"></button>
        </div>
    </div>
</div>

<div id="main" class="">
    <div id="sidebar">
          <h3>Issues</h3>

<ul>
<li><a href="/projects/exiv2/issues?set_filter=1">View all issues</a></li>
<li><a href="/projects/exiv2/issues/report">Summary</a></li>

</ul>









        
    </div>

    <div id="content">
        
        <div class="contextual">





</div>


<h2>Bug #817</h2>

<div class="issue tracker-1 status-5 priority-4 priority-default closed details">

  <div class="gravatar-with-child">
    
    
  </div>

<div class="subject">
<div><h3>zlib 1.2.6</h3></div>
</div>
        <p class="author">
        Added by <a class="user active" href="/users/2456">Daniel Kaneider</a> <a title="19 Mar 2012 03:33" href="/projects/exiv2/activity?from=2012-03-19">over 9 years</a> ago.
        Updated <a title="24 Jul 2013 15:31" href="/projects/exiv2/activity?from=2013-07-24">over 8 years</a> ago.
        </p>

<div class="attributes">
<div class="splitcontent"><div class="splitcontentleft"><div class="status attribute"><div class="label">Status:</div><div class="value">Closed</div></div><div class="priority attribute"><div class="label">Priority:</div><div class="value">Normal</div></div><div class="assigned-to attribute"><div class="label">Assignee:</div><div class="value"><a class="user active" href="/users/119">Robin Mills</a></div></div><div class="category attribute"><div class="label">Category:</div><div class="value">build</div></div><div class="fixed-version attribute"><div class="label">Target version:</div><div class="value"><a title="31 Jul 2013" href="/versions/50">0.24</a></div></div></div><div class="splitcontentleft"><div class="start-date attribute"><div class="label">Start date:</div><div class="value">19 Mar 2012</div></div><div class="due-date attribute"><div class="label">Due date:</div><div class="value"></div></div><div class="progress attribute"><div class="label">% Done:</div><div class="value"><table class="progress progress-100"><tr><td style="width: 100%;" class="closed" title="100%"></td></tr></table><p class="percent">100%</p></div></div><div class="estimated-hours attribute"><div class="label">Estimated time:</div><div class="value"></div></div></div></div>


</div>

<hr />
<div class="description">
  <div class="contextual">
  
  </div>

  <p><strong>Description</strong></p>
  <div class="wiki">
  <p>Please upgrade the build files, especially (msvc64/zlib/zlib.vcproj), to use the newest zlib version.</p>


	<p>Thanks,<br />Daniel</p>
  </div>
</div>







</div>




<div id="history">
<h3>History</h3>
  <div id="change-2089" class="journal has-notes">
    <div id="note-1">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-1" class="journal-link">#1</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/360">Thomas Beutlich</a> <a title="19 Mar 2012 06:11" href="/projects/exiv2/activity?from=2012-03-19">over 9 years</a> ago
      <span id="journal-2089-private_notes" class=""></span>
    </h4>

    <div id="journal-2089-notes" class="wiki"><p>Daniel Kaneider wrote:</p>


<blockquote>

	<p>Please upgrade the build files, especially (msvc64/zlib/zlib.vcproj), to use the newest zlib version.</p>


	<p>Thanks,<br />Daniel</p>


</blockquote>

	<p>Better wait for 1.2.7 which is due soon. zlib 1.2.7 has better multi-platform compilation support whereas 1.2.6 cannot be compiled for x64 out of the box.</p></div>
    </div>
  </div>
  
  <div id="change-2107" class="journal has-notes has-details">
    <div id="note-2">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-2" class="journal-link">#2</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="22 Apr 2012 03:29" href="/projects/exiv2/activity?from=2012-04-22">over 9 years</a> ago
      <span id="journal-2107-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Assignee</strong> set to <i>Robin Mills</i></li>
       <li><strong>Target version</strong> set to <i>0.24</i></li>
    </ul>
    <div id="journal-2107-notes" class="wiki"><p>I'll have a look at this after we've finished on 0.23.</p>


	<p>The current msvc64 build environment provides its own vcproj to build Zlib (and expat and xmpsdk) and this was done because I didn't find a robust build environment for 64/32 builds of those libraries.  By contrast msvc (32 bit only) used the projects provided by zlib and expat and required them to be built in a directory parallel to exiv2 (this is described exiv2/msvc/README-MSVC.txt).</p>


	<p>I'll have to look at zlib 1.2.6 (and 1.2.7 if available) for exiv2 0.24.  I personally prefer the "one stop" solution in msvc64.</p></div>
    </div>
  </div>
  
  <div id="change-2108" class="journal has-notes">
    <div id="note-3">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-3" class="journal-link">#3</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="22 Apr 2012 03:39" href="/projects/exiv2/activity?from=2012-04-22">over 9 years</a> ago
      <span id="journal-2108-private_notes" class=""></span>
    </h4>

    <div id="journal-2108-notes" class="wiki"><p>I see that Expat was updated to 2.1.0 on 24 March 2012  <a class="external" href="http://www.libexpat.org/">http://www.libexpat.org/</a>  I'll add an action to this bug report to investigate the build implications of using 2.1.0.  This investigation doesn't imply that exiv2 will adopt Expat 2.1.0.</p></div>
    </div>
  </div>
  
  <div id="change-2114" class="journal has-notes">
    <div id="note-4">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-4" class="journal-link">#4</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/360">Thomas Beutlich</a> <a title="03 May 2012 11:35" href="/projects/exiv2/activity?from=2012-05-03">over 9 years</a> ago
      <span id="journal-2114-private_notes" class=""></span>
    </h4>

    <div id="journal-2114-notes" class="wiki"><p>zlib 1.2.7 was oficially released on 2nd of May 2012.</p></div>
    </div>
  </div>
  
  <div id="change-2115" class="journal has-notes">
    <div id="note-5">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-5" class="journal-link">#5</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="03 May 2012 11:41" href="/projects/exiv2/activity?from=2012-05-03">over 9 years</a> ago
      <span id="journal-2115-private_notes" class=""></span>
    </h4>

    <div id="journal-2115-notes" class="wiki"><p>Thanks for letting me know about this.  I'll take a look at 1.2.7 during May.</p></div>
    </div>
  </div>
  
  <div id="change-2143" class="journal has-notes">
    <div id="note-6">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-6" class="journal-link">#6</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="05 May 2012 00:34" href="/projects/exiv2/activity?from=2012-05-05">over 9 years</a> ago
      <span id="journal-2143-private_notes" class=""></span>
    </h4>

    <div id="journal-2143-notes" class="wiki"><p>I've looked at this and it looks OK.  For Mac, Linux, Cygwin this is pain free.  I pulled down the code, built, linked and ran the test suite.  Everything worked perfectly.</p>


	<p>MinGW produces the following error when building expat-2.1.0:</p>


	<p>/c/gnu.master/expat-2.1.0/xmlwf/xmlwf.c:626: undefined reference to `__getreent'</p>


	<p>For DevStudio, Expat 2.1.0 does not provide x64 projects.  Zlib provides project files for MSVC 9 and 10.  I've only tried on 9 (2008) and that produced the following unimpressive result:</p>


	<p>========== Build: 23 succeeded, 22 failed, 0 up-to-date, 0 skipped ==========</p>


	<p>However, I'm not discouraged.  I'll update the msvc64 development environment to support 1.2.7 and expat 2.1.0 this weekend and run the test suite.  If everything passes, I'll submit the code to the trunk.</p>


	<p>We only released 0.23 of exiv2 recently, so this is our "stable" build.</p>


	<p>The trunk's msvc64 environment can be considered "experimental".  If nobody raises an objection in the next few months, it will be the default for the exiv2 0.24 release.  I'll update the notes in msvc64/ReadMe.txt to say how to build with earlier versions of zlib (1.2.3 and 1.2.5) and expat (2.0.1)  The msvc64 tree can build 32 and 64 bit binaries using DevStudio 8, 9 and 10.  (I've also successfully tested 11 beta).</p>


	<p>Moving forward, I would like to discontinue support for the msvc build environment, so I don't intend to add support for zlib 1.2.7 and expat 2.1.0 to the projects in that branch.  The main reason to retain the msvc build environment is to support DevStudio 7.1 (2003).</p>


	<p>I don't intend to do anything concerning expat-2.1.0 on MinGW as the obviously work-around is to use 2.0.1.  If somebody requires support for 2.1.0 on MinGW, they can report the issue to the expat team.</p>


	<p>Summary:<br />1) I'll build exiv2 with msvc64 and zlib1.2.7 and expat 2.1.0 and if it passes the test suite, submit to the trunk later this weekend.<br />2) Linux (and Mac, Cygwin) users can use zlib 1.2.7 and expat 2.1.0 if they wish.<br />3) MinGW users should continue to use zlib 1.2.5.</p></div>
    </div>
  </div>
  
  <div id="change-2164" class="journal has-notes">
    <div id="note-7">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-7" class="journal-link">#7</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/2456">Daniel Kaneider</a> <a title="20 May 2012 05:46" href="/projects/exiv2/activity?from=2012-05-20">over 9 years</a> ago
      <span id="journal-2164-private_notes" class=""></span>
    </h4>

    <div id="journal-2164-notes" class="wiki"><p>Thanks for upgrading to the newest zlib/expat versions. msvc64 was the most important for me, and it can be confirmed to work.</p>


	<p>Btw. both zlib and expat seem to use cmake for compilation, a possible way how to include them in the future.</p></div>
    </div>
  </div>
  
  <div id="change-2165" class="journal has-notes">
    <div id="note-8">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-8" class="journal-link">#8</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="20 May 2012 17:05" href="/projects/exiv2/activity?from=2012-05-20">over 9 years</a> ago
      <span id="journal-2165-private_notes" class=""></span>
    </h4>

    <div id="journal-2165-notes" class="wiki"><p>Daniel.  Thanks for the feedback.  I'm glad this is working for you.</p>


	<p>CMake support for Windows (and Xcode) is my top priority for exiv2 0.24.  The existing CMakeList.txt files work well on Linux and produce something that runs on Xcode and DevStudio 2008 (although I need a change to zconf.h).</p>


	<p>For MSVC, I hope to get everything to build (MSVC 7.1, 8, 9 and 10) in 32 and 64 bits in June and submit the changes to the repo.  However build issues, or work or family matters may delay things.</p>


	<p>The exiv2 project goal is to only support CMake at sometime in the future (0.25 at the soonest) and discontinue support for the msvc/msvc64 projects.  Who knows, we might even dump the automake code as well.  We'll see.</p>


	<p>The testing of all those build versions (and running the test suite) is a time-consuming business.  If you'd like to get involved, I'd appreciate your help.  Especially with MSVC 10 which is due this year and for which I will have to purchase a license.  If you have a valid license, perhaps you could perform the builds and run the test suite (on msvc64 and CMake builds).</p></div>
    </div>
  </div>
  
  <div id="change-2166" class="journal has-details">
    <div id="note-9">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-9" class="journal-link">#9</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="23 May 2012 18:20" href="/projects/exiv2/activity?from=2012-05-23">over 9 years</a> ago
      <span id="journal-2166-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>New</i> to <i>Resolved</i></li>
       <li><strong>% Done</strong> changed from <i>0</i> to <i>100</i></li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-2175" class="journal has-details">
    <div id="note-10">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-10" class="journal-link">#10</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="03 Jun 2012 15:25" href="/projects/exiv2/activity?from=2012-06-03">over 9 years</a> ago
      <span id="journal-2175-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Priority</strong> changed from <i>High</i> to <i>Normal</i></li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-2176" class="journal has-notes">
    <div id="note-11">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-11" class="journal-link">#11</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="03 Jun 2012 17:19" href="/projects/exiv2/activity?from=2012-06-03">over 9 years</a> ago
      <span id="journal-2176-private_notes" class=""></span>
    </h4>

    <div id="journal-2176-notes" class="wiki"><p>I've submitted changes to enable CMake to build exiv2 with MSVC: SVN:2746.  This builds 32/64 bit Static/Dynamic libraries and applications.  The CMake environment takes advantage of the  zlib 1.2.7 and expat 2.1.0 cmake support mentioned by Daniel.  This is described in exiv2/README-CMAKE.</p></div>
    </div>
  </div>
  
  <div id="change-2555" class="journal has-notes has-details">
    <div id="note-12">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-12" class="journal-link">#12</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="24 Jul 2013 15:31" href="/projects/exiv2/activity?from=2013-07-24">over 8 years</a> ago
      <span id="journal-2555-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>Resolved</i> to <i>Closed</i></li>
    </ul>
    <div id="journal-2555-notes" class="wiki"><p>Fixed in 0.24.</p></div>
    </div>
  </div>
  


</div>

<div style="clear: both;"></div>
<div class="contextual">





</div>


<div style="clear: both;"></div>


<p class="other-formats">Also available in:  <span><a class="atom" rel="nofollow" href="/issues/817.atom">Atom</a></span>
  <span><a class="pdf" rel="nofollow" href="/issues/817.pdf">PDF</a></span>
</p>





        
        <div style="clear:both;"></div>
    </div>
</div>
</div>

<div id="ajax-indicator" style="display:none;"><span>Loading...</span></div>
<div id="ajax-modal" style="display:none;"></div>

<div id="footer">
  <div class="bgl"><div class="bgr">
    Powered by <a href="https://www.redmine.org/">Redmine</a> &copy; 2006-2018 Jean-Philippe Lang
  </div></div>
</div>
</div>
</div>

</body>
</html>
