<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<title>Feature #1231: Support for Canon TimeInfo makernote section - Exiv2</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="description" content="Redmine" />
<meta name="keywords" content="issue,bug,tracker" />
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="EvYuYLi6IcJ61nd57f4f5ltEHaWm6g05aVtzstNVrTjwu4WPysDtwi+yaHVSKRPVZNZJ3FcJrIOUe+M6kGxKVw==" />
<link rel='shortcut icon' href='/favicon.ico?1550767427' />
<link rel="stylesheet" media="all" href="/stylesheets/jquery/jquery-ui-1.11.0.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/application.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/responsive.css?1550767427" />

<script src="/javascripts/jquery-1.11.1-ui-1.11.0-ujs-4.3.1.js?1550767427"></script>
<script src="/javascripts/application.js?1550767427"></script>
<script src="/javascripts/responsive.js?1550767427"></script>
<script>
//<![CDATA[
$(window).load(function(){ warnLeavingUnsaved('The current page contains unsaved text that will be lost if you leave this page.'); });
//]]>
</script>


<!-- page specific tags -->
    <link rel="alternate" type="application/atom+xml" title="Exiv2 - Feature #1231: Support for Canon TimeInfo makernote section" href="https://dev.exiv2.org/issues/1231.atom" />
<script src="/javascripts/context_menu.js?1550767427"></script><link rel="stylesheet" media="screen" href="/stylesheets/context_menu.css?1550767427" /></head>
<body class="project-exiv2 has-main-menu controller-issues action-show avatars-off">

<div id="wrapper">

<div class="flyout-menu js-flyout-menu">


        <div class="flyout-menu__search">
            <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
            <input type="hidden" name="issues" value="1" />
            <label class="search-magnifier search-magnifier--flyout" for="flyout-search">&#9906;</label>
            <input type="text" name="q" id="flyout-search" class="small js-search-input" placeholder="Search" />
</form>        </div>


        <h3>Project</h3>
        <span class="js-project-menu"></span>

    <h3>General</h3>
    <span class="js-general-menu"></span>

    <span class="js-sidebar flyout-menu__sidebar"></span>

    <h3>Profile</h3>
    <span class="js-profile-menu"></span>

</div>

<div id="wrapper2">
<div id="wrapper3">
<div id="top-menu">
    <div id="account">
        <ul><li><a class="login" href="/login">Sign in</a></li></ul>    </div>
    
    <ul><li><a class="home" href="/">Home</a></li><li><a class="projects" href="/projects">Projects</a></li><li><a class="help" href="https://www.redmine.org/guide">Help</a></li></ul></div>

<div id="header">

    <a href="#" class="mobile-toggle-button js-flyout-menu-toggle-button"></a>

    <div id="quick-search">
        <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
        <input type="hidden" name="scope" />
        <input type="hidden" name="issues" value="1" />
        <label for='q'>
          <a accesskey="4" href="/projects/exiv2/search">Search</a>:
        </label>
        <input type="text" name="q" id="q" size="20" class="small" accesskey="f" />
</form>        <div id="project-jump" class="drdn"><span class="drdn-trigger">Exiv2</span><div class="drdn-content"><div class="quick-search"><input type="text" name="q" id="projects-quick-search" value="" class="autocomplete" data-automcomplete-url="/projects/autocomplete.js?jump=issues" autocomplete="off" /></div><div class="drdn-items projects selection"></div><div class="drdn-items all-projects selection"><a href="/projects?jump=issues">All Projects</a></div></div></div>
    </div>

    <h1><span class="current-project">Exiv2</span></h1>

    <div id="main-menu" class="tabs">
        <ul><li><a class="overview" href="/projects/exiv2">Overview</a></li><li><a class="activity" href="/projects/exiv2/activity">Activity</a></li><li><a class="roadmap" href="/projects/exiv2/roadmap">Roadmap</a></li><li><a class="issues selected" href="/projects/exiv2/issues">Issues</a></li><li><a class="news" href="/projects/exiv2/news">News</a></li><li><a class="wiki" href="/projects/exiv2/wiki">Wiki</a></li><li><a class="boards" href="/projects/exiv2/boards">Forums</a></li><li><a class="repository" href="/projects/exiv2/repository">Repository</a></li></ul>
        <div class="tabs-buttons" style="display:none;">
            <button class="tab-left" onclick="moveTabLeft(this); return false;"></button>
            <button class="tab-right" onclick="moveTabRight(this); return false;"></button>
        </div>
    </div>
</div>

<div id="main" class="">
    <div id="sidebar">
          <h3>Issues</h3>

<ul>
<li><a href="/projects/exiv2/issues?set_filter=1">View all issues</a></li>
<li><a href="/projects/exiv2/issues/report">Summary</a></li>

</ul>









        
    </div>

    <div id="content">
        
        <div class="contextual">





</div>


<h2>Feature #1231</h2>

<div class="issue tracker-2 status-5 priority-4 priority-default closed details">

  <div class="gravatar-with-child">
    
    
  </div>

<div class="subject">
<div><h3>Support for Canon TimeInfo makernote section</h3></div>
</div>
        <p class="author">
        Added by <a class="user active" href="/users/3663">Tobias E.</a> <a title="24 Sep 2016 11:47" href="/projects/exiv2/activity?from=2016-09-24">about 5 years</a> ago.
        Updated <a title="04 Dec 2016 06:15" href="/projects/exiv2/activity?from=2016-12-04">almost 5 years</a> ago.
        </p>

<div class="attributes">
<div class="splitcontent"><div class="splitcontentleft"><div class="status attribute"><div class="label">Status:</div><div class="value">Closed</div></div><div class="priority attribute"><div class="label">Priority:</div><div class="value">Normal</div></div><div class="assigned-to attribute"><div class="label">Assignee:</div><div class="value"><a class="user active" href="/users/119">Robin Mills</a></div></div><div class="category attribute"><div class="label">Category:</div><div class="value">makernote</div></div><div class="fixed-version attribute"><div class="label">Target version:</div><div class="value"><a title="28 Apr 2017" href="/versions/52">0.26</a></div></div></div><div class="splitcontentleft"><div class="start-date attribute"><div class="label">Start date:</div><div class="value">24 Sep 2016</div></div><div class="due-date attribute"><div class="label">Due date:</div><div class="value"></div></div><div class="progress attribute"><div class="label">% Done:</div><div class="value"><table class="progress progress-100"><tr><td style="width: 100%;" class="closed" title="100%"></td></tr></table><p class="percent">100%</p></div></div><div class="estimated-hours attribute"><div class="label">Estimated time:</div><div class="value">3.00 h</div></div></div></div>


</div>

<hr />
<div class="description">
  <div class="contextual">
  
  </div>

  <p><strong>Description</strong></p>
  <div class="wiki">
  <p>Hello,</p>


	<p>it would be great if you could add support for the TimeInfo section from Canon's makernotes. Maybe looking at exiftool will help as they support that already: <a class="external" href="http://search.cpan.org/dist/Image-ExifTool/lib/Image/ExifTool/TagNames.pod#Canon_TimeInfo_Tags">http://search.cpan.org/dist/Image-ExifTool/lib/Image/ExifTool/TagNames.pod#Canon_TimeInfo_Tags</a></p>


	<p>Thanks in advance and keep up the good work!</p>
  </div>
</div>
  <hr />
  <p><strong>Files</strong></p>
  <div class="attachments">
<div class="contextual">
  
</div>
<table>
<tr>
  <td>
    <a class="icon icon-attachment" href="/attachments/1112">canon-timeinfo.patch</a>    <span class="size">(8.48 KB)</span>
    <a class="icon-only icon-download" title="Download" href="/attachments/download/1112/canon-timeinfo.patch">canon-timeinfo.patch</a>  </td>
  <td>Add support for the Canon TimeInfo MakerNote</td>
  <td>
      <span class="author">Ayke van Laethem, 01 Dec 2016 23:58</span>
  </td>
  <td>
  </td>
</tr>
<tr>
  <td>
    <a class="icon icon-attachment" href="/attachments/1113">timeinfo_small.jpg</a>    <span class="size">(9.17 KB)</span>
    <a class="icon-only icon-download" title="Download" href="/attachments/download/1113/timeinfo_small.jpg">timeinfo_small.jpg</a>  </td>
  <td></td>
  <td>
      <span class="author">Ayke van Laethem, 03 Dec 2016 18:37</span>
  </td>
  <td>
  </td>
</tr>
<tr>
  <td>
    <a class="icon icon-attachment" href="/attachments/1114">timeinfo_dst_small.jpg</a>    <span class="size">(9.05 KB)</span>
    <a class="icon-only icon-download" title="Download" href="/attachments/download/1114/timeinfo_dst_small.jpg">timeinfo_dst_small.jpg</a>  </td>
  <td></td>
  <td>
      <span class="author">Ayke van Laethem, 03 Dec 2016 18:37</span>
  </td>
  <td>
  </td>
</tr>
</table>
</div>








</div>

<div id="issue-changesets">
<h3>Associated revisions</h3>
    <div class="changeset">
    <p><a title="Revision 4690" href="/projects/exiv2/repository/exiv2/revisions/4690">Revision 4690</a>
        (<a href="/projects/exiv2/repository/exiv2/revisions/4690/diff">diff</a>)
        <br />
        <span class="author">Added by <a class="user active" href="/users/119">Robin Mills</a> <a title="02 Dec 2016 10:31" href="/projects/exiv2/activity?from=2016-12-02">almost 5 years</a> ago</span></p>
    <div class="wiki changeset-comments">
        <p><a class="issue tracker-2 status-5 priority-4 priority-default closed" title="Feature: Support for Canon TimeInfo makernote section (Closed)" href="/issues/1231">#1231</a>  Thank You to Ayke for providing the patch.</p>
    </div>
    </div>
    <div class="changeset">
    <p><a title="Revision 4692" href="/projects/exiv2/repository/exiv2/revisions/4692">Revision 4692</a>
        (<a href="/projects/exiv2/repository/exiv2/revisions/4692/diff">diff</a>)
        <br />
        <span class="author">Added by <a class="user active" href="/users/119">Robin Mills</a> <a title="04 Dec 2016 06:11" href="/projects/exiv2/activity?from=2016-12-04">almost 5 years</a> ago</span></p>
    <div class="wiki changeset-comments">
        <p><a class="issue tracker-2 status-5 priority-4 priority-default closed" title="Feature: Support for Canon TimeInfo makernote section (Closed)" href="/issues/1231">#1231</a> Added regression detector to test suite.  Thanks very much to Ayke for providing the test data and the patch to implement the fix for <a class="issue tracker-2 status-5 priority-4 priority-default closed" title="Feature: Support for Canon TimeInfo makernote section (Closed)" href="/issues/1231">#1231</a>.</p>
    </div>
    </div>

</div>



<div id="history">
<h3>History</h3>
  <div id="change-5625" class="journal has-notes has-details">
    <div id="note-1">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-1" class="journal-link">#1</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="24 Sep 2016 11:59" href="/projects/exiv2/activity?from=2016-09-24">about 5 years</a> ago
      <span id="journal-5625-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Target version</strong> set to <i>0.28</i></li>
    </ul>
    <div id="journal-5625-notes" class="wiki"><p>Tobias</p>


	<p>Thanks for this suggestion.  If you have test files, please add them to this issue.</p>


	<p>Both Raphael and Sridhar have recently joined the project and both are working on the Canon MakerNotes <a class="issue tracker-2 status-2 priority-4 priority-default" title="Feature: Adding Camera Temperature (Assigned)" href="/issues/1219">#1219</a> <a class="issue tracker-1 status-2 priority-4 priority-default" title="Bug: Exif.CanonCs.FocusContinuous reported as Short (Assigned)" href="/issues/1203">#1203</a>.  As I am very busy getting v0.26 ready to ship, I haven't been able to mentor them as fully as I intend.  So this issue is unlikely to be dealt with until v0.27.  I'm not going to assign the issue at this time to either as we will have a team meeting in October to discuss assignments and schedule for v0.27.</p>


	<p>And, if you are interested, you are welcome to join the team and help with this and other issues.</p></div>
    </div>
  </div>
  
  <div id="change-5626" class="journal has-notes">
    <div id="note-2">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-2" class="journal-link">#2</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/3663">Tobias E.</a> <a title="24 Sep 2016 12:26" href="/projects/exiv2/activity?from=2016-09-24">about 5 years</a> ago
      <span id="journal-5626-private_notes" class=""></span>
    </h4>

    <div id="journal-5626-notes" class="wiki"><p>I would love to help out, but I am already quite busy hacking on darktable. :-)</p>


	<p>You can find a raw file which contains a time zone of +2 hours (CEST) here â€“ it's too big to be uploaded here: <a class="external" href="https://houz.org/tmp/6Q1B7117.CR2">https://houz.org/tmp/6Q1B7117.CR2</a></p></div>
    </div>
  </div>
  
  <div id="change-5628" class="journal has-notes has-details">
    <div id="note-3">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-3" class="journal-link">#3</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="24 Sep 2016 14:12" href="/projects/exiv2/activity?from=2016-09-24">about 5 years</a> ago
      <span id="journal-5628-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>% Done</strong> changed from <i>0</i> to <i>10</i></li>
       <li><strong>Estimated time</strong> set to <i>10.00 h</i></li>
    </ul>
    <div id="journal-5628-notes" class="wiki"><p>Well if you ever want to leave <em><strong>the dark side</strong></em>, I have plenty of fun and interesting projects to amuse you here.  No <em>hacking</em> in Exiv2, only good <em>Software Engineering</em> over here.</p>


	<p>Thanks for the file (Baker Street, I see).   I've copied your files to our test files on the build server. <a class="external" href="http://exiv2.dyndns.org:8080/userContent/testfiles/1231/">http://exiv2.dyndns.org:8080/userContent/testfiles/1231/</a></p>


	<p>I've discovered that I have suitable test file.  I recently wrote a script to pull down all of Phil's 7000 test files.  And the CanonEOS files have this metadata.  <pre>910 rmills@rmillsmm:~/jenkins/testfiles/Phils/Canon $ for i in CanonEOS*.jpg ; do echo $i $(exiftool $i|grep 'Time Zone City'); done
CanonEOS-1D.jpg
CanonEOS-1DS.jpg
CanonEOS-1DSmkII.jpg
CanonEOS-1D_C.jpg Time Zone City : London
CanonEOS-1D_MarkIII.jpg
CanonEOS-1D_MarkII_N.jpg
CanonEOS-1D_MarkIV.jpg
CanonEOS-1D_X.jpg Time Zone City : Sydney
CanonEOS-1D_XMarkII.jpg Time Zone City : New York
CanonEOS-1DmkII.jpg
CanonEOS-1DmkIIN.jpg
CanonEOS-1DsMarkIII.jpg
CanonEOS1000D.jpg
CanonEOS100D.jpg Time Zone City : London
CanonEOS10D.jpg
CanonEOS1100D.jpg
CanonEOS1200D.jpg Time Zone City : London
CanonEOS1300D.jpg Time Zone City : Dubai
CanonEOS20D.jpg
CanonEOS20Da.jpg
CanonEOS300D.jpg
CanonEOS30D.jpg
CanonEOS350D.jpg
CanonEOS400D.jpg
CanonEOS40D.jpg
CanonEOS450D.jpg
CanonEOS500D.jpg
CanonEOS50D.jpg
CanonEOS550D.jpg
CanonEOS5D.jpg
CanonEOS5DS.jpg Time Zone City : Paris
CanonEOS5DS_R.jpg Time Zone City : London
CanonEOS5D_MarkII.jpg
CanonEOS5D_MarkIII.jpg Time Zone City : New York
CanonEOS5D_MarkIV.jpg Time Zone City : Tokyo
CanonEOS600D.jpg
CanonEOS60D.jpg
CanonEOS650D.jpg Time Zone City : Paris
CanonEOS6D.jpg Time Zone City : New York
CanonEOS700D.jpg Time Zone City : London
CanonEOS70D.jpg Time Zone City : Sao Paulo
CanonEOS750D.jpg Time Zone City : Tokyo
CanonEOS760D.jpg Time Zone City : London
CanonEOS7D.jpg
CanonEOS7D_MarkII.jpg Time Zone City : Paris
CanonEOS8000D.jpg Time Zone City : Tokyo
CanonEOS80D.jpg Time Zone City : New York
CanonEOS_D2000.jpg
CanonEOS_D30.jpg
CanonEOS_D60.jpg
CanonEOS_DIGITAL_REBEL.jpg
CanonEOS_DIGITAL_REBEL_XS.jpg
CanonEOS_DIGITAL_REBEL_XSi.jpg
CanonEOS_DIGITAL_REBEL_XT.jpg
CanonEOS_DIGITAL_REBEL_XTi.jpg
CanonEOS_K236.jpg
CanonEOS_KissDigital.jpg
CanonEOS_KissDigitalN.jpg
CanonEOS_KissDigitalX.jpg
CanonEOS_KissF.jpg
CanonEOS_KissX2.jpg
CanonEOS_KissX3.jpg
CanonEOS_KissX4.jpg
CanonEOS_KissX5.jpg
CanonEOS_KissX50.jpg
CanonEOS_KissX6i.jpg Time Zone City : London
CanonEOS_KissX7.jpg Time Zone City : Tokyo
CanonEOS_KissX70.jpg Time Zone City : Hong Kong
CanonEOS_KissX7i.jpg Time Zone City : London
CanonEOS_KissX8i.jpg Time Zone City : Tokyo
CanonEOS_M.jpg Time Zone City : Tokyo
CanonEOS_M10.jpg Time Zone City : (not set)
CanonEOS_M2.jpg Time Zone City : Bangkok
CanonEOS_M3.jpg Time Zone City : (not set)
CanonEOS_REBEL_SL1.jpg Time Zone City : New York
CanonEOS_REBEL_T1i.jpg
CanonEOS_REBEL_T2i.jpg
CanonEOS_REBEL_T3.jpg
CanonEOS_REBEL_T3i.jpg
CanonEOS_REBEL_T4i.jpg Time Zone City : Los Angeles
CanonEOS_REBEL_T5.jpg Time Zone City : New York
CanonEOS_REBEL_T5i.jpg Time Zone City : Los Angeles
CanonEOS_RebelT6.jpg Time Zone City : New York
CanonEOS_RebelT6i.jpg Time Zone City : New York
CanonEOS_RebelT6s.jpg Time Zone City : New York
911 rmills@rmillsmm:~/jenkins/testfiles/Phils/Canon $ </pre></p></div>
    </div>
  </div>
  
  <div id="change-5776" class="journal has-notes has-details">
    <div id="note-4">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-4" class="journal-link">#4</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4849">Ayke van Laethem</a> <a title="01 Dec 2016 23:58" href="/projects/exiv2/activity?from=2016-12-01">almost 5 years</a> ago
      <span id="journal-5776-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>File</strong> <a href="/attachments/1112">canon-timeinfo.patch</a> <a class="icon-only icon-download" title="Download" href="/attachments/download/1112/canon-timeinfo.patch">canon-timeinfo.patch</a> added</li>
    </ul>
    <div id="journal-5776-notes" class="wiki"><p>I have written a patch to support the TimeInfo field. It is attached here.</p>


	<p>It is mostly based on the information in here:<br /><a class="external" href="http://www.sno.phy.queensu.ca/~phil/exiftool/TagNames/Canon.html#TimeInfo">http://www.sno.phy.queensu.ca/~phil/exiftool/TagNames/Canon.html#TimeInfo</a></p>


	<p>It works for the provided sample file, and for my own photos.<br />Example from the sample:</p>
	<pre><code>Exif.CanonTi.TimeZone                        SLong       1  120<br />Exif.CanonTi.TimeZoneCity                    SLong       1  Paris<br />Exif.CanonTi.DaylightSavings                 SLong       1  60</code></pre>


	<p>Example from a photo of mine:</p>
	<pre><code>Exif.CanonTi.TimeZone                        SLong       1  60<br />Exif.CanonTi.TimeZoneCity                    SLong       1  n/a<br />Exif.CanonTi.DaylightSavings                 SLong       1  0</code></pre>


	<p>Another example, now in DST (same timezone):</p>
	<pre><code>Exif.CanonTi.TimeZone                        SLong       1  120<br />Exif.CanonTi.TimeZoneCity                    SLong       1  n/a<br />Exif.CanonTi.DaylightSavings                 SLong       1  60</code></pre>


	<p>Time zone is apparently set in minutes, adding DST to it (e.g. now I'm living in UTC+1, last summer in UTC+2, which is 60 and 120 minutes respectively). I have not tested 'negative' time zones (to the west of UTC). Those should ideally be tested (I can do that if needed).</p></div>
    </div>
  </div>
  
  <div id="change-5777" class="journal has-notes has-details">
    <div id="note-5">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-5" class="journal-link">#5</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="02 Dec 2016 10:50" href="/projects/exiv2/activity?from=2016-12-02">almost 5 years</a> ago
      <span id="journal-5777-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>New</i> to <i>Resolved</i></li>
       <li><strong>Assignee</strong> set to <i>Robin Mills</i></li>
       <li><strong>Target version</strong> changed from <i>0.28</i> to <i>0.26</i></li>
       <li><strong>% Done</strong> changed from <i>10</i> to <i>80</i></li>
       <li><strong>Estimated time</strong> changed from <i>10.00 h</i> to <i>3.00 h</i></li>
    </ul>
    <div id="journal-5777-notes" class="wiki"><p>Thank you, Ayke for providing the patch which I have submitted as <a class="changeset" title="#1231  Thank You to Ayke for providing the patch." href="/projects/exiv2/repository/exiv2/revisions/4690">r4690</a></p>


	<p>Here's the output from current head of trunk:<pre>509 rmills@rmillsmm:~/Jenkins/testfiles/1231 $ exiv2 -pa --grep time/i 6Q*tiff
Exif.Image.DateTime                          Ascii      20  2016:04:18 11:57:18
Exif.Photo.ExposureTime                      Rational    1  1/30 s
Exif.Photo.DateTimeOriginal                  Ascii      20  2016:04:18 11:57:18
Exif.Photo.DateTimeDigitized                 Ascii      20  2016:04:18 11:57:18
Exif.CanonCs.Selftimer                       Short       1  Off
Exif.Photo.SubSecTime                        Ascii       3  83
Exif.Photo.SubSecTimeOriginal                Ascii       3  83
Exif.Photo.SubSecTimeDigitized               Ascii       3  83
510 rmills@rmillsmm:~/Jenkins/testfiles/1231 $ </pre>And with your patch:<pre>571 rmills@rmillsmbp:~ $ exiv2 -pa --grep time/i 6Q*tiff
Exif.Image.DateTime                          Ascii      20  2016:04:18 11:57:18
Exif.Photo.ExposureTime                      Rational    1  1/30 s
Exif.Photo.DateTimeOriginal                  Ascii      20  2016:04:18 11:57:18
Exif.Photo.DateTimeDigitized                 Ascii      20  2016:04:18 11:57:18
Exif.CanonCs.Selftimer                       Short       1  Off
Exif.CanonTi.TimeZone                        SLong       1  120
Exif.CanonTi.TimeZoneCity                    SLong       1  Paris
Exif.Photo.SubSecTime                        Ascii       3  83
Exif.Photo.SubSecTimeOriginal                Ascii       3  83
Exif.Photo.SubSecTimeDigitized               Ascii       3  83
572 rmills@rmillsmbp:~ $ </pre>So you have successfully added the CanonTi group and extracted the information correctly.  The existing test harness runs successfully.</p>


	<p>Remarkably, I'm visiting Andreas (the Exiv2 Founder) this weekend and I expect we'll review your patch together.  I will submit an additional regression detector to the test suite to ensure that your fix doesn't get broken by future changes in Exiv2.</p></div>
    </div>
  </div>
  
  <div id="change-5778" class="journal has-notes">
    <div id="note-6">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-6" class="journal-link">#6</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="03 Dec 2016 14:51" href="/projects/exiv2/activity?from=2016-12-03">almost 5 years</a> ago
      <span id="journal-5778-private_notes" class=""></span>
    </h4>

    <div id="journal-5778-notes" class="wiki"><p>Ayke</p>


	<p>Can you provide your test file please?</p>


	<p>The file that Tobias provided has an Exif Tag > 64k bytes and so cannot be converted to a little .exv file.  Tobias' file is 30mb and I don't want to add such a large file to the test suite stored in our repository.</p>


	<p>I hope to resource a project in 2017 <a class="issue tracker-2 status-2 priority-4 priority-default" title="Feature: Better raw file support and test (Assigned)" href="/issues/992">#992</a> to have a more extensive tests which will be executed periodically by our buildserver and the associated test files will not be stored in our repository.  So Tobias' test file (and many others) will be used in future.  However, for the moment, it would be good to use your file as a regression detector.</p>


	<p>Robin</p></div>
    </div>
  </div>
  
  <div id="change-5779" class="journal has-notes has-details">
    <div id="note-7">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-7" class="journal-link">#7</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4849">Ayke van Laethem</a> <a title="03 Dec 2016 18:37" href="/projects/exiv2/activity?from=2016-12-03">almost 5 years</a> ago
      <span id="journal-5779-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>File</strong> <a href="/attachments/1113">timeinfo_small.jpg</a> <a class="icon-only icon-download" title="Download" href="/attachments/download/1113/timeinfo_small.jpg">timeinfo_small.jpg</a> added</li>
       <li><strong>File</strong> <a href="/attachments/1114">timeinfo_dst_small.jpg</a> <a class="icon-only icon-download" title="Download" href="/attachments/download/1114/timeinfo_dst_small.jpg">timeinfo_dst_small.jpg</a> added</li>
    </ul>
    <div id="journal-5779-notes" class="wiki"><p>Nice to see it land in exiv2 :)</p>


	<p>I have attached two files to test, one with and one without DST set (using the current time which isn't DST, so technically incorrect but the camera doesn't care). Just to be sure, I tested those again.</p>


	<p>The provided files are resized to 1x1 (using ImageMagick convert), and have the thumbnail removed (using exiftool). That brings them to ~9KB each. I can provide the original files as well (that are simply dark photos at the lowest possible resolution to keep the file size down, ~450KB).</p></div>
    </div>
  </div>
  
  <div id="change-5782" class="journal has-notes has-details">
    <div id="note-8">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-8" class="journal-link">#8</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="04 Dec 2016 06:15" href="/projects/exiv2/activity?from=2016-12-04">almost 5 years</a> ago
      <span id="journal-5782-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>Resolved</i> to <i>Closed</i></li>
       <li><strong>% Done</strong> changed from <i>80</i> to <i>100</i></li>
    </ul>
    <div id="journal-5782-notes" class="wiki"><p>Thanks very much for the test data.  I've added your files <a class="changeset" title="#1231 Added regression detector to test suite.  Thanks very much to Ayke for providing the test d..." href="/projects/exiv2/repository/exiv2/revisions/4692">r4692</a> as test/data/exiv2-bug1231{a|b}.jpg</p>


	<p>Thank You very much for working on this and providing the patch and the test files.  If you're ever looking for an unpaid job on an open-source project, I would be very happy to welcome you to Team Exiv2.  Thank You for your contribution.</p></div>
    </div>
  </div>
  


</div>

<div style="clear: both;"></div>
<div class="contextual">





</div>


<div style="clear: both;"></div>


<p class="other-formats">Also available in:  <span><a class="atom" rel="nofollow" href="/issues/1231.atom">Atom</a></span>
  <span><a class="pdf" rel="nofollow" href="/issues/1231.pdf">PDF</a></span>
</p>





        
        <div style="clear:both;"></div>
    </div>
</div>
</div>

<div id="ajax-indicator" style="display:none;"><span>Loading...</span></div>
<div id="ajax-modal" style="display:none;"></div>

<div id="footer">
  <div class="bgl"><div class="bgr">
    Powered by <a href="https://www.redmine.org/">Redmine</a> &copy; 2006-2018 Jean-Philippe Lang
  </div></div>
</div>
</div>
</div>

</body>
</html>
