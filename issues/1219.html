<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<title>Feature #1219: Adding Camera Temperature - Exiv2</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="description" content="Redmine" />
<meta name="keywords" content="issue,bug,tracker" />
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="1PNaY/OzlgH6WVDAjV71GomB6p4fzqEwog1FLBgBcs82vvGMgclaAa89T8wyifkpthO+5+4tAIpfLdWkWziVoA==" />
<link rel='shortcut icon' href='/favicon.ico?1550767427' />
<link rel="stylesheet" media="all" href="/stylesheets/jquery/jquery-ui-1.11.0.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/application.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/responsive.css?1550767427" />

<script src="/javascripts/jquery-1.11.1-ui-1.11.0-ujs-4.3.1.js?1550767427"></script>
<script src="/javascripts/application.js?1550767427"></script>
<script src="/javascripts/responsive.js?1550767427"></script>
<script>
//<![CDATA[
$(window).load(function(){ warnLeavingUnsaved('The current page contains unsaved text that will be lost if you leave this page.'); });
//]]>
</script>


<!-- page specific tags -->
    <link rel="alternate" type="application/atom+xml" title="Exiv2 - Feature #1219: Adding Camera Temperature" href="https://dev.exiv2.org/issues/1219.atom" />
<script src="/javascripts/context_menu.js?1550767427"></script><link rel="stylesheet" media="screen" href="/stylesheets/context_menu.css?1550767427" /></head>
<body class="project-exiv2 has-main-menu controller-issues action-show avatars-off">

<div id="wrapper">

<div class="flyout-menu js-flyout-menu">


        <div class="flyout-menu__search">
            <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
            <input type="hidden" name="issues" value="1" />
            <label class="search-magnifier search-magnifier--flyout" for="flyout-search">&#9906;</label>
            <input type="text" name="q" id="flyout-search" class="small js-search-input" placeholder="Search" />
</form>        </div>


        <h3>Project</h3>
        <span class="js-project-menu"></span>

    <h3>General</h3>
    <span class="js-general-menu"></span>

    <span class="js-sidebar flyout-menu__sidebar"></span>

    <h3>Profile</h3>
    <span class="js-profile-menu"></span>

</div>

<div id="wrapper2">
<div id="wrapper3">
<div id="top-menu">
    <div id="account">
        <ul><li><a class="login" href="/login">Sign in</a></li></ul>    </div>
    
    <ul><li><a class="home" href="/">Home</a></li><li><a class="projects" href="/projects">Projects</a></li><li><a class="help" href="https://www.redmine.org/guide">Help</a></li></ul></div>

<div id="header">

    <a href="#" class="mobile-toggle-button js-flyout-menu-toggle-button"></a>

    <div id="quick-search">
        <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
        <input type="hidden" name="scope" />
        <input type="hidden" name="issues" value="1" />
        <label for='q'>
          <a accesskey="4" href="/projects/exiv2/search">Search</a>:
        </label>
        <input type="text" name="q" id="q" size="20" class="small" accesskey="f" />
</form>        <div id="project-jump" class="drdn"><span class="drdn-trigger">Exiv2</span><div class="drdn-content"><div class="quick-search"><input type="text" name="q" id="projects-quick-search" value="" class="autocomplete" data-automcomplete-url="/projects/autocomplete.js?jump=issues" autocomplete="off" /></div><div class="drdn-items projects selection"></div><div class="drdn-items all-projects selection"><a href="/projects?jump=issues">All Projects</a></div></div></div>
    </div>

    <h1><span class="current-project">Exiv2</span></h1>

    <div id="main-menu" class="tabs">
        <ul><li><a class="overview" href="/projects/exiv2">Overview</a></li><li><a class="activity" href="/projects/exiv2/activity">Activity</a></li><li><a class="roadmap" href="/projects/exiv2/roadmap">Roadmap</a></li><li><a class="issues selected" href="/projects/exiv2/issues">Issues</a></li><li><a class="news" href="/projects/exiv2/news">News</a></li><li><a class="wiki" href="/projects/exiv2/wiki">Wiki</a></li><li><a class="boards" href="/projects/exiv2/boards">Forums</a></li><li><a class="repository" href="/projects/exiv2/repository">Repository</a></li></ul>
        <div class="tabs-buttons" style="display:none;">
            <button class="tab-left" onclick="moveTabLeft(this); return false;"></button>
            <button class="tab-right" onclick="moveTabRight(this); return false;"></button>
        </div>
    </div>
</div>

<div id="main" class="">
    <div id="sidebar">
          <h3>Issues</h3>

<ul>
<li><a href="/projects/exiv2/issues?set_filter=1">View all issues</a></li>
<li><a href="/projects/exiv2/issues/report">Summary</a></li>

</ul>









        
    </div>

    <div id="content">
        
        <div class="contextual">





</div>


<h2>Feature #1219</h2>

<div class="issue tracker-2 status-2 priority-4 priority-default details">
    <div class="next-prev-links contextual">
      <a title="#894" accesskey="p" href="/issues/894">« Previous</a> |
        <span class="position">
          <a href="/issues?f%5B%5D=status_id&amp;op%5Bstatus_id%5D=o&amp;page=2&amp;per_page=25&amp;set_filter=1&amp;sort=updated_on%3Adesc%2Cid%3Adesc&amp;v%5Bstatus_id%5D%5B%5D=">42 of 78</a>
        </span> |
      <a title="#1206" accesskey="n" href="/issues/1206">Next »</a>
    </div>

  <div class="gravatar-with-child">
    
    
  </div>

<div class="subject">
<div><h3>Adding Camera Temperature</h3></div>
</div>
        <p class="author">
        Added by <a class="user active" href="/users/4745">Raphael Attie</a> <a title="31 Aug 2016 12:11" href="/projects/exiv2/activity?from=2016-08-31">about 5 years</a> ago.
        Updated <a title="15 Sep 2016 12:36" href="/projects/exiv2/activity?from=2016-09-15">about 5 years</a> ago.
        </p>

<div class="attributes">
<div class="splitcontent"><div class="splitcontentleft"><div class="status attribute"><div class="label">Status:</div><div class="value">Assigned</div></div><div class="priority attribute"><div class="label">Priority:</div><div class="value">Normal</div></div><div class="assigned-to attribute"><div class="label">Assignee:</div><div class="value"><a class="user active" href="/users/4745">Raphael Attie</a></div></div><div class="category attribute"><div class="label">Category:</div><div class="value">makernote</div></div><div class="fixed-version attribute"><div class="label">Target version:</div><div class="value"><a title="31 Dec 2020" href="/versions/54">0.28</a></div></div></div><div class="splitcontentleft"><div class="start-date attribute"><div class="label">Start date:</div><div class="value">31 Aug 2016</div></div><div class="due-date attribute"><div class="label">Due date:</div><div class="value"></div></div><div class="progress attribute"><div class="label">% Done:</div><div class="value"><table class="progress progress-30"><tr><td style="width: 30%;" class="closed" title="30%"></td><td style="width: 70%;" class="todo"></td></tr></table><p class="percent">30%</p></div></div><div class="estimated-hours attribute"><div class="label">Estimated time:</div><div class="value">30.00 h</div></div></div></div>


</div>

<hr />
<div class="description">
  <div class="contextual">
  
  </div>

  <p><strong>Description</strong></p>
  <div class="wiki">
  <p>Modern DSLRs released the last years have reached a degree of quality that has shown great potential for high quality astrophotography. Canon, Nikon and Sony are the preferred ones in this realm. Most of their camera have digital thermometer giving the temperature either of the inner electronics, or of the sensor itself. This parameter,  can be retrieved by Exiftool "Camera Temperature" but not known yet by Exiv2. Knowing the camera temperature is essential to perform a sensible calibration. So far, astrophotographer take dark files using the outside temperature as reference, but without certainty of the temperature of the sensor. The end result, after subtracting the dark files, sometimes show that noise have been added instead of being removed, which happens less with CCD cameras dedicated for astronomy which are temperature controlled/regulated. <br />As a professional astronomer, but also as an amateur astronomer, and developing my own software (see Lightdrops in Github), I encourage the support of this feature with Exiv2, and would like (at least to try) to contribute to this support.</p>
  </div>
</div>
  <hr />
  <p><strong>Files</strong></p>
  <div class="attachments">
<div class="contextual">
  
</div>
<table>
<tr>
  <td>
    <a class="icon icon-attachment" href="/attachments/1045">CR2_Scrutinized.pdf</a>    <span class="size">(1.81 MB)</span>
    <a class="icon-only icon-download" title="Download" href="/attachments/download/1045/CR2_Scrutinized.pdf">CR2_Scrutinized.pdf</a>  </td>
  <td></td>
  <td>
      <span class="author">Raphael Attie, 01 Sep 2016 15:55</span>
  </td>
  <td>
  </td>
</tr>
<tr>
  <td>
    <a class="icon icon-attachment" href="/attachments/1046">CR2_Scrutinized.pdf</a>    <span class="size">(1.81 MB)</span>
    <a class="icon-only icon-download" title="Download" href="/attachments/download/1046/CR2_Scrutinized.pdf">CR2_Scrutinized.pdf</a>  </td>
  <td></td>
  <td>
      <span class="author">Raphael Attie, 01 Sep 2016 17:55</span>
  </td>
  <td>
  </td>
</tr>
<tr>
  <td>
    <a class="icon icon-attachment" href="/attachments/1047">CR2_Scrutinized_updated.pdf</a>    <span class="size">(1.81 MB)</span>
    <a class="icon-only icon-download" title="Download" href="/attachments/download/1047/CR2_Scrutinized_updated.pdf">CR2_Scrutinized_updated.pdf</a>  </td>
  <td></td>
  <td>
      <span class="author">Raphael Attie, 01 Sep 2016 20:30</span>
  </td>
  <td>
  </td>
</tr>
<tr>
  <td>
    <a class="icon icon-attachment" href="/attachments/1053">Exiv2_Explained_V1.pdf</a>    <span class="size">(42.4 KB)</span>
    <a class="icon-only icon-download" title="Download" href="/attachments/download/1053/Exiv2_Explained_V1.pdf">Exiv2_Explained_V1.pdf</a>  </td>
  <td></td>
  <td>
      <span class="author">Raphael Attie, 06 Sep 2016 15:55</span>
  </td>
  <td>
  </td>
</tr>
<tr>
  <td>
    <a class="icon icon-attachment" href="/attachments/1057">Exiv2_Explained_V2.pdf</a>    <span class="size">(55.5 KB)</span>
    <a class="icon-only icon-download" title="Download" href="/attachments/download/1057/Exiv2_Explained_V2.pdf">Exiv2_Explained_V2.pdf</a>  </td>
  <td></td>
  <td>
      <span class="author">Raphael Attie, 08 Sep 2016 15:22</span>
  </td>
  <td>
  </td>
</tr>
<tr>
  <td>
    <a class="icon icon-attachment" href="/attachments/1059">Exiv2_Explained_V3.pdf</a>    <span class="size">(57 KB)</span>
    <a class="icon-only icon-download" title="Download" href="/attachments/download/1059/Exiv2_Explained_V3.pdf">Exiv2_Explained_V3.pdf</a>  </td>
  <td></td>
  <td>
      <span class="author">Raphael Attie, 09 Sep 2016 19:01</span>
  </td>
  <td>
  </td>
</tr>
<tr>
  <td>
    <a class="icon icon-attachment" href="/attachments/1061">canonmn_int.hpp</a>    <span class="size">(6.49 KB)</span>
    <a class="icon-only icon-download" title="Download" href="/attachments/download/1061/canonmn_int.hpp">canonmn_int.hpp</a>  </td>
  <td></td>
  <td>
      <span class="author">Raphael Attie, 09 Sep 2016 21:10</span>
  </td>
  <td>
  </td>
</tr>
<tr>
  <td>
    <a class="icon icon-attachment" href="/attachments/1062">canonmn.cpp</a>    <span class="size">(112 KB)</span>
    <a class="icon-only icon-download" title="Download" href="/attachments/download/1062/canonmn.cpp">canonmn.cpp</a>  </td>
  <td></td>
  <td>
      <span class="author">Raphael Attie, 09 Sep 2016 21:10</span>
  </td>
  <td>
  </td>
</tr>
</table>
</div>







<hr />
<div id="relations">
<div class="contextual">
</div>

<p><strong>Related issues</strong></p>

<form data-cm-url="/issues/context_menu" action="/issues/1219" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><input type="hidden" name="authenticity_token" value="Pl5vZ+7wA3QbZoik+ZsDs09Vs+MEAKHANm45oGuuPS3cE8SInIrPdE4Cl6hGTA+AcMfnmvXjAHrLTqkoKJfaQg==" />
  <table class="list issues odd-even"><tr id="relation-239" class="issue hascontextmenu issue tracker-2 status-2 priority-4 priority-default"><td class="checkbox"><input type="checkbox" name="ids[]" value="894" /></td><td class="subject" style="width: 50%">Related to Exiv2 - <a class="issue tracker-2 status-2 priority-4 priority-default" href="/issues/894">Feature #894</a>: Canon Highlight Tone Priority</td><td class="status">Assigned</td><td class="start_date">17 Mar 2013</td><td class="due_date"></td><td class="done_ratio"><table class="progress progress-50"><tr><td style="width: 50%;" class="closed" title="50%"></td><td style="width: 50%;" class="todo"></td></tr></table><p class="percent"></p></td><td class="buttons"><a title="Actions" class="icon-only icon-actions js-contextmenu" href="#">Actions</a></td></tr><tr id="relation-241" class="issue hascontextmenu issue tracker-1 status-2 priority-4 priority-default"><td class="checkbox"><input type="checkbox" name="ids[]" value="1206" /></td><td class="subject" style="width: 50%">Related to Exiv2 - <a class="issue tracker-1 status-2 priority-4 priority-default" href="/issues/1206">Bug #1206</a>: In specific Canon makernote tags, certain values are meant to be ignored</td><td class="status">Assigned</td><td class="start_date">13 Aug 2016</td><td class="due_date"></td><td class="done_ratio"><table class="progress progress-0"><tr><td style="width: 100%;" class="todo"></td></tr></table><p class="percent"></p></td><td class="buttons"><a title="Actions" class="icon-only icon-actions js-contextmenu" href="#">Actions</a></td></tr><tr id="relation-242" class="issue hascontextmenu issue tracker-1 status-2 priority-4 priority-default"><td class="checkbox"><input type="checkbox" name="ids[]" value="1203" /></td><td class="subject" style="width: 50%">Related to Exiv2 - <a class="issue tracker-1 status-2 priority-4 priority-default" href="/issues/1203">Bug #1203</a>: Exif.CanonCs.FocusContinuous reported as Short</td><td class="status">Assigned</td><td class="start_date">11 Aug 2016</td><td class="due_date"></td><td class="done_ratio"><table class="progress progress-0"><tr><td style="width: 100%;" class="todo"></td></tr></table><p class="percent"></p></td><td class="buttons"><a title="Actions" class="icon-only icon-actions js-contextmenu" href="#">Actions</a></td></tr></table>
</form>
<form class="new_relation" id="new-relation-form" style="display: none;" action="/issues/1219/relations" accept-charset="UTF-8" data-remote="true" method="post"><input name="utf8" type="hidden" value="&#x2713;" />


<p><select onchange="setPredecessorFieldsVisibility();" name="relation[relation_type]" id="relation_relation_type"><option selected="selected" value="relates">Related to</option>
<option value="duplicates">Is duplicate of</option>
<option value="duplicated">Has duplicate</option>
<option value="blocks">Blocks</option>
<option value="blocked">Blocked by</option>
<option value="precedes">Precedes</option>
<option value="follows">Follows</option>
<option value="copied_to">Copied to</option>
<option value="copied_from">Copied from</option></select>
Issue #<input size="10" type="text" name="relation[issue_to_id]" id="relation_issue_to_id" />
<span id="predecessor_fields" style="display:none;">
Delay: <input size="3" type="text" name="relation[delay]" id="relation_delay" /> days
</span>
<input type="submit" name="commit" value="Add" data-disable-with="Add" />
<a href="#" onclick="$(&quot;#new-relation-form&quot;).hide();; return false;">Cancel</a>
</p>

<script>
//<![CDATA[
observeAutocompleteField('relation_issue_to_id', '/issues/auto_complete?issue_id=1219&project_id=exiv2&scope=all')
//]]>
</script>

<script>
//<![CDATA[
setPredecessorFieldsVisibility();
//]]>
</script>

</form>
</div>

</div>




<div id="history">
<h3>History</h3>
  <div id="change-5494" class="journal has-notes has-details">
    <div id="note-1">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-1" class="journal-link">#1</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="31 Aug 2016 12:23" href="/projects/exiv2/activity?from=2016-08-31">about 5 years</a> ago
      <span id="journal-5494-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>New</i> to <i>Assigned</i></li>
       <li><strong>Target version</strong> set to <i>0.28</i></li>
    </ul>
    <div id="journal-5494-notes" class="wiki"><p>Thanks for logging this request and for volunteering to work on this.</p></div>
    </div>
  </div>
  
  <div id="change-5495" class="journal has-details">
    <div id="note-2">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-2" class="journal-link">#2</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="31 Aug 2016 12:23" href="/projects/exiv2/activity?from=2016-08-31">about 5 years</a> ago
      <span id="journal-5495-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Category</strong> changed from <i>api</i> to <i>makernote</i></li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-5496" class="journal has-notes">
    <div id="note-3">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-3" class="journal-link">#3</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4745">Raphael Attie</a> <a title="31 Aug 2016 14:44" href="/projects/exiv2/activity?from=2016-08-31">about 5 years</a> ago
      <span id="journal-5496-private_notes" class=""></span>
    </h4>

    <div id="journal-5496-notes" class="wiki"><p>Looking at an updated Makernote tag list from the Exiftool <a href="http://www.sno.phy.queensu.ca/~phil/exiftool/TagNames/Canon.html#ShotInfo" class="external">website</a></p>


	<p>It appears the Camera Temperature, for Canon EOS Makernote, is found within <br />Tag ID: 0x0004 (Exiftool tagname "CanonShotInfo") , at location 12 with byte offset 2  (so called "index2" in Exiftool). It is still unclear how to translate this within Exiv2 API. Exiv2 documentation gives an Exif.Photo.MakerNote , yet a makernote is also mentioned as Exiv2::Internal::CanonMakerNote in the <a href="http://www.exiv2.org/doc/index.html" class="external">API documentation</a><br />Are they the same and only makernote?</p></div>
    </div>
  </div>
  
  <div id="change-5497" class="journal has-notes">
    <div id="note-4">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-4" class="journal-link">#4</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="31 Aug 2016 14:58" href="/projects/exiv2/activity?from=2016-08-31">about 5 years</a> ago
      <span id="journal-5497-private_notes" class=""></span>
    </h4>

    <div id="journal-5497-notes" class="wiki"><p>Raphael</p>


	<p>I don't know how it works either.  I can step the code with the debugger and get to the bottom of this.  However, not today.  I'm trying very hard to finish v0.26 and have had about 4 hours of interruptions today already.</p>


	<p>Sorry ... I don't have time to work on this at the moment.</p>


	<p>Robin</p></div>
    </div>
  </div>
  
  <div id="change-5498" class="journal has-notes">
    <div id="note-5">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-5" class="journal-link">#5</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4745">Raphael Attie</a> <a title="31 Aug 2016 15:00" href="/projects/exiv2/activity?from=2016-08-31">about 5 years</a> ago
      <span id="journal-5498-private_notes" class=""></span>
    </h4>

    <div id="journal-5498-notes" class="wiki"><p>No pb. Just reporting my findings as requested. No rush.</p></div>
    </div>
  </div>
  
  <div id="change-5500" class="journal has-notes">
    <div id="note-6">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-6" class="journal-link">#6</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="01 Sep 2016 05:33" href="/projects/exiv2/activity?from=2016-09-01">about 5 years</a> ago
      <span id="journal-5500-private_notes" class=""></span>
    </h4>

    <div id="journal-5500-notes" class="wiki"><p>Raphael</p>


	<p>I have copied your test file to:  <a class="external" href="http://exiv2.dyndns.org:8080/userContent/testfiles/1219/">http://exiv2.dyndns.org:8080/userContent/testfiles/1219/</a>  This is a publicly accessible server.  If you are concerned about privacy/copyright I will delete the file.</p></div>
    </div>
  </div>
  
  <div id="change-5501" class="journal has-notes">
    <div id="note-7">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-7" class="journal-link">#7</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/53">Andreas Huggel</a> <a title="01 Sep 2016 06:05" href="/projects/exiv2/activity?from=2016-09-01">about 5 years</a> ago
      <span id="journal-5501-private_notes" class=""></span>
    </h4>

    <div id="journal-5501-notes" class="wiki"><p>Raphael, see <a class="external" href="http://www.exiv2.org/tags-canon.html">http://www.exiv2.org/tags-canon.html</a>, is this tag Exif.CanonSi.0x0006? If that is the case, all that is needed to support it would be to give it a name <a href="http://dev.exiv2.org/projects/exiv2/repository/entry/trunk/src/canonmn.cpp#L1278" class="external">here</a> and probably add some logic (a "pretty-print function") to make the values readable. See plenty of other examples in the same file for how to do that.</p></div>
    </div>
  </div>
  
  <div id="change-5502" class="journal has-notes">
    <div id="note-8">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-8" class="journal-link">#8</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4745">Raphael Attie</a> <a title="01 Sep 2016 08:16" href="/projects/exiv2/activity?from=2016-09-01">about 5 years</a> ago
      <span id="journal-5502-private_notes" class=""></span>
    </h4>

    <div id="journal-5502-notes" class="wiki"><p>Exif.CanonSi.0x0006 is the 6th tag in there. Exiftool extracts it at the 12th, which would be Exif.CanonSi.0x000c , also unknown. Can be?</p></div>
    </div>
  </div>
  
  <div id="change-5503" class="journal has-notes">
    <div id="note-9">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-9" class="journal-link">#9</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4745">Raphael Attie</a> <a title="01 Sep 2016 10:56" href="/projects/exiv2/activity?from=2016-09-01">about 5 years</a> ago
      <span id="journal-5503-private_notes" class=""></span>
    </h4>

    <div id="journal-5503-notes" class="wiki"><p>I just realised that for the 5D, Camera temperature has a different address than other model, it's in the Canon CameraInfo5DmkIII Tags at <a class="external" href="http://www.sno.phy.queensu.ca/~phil/exiftool/TagNames/Canon.html#CameraInfo5DmkIII">http://www.sno.phy.queensu.ca/~phil/exiftool/TagNames/Canon.html#CameraInfo5DmkIII</a><br />So, ignore my last comment, the address is not right.</p>


	<p>I'm trying to confirm this by looking at the values with Hexa editor. This way i'll understand also a bit more the specificity of the 5D raw files.</p>


	<p>Robin, no pb for the file in the public server.</p></div>
    </div>
  </div>
  
  <div id="change-5504" class="journal has-notes">
    <div id="note-10">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-10" class="journal-link">#10</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="01 Sep 2016 11:32" href="/projects/exiv2/activity?from=2016-09-01">about 5 years</a> ago
      <span id="journal-5504-private_notes" class=""></span>
    </h4>

    <div id="journal-5504-notes" class="wiki"><p>Good news all round. This teamwork stuff really works!  Thanks for the test file.</p></div>
    </div>
  </div>
  
  <div id="change-5505" class="journal has-notes">
    <div id="note-11">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-11" class="journal-link">#11</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/53">Andreas Huggel</a> <a title="01 Sep 2016 12:33" href="/projects/exiv2/activity?from=2016-09-01">about 5 years</a> ago
      <span id="journal-5505-private_notes" class=""></span>
    </h4>

    <div id="journal-5505-notes" class="wiki"><p>Yes, in Exiftool's Canon tags there is a CameraTemperature in the ShotInfo array:</p>


	<table>
		<tr>
			<td>12</td>
			<td>CameraTemperature</td>
			<td>int16s</td>
			<td>(newer EOS models only)</td>
		</tr>
	</table>




	<p>It may be in other places for different camera models. This one we already support in Exiv2 as Exif.CanonSi.0x000c as you said, we just don't have a name for it yet. So you can compare the exiftool value with that from exiv2. The changes needed to support it properly are as advised before. I don't think we support the CameraInfo5DmkIII tags yet, that would be more work.</p></div>
    </div>
  </div>
  
  <div id="change-5506" class="journal has-notes">
    <div id="note-12">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-12" class="journal-link">#12</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4745">Raphael Attie</a> <a title="01 Sep 2016 14:46" href="/projects/exiv2/activity?from=2016-09-01">about 5 years</a> ago
      <span id="journal-5506-private_notes" class=""></span>
    </h4>

    <div id="journal-5506-notes" class="wiki"><p>Guys, I'm puzzled with all these "unsignedShort" that I see in CanonMakerNote::tagInfoSi_[] = { blah... } , in canonmn.cpp. <br />Most of them are meant to be signed short, not unsigned. <br />I think that's the reason I couldn't match your temperature values with Exiftool.</p>


	<p>So, I ran all your unknown values of the Shot Info tags:</p>


	<p>"Exif.CanonSi.0x0001"  =  "0" <br />"Exif.CanonSi.0x0006"  =  "0" <br />"Exif.CanonSi.0x0008"  =  "3" <br />"Exif.CanonSi.0x000a"  =  "8" <br />"Exif.CanonSi.0x000b"  =  "8" <br />"Exif.CanonSi.0x000c"  =  "155" <br />"Exif.CanonSi.0x000d"  =  "0" <br />"Exif.CanonSi.0x0010"  =  "0" <br />"Exif.CanonSi.0x0011"  =  "0" <br />"Exif.CanonSi.0x0012"  =  "3" <br />"Exif.CanonSi.0x0014"  =  "0" <br />"Exif.CanonSi.0x0018"  =  "0" <br />"Exif.CanonSi.0x0019"  =  "0" <br />"Exif.CanonSi.0x001a"  =  "248" <br />"Exif.CanonSi.0x001b"  =  "65535" <br />"Exif.CanonSi.0x001c"  =  "65535" <br />"Exif.CanonSi.0x001d"  =  "65535" <br />"Exif.CanonSi.0x001e"  =  "65535" <br />"Exif.CanonSi.0x001f"  =  "0" <br />"Exif.CanonSi.0x0020"  =  "0" <br />"Exif.CanonSi.0x0021"  =  "0" <br />Exif.CanonSi.ISOSpeed =  "320"</p>


	<p>Let's look at "Exif.CanonSi.0x000c"  =  "155" , as coming from an unsigned short reading.</p>


	<p>Now, 155 - 128 = 27 C... Which is the value from Exiftool.</p>


	<p>I took a different file, to see if a linear relations holds with this offset, Exiv2 gave me 149, Exiftool gave 21 C, and 149 - 128 = 21. <br />I did this test from files coming from cameras Canon 5D Mark iii with different Firmwares, and confirm that this holds for old firmwares 1.0.x and more recent 1.1.x.</p>


	<p>Note also in my list of values above, the clipped value 65535 of unsigned short, can this be symptomatic of incorrect typing?... See <a href="http://www.sno.phy.queensu.ca/~phil/exiftool/TagNames/Canon.html#ShotInfo" class="external">here</a></p>


	<p>Finally, for the 5D mark iii, at a different address (27 = 0x1b) with Exiftool, that value is typed as "int8u" by Exiftool (8-bit unsigned char?). I wonder if that's the same parameter you have at "Exif.CanonSi.0x001b"  =  "65535", whose value is the max of unsigned short. I'll leave it for maybe later discussions.</p>


	<p>Raphael</p></div>
    </div>
  </div>
  
  <div id="change-5507" class="journal has-notes">
    <div id="note-13">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-13" class="journal-link">#13</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="01 Sep 2016 15:18" href="/projects/exiv2/activity?from=2016-09-01">about 5 years</a> ago
      <span id="journal-5507-private_notes" class=""></span>
    </h4>

    <div id="journal-5507-notes" class="wiki"><p>Unless I'm mistaken I believe this is exactly what Sridhar is working on in <a class="issue tracker-1 status-2 priority-4 priority-default" title="Bug: Exif.CanonCs.FocusContinuous reported as Short (Assigned)" href="/issues/1203">#1203</a> (and possibly <a class="issue tracker-1 status-2 priority-4 priority-default" title="Bug: Add missing detail to canonCsEasyMode in canonmn.cpp (Assigned)" href="/issues/1204">#1204</a> <a class="issue tracker-1 status-2 priority-4 priority-default" title="Bug: For Sharpness use Exif.CanonPr.Sharpness instead of Exif.CanonCs.Sharpness in easyaccess.cpp (Assigned)" href="/issues/1205">#1205</a> and <a class="issue tracker-1 status-2 priority-4 priority-default" title="Bug: In specific Canon makernote tags, certain values are meant to be ignored (Assigned)" href="/issues/1206">#1206</a>) !</p>


	<p>It's amazing how 2 people can discover the same issue at the same instant even although this issue has been in the code for 10 years without anybody mentioning this.</p>


	<p>I will leave Andreas to comment as he's working with Sridhar on this topic and Andreas knows this part of the code.</p></div>
    </div>
  </div>
  
  <div id="change-5508" class="journal has-notes has-details">
    <div id="note-14">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-14" class="journal-link">#14</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4745">Raphael Attie</a> <a title="01 Sep 2016 15:55" href="/projects/exiv2/activity?from=2016-09-01">about 5 years</a> ago
      <span id="journal-5508-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>File</strong> <a href="/attachments/1045">CR2_Scrutinized.pdf</a> <a class="icon-only icon-download" title="Download" href="/attachments/download/1045/CR2_Scrutinized.pdf">CR2_Scrutinized.pdf</a> added</li>
    </ul>
    <div id="journal-5508-notes" class="wiki"><p>Indeed, the timing is unbelievable!</p>


	<p>I'm uploading a document i've set up to better understand the raw format. I've been using the notorious <a href="https://github.com/lclevy/libcraw2/blob/master/docs/cr2_poster.pdf" class="external">CR2 poster</a></p>


	<p>and if a kind soul could take the time to tell me where I'm wrong in locating the Shot Info part of my raw file, using an Hex editor, that would be wonderful. So, see attached. Thanks!</p></div>
    </div>
  </div>
  
  <div id="change-5509" class="journal has-notes">
    <div id="note-15">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-15" class="journal-link">#15</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="01 Sep 2016 17:13" href="/projects/exiv2/activity?from=2016-09-01">about 5 years</a> ago
      <span id="journal-5509-private_notes" class=""></span>
    </h4>

    <div id="journal-5509-notes" class="wiki"><p>Somebody has put a lot of work into the document.  Here's my way of looking at your file with tiffinfo (part of libtiff) and exiv2:<pre>1003 rmills@rmillsmbp:~/gnu/exiv2/trunk $ tiffinfo ~/Downloads/F36A7292.CR2 2&gt;/dev/null | grep -i maker | head -1 | cut -d, -f-20
  MakerNote: 0x2a,0x0,0x1,0x0,0x3,0x0,0x31,0x0,0x0,0x0,0xe2,0x5,0x0,0x0,0x2,0x0,0x3,0x0,0x4,0x0
1004 rmills@rmillsmbp:~/gnu/exiv2/trunk $ exiv2 -pR ~/Downloads/F36A7292.CR2  | grep -i maker 
       640 | 0x927c MakerNote                 | UNDEFINED |    68200 |       996 | *.....1...............D........ ...
1005 rmills@rmillsmbp:~/gnu/exiv2/trunk $ </pre>Looks to me as though there's a load of MakerNote data starting with a *\0 Gosh, 42.  The meaning of life.  Could it be a TIFF without the II?<pre>1023 rmills@rmillsmbp:~/gnu/exiv2/trunk $ dd bs=1 count=68200 skip=996 if=~/Downloads/F36A7292.CR2 of=stuff.tiff 
68200+0 records in
68200+0 records out
68200 bytes transferred in 0.225005 secs (303104 bytes/sec)
1024 rmills@rmillsmbp:~/gnu/exiv2/trunk $ (echo -n 'II' ; cat stuff.tiff ) &gt; eh.tif
1025 rmills@rmillsmbp:~/gnu/exiv2/trunk $ exiv2 -pS eh.tif
STRUCTURE OF TIFF FILE (II): eh.tif
END eh.tif
1026 rmills@rmillsmbp:~/gnu/exiv2/trunk $ </pre>Nope.  I'm lost.  Andreas will enlighten us.</p></div>
    </div>
  </div>
  
  <div id="change-5510" class="journal has-notes has-details">
    <div id="note-16">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-16" class="journal-link">#16</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4745">Raphael Attie</a> <a title="01 Sep 2016 17:55" href="/projects/exiv2/activity?from=2016-09-01">about 5 years</a> ago
      <span id="journal-5510-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>File</strong> <a href="/attachments/1046">CR2_Scrutinized.pdf</a> <a class="icon-only icon-download" title="Download" href="/attachments/download/1046/CR2_Scrutinized.pdf">CR2_Scrutinized.pdf</a> added</li>
    </ul>
    <div id="journal-5510-notes" class="wiki"><p>The 42 puzzled me too without the double I for endianness...</p>


	<p>Nonetheless, my document misled you. I made a little mistake when locating the address (dec) 1620, I was pointing a few bits before. I'm attaching an updated document which shows the bits corresponding to the camera temperature. <br />It appears that unsigned short or signed short makes no difference. This 128 offset is probably coming from the other Camera Temperature makernote (5d mark iii makernote) which is unsigned char, so ranging within [0-255]. That must come from the choice of scaling of the original data, which is a reasonable scale given the typical temperature range (unless you put your camera in the oven...). Then it is probably casted as signed short as-is. Exiftool probably took the initiative to convert it by offsetting by -128. That's just a theory. <br />Still, if someone can comment on the attached document, I still have things I don't fully understand, regarding e.g. the ISO. My ISO was set to 3200, so the Base ISO and Auto ISO aren't fully extracted. There one of them at 320, so, we're missing a factor 10. Note that Exiftool doc says that ISO = Base ISO * Auto ISO / 100.</p>


	<p>Raphael</p></div>
    </div>
  </div>
  
  <div id="change-5511" class="journal has-notes">
    <div id="note-17">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-17" class="journal-link">#17</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="01 Sep 2016 18:41" href="/projects/exiv2/activity?from=2016-09-01">about 5 years</a> ago
      <span id="journal-5511-private_notes" class=""></span>
    </h4>

    <div id="journal-5511-notes" class="wiki"><p>I've added Andreas as a watcher of this thread so he's aware of this discussion.</p>


	<p>I like to keep track in an issue of the time that's been spent.  With a thing like this, I'd probably put in Estimate = 10 hours 10%, and when I update it after a couple of hours effort, I adjust the % and estimate as I go along.  First time into unstudied code is usually time consuming.</p></div>
    </div>
  </div>
  
  <div id="change-5512" class="journal has-notes has-details">
    <div id="note-18">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-18" class="journal-link">#18</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4745">Raphael Attie</a> <a title="01 Sep 2016 20:30" href="/projects/exiv2/activity?from=2016-09-01">about 5 years</a> ago
      <span id="journal-5512-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>File</strong> <a href="/attachments/1047">CR2_Scrutinized_updated.pdf</a> <a class="icon-only icon-download" title="Download" href="/attachments/download/1047/CR2_Scrutinized_updated.pdf">CR2_Scrutinized_updated.pdf</a> added</li>
    </ul>
    <div id="journal-5512-notes" class="wiki"><p>A little update to my file to show and confirm the value and addresses for the Camera Temperature value at two different "expected" locations. <br />For my .CR2 file, Camera Temperature value is indeed 155 also in the "CanonCameraInfo Tag" with type unsigned char, which is equal to the value in unsigned or signed short in the Shot Info block (named CanonSi in Exiv2). <br />So this supports that the values in Exiftool are obtained by subtracting 128, to get the Camera Temperature value in degrees Celsius. I've only concluded that with a few samples. In the future I will make more tests with the same camera, putting it in the fridge (cold), and in warm temperatures, and see if the supposed Exiftool's conversion roughly holds.</p>


	<p>And let's call it a day...</p></div>
    </div>
  </div>
  
  <div id="change-5513" class="journal has-notes has-details">
    <div id="note-19">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-19" class="journal-link">#19</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="01 Sep 2016 20:33" href="/projects/exiv2/activity?from=2016-09-01">about 5 years</a> ago
      <span id="journal-5513-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>% Done</strong> changed from <i>0</i> to <i>60</i></li>
       <li><strong>Estimated time</strong> set to <i>10.00 h</i></li>
    </ul>
    <div id="journal-5513-notes" class="wiki"><p>You've worked really hard at this.  Sure - take the rest of the day off!</p>


	<p>In fixing the JPEG/ICC support today I've introduced a new bug <a class="issue tracker-1 status-5 priority-4 priority-default closed" title="Bug: Bug in exiv2 --comment on trunk (Closed)" href="/issues/1220">#1220</a>.  I'm also going to call it a day!</p></div>
    </div>
  </div>
  
  <div id="change-5514" class="journal has-notes">
    <div id="note-20">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-20" class="journal-link">#20</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4745">Raphael Attie</a> <a title="01 Sep 2016 20:41" href="/projects/exiv2/activity?from=2016-09-01">about 5 years</a> ago
      <span id="journal-5514-private_notes" class=""></span>
    </h4>

    <div id="journal-5514-notes" class="wiki"><p>Thank you Robin. I'm glad I've crossed your road, and I thank you also for accepting my modest contribution. I've already learned a lot thanks to this issue. I hope I'll be able to help more in the future. This project, like Exiftool, Libraw, etc... are indeed really important to my dev project, hence my implication.</p>


	<p>Have a good rest!</p></div>
    </div>
  </div>
  
  <div id="change-5516" class="journal has-notes">
    <div id="note-21">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-21" class="journal-link">#21</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="02 Sep 2016 12:20" href="/projects/exiv2/activity?from=2016-09-02">about 5 years</a> ago
      <span id="journal-5516-private_notes" class=""></span>
    </h4>

    <div id="journal-5516-notes" class="wiki"><p>I hope you're having a nice day.  I'm having a miserable one with <a class="issue tracker-1 status-5 priority-4 priority-default closed" title="Bug: Bug in exiv2 --comment on trunk (Closed)" href="/issues/1220">#1220</a>, so I've decided to have lunch and try again this afternoon.  While eating, I had a thought about your comment concerning <em><strong>Exiftool ... converts it by offsetting by -128</strong></em>.</p>


	<p>Exiv2 reports metadata two different ways <em><strong>value</strong></em> or <em><strong>translated</strong></em>.  <em><strong>value</strong></em> is the vanilla data in the file.  <em><strong>translated</strong></em> is a human representation of the data.  The difference is demonstrated here:<pre>1290 rmills@rmillsmbp:~/gnu/exiv2/trunk $ exiv2 -pv --grep LensIDNumber http://clanmills.com/Stonehenge.jpg
0x000c NikonLd3     LensIDNumber                Byte        1  146
1291 rmills@rmillsmbp:~/gnu/exiv2/trunk $ exiv2 -pt --grep LensIDNumber http://clanmills.com/Stonehenge.jpg
Exif.NikonLd3.LensIDNumber                   Byte        1  Sigma 18-250mm F3.5-6.3 DC OS Macro HSM
1292 rmills@rmillsmbp:~/gnu/exiv2/trunk $ </pre>The LensIDNumber in the Nikon Maker Note is a single byte 0..255.  Exiv2 has lens tables which identify 146 as 'Sigma .....'.  How can Nikon represent 1000s of different lenses with a single byte?  Let's not start that discussion!</p>


	<p>If you are able to complete your investigation and provide a patch, please respect the difference between "value" and "translated".  So when you report "value", don't adjust it.  When you report "translated", please adjust.</p></div>
    </div>
  </div>
  
  <div id="change-5517" class="journal has-notes">
    <div id="note-22">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-22" class="journal-link">#22</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4745">Raphael Attie</a> <a title="02 Sep 2016 12:51" href="/projects/exiv2/activity?from=2016-09-02">about 5 years</a> ago
      <span id="journal-5517-private_notes" class=""></span>
    </h4>

    <div id="journal-5517-notes" class="wiki"><p>Hi Robin,</p>


	<p>I'm having a very relaxed day, in fact. Thank you for the clarification. I did notice all the codes for the various lenses with the canon file, but haven't looked at other files, Nikon files always scared me off. I acknowledge the difference between value and translated. I more or less work things the same way with my scientific data and FITS files, having keywords that stores the necessary calibration values for converting raw uncalibrated units to physical units.</p>


	<p>As far as i'm concerned with this issue my investigation is completed on the "data analysis" on the Canon side for now, which is the brand I needed to support first. I will have a look at Nikon but I would like to complete the work for Canon first, and then i'll iterate with Nikon, and Sony, provided I have access to enough documentation to understand their raw file. <br />I don't mind writing an updated code, but how far does the patch need to go? I've seen your canonmn.cpp file, but don't see anything related to value/translated. Don't you have a schematic of your the structure of the files to help me see where I shall provide new input to support the addition of the Camera Temperature (or any future partially supported "unknown" tag)? I'm rather free this week end, so I'll use it to make more progress on discovering your code. But I'm getting married in mid-September (true, TRUE!!!!) so for several days starting end of next week I might be less available... so no promise but i'll try to finish before then, at least for Canon files.</p>


	<p>Raphael</p></div>
    </div>
  </div>
  
  <div id="change-5518" class="journal has-notes">
    <div id="note-23">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-23" class="journal-link">#23</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4745">Raphael Attie</a> <a title="02 Sep 2016 14:11" href="/projects/exiv2/activity?from=2016-09-02">about 5 years</a> ago
      <span id="journal-5518-private_notes" class=""></span>
    </h4>

    <div id="journal-5518-notes" class="wiki"><p>Maybe i should target my questions to get me started without you explaining me everything since the Big Bang...</p>


	<p>Can someone just tell me how this TagInfo from the Canon Shot Info Tag is structured? <br /><pre>
TagInfo(0x0003, "MeasuredEV", N_("Measured EV"), N_("Measured EV"), canonSiId, makerTags, unsignedShort, 1, printSi0x0003)
</pre></p>


	<p>I see different TagInfo declarations in "tags_int.hpp" but can't figure out to which one the above example corresponds: <br />(from tags_int.hpp)<br /><pre>
    //! Return the tag list for \em ifdId
    const TagInfo* tagList(IfdId ifdId);
    //! Return the tag info for \em tag and \em ifdId
    const TagInfo* tagInfo(uint16_t tag, IfdId ifdId);
    //! Return the tag info for \em tagName and \em ifdId
    const TagInfo* tagInfo(const std::string&#38; tagName, IfdId ifdId);

</pre></p></div>
    </div>
  </div>
  
  <div id="change-5519" class="journal has-notes">
    <div id="note-24">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-24" class="journal-link">#24</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4745">Raphael Attie</a> <a title="02 Sep 2016 14:19" href="/projects/exiv2/activity?from=2016-09-02">about 5 years</a> ago
      <span id="journal-5519-private_notes" class=""></span>
    </h4>

    <div id="journal-5519-notes" class="wiki"><p>or does it rather correspond to these definitions that I didn't notice when grepping TagInfo earlier...?</p>


<pre>
include/exiv2/tags.hpp:    struct TagInfo;
include/exiv2/tags.hpp:    typedef const TagInfo* (*TagListFct)();
include/exiv2/tags.hpp:    struct EXIV2API TagInfo {
include/exiv2/tags.hpp:        TagInfo(
include/exiv2/tags.hpp:    }; // struct TagInfo
include/exiv2/tags.hpp:        static const TagInfo* tagList(const std::string&#38; groupName);
include/exiv2/tags.hpp:          @brief Constructor to create an Exif key from a TagInfo instance.
include/exiv2/tags.hpp:          @param ti The TagInfo instance
include/exiv2/tags.hpp:        ExifKey(const TagInfo&#38; ti);
include/exiv2/tags.hpp:    //! Output operator for TagInfo
</pre></div>
    </div>
  </div>
  
  <div id="change-5520" class="journal has-notes">
    <div id="note-25">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-25" class="journal-link">#25</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4745">Raphael Attie</a> <a title="02 Sep 2016 14:53" href="/projects/exiv2/activity?from=2016-09-02">about 5 years</a> ago
      <span id="journal-5520-private_notes" class=""></span>
    </h4>

    <div id="journal-5520-notes" class="wiki"><p>Got it. For some reason my grep command with "TagInfo" did not grep the text "TagInfo::TagInfo" in the tags.cpp file at L2949:</p>


<pre>
TagInfo::TagInfo(
        uint16_t tag,
        const char* name,
        const char* title,
        const char* desc,
        int ifdId,
        int sectionId,
        TypeId typeId,
        int16_t count,
        PrintFct printFct
    )
        : tag_(tag), name_(name), title_(title), desc_(desc), ifdId_(ifdId),
          sectionId_(sectionId), typeId_(typeId), count_(count), printFct_(printFct)
    {
    }
</pre>

	<p>I should be fine from here, but it will always save some time if you have some internal documentation on the inner design of the library that is not explained in the official API documentation. Otherwise, don't worry about it.</p></div>
    </div>
  </div>
  
  <div id="change-5521" class="journal has-notes">
    <div id="note-26">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-26" class="journal-link">#26</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="02 Sep 2016 15:36" href="/projects/exiv2/activity?from=2016-09-02">about 5 years</a> ago
      <span id="journal-5521-private_notes" class=""></span>
    </h4>

    <div id="journal-5521-notes" class="wiki"><p>Apologies.  The power has been off for a couple of hours.  I wrote this 2 hours ago and couldn't post it.  I think you've already discovered most of this for yourself!</p>


	<p>Yes.  You have indeed completed the research for Canon Cameras.</p>


	<p>Congrats on your forth-coming wedding.  I've been happily married to Alison for 42 years.  The three happiest days of our lives were the days on which our 2 sons (now 39 and 40) were born and the day of our wedding.  <a class="external" href="http://dev.exiv2.org/projects/exiv2/wiki/_Robin_Mills_">http://dev.exiv2.org/projects/exiv2/wiki/_Robin_Mills_</a></p>


	<p>Here's how the value/translated feature is implemented.  Have a look at the class Exiv2::Metadatum <a class="external" href="http://www.exiv2.org/doc/classExiv2_1_1Metadatum.html">http://www.exiv2.org/doc/classExiv2_1_1Metadatum.html</a>  A Metadatum is a container for different types of data as defined in the EXIF specification on page 20.  <a class="external" href="http://www.exiv2.org/Exif2-2.PDF">http://www.exiv2.org/Exif2-2.PDF</a>  It can be an array of bytes, unsigned, signed, rational and other data.  The method "toString()" is called to obtain the "translated" value.  When you add a record for a tag in xxxxxmn.cpp (a TagInfo record), you define a function to be called by toString().  The default <strong><code>printValue</code></strong> is usually sufficient.  In your case you'll require a special function.  Here's an example from canonmn.cpp<pre>TagInfo(0x0009, "OwnerName", N_("Owner Name"), N_("Owner Name"), canonId, makerTags, asciiString, -1, printValue),
TagInfo(0x000c, "SerialNumber", N_("Serial Number"), N_("Camera serial number"), canonId, makerTags, unsignedLong, -1, print0x000c),</pre>You'll probably find your function useful for other tags, so give it meaningful name such as <strong><code>printByteMinus128</code></strong>.</p>


	<p>How does the MakerNote decoder engage with the TagInfo records?  I don't know because I've never had to investigate it.  It's likely that you know lots about this from your work yesterday.  Having identified the location in memory of the ShotInfo record, you're almost there.  I believe Andreas implemented this and can help you, and Niels is knowledgable about this part of the code.</p>


	<p>Nikon Files aren't difficult because the MakerNote is a TIFF.  And Nikon's raw format .NEF is also a TIFF.  You can see the structure by running my (beautiful and ingenious) command: <pre>$ exiv2 -pR http://clanmills.com/Stonehenge.jpg</pre>Down in the murky depths of the MakerNote lies a Nikon Tag which provides the information you want.  Thanks to our good buddy Phil, a lot of this is documented on the ExifTool web site.</p>


	<p>lensID conversion is a misery because we get weekly requests for new lenses.  I wish the lensID "translated" feature was not part of Exiv2.  There is an important new feature in v0.26 to enable the user to define their own "translated" value for a given manufacturer/lensID combination:  <a class="external" href="http://dev.exiv2.org/projects/exiv2/wiki/Lens_Recognition_in_Exiv2_v026_(and_later)/">http://dev.exiv2.org/projects/exiv2/wiki/Lens_Recognition_in_Exiv2_v026_(and_later)/</a></p></div>
    </div>
  </div>
  
  <div id="change-5522" class="journal has-notes">
    <div id="note-27">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-27" class="journal-link">#27</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="02 Sep 2016 16:03" href="/projects/exiv2/activity?from=2016-09-02">about 5 years</a> ago
      <span id="journal-5522-private_notes" class=""></span>
    </h4>

    <div id="journal-5522-notes" class="wiki"><p>All of our documentation is on the project web-site.  We have documentation about Manufacturers' MakerNotes.  As you've seen, we have extensive class documentation which is generated by doxygen from comments in the code.  We have numerous articles in the Wiki about the build, test suite, and the structure of image files.</p>


	<p>The code is in good shape and well commented.  And we have a good set of sample programs.  We have a robust test suite.  And we have a build server and publish the daily build for 15 platforms.</p>


	<p>And we have Redmine.  When I'm not asleep, or on vacation, I'll usually answer questions within a couple of hours.  There is a search box in Redmine which will search the issue database, articles and forum discussions.</p>


	<p>So ... all in all ... I think Exiv2 is a well organised project with good sources of information.  Our documentation is accurate and up to date.  The Exiv2 docs are easily better that what I found working in Silicon Valley for 14 years.  The Silicon Valley way is to have a Wiki with a huge amount of out-of-date and factually wrong information.  And to make matters worse, the Engineers are so pushed and stressed by the bosses that they seldom have time to talk to each other.</p>


	<p>Ultimately the source of understanding and knowledge of the code comes from working on it and stepping with the debugger.  To deal with "intellectual property" you need "intelligent people".  I have no doubt that you are a smart guy and will come up to speed quickly on the structure of Exiv2.</p></div>
    </div>
  </div>
  
  <div id="change-5523" class="journal has-notes">
    <div id="note-28">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-28" class="journal-link">#28</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4745">Raphael Attie</a> <a title="02 Sep 2016 19:42" href="/projects/exiv2/activity?from=2016-09-02">about 5 years</a> ago
      <span id="journal-5523-private_notes" class=""></span>
    </h4>

    <div id="journal-5523-notes" class="wiki"><p>Robin, thank you for the nice words on both the wedding, sharing your experience and on the dev part. I had a close look at your wiki, I finally "meet" you! Well, I need to tell you that I fell in love with Scotland a few years ago when I was working in Glasgow for a few months in the astronomy dept. at the University. Believe it or not, I still have kilt in my cupboard offered to me by one of my colleague there. I was born on your national day too, January 25th, Burns' day! That made me famous in the whole department when I told them!! I'm originally from France, currently working in Brussels, but live in Lille (France, near the belgian border), I will move to the US for my new job at Nasa/GSFC in January where I'll carry on my research project on solar physics (solar flares, space weather, etc...), and I read that you live in the US too? That's great! From your great CV, you might become my new guru in software development!!</p>


	<p>I'm gonna dive into the nicely structured documentation and codes of Exiv2 in the next days. I might pester you for clarifications on some aspects, but don't feel obligated to address everything I may ask. I can be stuck for days on something, then by asking someone else something unlocks in my head and after a few minutes I find the answer, happens all the time in fact! So I intend to learn the hard way anyway, walking my own way into the nice and inspiring piece of code that you guys wrote! Let's hope that all this is just the beginning of a great team work!</p></div>
    </div>
  </div>
  
  <div id="change-5524" class="journal has-notes">
    <div id="note-29">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-29" class="journal-link">#29</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="02 Sep 2016 20:59" href="/projects/exiv2/activity?from=2016-09-02">about 5 years</a> ago
      <span id="journal-5524-private_notes" class=""></span>
    </h4>

    <div id="journal-5524-notes" class="wiki"><p>I did Astronomy 101 at Glasgow University in 1972.  It was mostly taught by Archie Roy.  Professor Sweet was the Regius Professor.  I believe the Regius Professor today is John Brown and I think he was a grad student when I was an Engineering Undergraduate.  Remarkably, I found spherical trig very useful when working on GPS systems in Silicon Valley in 2008-2012.</p>


	<p>Alison and I are proud to be US Citizens.  It's unlikely that we'll ever live in the States again as we're happy to be home and close to our family in England.  We've been to all 50 States.  We lived near NASA/Ames in Mountain View, CA and been several times to JSC/Mission Control in Houston, TX.  Never been to GSFC.  I'm sure you'll have a wonderful time.  Nasa Engineering has a reputation for being very bureaucratic.  I suspect Nasa Science will have some of the smartest people on the planet.</p>


	<p>When I'm really stuck with something, I often write an email to somebody that I believe can help.  I don't send the email.  I have a cup of coffee.  I pretend I am the person receiving the email and try to reply!  Remarkably, I often can.  The process of explaining the issue in words clears the brain.  The debugger can be your worst enemy.  All that information from stepping code can prevent you from asking the simple question "what is the issue?".</p>


	<p>However, when I'm team leader, I have a rule for team members.  "If your wheels are spinning for more than 2 hours, I want to know about it.".  In a company, it's important to keep everybody moving.  If an engineer is stuck, I want to get them moving again as quickly as possible.</p>


	<p>So, I leave it to you to decide when to ask for help.  If I can't help, you'll have to dig in and solve it yourself.  However, some of my time will help you at lot at the beginning.</p></div>
    </div>
  </div>
  
  <div id="change-5525" class="journal has-notes">
    <div id="note-30">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-30" class="journal-link">#30</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4745">Raphael Attie</a> <a title="03 Sep 2016 10:03" href="/projects/exiv2/activity?from=2016-09-03">about 5 years</a> ago
      <span id="journal-5525-private_notes" class=""></span>
    </h4>

    <div id="journal-5525-notes" class="wiki"><p>Since this morning I've started diving into the documentation, cross-reading with the codes. I prefer too ask that question now: <br />Many times you refer to "component(s)" or "value components" or the "n-th component", although I don't recall such a term in general C++ programming and so I wonder if it's more local jargon to Exiv2? Or even more general than C++? (general programming maybe?)  So what are you referring to by "component"? Does this relate to each of the bytes that can define a number or is this something else? Since these "components" and Exiv2::Value Class are one of the quanta around which many of the base classes are made (Metadatum and their parent, ExifDatum, etc...), it would be wise to be enlightened on this wording: "component(s)" and "n-th component". In addition, n-th component refers to some positional criterion and is that read from the "left" or from the "right", and thus, is this affected by endianness?</p>


	<p>Thanks</p></div>
    </div>
  </div>
  
  <div id="change-5526" class="journal has-notes">
    <div id="note-31">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-31" class="journal-link">#31</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4745">Raphael Attie</a> <a title="03 Sep 2016 10:11" href="/projects/exiv2/activity?from=2016-09-03">about 5 years</a> ago
      <span id="journal-5526-private_notes" class=""></span>
    </h4>

    <div id="journal-5526-notes" class="wiki"><p>And just a self-rectification, I meant "Metadatum and its children ExifDatum, etc..." instead of "Metadatum and their parent (...)" (the latter made no sense).</p></div>
    </div>
  </div>
  
  <div id="change-5527" class="journal has-notes">
    <div id="note-32">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-32" class="journal-link">#32</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="03 Sep 2016 11:48" href="/projects/exiv2/activity?from=2016-09-03">about 5 years</a> ago
      <span id="journal-5527-private_notes" class=""></span>
    </h4>

    <div id="journal-5527-notes" class="wiki"><p>I think you're referring to <a class="external" href="http://www.exiv2.org/doc/classExiv2_1_1Exifdatum.html">http://www.exiv2.org/doc/classExiv2_1_1Exifdatum.html</a> and this documentation:<pre>TypeId typeId () const
Return the type id of the value. 

const char * typeName () const
Return the name of the type. 

long typeSize () const
Return the size in bytes of one component of this type. 

long count () const
Return the number of components in the value. 

long size () const
Return the size of the value in bytes. </pre>I believe this is Exiv2 speak.  This was in place before I joined the project 8 years ago.  Have a look at the Exif spec page 20.  It defines Exif data as a structure with a type field, count and data.  You can see these being reported with this command:<pre>594 rmills@rmillsmbp:~/gnu/exiv2/trunk $ exiv2 -pa --grep Date/i --grep Comment/i --grep GPS http://clanmills.com/Stonehenge.jpg
Exif.Image.DateTime                          Ascii      20  2015:07:16 20:25:28
Exif.Photo.DateTimeOriginal                  Ascii      20  2015:07:16 15:38:54
Exif.Photo.DateTimeDigitized                 Ascii      20  2015:07:16 15:38:54
Exif.NikonWt.DateDisplayFormat               Byte        1  Y/M/D
Exif.Photo.UserComment                       Undefined  44                                      
Exif.Image.GPSTag                            Long        1  4060
Exif.GPSInfo.GPSVersionID                    Byte        4  2.3.0.0
Exif.GPSInfo.GPSLatitudeRef                  Ascii       2  North
Exif.GPSInfo.GPSLatitude                     Rational    3  51deg 10.69690' 
Exif.GPSInfo.GPSLongitudeRef                 Ascii       2  West
Exif.GPSInfo.GPSLongitude                    Rational    3  1deg 49.59840' 
Exif.GPSInfo.GPSAltitudeRef                  Byte        1  Above sea level
Exif.GPSInfo.GPSAltitude                     Rational    1  97 m
Exif.GPSInfo.GPSTimeStamp                    Rational    3  14:38:55.9
Exif.GPSInfo.GPSSatellites                   Ascii       3  09
Exif.GPSInfo.GPSMapDatum                     Ascii      17  WGS-84          
Exif.GPSInfo.GPSDateStamp                    Ascii      11  2015:07:16
Xmp.xmp.ModifyDate                           XmpText    25  2015-07-16T20:25:28+01:00
595 rmills@rmillsmbp:~/gnu/exiv2/trunk $ </pre>The land of metadata is populated with different creatures (types) who roam in collection of 1 or more (count)  The types are:<pre> 1 = BYTE      An 8-bit unsigned integer
 2 = ASCII     An 8-bit byte containing one 7-bit ASCII code. The final byte is terminated with NULL
 3 = SHORT     A 16-bit (2-byte) unsigned integer
 4 = LONG      A 32-bit (4-byte) unsigned integer
 5 = RATIONAL  Two LONGs. The first LONG is the numerator and the second LONG expresses the denominator
 7 = UNDEFINED An 8-bit byte that can take any value depending on the field definition
 9 = SLONG     A 32-bit (4-byte) signed integer (2's complement notation)
10 = SRATIONAL Two SLONGs. The first SLONG is the numerator and the second SLONG is the denominator</pre>Exiv2 has extended the types when support was added for Xmp. "Undefined", "Byte" and "Ascii" are effectively the same, however "Ascii" is intended for printing and "Byte" is intended for binary.  MakerNotes are often "Undefined".</p>


	<p>DateTime "Ascii" of count 20.  Correct!  <strong><code>2016-09-03 12:06:43</code></strong> is 20 ascii bytes including the \0 terminator.  Regrettably Ascii dates do not include time-zone information. <em>(how did the Exif committee cook up that nonsense?)</em></p>


	<p>Exif does not have a floating point number.  It uses Rational which are a pair of integers: numerator/denominator.  So GPSLatitude is expressed by three Rationals (degrees, minutes, seconds).  You can see the 'vanilla' values with this command:<pre>595 rmills@rmillsmbp:~/gnu/exiv2/trunk $ exiv2 -pv --grep Latitude http://clanmills.com/Stonehenge.jpg
0x0001 GPSInfo      GPSLatitudeRef              Ascii       2  N
0x0002 GPSInfo      GPSLatitude                 Rational    3  51/1 106969/10000 0/1
596 rmills@rmillsmbp:~/gnu/exiv2/trunk $ </pre>LatitudeRef is a two byte ascii field.  Null terminated as you can see with this command: <pre>596 rmills@rmillsmbp:~/gnu/exiv2/trunk $ exiv2 -ph --grep Latitude http://clanmills.com/Stonehenge.jpg
0x0001 GPSInfo      GPSLatitudeRef              Ascii       2   2
  0000  4e 00                                            N.

0x0002 GPSInfo      GPSLatitude                 Rational    3  24
  0000  33 00 00 00 01 00 00 00 d9 a1 01 00 10 27 00 00  3............'..
  0010  00 00 00 00 01 00 00 00                          ........

597 rmills@rmillsmbp:~/gnu/exiv2/trunk $ </pre></p>


	<p>Now you answer the question:  What does count(), type() etc tell you?</p>


	<p>////////////////////////////</p>


	<p>Notice that different types are used by different tags.  GPSTimeStamp is represented by 3 Rationals and not 20 ascii characters.  Look's like UTC to me.  So, if your camera has a GPS (and my Nikon 5300 does), you can deduce the time-zone:<pre>609 rmills@rmillsmbp:~/gnu/exiv2/trunk $ exiv2 -pa -g TimeStamp -g DateStamp -g Original http://clanmills.com/Stonehenge.jpg
Exif.Photo.DateTimeOriginal                  Ascii      20  2015:07:16 15:38:54
Exif.Photo.SubSecTimeOriginal                Ascii       3  00
Exif.GPSInfo.GPSTimeStamp                    Rational    3  14:38:55.9
Exif.GPSInfo.GPSDateStamp                    Ascii      11  2015:07:16
610 rmills@rmillsmbp:~/gnu/exiv2/trunk $ </pre>None the less, you can see the GPS people and the DateTime people have a different idea about how to represent time.  Confusing?  It's software.  It's always confusing.</p>


	<p>// More discussion translated values:<br />And of course you can see the difference between the 'value' of GPSLatititude and 'translated'.  Look in src/tags.cpp<pre>        TagInfo(0x0002, "GPSLatitude", N_("GPS Latitude"),
                N_("Indicates the latitude. The latitude is expressed as three " 
                "RATIONAL values giving the degrees, minutes, and seconds, " 
                "respectively. When degrees, minutes and seconds are expressed, " 
                "the format is dd/1,mm/1,ss/1. When degrees and minutes are used " 
                "and, for example, fractions of minutes are given up to two " 
                "decimal places, the format is dd/1,mmmm/100,0/1."),
                gpsId, gpsTags, unsignedRational, 3, printDegrees),</pre>And the magic is to translate this is:<pre>    std::ostream&#38; printDegrees(std::ostream&#38; os, const Value&#38; value, const ExifData*)
    {
        std::ios::fmtflags f( os.flags() );
        if (value.count() == 3) {
            std::ostringstream oss;
            oss.copyfmt(os);
            static const char* unit[] = { "deg", "'", "\"" };
            static const int prec[] = { 7, 5, 3 };
            int n;
            for (n = 2; n &gt; 0; --n) {
                if (value.toRational(n).first != 0) break;
            }
            for (int i = 0; i &lt; n + 1; ++i) {
                const uint32_t z = (uint32_t) value.toRational(i).first;
                const uint32_t d = (uint32_t) value.toRational(i).second;
                if (d == 0)
                {
                    os &lt;&lt; "(" &lt;&lt; value &lt;&lt; ")";
                    os.flags(f);
                    return os;
                }
                // Hack: Need Value::toDouble
                double b = static_cast&lt;double&gt;(z)/d;
                const int p = z % d == 0 ? 0 : prec[i];
                os &lt;&lt; std::fixed &lt;&lt; std::setprecision(p) &lt;&lt; b
                   &lt;&lt; unit[i] &lt;&lt; " ";
            }
            os.copyfmt(oss);
        }
        else {
            os &lt;&lt; value;
        }
        os.flags(f);
        return os;
    } // printDegrees</pre></p></div>
    </div>
  </div>
  
  <div id="change-5531" class="journal has-notes">
    <div id="note-33">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-33" class="journal-link">#33</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4745">Raphael Attie</a> <a title="04 Sep 2016 13:36" href="/projects/exiv2/activity?from=2016-09-04">about 5 years</a> ago
      <span id="journal-5531-private_notes" class=""></span>
    </h4>

    <div id="journal-5531-notes" class="wiki"><p>I've studied in more depth the Exif PDF. Regarding my question above, I'd like to ask again clarification on the wording regarding "component". Indeed, it is used in Exifdatum documentation in:<br /><pre>
long typeSize () const
Return the size in bytes of one component of this type. 

long count () const
Return the number of components in the value.
</pre></p>


	<p>But in the Exif specifications, we speak of "pixel components" or "number of components per pixel". See p.24 ( = p.18 in the PDF footer).</p>


	<p>Does that word describe the same thing in both cases?</p>


	<p>Thanks</p></div>
    </div>
  </div>
  
  <div id="change-5532" class="journal has-notes">
    <div id="note-34">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-34" class="journal-link">#34</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="04 Sep 2016 16:40" href="/projects/exiv2/activity?from=2016-09-04">about 5 years</a> ago
      <span id="journal-5532-private_notes" class=""></span>
    </h4>

    <div id="journal-5532-notes" class="wiki"><p>The documentation is correct. A metadatum is arranged as follows:<br /><pre>
+--------+-------+-------+-----+-----+...
|   Tag  |  Type | Count |  v1 |  v2 |...
+--------+-------+-------+-----+-----+...</pre>v1, v2 can be 1,2,4 or 8 bytes.  1 byte for ASCII, UNDEFINED, BYTE, 2 bytes for SHORT, 4 bytes for LONG, SLONG and 8 bytes for RATIONAL, SRATIONAL.</p>


	<p>///////////</p>


	<p>On page 24/-18- the spec is discussing SamplesPerPixel  (Tag == 0x0115) and says the default is:<pre>
+--------+-------+-------+-----+-----+-----+
| 0x0115 |   3   |   3   |  8  |  8  |  8  |
+--------+-------+-------+-----+-----+-----+</pre>Type SHORT=3.  Count = 3.  v1=8, v2=8,v3=8</p>


	<p>The word <em>component</em> is regrettably overloaded.  In the metadatum structure <em>component</em>  refers to individual parts of the value such as v1 or v2.</p>


	<p>The expression <em>The number of components per pixel.</em> is referring the number of bits per pixel in the image.  The default is 3 colours of 8 bits / pixel.</p>


	<p>Exiv2 reports data found in an image. So when a default is implied, but not actually present in the file, it is not reported.  You won't find <em>SamplesPerPixel</em> very often because the default has been chosen for RGB images with 24 bits/pixel used in most commercial cameras.</p></div>
    </div>
  </div>
  
  <div id="change-5542" class="journal has-notes has-details">
    <div id="note-35">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-35" class="journal-link">#35</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4745">Raphael Attie</a> <a title="06 Sep 2016 15:55" href="/projects/exiv2/activity?from=2016-09-06">about 5 years</a> ago
      <span id="journal-5542-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>File</strong> <a href="/attachments/1053">Exiv2_Explained_V1.pdf</a> <a class="icon-only icon-download" title="Download" href="/attachments/download/1053/Exiv2_Explained_V1.pdf">Exiv2_Explained_V1.pdf</a> added</li>
    </ul>
    <div id="journal-5542-notes" class="wiki"><p>Don't mind this for now. I'm uploading a document in-progress for understanding the subset of the framework starting from file input and that will go down to the reading and output of the Camera Temperature in the case of Canon CR2 files. I might refer to this later if I have questions.</p></div>
    </div>
  </div>
  
  <div id="change-5548" class="journal has-notes has-details">
    <div id="note-36">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-36" class="journal-link">#36</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4745">Raphael Attie</a> <a title="08 Sep 2016 15:22" href="/projects/exiv2/activity?from=2016-09-08">about 5 years</a> ago
      <span id="journal-5548-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>File</strong> <a href="/attachments/1057">Exiv2_Explained_V2.pdf</a> <a class="icon-only icon-download" title="Download" href="/attachments/download/1057/Exiv2_Explained_V2.pdf">Exiv2_Explained_V2.pdf</a> added</li>
    </ul>
    <div id="journal-5548-notes" class="wiki"><p>Updating the "study-slides".</p></div>
    </div>
  </div>
  
  <div id="change-5551" class="journal has-notes">
    <div id="note-37">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-37" class="journal-link">#37</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4745">Raphael Attie</a> <a title="09 Sep 2016 15:21" href="/projects/exiv2/activity?from=2016-09-09">about 5 years</a> ago
      <span id="journal-5551-private_notes" class=""></span>
    </h4>

    <div id="journal-5551-notes" class="wiki"><p>Robin Mills wrote:</p>


<blockquote>

	<p>Here's how the value/translated feature is implemented.  Have a look at the class Exiv2::Metadatum <a class="external" href="http://www.exiv2.org/doc/classExiv2_1_1Metadatum.html">http://www.exiv2.org/doc/classExiv2_1_1Metadatum.html</a>  A Metadatum is a container for different types of data as defined in the EXIF specification on page 20.  <a class="external" href="http://www.exiv2.org/Exif2-2.PDF">http://www.exiv2.org/Exif2-2.PDF</a>  It can be an array of bytes, unsigned, signed, rational and other data.  The method "toString()" is called to obtain the "translated" value.  When you add a record for a tag in xxxxxmn.cpp (a TagInfo record), you define a function to be called by toString().  The default <strong><code>printValue</code></strong> is usually sufficient.  In your case you'll require a special function.  Here's an example from canonmn.cpp[...]You'll probably find your function useful for other tags, so give it meaningful name such as <strong><code>printByteMinus128</code></strong>./</p>


</blockquote>

	<p>Exifdatum::toString() does not seem to use the aforementioned <strong>translated</strong> value.</p>


<pre>
TagInfo(0x000c, "CameraTemperature", N_("Sensor temperature"), N_("Temperature of electronics around sensor"), canonSiId, makerTags, unsignedShort, 1, printValueMinus128)
</pre>

<pre>
//! Print the tag value minus 128
    std::ostream&#38; CanonMakerNote::printValueMinus128(std::ostream&#38; os, const Value&#38; value, const ExifData*)
    {
        return os &lt;&lt; value.toLong() - 128;
    }
</pre>

	<p>The Exiv2 command line app  does output the translated value when used in the command line:</p>


<pre>
Exif.CanonSi.CameraTemperature               Short       1  27
</pre>

	<p>But still prints the non-translated value when called from Exifdatum:</p>


<pre>
Exiv2::Exifdatum data = exifData["Exif.CanonSi.CameraTemperature"];
QString dataValue = QString::fromStdString(data.toString());
qDebug() &lt;&lt; "Exif.CanonSi.CameraTemperature = " &lt;&lt; dataValue;
</pre>

<pre>
Exif.CanonSi.CameraTemperature =  "155" 
</pre></div>
    </div>
  </div>
  
  <div id="change-5554" class="journal has-notes">
    <div id="note-38">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-38" class="journal-link">#38</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="09 Sep 2016 16:03" href="/projects/exiv2/activity?from=2016-09-09">about 5 years</a> ago
      <span id="journal-5554-private_notes" class=""></span>
    </h4>

    <div id="journal-5554-notes" class="wiki"><p>Well, I'm obviously wrong.  Step into the toString() code with the debugger and find out what's going on!</p></div>
    </div>
  </div>
  
  <div id="change-5555" class="journal has-notes has-details">
    <div id="note-39">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-39" class="journal-link">#39</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4745">Raphael Attie</a> <a title="09 Sep 2016 19:01" href="/projects/exiv2/activity?from=2016-09-09">about 5 years</a> ago
      <span id="journal-5555-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>File</strong> <a href="/attachments/1059">Exiv2_Explained_V3.pdf</a> <a class="icon-only icon-download" title="Download" href="/attachments/download/1059/Exiv2_Explained_V3.pdf">Exiv2_Explained_V3.pdf</a> added</li>
    </ul>
    <div id="journal-5555-notes" class="wiki"><p>Nailed it. But stepping only confirms hat toString() is indeed not related to any of this. So I pulled out my last study-slide (see update, V3) , slide 3, bottom. <br />I think you meant to use Exifdatum::print(). That's the one that's sniffing into TagInfo to get whatever printing function was defined:<br /><pre>
std::ostream&#38; Exifdatum::write(std::ostream&#38; os, const ExifData* pMetadata) const
    {
        if (value().count() == 0) return os;
        PrintFct fct = printValue;
        const TagInfo* ti = Internal::tagInfo(tag(), static_cast&lt;IfdId&gt;(ifdId()));
        if (ti != 0) fct = ti-&gt;printFct_;
        return fct(os, value(), pMetadata);
    }
</pre></p>


	<p>Using the value() also does not help. So Exifdatum::print is the (only?) way to go: <br /><pre>
    Exiv2::Exifdatum data = exifData["Exif.CanonSi.CameraTemperature"];
    QString dataValue = QString::fromStdString(data.toString());
    QString dataValue2 = QString::fromStdString(data.value().toString());
    QString dataValue3 = QString::fromStdString(data.print());
    qDebug() &lt;&lt; "Exif.CanonSi.CameraTemperature = " &lt;&lt; dataValue;
    qDebug() &lt;&lt; "Exif.CanonSi.CameraTemperature = " &lt;&lt; dataValue2;
    qDebug() &lt;&lt; "Exif.CanonSi.CameraTemperature = " &lt;&lt; dataValue3;
</pre></p>


<pre>
Exif.CanonSi.CameraTemperature =  "155" 
Exif.CanonSi.CameraTemperature =  "155" 
Exif.CanonSi.CameraTemperature =  "27" 
</pre>

	<p>So I think we're finally getting to the bottom of that issue. <br />I'll post the updated .cpp and .hpp soon.</p>


	<p>The rest is about digging into the other Nikon and Sony raw files to check, like I did with Canon files, to get the temperature tag, and figure out the conversion.</p></div>
    </div>
  </div>
  
  <div id="change-5557" class="journal has-notes has-details">
    <div id="note-40">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-40" class="journal-link">#40</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4745">Raphael Attie</a> <a title="09 Sep 2016 21:10" href="/projects/exiv2/activity?from=2016-09-09">about 5 years</a> ago
      <span id="journal-5557-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>File</strong> <a href="/attachments/1061">canonmn_int.hpp</a> <a class="icon-only icon-download" title="Download" href="/attachments/download/1061/canonmn_int.hpp">canonmn_int.hpp</a> added</li>
       <li><strong>File</strong> <a href="/attachments/1062">canonmn.cpp</a> <a class="icon-only icon-download" title="Download" href="/attachments/download/1062/canonmn.cpp">canonmn.cpp</a> added</li>
    </ul>
    <div id="journal-5557-notes" class="wiki"><p>Attaching updated canonmn.cpp and header canonmp_int.hpp supporting Camera Temperature of Canon files.</p></div>
    </div>
  </div>
  
  <div id="change-5558" class="journal has-notes has-details">
    <div id="note-41">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-41" class="journal-link">#41</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="09 Sep 2016 21:26" href="/projects/exiv2/activity?from=2016-09-09">about 5 years</a> ago
      <span id="journal-5558-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Target version</strong> changed from <i>0.28</i> to <i>0.26</i></li>
    </ul>
    <div id="journal-5558-notes" class="wiki"><p>This is really great work, Dr Attie.  Well done.  And yes, you've unpuzzled my confusion about print() and toString().</p>


	<p>Here's the way forward.  Do you have a test file?  Run your test file with/without your change to show the effect.  When you submit the change, can you also update the test harness.  Ben fixed <a class="issue tracker-2 status-5 priority-4 priority-default closed" title="Feature: Panasonic Manometer Tag (Closed)" href="/issues/825">#825</a> earlier this week and I added the update to the test harness.  Take a look at what was done.  This is similar.</p>


	<p>I've discovered a problem in the CRW support down inside the enchanted decoding/encoding garden <a class="issue tracker-2 status-2 priority-4 priority-default" title="Feature: Multi-page tiff image support (Assigned)" href="/issues/1124">#1124</a>.  I've asked Andreas for code-review as I don't know anything about that code.  One day, you'll be our makernote/tiff expert.</p>


	<p>Great Work, Raphael.  So happy that you're contributing to Exiv2.</p></div>
    </div>
  </div>
  
  <div id="change-5562" class="journal has-notes">
    <div id="note-42">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-42" class="journal-link">#42</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="11 Sep 2016 09:16" href="/projects/exiv2/activity?from=2016-09-11">about 5 years</a> ago
      <span id="journal-5562-private_notes" class=""></span>
    </h4>

    <div id="journal-5562-notes" class="wiki"><p>Raphael</p>


	<p>You have the right idea here.  I don't think you've totally solved this.  Here's some output using files in test/data.  Revision 4478<pre>536 rmills@rmillsmm:~/gnu/exiv2/t4478 $ exiv2 -pa --quiet --grep temp/i test/data/*canon*jpg 
test/data/exiv2-canon-eos-20d.jpg  Exif.CanonPr.ColorTemperature                SShort      1  5200
537 rmills@rmillsmm:~/gnu/exiv2/t4478 $</pre>With your patch:<pre>541 rmills@rmillsmm:~/gnu/exiv2/t4478 $ exiv2 -pv --quiet --grep temp/i test/data/*canon*jpg 
test/data/exiv2-canon-eos-20d.jpg  0x000c CanonSi      CameraTemperature           Short       1  0
test/data/exiv2-canon-eos-20d.jpg  0x0009 CanonPr      ColorTemperature            SShort      1  5200
test/data/exiv2-canon-eos-300d.jpg  0x000c CanonSi      CameraTemperature           Short       1  0
test/data/exiv2-canon-eos-d30.jpg  0x000c CanonSi      CameraTemperature           Short       1  0
test/data/exiv2-canon-powershot-a520.jpg  0x000c CanonSi      CameraTemperature           Short       1  0
test/data/exiv2-canon-powershot-s40.jpg  0x000c CanonSi      CameraTemperature           Short       1  0
542 rmills@rmillsmm:~/gnu/exiv2/t4478 $ </pre><pre>542 rmills@rmillsmm:~/gnu/exiv2/t4478 $  exiv2 -pa --quiet --grep temp/i test/data/*canon*jpg 
test/data/exiv2-canon-eos-20d.jpg  Exif.CanonSi.CameraTemperature               Short       1  -128
test/data/exiv2-canon-eos-20d.jpg  Exif.CanonPr.ColorTemperature                SShort      1  5200
test/data/exiv2-canon-eos-300d.jpg  Exif.CanonSi.CameraTemperature               Short       1  -128
test/data/exiv2-canon-eos-d30.jpg  Exif.CanonSi.CameraTemperature               Short       1  -128
test/data/exiv2-canon-powershot-a520.jpg  Exif.CanonSi.CameraTemperature               Short       1  -128
test/data/exiv2-canon-powershot-s40.jpg  Exif.CanonSi.CameraTemperature               Short       1  -128
543 rmills@rmillsmm:~/gnu/exiv2/t4478 $ </pre>As you can see, you are "picking up" Exif.CanonSi.CameraTemperature".  It's reporting -128 when the data in the file is a Short == 0.  I think a value of "-128" is an OK default as, unless the camera is on board a space craft, it's unlikely that would be the correct temperature.  The existing behaviour to ignore the key in that state is preferable.</p>


	<p>I suggest we do a couple of things:<br />1) Do you have a test file with "good" temperature data that we can add to the test suite?<br />2) Discuss this with Andreas.  I'm sure it's possible to prevent the key being added to ExifData during metadata decoding.  By the time printValueMinus128() is called, ExifData is "const" and cannot be modified.  More importantly, it must not be modified by a print function.</p>


	<p>In Phil's documentation he says of that tag: <em><strong>newer EOS models only</strong></em><br /><a class="external" href="http://www.sno.phy.queensu.ca/~phil/exiftool/TagNames/Canon.html">http://www.sno.phy.queensu.ca/~phil/exiftool/TagNames/Canon.html</a></p>


	<p>Somewhere in the pipeline between jpgimage/readMetadata() and your printValueMinus128() the code can decide "Yes: CameraTemperature is valid" and add it to exifData, or "No: CameraTemperature is not valid so ignore it".</p>


	<p>As we have discussed, I don't know anything about the TiffVisitor and MakerNote classes.  Ask Andreas to help you.  And we have to ask Andreas to grant you write access to the SVN repository.  If we don't hear from Andreas, I will submit your patch later this week.</p></div>
    </div>
  </div>
  
  <div id="change-5565" class="journal has-notes">
    <div id="note-43">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-43" class="journal-link">#43</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4745">Raphael Attie</a> <a title="11 Sep 2016 14:03" href="/projects/exiv2/activity?from=2016-09-11">about 5 years</a> ago
      <span id="journal-5565-private_notes" class=""></span>
    </h4>

    <div id="journal-5565-notes" class="wiki"><p>Indeed, my text in the description on the current issue only talks about "Modern DSLRs released the last years". I agree this has to be accounted for somewhere so the user does not think he actually has  temperature data. In the examples you have provided, I know for a fact that these DSLRs do not have a digital thermometer anywhere. Values of -128, to me, are flag values covering for the absence of such data. <br />Forget the color temperature, this has nothing to do with the issue. Hence my description telling this is the temperature of the "sensor electronics".</p>


	<p>So, we could use the flag value of -128, that are simply telling the data values are bogus, and maybe we act upon on this in the print function (that would call the printValueMinus128 among other tests).<br />Finally, I intended to get several raw CR2 images from several "recent" canon DSLRs and check we still have realistic data. Best case scenario is that either we have the flag value of -128, or we have a true temperature measurement. What do you say?</p></div>
    </div>
  </div>
  
  <div id="change-5566" class="journal has-notes">
    <div id="note-44">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-44" class="journal-link">#44</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="11 Sep 2016 14:38" href="/projects/exiv2/activity?from=2016-09-11">about 5 years</a> ago
      <span id="journal-5566-private_notes" class=""></span>
    </h4>

    <div id="journal-5566-notes" class="wiki"><p>I'm confident that we can detect the -128 and remove this "old" metadata from ExifData,  So we only report "bona fide" Exif.CanonSi.CameraTemperature.</p>


	<p>Sridhar is working on something similar <a class="issue tracker-1 status-2 priority-4 priority-default" title="Bug: Exif.CanonCs.FocusContinuous reported as Short (Assigned)" href="/issues/1203">#1203</a>.</p>


	<p>When Andreas comes back to you, please try to engage him about this because I'm very overloaded.</p></div>
    </div>
  </div>
  
  <div id="change-5567" class="journal has-notes">
    <div id="note-45">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-45" class="journal-link">#45</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4745">Raphael Attie</a> <a title="11 Sep 2016 14:41" href="/projects/exiv2/activity?from=2016-09-11">about 5 years</a> ago
      <span id="journal-5567-private_notes" class=""></span>
    </h4>

    <div id="journal-5567-notes" class="wiki"><p>Robin Mills wrote:</p>


<blockquote>

	<p>I'm confident that we can detect the -128 and remove this "old" metadata from ExifData,  So we only report "bona fide" Exif.CanonSi.CameraTemperature.</p>


	<p>Sridhar is working on something similar <a class="issue tracker-1 status-2 priority-4 priority-default" title="Bug: Exif.CanonCs.FocusContinuous reported as Short (Assigned)" href="/issues/1203">#1203</a>.</p>


	<p>When Andreas comes back to you, please try to engage him about this because I'm very overloaded.</p>


</blockquote>

	<p>Agreed. Ive already started setting up a more exhaustive series of DSLR raw files released across the last years.  Shouldn't take me too long to check this out reliably and exhaustively.</p></div>
    </div>
  </div>
  
  <div id="change-5568" class="journal has-notes">
    <div id="note-46">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-46" class="journal-link">#46</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="11 Sep 2016 15:21" href="/projects/exiv2/activity?from=2016-09-11">about 5 years</a> ago
      <span id="journal-5568-private_notes" class=""></span>
    </h4>

    <div id="journal-5568-notes" class="wiki"><p>Now Raphael, we agreed when your brought up this issue that it couldn't be got ready for v0.26.  That was 3 weeks ago and you and Ben and Sridhar are putting very heavy demands on my time.  And I'm trying to get to v0.26.  I've got to ask you to relax about this and let me get to "feature complete v0.26".  This might make it into v0.26, however it may not. There will be no v0.26 if I have no time to work on it.</p></div>
    </div>
  </div>
  
  <div id="change-5570" class="journal has-notes has-details">
    <div id="note-47">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-47" class="journal-link">#47</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="11 Sep 2016 15:55" href="/projects/exiv2/activity?from=2016-09-11">about 5 years</a> ago
      <span id="journal-5570-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Target version</strong> changed from <i>0.26</i> to <i>0.28</i></li>
       <li><strong>% Done</strong> changed from <i>60</i> to <i>30</i></li>
       <li><strong>Estimated time</strong> changed from <i>10.00 h</i> to <i>30.00 h</i></li>
    </ul>
    <div id="journal-5570-notes" class="wiki"><p>I was too optimistic when I set the target to 0.26. I've changed it back to v0.27.</p>


	<p>At the moment, we're only printing the value.  We haven't investigated the business of writing that value.  We could make Exif.CanonSi.CameraTemperature a read only value.  However, in your telescope work, you may have lab notes that enable you set the temperature correctly in an image.  There's more to this issue than we thought and we should defer it to v0.27.</p></div>
    </div>
  </div>
  
  <div id="change-5575" class="journal has-notes">
    <div id="note-48">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-48" class="journal-link">#48</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4728">Sridhar Boovaraghavan</a> <a title="15 Sep 2016 11:47" href="/projects/exiv2/activity?from=2016-09-15">about 5 years</a> ago
      <span id="journal-5575-private_notes" class=""></span>
    </h4>

    <div id="journal-5575-notes" class="wiki"><p>Hi Dr. Attie,</p>


	<p>I have been in hibernation for a while and am jumping in at the very end without possibly understanding your issue completely.</p>


	<p>There seems to be two separate issues:</p>


	<p>1. The signedShort value is interpreted as unsignedShort by exiv2. This is the same as what I reported in <a class="issue tracker-1 status-2 priority-4 priority-default" title="Bug: Exif.CanonCs.FocusContinuous reported as Short (Assigned)" href="/issues/1203">#1203</a>.<br />2. The value -128 is a default that Canon populates and is meant to be ignored. This is the same as what I have tried fixing in <a class="issue tracker-1 status-2 priority-4 priority-default" title="Bug: In specific Canon makernote tags, certain values are meant to be ignored (Assigned)" href="/issues/1206">#1206</a>.</p>


	<p>It would seems that Robin has deferred your patch to 0.27 because of unexplained effects that it has on the test suite - the same that happened with my patch for <a class="issue tracker-1 status-2 priority-4 priority-default" title="Bug: In specific Canon makernote tags, certain values are meant to be ignored (Assigned)" href="/issues/1206">#1206</a>.</p>


	<p>I suggest that you look at the code that I submitted for <a class="issue tracker-1 status-2 priority-4 priority-default" title="Bug: In specific Canon makernote tags, certain values are meant to be ignored (Assigned)" href="/issues/1206">#1206</a> (possibly <a class="changeset" title="This is mainly a fix for #1206, but also interprets missing Canon Exif Tags in exiv2 with the hel..." href="/projects/exiv2/repository/exiv2/revisions/4438">r4438</a>, not positive) and see if that can be adapted to fix the temperature issue. Now, the code that I had written was mostly concentrating on the reading side and it could have/create issues when data is written back. If that is indeed the case, then augmenting the code to write back the default values that we ignored while "reading" should not be that difficult with the framework that has been established to store default values.</p>


	<p>I am not back in exiv2 "development" yet because of other personal issues that have taken my time, but I would like to look at how you tried to solve this problem, even though the fix seems to be specific to this case (again, not having delved into the code). My fix could be more generic.</p>


	<p>Thanks,<br />Sridhar</p></div>
    </div>
  </div>
  
  <div id="change-5577" class="journal has-notes">
    <div id="note-49">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-49" class="journal-link">#49</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="15 Sep 2016 12:36" href="/projects/exiv2/activity?from=2016-09-15">about 5 years</a> ago
      <span id="journal-5577-private_notes" class=""></span>
    </h4>

    <div id="journal-5577-notes" class="wiki"><p>Sridhar</p>


	<p>Thanks for stepping into this.  Raphael is getting married tomorrow!  So, I think he has other things on his mind this week!</p>


	<p>Raphael and I have been discussing a visit to my home in England sometime in October.  When he comes, we'll investigate this issue if he hasn't made progress.  Perhaps the three of us can discuss it on Skype (or one of those messenger things).  I'm planning to be in Chennai late November.</p>


	<p>Good News about v0.26 feature complete.  Very close to done - possibly today.  Over the weekend for sure.</p>


	<p>Robin</p></div>
    </div>
  </div>
  


</div>

<div style="clear: both;"></div>
<div class="contextual">





</div>


<div style="clear: both;"></div>


<p class="other-formats">Also available in:  <span><a class="atom" rel="nofollow" href="/issues/1219.atom">Atom</a></span>
  <span><a class="pdf" rel="nofollow" href="/issues/1219.pdf">PDF</a></span>
</p>





        
        <div style="clear:both;"></div>
    </div>
</div>
</div>

<div id="ajax-indicator" style="display:none;"><span>Loading...</span></div>
<div id="ajax-modal" style="display:none;"></div>

<div id="footer">
  <div class="bgl"><div class="bgr">
    Powered by <a href="https://www.redmine.org/">Redmine</a> &copy; 2006-2018 Jean-Philippe Lang
  </div></div>
</div>
</div>
</div>

</body>
</html>
