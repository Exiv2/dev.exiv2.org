<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<title>Bug #1283: Exiv2 crash when Pentax makernote tags parser being used - Exiv2</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="description" content="Redmine" />
<meta name="keywords" content="issue,bug,tracker" />
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="8c1cNnuJLuuiM+8O0ROTfoQSEjVN75AcuXMLTqcITBQTgPfZCfPi6/dX8AJuxJ9Nu4BGTLwMMaZEU5vG5DGrew==" />
<link rel='shortcut icon' href='/favicon.ico?1550767427' />
<link rel="stylesheet" media="all" href="/stylesheets/jquery/jquery-ui-1.11.0.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/application.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/responsive.css?1550767427" />

<script src="/javascripts/jquery-1.11.1-ui-1.11.0-ujs-4.3.1.js?1550767427"></script>
<script src="/javascripts/application.js?1550767427"></script>
<script src="/javascripts/responsive.js?1550767427"></script>
<script>
//<![CDATA[
$(window).load(function(){ warnLeavingUnsaved('The current page contains unsaved text that will be lost if you leave this page.'); });
//]]>
</script>


<!-- page specific tags -->
    <link rel="alternate" type="application/atom+xml" title="Exiv2 - Bug #1283: Exiv2 crash when Pentax makernote tags parser being used" href="https://dev.exiv2.org/issues/1283.atom" />
<script src="/javascripts/context_menu.js?1550767427"></script><link rel="stylesheet" media="screen" href="/stylesheets/context_menu.css?1550767427" /></head>
<body class="project-exiv2 has-main-menu controller-issues action-show avatars-off">

<div id="wrapper">

<div class="flyout-menu js-flyout-menu">


        <div class="flyout-menu__search">
            <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
            <input type="hidden" name="issues" value="1" />
            <label class="search-magnifier search-magnifier--flyout" for="flyout-search">&#9906;</label>
            <input type="text" name="q" id="flyout-search" class="small js-search-input" placeholder="Search" />
</form>        </div>


        <h3>Project</h3>
        <span class="js-project-menu"></span>

    <h3>General</h3>
    <span class="js-general-menu"></span>

    <span class="js-sidebar flyout-menu__sidebar"></span>

    <h3>Profile</h3>
    <span class="js-profile-menu"></span>

</div>

<div id="wrapper2">
<div id="wrapper3">
<div id="top-menu">
    <div id="account">
        <ul><li><a class="login" href="/login">Sign in</a></li></ul>    </div>
    
    <ul><li><a class="home" href="/">Home</a></li><li><a class="projects" href="/projects">Projects</a></li><li><a class="help" href="https://www.redmine.org/guide">Help</a></li></ul></div>

<div id="header">

    <a href="#" class="mobile-toggle-button js-flyout-menu-toggle-button"></a>

    <div id="quick-search">
        <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
        <input type="hidden" name="scope" />
        <input type="hidden" name="issues" value="1" />
        <label for='q'>
          <a accesskey="4" href="/projects/exiv2/search">Search</a>:
        </label>
        <input type="text" name="q" id="q" size="20" class="small" accesskey="f" />
</form>        <div id="project-jump" class="drdn"><span class="drdn-trigger">Exiv2</span><div class="drdn-content"><div class="quick-search"><input type="text" name="q" id="projects-quick-search" value="" class="autocomplete" data-automcomplete-url="/projects/autocomplete.js?jump=issues" autocomplete="off" /></div><div class="drdn-items projects selection"></div><div class="drdn-items all-projects selection"><a href="/projects?jump=issues">All Projects</a></div></div></div>
    </div>

    <h1><span class="current-project">Exiv2</span></h1>

    <div id="main-menu" class="tabs">
        <ul><li><a class="overview" href="/projects/exiv2">Overview</a></li><li><a class="activity" href="/projects/exiv2/activity">Activity</a></li><li><a class="roadmap" href="/projects/exiv2/roadmap">Roadmap</a></li><li><a class="issues selected" href="/projects/exiv2/issues">Issues</a></li><li><a class="news" href="/projects/exiv2/news">News</a></li><li><a class="wiki" href="/projects/exiv2/wiki">Wiki</a></li><li><a class="boards" href="/projects/exiv2/boards">Forums</a></li><li><a class="repository" href="/projects/exiv2/repository">Repository</a></li></ul>
        <div class="tabs-buttons" style="display:none;">
            <button class="tab-left" onclick="moveTabLeft(this); return false;"></button>
            <button class="tab-right" onclick="moveTabRight(this); return false;"></button>
        </div>
    </div>
</div>

<div id="main" class="">
    <div id="sidebar">
          <h3>Issues</h3>

<ul>
<li><a href="/projects/exiv2/issues?set_filter=1">View all issues</a></li>
<li><a href="/projects/exiv2/issues/report">Summary</a></li>

</ul>









        
    </div>

    <div id="content">
        
        <div class="contextual">





</div>


<h2>Bug #1283</h2>

<div class="issue tracker-1 status-5 priority-4 priority-default closed details">

  <div class="gravatar-with-child">
    
    
  </div>

<div class="subject">
<div><h3>Exiv2 crash when Pentax makernote tags parser being used</h3></div>
</div>
        <p class="author">
        Added by <a class="user active" href="/users/4748">Wil Cowb</a> <a title="10 Mar 2017 06:17" href="/projects/exiv2/activity?from=2017-03-10">over 4 years</a> ago.
        Updated <a title="10 Mar 2017 19:05" href="/projects/exiv2/activity?from=2017-03-10">over 4 years</a> ago.
        </p>

<div class="attributes">
<div class="splitcontent"><div class="splitcontentleft"><div class="status attribute"><div class="label">Status:</div><div class="value">Closed</div></div><div class="priority attribute"><div class="label">Priority:</div><div class="value">Normal</div></div><div class="assigned-to attribute"><div class="label">Assignee:</div><div class="value"><a class="user active" href="/users/119">Robin Mills</a></div></div><div class="category attribute"><div class="label">Category:</div><div class="value">makernote</div></div><div class="fixed-version attribute"><div class="label">Target version:</div><div class="value"><a title="28 Apr 2017" href="/versions/52">0.26</a></div></div></div><div class="splitcontentleft"><div class="start-date attribute"><div class="label">Start date:</div><div class="value">10 Mar 2017</div></div><div class="due-date attribute"><div class="label">Due date:</div><div class="value"></div></div><div class="progress attribute"><div class="label">% Done:</div><div class="value"><table class="progress progress-100"><tr><td style="width: 100%;" class="closed" title="100%"></td></tr></table><p class="percent">100%</p></div></div><div class="estimated-hours attribute"><div class="label">Estimated time:</div><div class="value">1.00 h</div></div></div></div>


</div>

<hr />
<div class="description">
  <div class="contextual">
  
  </div>

  <p><strong>Description</strong></p>
  <div class="wiki">
  <p>It looks like some of the metadata created by Pentax K-S1 might not be supported very well by Exiv2.</p>


	<p>More details can be found here:<br /><a class="external" href="https://bugs.kde.org/show_bug.cgi?id=377432">https://bugs.kde.org/show_bug.cgi?id=377432</a></p>


	<p>exiv2 called via API by digiKam (<a class="external" href="https://cgit.kde.org/digikam.git/tree/libs/dmetadata">https://cgit.kde.org/digikam.git/tree/libs/dmetadata</a>)</p>


	<p>Exiv2 0.26-svn</p>


	<p>Sample image attached.</p>
  </div>
</div>
  <hr />
  <p><strong>Files</strong></p>
  <div class="attachments">
<div class="contextual">
  
</div>
<table>
<tr>
  <td>
    <a class="icon icon-attachment" href="/attachments/1145">20161226_152600_393.JPG</a>    <span class="size">(9.27 MB)</span>
    <a class="icon-only icon-download" title="Download" href="/attachments/download/1145/20161226_152600_393.JPG">20161226_152600_393.JPG</a>  </td>
  <td></td>
  <td>
      <span class="author">Wil Cowb, 10 Mar 2017 06:17</span>
  </td>
  <td>
  </td>
</tr>
</table>
</div>








</div>




<div id="history">
<h3>History</h3>
  <div id="change-5889" class="journal has-notes has-details">
    <div id="note-1">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-1" class="journal-link">#1</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="10 Mar 2017 06:50" href="/projects/exiv2/activity?from=2017-03-10">over 4 years</a> ago
      <span id="journal-5889-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Category</strong> set to <i>makernote</i></li>
       <li><strong>Assignee</strong> set to <i>Robin Mills</i></li>
    </ul>
    <div id="journal-5889-notes" class="wiki"><p>Same comments as <a class="issue tracker-1 status-5 priority-4 priority-default closed" title="Bug: crash in Exiv2, XMP parser class and in Adobe XMP SDK (Closed)" href="/issues/1281">#1281</a></p></div>
    </div>
  </div>
  
  <div id="change-5890" class="journal has-details">
    <div id="note-2">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-2" class="journal-link">#2</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="10 Mar 2017 06:50" href="/projects/exiv2/activity?from=2017-03-10">over 4 years</a> ago
      <span id="journal-5890-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>New</i> to <i>Assigned</i></li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-5894" class="journal has-notes has-details">
    <div id="note-3">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-3" class="journal-link">#3</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="10 Mar 2017 07:54" href="/projects/exiv2/activity?from=2017-03-10">over 4 years</a> ago
      <span id="journal-5894-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>Assigned</i> to <i>Resolved</i></li>
       <li><strong>% Done</strong> changed from <i>0</i> to <i>100</i></li>
       <li><strong>Estimated time</strong> set to <i>1.00 h</i></li>
    </ul>
    <div id="journal-5894-notes" class="wiki"><p>No crash here with Exiv2 v0.26 RC <a class="changeset" title="#1279 Bump to Exiv2 v0.26 (and library version 15)." href="/projects/exiv2/repository/exiv2/revisions/4726">r4726</a>: <pre>671 rmills@rmillsmm:~/gnu/exiv2/trunk $ exiv2 -vVg svn
exiv2 0.26 001900 (64 bit build)
svn=4726
672 rmills@rmillsmm:~/gnu/exiv2/trunk $ ls -alt ~/Downloads/2*
-rw-r--r--+ 1 rmills staff 9720902 Mar 10 07:45 /Users/rmills/Downloads/20161226_152600_393.JPG
673 rmills@rmillsmm:~/gnu/exiv2/trunk $ exiv2 -pa --grep Pentax ~/Downloads/2*
Exif.PentaxDng.Version                       Byte        4  11.3.0.0
Exif.PentaxDng.Mode                          Short       1  Auto
Exif.PentaxDng.ModelID                       Long        1  K-S1
Exif.PentaxDng.Date                          Undefined   4  2016:12:26
Exif.PentaxDng.Time                          Undefined   3  15:26:00
Exif.PentaxDng.Quality                       Short       1  Best
Exif.PentaxDng.Flash                         Short       2  Off, Did not fire
Exif.PentaxDng.Focus                         Short       1  (273)
Exif.PentaxDng.AFPoint                       Short       2  Auto
Exif.PentaxDng.AFPointInFocus                Long        1  (16)
Exif.PentaxDng.ExposureTime                  Long        1  1.25 ms
Exif.PentaxDng.FNumber                       Short       1  F8
Exif.PentaxDng.ISO                           Short       1  500
Exif.PentaxDng.ExposureCompensation          SShort      1  0 EV
Exif.PentaxDng.MeteringMode                  Short       1  Multi Segment
Exif.PentaxDng.AutoBracketing                Short       2  0 EV (No extended bracketing)
Exif.PentaxDng.WhiteBalance                  Short       1  Auto
Exif.PentaxDng.FocalLength                   Long        1  55.0 mm
Exif.PentaxDng.Saturation                    Short       1  Normal
Exif.PentaxDng.Contrast                      Short       1  Normal
Exif.PentaxDng.Sharpness                     Short       1  Med Hard
Exif.PentaxDng.DSPFirmwareVersion            Undefined   4  254 255 255 253
Exif.PentaxDng.EffectiveLV                   Short       1  13696
Exif.PentaxDng.ImageProcessing               Undefined   4  Unprocessed
Exif.PentaxDng.PictureMode                   Byte        3  Unknown (0x000801)
Exif.PentaxDng.DriveMode                     Byte        4  Continuous
Exif.PentaxDng.ColorSpace                    Short       1  sRGB
Exif.PentaxDng.LensType                      Byte        4  smc PENTAX-DA L 18-55mm F3.5-5.6
Exif.PentaxDng.SensitivityAdjust             Short       1  50
Exif.PentaxDng.DigitalFilter                 Short       1  Off
Exif.PentaxDng.Temperature                   SByte       1  4 C
Exif.PentaxDng.AELock                        Short       1  Off
Exif.PentaxDng.NoiseReduction                Short       1  Off
Exif.PentaxDng.FlashExposureCompensation     SByte       2  0 EV
Exif.PentaxDng.ImageTone                     Short       1  Bright
Exif.PentaxDng.ColorTemperature              Short       1  0
Exif.PentaxDng.ShakeReduction                Byte        2  0 7
Exif.PentaxDng.ShutterCount                  Undefined   4  3343
Exif.PentaxDng.DynamicRangeExpansion         Undefined   4  Unknown (0x00020000)
Exif.PentaxDng.HighISONoiseReduction         Byte        2  (255 0)
Exif.PentaxDng.AFAdjustment                  SShort      1  0
Exif.PentaxDng.BlackPoint                    Short       4  64 64 64 64
Exif.PentaxDng.WhitePoint                    Short       4  18848 8192 8192 13600
Exif.PentaxDng.ShotInfo                      Undefined  34  0 8 0 2 2 6 0 0 64 0 32 1 0 49 101 69 64 11 4 16 0 12 128 3 3 0 0 0 0 0 0 0 0 0
Exif.PentaxDng.AEInfo                        Undefined  48  2 77 0 0 0 0 0 0 0 0 0 0 0 0 0 0 145 116 50 64 0 0 64 0 0 0 0 8 108 108 152 168 0 0 10 50 12 0 0 0 0 0 0 0 0 0 0 0
Exif.PentaxDng.LensInfo                      Undefined 128  0 135 240 82 0 222 1 170 3 0 0 0 0 0 0 0 40 214 19 69 116 38 143 33 89 171 96 48 1 81 124 251 255 255 255 222 33 118 40 140 32 154 8 0 0 0 0 0 191 240 222 128 0 156 2 0 0 0 0 0 0 0 0 0 3 207 151 15 32 151 243 243 222 4 4 192 15 249 12 3 164 136 102 66 0 16 0 0 0 0 0 8 234 107 90 161 33 148 39 15 153 24 162 34 224 57 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
Exif.PentaxDng.FlashInfo                     Undefined  36  0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 2 15 63 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1
Exif.PentaxDng.AEMeteringSegments            Undefined  77  148 149 146 148 152 152 151 149 150 148 147 154 154 153 153 154 154 154 154 154 157 159 153 154 152 153 153 154 154 154 155 157 159 153 153 153 154 154 153 155 158 160 162 164 153 153 153 153 154 154 155 155 154 155 155 153 152 153 153 153 154 154 153 154 153 154 153 153 152 153 153 152 153 153 152 152 153
Exif.PentaxDng.FlashADump                    Undefined  77  0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
Exif.PentaxDng.FlashBDump                    Undefined  77  0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
Exif.PentaxDng.CameraInfo                    Long        5  77850 20140927 2 1 7016544
Exif.PentaxDng.BatteryInfo                   Undefined  20  242 80 3 35 2 249 0 0 0 0 0 0 0 0 0 0 0 0 76 0
Exif.PentaxDng.AFInfo                        Undefined 1024  (Binary value suppressed)
Exif.PentaxDng.ColorInfo                     Undefined  18  123 32 120 31 137 31 140 32 180 32 122 32 131 31 141 31 0 0
Exif.PentaxDng.SerialNumber                  Ascii      20  6038491
674 rmills@rmillsmm:~/gnu/exiv2/trunk $ </pre></p></div>
    </div>
  </div>
  
  <div id="change-5900" class="journal has-details">
    <div id="note-4">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-4" class="journal-link">#4</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="10 Mar 2017 19:05" href="/projects/exiv2/activity?from=2017-03-10">over 4 years</a> ago
      <span id="journal-5900-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>Resolved</i> to <i>Closed</i></li>
    </ul>
    
    </div>
  </div>
  


</div>

<div style="clear: both;"></div>
<div class="contextual">





</div>


<div style="clear: both;"></div>


<p class="other-formats">Also available in:  <span><a class="atom" rel="nofollow" href="/issues/1283.atom">Atom</a></span>
  <span><a class="pdf" rel="nofollow" href="/issues/1283.pdf">PDF</a></span>
</p>





        
        <div style="clear:both;"></div>
    </div>
</div>
</div>

<div id="ajax-indicator" style="display:none;"><span>Loading...</span></div>
<div id="ajax-modal" style="display:none;"></div>

<div id="footer">
  <div class="bgl"><div class="bgr">
    Powered by <a href="https://www.redmine.org/">Redmine</a> &copy; 2006-2018 Jean-Philippe Lang
  </div></div>
</div>
</div>
</div>

</body>
</html>
