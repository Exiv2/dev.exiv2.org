<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<title>Patch #1306: the lens TAMRON SP 15-30mm F/2.8 Di VC USD A012 is not properly recognised - Exiv2</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="description" content="Redmine" />
<meta name="keywords" content="issue,bug,tracker" />
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="rrqPHI135Hr/2f08osT5P+ZInt7BdE/56/kNjjxwDzVM9yTz/w0oeqq94jAdE/UM2drKpzCX7kMW2Z0Gf0noWg==" />
<link rel='shortcut icon' href='/favicon.ico?1550767427' />
<link rel="stylesheet" media="all" href="/stylesheets/jquery/jquery-ui-1.11.0.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/application.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/responsive.css?1550767427" />

<script src="/javascripts/jquery-1.11.1-ui-1.11.0-ujs-4.3.1.js?1550767427"></script>
<script src="/javascripts/application.js?1550767427"></script>
<script src="/javascripts/responsive.js?1550767427"></script>
<script>
//<![CDATA[
$(window).load(function(){ warnLeavingUnsaved('The current page contains unsaved text that will be lost if you leave this page.'); });
//]]>
</script>


<!-- page specific tags -->
    <link rel="alternate" type="application/atom+xml" title="Exiv2 - Patch #1306: the lens TAMRON SP 15-30mm F/2.8 Di VC USD A012 is not properly recognised" href="https://dev.exiv2.org/issues/1306.atom" />
<script src="/javascripts/context_menu.js?1550767427"></script><link rel="stylesheet" media="screen" href="/stylesheets/context_menu.css?1550767427" /></head>
<body class="project-exiv2 has-main-menu controller-issues action-show avatars-off">

<div id="wrapper">

<div class="flyout-menu js-flyout-menu">


        <div class="flyout-menu__search">
            <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
            <input type="hidden" name="issues" value="1" />
            <label class="search-magnifier search-magnifier--flyout" for="flyout-search">&#9906;</label>
            <input type="text" name="q" id="flyout-search" class="small js-search-input" placeholder="Search" />
</form>        </div>


        <h3>Project</h3>
        <span class="js-project-menu"></span>

    <h3>General</h3>
    <span class="js-general-menu"></span>

    <span class="js-sidebar flyout-menu__sidebar"></span>

    <h3>Profile</h3>
    <span class="js-profile-menu"></span>

</div>

<div id="wrapper2">
<div id="wrapper3">
<div id="top-menu">
    <div id="account">
        <ul><li><a class="login" href="/login">Sign in</a></li></ul>    </div>
    
    <ul><li><a class="home" href="/">Home</a></li><li><a class="projects" href="/projects">Projects</a></li><li><a class="help" href="https://www.redmine.org/guide">Help</a></li></ul></div>

<div id="header">

    <a href="#" class="mobile-toggle-button js-flyout-menu-toggle-button"></a>

    <div id="quick-search">
        <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
        <input type="hidden" name="scope" />
        <input type="hidden" name="issues" value="1" />
        <label for='q'>
          <a accesskey="4" href="/projects/exiv2/search">Search</a>:
        </label>
        <input type="text" name="q" id="q" size="20" class="small" accesskey="f" />
</form>        <div id="project-jump" class="drdn"><span class="drdn-trigger">Exiv2</span><div class="drdn-content"><div class="quick-search"><input type="text" name="q" id="projects-quick-search" value="" class="autocomplete" data-automcomplete-url="/projects/autocomplete.js?jump=issues" autocomplete="off" /></div><div class="drdn-items projects selection"></div><div class="drdn-items all-projects selection"><a href="/projects?jump=issues">All Projects</a></div></div></div>
    </div>

    <h1><span class="current-project">Exiv2</span></h1>

    <div id="main-menu" class="tabs">
        <ul><li><a class="overview" href="/projects/exiv2">Overview</a></li><li><a class="activity" href="/projects/exiv2/activity">Activity</a></li><li><a class="roadmap" href="/projects/exiv2/roadmap">Roadmap</a></li><li><a class="issues selected" href="/projects/exiv2/issues">Issues</a></li><li><a class="news" href="/projects/exiv2/news">News</a></li><li><a class="wiki" href="/projects/exiv2/wiki">Wiki</a></li><li><a class="boards" href="/projects/exiv2/boards">Forums</a></li><li><a class="repository" href="/projects/exiv2/repository">Repository</a></li></ul>
        <div class="tabs-buttons" style="display:none;">
            <button class="tab-left" onclick="moveTabLeft(this); return false;"></button>
            <button class="tab-right" onclick="moveTabRight(this); return false;"></button>
        </div>
    </div>
</div>

<div id="main" class="">
    <div id="sidebar">
          <h3>Issues</h3>

<ul>
<li><a href="/projects/exiv2/issues?set_filter=1">View all issues</a></li>
<li><a href="/projects/exiv2/issues/report">Summary</a></li>

</ul>









        
    </div>

    <div id="content">
        
        <div class="contextual">





</div>


<h2>Patch #1306</h2>

<div class="issue tracker-4 status-5 priority-4 priority-default closed details">

  <div class="gravatar-with-child">
    
    
  </div>

<div class="subject">
<div><h3>the lens TAMRON SP 15-30mm F/2.8 Di VC USD A012 is not properly recognised</h3></div>
</div>
        <p class="author">
        Added by <a class="user active" href="/users/6170">rene ernenwein</a> <a title="29 Jul 2017 14:10" href="/projects/exiv2/activity?from=2017-07-29">over 4 years</a> ago.
        Updated <a title="08 Nov 2018 09:59" href="/projects/exiv2/activity?from=2018-11-08">about 3 years</a> ago.
        </p>

<div class="attributes">
<div class="splitcontent"><div class="splitcontentleft"><div class="status attribute"><div class="label">Status:</div><div class="value">Closed</div></div><div class="priority attribute"><div class="label">Priority:</div><div class="value">Normal</div></div><div class="assigned-to attribute"><div class="label">Assignee:</div><div class="value"><a class="user active" href="/users/119">Robin Mills</a></div></div><div class="category attribute"><div class="label">Category:</div><div class="value">lens</div></div><div class="fixed-version attribute"><div class="label">Target version:</div><div class="value"><a title="28 Dec 2018" href="/versions/55">0.27</a></div></div></div><div class="splitcontentleft"><div class="start-date attribute"><div class="label">Start date:</div><div class="value">29 Jul 2017</div></div><div class="due-date attribute"><div class="label">Due date:</div><div class="value"></div></div><div class="progress attribute"><div class="label">% Done:</div><div class="value"><table class="progress progress-100"><tr><td style="width: 100%;" class="closed" title="100%"></td></tr></table><p class="percent">100%</p></div></div><div class="estimated-hours attribute"><div class="label">Estimated time:</div><div class="value">2.00 h</div></div></div></div>


</div>

<hr />
<div class="description">
  <div class="contextual">
  
  </div>

  <p><strong>Description</strong></p>
  <div class="wiki">
  <p>hello <br />i own a TAMRON SP 15-30mm F/2.8 Di VC USD A012 mounted on a Canon 6D<br />i know the lens type (136) seen by exiv2 <br />i allready put in ~/.exiv2 with success<br />but how to get it integrated in exiv2 for future version</p>


	<ol>
	<li>exiv2 -pv --grep lens/i 101CANON/IMG_0509.JPG <br />0x0016 CanonCs      LensType                    Short       1  136<br />0x0017 CanonCs      Lens                        Short       3  30 15 1<br />0x0095 Canon        LensModel                   Ascii      74  TAMRON SP 15-30mm F/2.8 Di VC USD A012<br />0xa432 Photo        LensSpecification           Rational    4  15/1 30/1 0/1 0/1<br />0xa434 Photo        LensModel                   Ascii      39  TAMRON SP 15-30mm F/2.8 Di VC USD A012<br />0xa435 Photo        LensSerialNumber            Ascii      11  0000000000</li>
	</ol>


	<ol>
	<li>exiv2 -pa --grep lens/i 101CANON/IMG_0509.JPG <br />Exif.CanonCs.LensType                        Short       1  my own lens<br />Exif.CanonCs.Lens                            Short       3  15.0 - 30.0 mm<br />Exif.Canon.LensModel                         Ascii      74  TAMRON SP 15-30mm F/2.8 Di VC USD A012<br />Exif.Photo.LensSpecification                 Rational    4  15/1 30/1 0/1 0/1<br />Exif.Photo.LensModel                         Ascii      39  TAMRON SP 15-30mm F/2.8 Di VC USD A012<br />Exif.Photo.LensSerialNumber                  Ascii      11  0000000000</li>
	</ol>
  </div>
</div>
  <hr />
  <p><strong>Files</strong></p>
  <div class="attachments">
<div class="contextual">
  
</div>
<table>
<tr>
  <td>
    <a class="icon icon-attachment" href="/attachments/1180">IMG_0509.JPG</a>    <span class="size">(4.04 MB)</span>
    <a class="icon-only icon-download" title="Download" href="/attachments/download/1180/IMG_0509.JPG">IMG_0509.JPG</a>  </td>
  <td></td>
  <td>
      <span class="author">rene ernenwein, 29 Jul 2017 14:10</span>
  </td>
  <td>
  </td>
</tr>
</table>
</div>







<hr />
<div id="relations">
<div class="contextual">
</div>

<p><strong>Related issues</strong></p>

<form data-cm-url="/issues/context_menu" action="/issues/1306" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><input type="hidden" name="authenticity_token" value="Lo5HYCEuEdYRuHJ3SRvhQbuniaMy2dYHBJIov3dfxwTMw+yPU1Td1kTcbXv2zO1yhDXd2sM6d735srg3NGYgaw==" />
  <table class="list issues odd-even"><tr id="relation-267" class="issue hascontextmenu issue tracker-1 status-5 priority-4 priority-default closed"><td class="checkbox"><input type="checkbox" name="ids[]" value="1304" /></td><td class="subject" style="width: 50%">Related to Exiv2 - <a class="issue tracker-1 status-5 priority-4 priority-default closed" href="/issues/1304">Bug #1304</a>: Lens missing Tamron SP 90mm f/2.8 Di Macro 1:1 VC USD F017</td><td class="status">Closed</td><td class="start_date">26 Jul 2017</td><td class="due_date"></td><td class="done_ratio"><table class="progress progress-100"><tr><td style="width: 100%;" class="closed" title="100%"></td></tr></table><p class="percent"></p></td><td class="buttons"><a title="Actions" class="icon-only icon-actions js-contextmenu" href="#">Actions</a></td></tr></table>
</form>
<form class="new_relation" id="new-relation-form" style="display: none;" action="/issues/1306/relations" accept-charset="UTF-8" data-remote="true" method="post"><input name="utf8" type="hidden" value="&#x2713;" />


<p><select onchange="setPredecessorFieldsVisibility();" name="relation[relation_type]" id="relation_relation_type"><option selected="selected" value="relates">Related to</option>
<option value="duplicates">Is duplicate of</option>
<option value="duplicated">Has duplicate</option>
<option value="blocks">Blocks</option>
<option value="blocked">Blocked by</option>
<option value="precedes">Precedes</option>
<option value="follows">Follows</option>
<option value="copied_to">Copied to</option>
<option value="copied_from">Copied from</option></select>
Issue #<input size="10" type="text" name="relation[issue_to_id]" id="relation_issue_to_id" />
<span id="predecessor_fields" style="display:none;">
Delay: <input size="3" type="text" name="relation[delay]" id="relation_delay" /> days
</span>
<input type="submit" name="commit" value="Add" data-disable-with="Add" />
<a href="#" onclick="$(&quot;#new-relation-form&quot;).hide();; return false;">Cancel</a>
</p>

<script>
//<![CDATA[
observeAutocompleteField('relation_issue_to_id', '/issues/auto_complete?issue_id=1306&project_id=exiv2&scope=all')
//]]>
</script>

<script>
//<![CDATA[
setPredecessorFieldsVisibility();
//]]>
</script>

</form>
</div>

</div>




<div id="history">
<h3>History</h3>
  <div id="change-6057" class="journal has-notes has-details">
    <div id="note-1">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-1" class="journal-link">#1</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="29 Jul 2017 17:04" href="/projects/exiv2/activity?from=2017-07-29">over 4 years</a> ago
      <span id="journal-6057-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Category</strong> set to <i>lens</i></li>
       <li><strong>Status</strong> changed from <i>New</i> to <i>Closed</i></li>
       <li><strong>Assignee</strong> set to <i>Robin Mills</i></li>
       <li><strong>Priority</strong> changed from <i>High</i> to <i>Normal</i></li>
       <li><strong>Target version</strong> set to <i>0.27</i></li>
       <li><strong>% Done</strong> changed from <i>0</i> to <i>100</i></li>
       <li><strong>Estimated time</strong> set to <i>1.00 h</i></li>
    </ul>
    <div id="journal-6057-notes" class="wiki"><p>Regretfully, I think it's not possible to get this handled correctly in future versions of Exiv2.  The challenge is presented by the metadata stored by Canon:<pre>580 rmills@rmillsmbp:~/Downloads $ exiv2 -pa --grep lens/i IMG_0509.JPG 
Exif.CanonCs.LensType                        Short       1  Canon EF 300mm f/2.8L
Exif.CanonCs.Lens                            Short       3  15.0 - 30.0 mm
Exif.Canon.LensModel                         Ascii      74  TAMRON SP 15-30mm F/2.8 Di VC USD A012
Exif.Photo.LensSpecification                 Rational    4  15/1 30/1 0/1 0/1
Exif.Photo.LensModel                         Ascii      39  TAMRON SP 15-30mm F/2.8 Di VC USD A012
Exif.Photo.LensSerialNumber                  Ascii      11  0000000000
581 rmills@rmillsmbp:~/Downloads $ exiv2 -pv --grep lens/i IMG_0509.JPG 
0x0016 CanonCs      LensType                    Short       1  136
0x0017 CanonCs      Lens                        Short       3  30 15 1
0x0095 Canon        LensModel                   Ascii      74  TAMRON SP 15-30mm F/2.8 Di VC USD A012
0xa432 Photo        LensSpecification           Rational    4  15/1 30/1 0/1 0/1
0xa434 Photo        LensModel                   Ascii      39  TAMRON SP 15-30mm F/2.8 Di VC USD A012
0xa435 Photo        LensSerialNumber            Ascii      11  0000000000
582 rmills@rmillsmbp:~/Downloads $ </pre>I've received hundreds of requests for different lens which can all correspond to the same lens ID (in this case 136).  When you update ~/.exiv2, all applications using Exiv2 know about your lens.  It's unlikely (although possible) for you to have two different lens with ID==136.</p>


	<p>We have code in Exiv2 which will further process a given LensID.  That code examines other metadata (such the Canon.Lens.Model string, or Exif.Canon.FocalLength) to "guess" your lens.  The "guessing" code is a maintenance nightmare and that's why I added ~/.exiv2.</p>


	<p>You are of course welcome to read the "guessing" code in src/canomn.cpp and write a patch.  However, I'd like you to live with ~/.exiv2 and let's see if this matter deserves further attention.</p></div>
    </div>
  </div>
  
  <div id="change-6059" class="journal has-notes">
    <div id="note-2">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-2" class="journal-link">#2</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/6170">rene ernenwein</a> <a title="30 Jul 2017 09:45" href="/projects/exiv2/activity?from=2017-07-30">over 4 years</a> ago
      <span id="journal-6059-private_notes" class=""></span>
    </h4>

    <div id="journal-6059-notes" class="wiki"><p>what i don't understand is if the tag LensModel contain the "good information" <br />it could be used directly without relaying on lenstype which is buggy in many cases</p></div>
    </div>
  </div>
  
  <div id="change-6060" class="journal has-notes">
    <div id="note-3">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-3" class="journal-link">#3</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="30 Jul 2017 10:01" href="/projects/exiv2/activity?from=2017-07-30">over 4 years</a> ago
      <span id="journal-6060-private_notes" class=""></span>
    </h4>

    <div id="journal-6060-notes" class="wiki"><p>The aim of exiv2 is to correctly report (and modify) the metadata in an image and that's exactly what we do.</p>


	<p>The metadata isn't a single data stream, the manufacturer writes makernotes which may duplicate and contract other tags.  In this case Canon have chosen to write 6 tags about your lens and we correctly report them all.  Very confusingly, Canon have stored both a 39 byte string and a 74 byte string with LensModel.  Is one of those strings nul or space padded?  I don't know. I've given you a method to allow you to convert "136" into a description of your lens.</p>


	<p>I suggest you discuss this with Canon and let me know their response.  However, as things stand, I believe Exiv2 is behaving correctly.</p></div>
    </div>
  </div>
  
  <div id="change-6061" class="journal has-notes">
    <div id="note-4">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-4" class="journal-link">#4</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/6170">rene ernenwein</a> <a title="30 Jul 2017 10:15" href="/projects/exiv2/activity?from=2017-07-30">over 4 years</a> ago
      <span id="journal-6061-private_notes" class=""></span>
    </h4>

    <div id="journal-6061-notes" class="wiki"><p>i took a look at the source code you mention<br />i do know much better c as c++</p>


	<p>i see that in structure canonCsLensType several lens definitions are listed for the same lenstype id</p>


	<p>i don't find any code which will choose one of the definitions from the list of the definitions</p>


	<p>is the list of the definition purely informational for the code reader ?</p></div>
    </div>
  </div>
  
  <div id="change-6062" class="journal has-notes">
    <div id="note-5">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-5" class="journal-link">#5</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="30 Jul 2017 10:38" href="/projects/exiv2/activity?from=2017-07-30">over 4 years</a> ago
      <span id="journal-6062-private_notes" class=""></span>
    </h4>

    <div id="journal-6062-notes" class="wiki"><p>You'll have to read further into the code (I didn't write it).  There's a function that gets called for each tag.  For LensType, the function is <em><strong>printCsLensType</strong></em>  You'll see the comment <code>#1034</code> which my change to look in the config file.</p>


	<p>When <em><strong>printCsLensType</strong></em>, you can read all the Exif metadata (in the <code>const ExifData* metadata</code>).  So, you could do something like:</p>


<pre>if (Internal::readExiv2Config(section,value.toString(),undefined) == undefined
  &#38;&#38; metadata["Exif.CanonCs.LensType"].toString() == "136" 
  &#38;&#38; metadata["Exif.Photo.LensModel"].toString().size()
) {
  return os &lt;&lt; metadata["Exif.Photo.LensModel"].toString();
}</pre>

	<p><em><strong>Caution</strong></em> I've simply typed in this code to explain the concept.  The code has to be debugged and tested and I don't have time at the moment to do this for you.</p>


	<p>The code is saying "If this lens isn't mentioned in the config file and Exif.CanonCs.LensType == 136 and Exif.Photo.LensModel isn't an empty string, report the value of Exif.Photo.LensModel.</p></div>
    </div>
  </div>
  
  <div id="change-6063" class="journal has-notes">
    <div id="note-6">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-6" class="journal-link">#6</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/6170">rene ernenwein</a> <a title="30 Jul 2017 12:17" href="/projects/exiv2/activity?from=2017-07-30">over 4 years</a> ago
      <span id="journal-6063-private_notes" class=""></span>
    </h4>

    <div id="journal-6063-notes" class="wiki"><p>ok thank you for your code, i will try out your code sample</p>


	<p>and  also add number 747 because i already have some photos taken with "Canon EF 100-400mm f/4.5-5.6L IS II USM" and others with "Tamron SP 150-600mm F5-6.3 Di VC USD G2" !</p>


	<p>regarding my question, <br />is there somewhere in the code a logic which takes decision if several definitions exist in structure canonCsLensType ?<br />or are the multiple definitions in canonCsLensType purely informational for the source code reader ?</p></div>
    </div>
  </div>
  
  <div id="change-6064" class="journal has-notes">
    <div id="note-7">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-7" class="journal-link">#7</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="30 Jul 2017 19:40" href="/projects/exiv2/activity?from=2017-07-30">over 4 years</a> ago
      <span id="journal-6064-private_notes" class=""></span>
    </h4>

    <div id="journal-6064-notes" class="wiki"><p>I don't know the answer to your question about <em>several definitions exist in structure canonCsLensType</em> as I didn't write the code.  It's a pity that lens recognition was put into Exiv2 as it involves guess work.  Niels looked after this code and left the project when we released v0.25.  I added the ~/.exiv2 feature to reduce the maintenance headache.  Your questions are bringing back my headache.  You will have to read the code.   I am unpaid volunteer.  Words such as "please" or "thank you" are appreciated.</p>


	<p>If you want me to support <em>number 747</em>, could you provide a sample file so that I can test my fix.  In addition to changing the code, I add test files to our test suite to ensure the fix does not regress.  I only extract the metadata into a .exv file which does not include your image.</p></div>
    </div>
  </div>
  
  <div id="change-6065" class="journal has-details">
    <div id="note-8">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-8" class="journal-link">#8</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="30 Jul 2017 19:40" href="/projects/exiv2/activity?from=2017-07-30">over 4 years</a> ago
      <span id="journal-6065-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>% Done</strong> changed from <i>100</i> to <i>50</i></li>
       <li><strong>Estimated time</strong> changed from <i>1.00 h</i> to <i>4.00 h</i></li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-6066" class="journal has-details">
    <div id="note-9">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-9" class="journal-link">#9</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="31 Jul 2017 09:00" href="/projects/exiv2/activity?from=2017-07-31">over 4 years</a> ago
      <span id="journal-6066-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>Closed</i> to <i>Assigned</i></li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-6068" class="journal has-notes">
    <div id="note-10">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-10" class="journal-link">#10</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/6163">Matze G</a> <a title="31 Jul 2017 19:10" href="/projects/exiv2/activity?from=2017-07-31">over 4 years</a> ago
      <span id="journal-6068-private_notes" class=""></span>
    </h4>

    <div id="journal-6068-notes" class="wiki"><p>Hey, I think my pullrequest should fix your problem rene.</p>


	<p><a class="external" href="https://github.com/Exiv2/exiv2/pull/20">https://github.com/Exiv2/exiv2/pull/20</a></p></div>
    </div>
  </div>
  
  <div id="change-6069" class="journal has-notes">
    <div id="note-11">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-11" class="journal-link">#11</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/6170">rene ernenwein</a> <a title="31 Jul 2017 19:51" href="/projects/exiv2/activity?from=2017-07-31">over 4 years</a> ago
      <span id="journal-6069-private_notes" class=""></span>
    </h4>

    <div id="journal-6069-notes" class="wiki"><p>Hello Mike<br />I am sorry that so are offended but this was not intention. I thank you for the work you are doing for exiv2.</p>


	<p>My question was informational because i didn't understood how adding simply lines in the structure canonCsLensType could make it work.</p>


	<p>Yet i have seen patch  from mfg92 and i saw that also an additional line is needed in structure lensIdFct which makes the whole more comprehensive.</p>


	<p>To my question original question : <br />why doing complicated things with lenstype and not returning lensmodel in all cases ?<br />what am i missing ?</p></div>
    </div>
  </div>
  
  <div id="change-6070" class="journal has-notes">
    <div id="note-12">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-12" class="journal-link">#12</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/6170">rene ernenwein</a> <a title="31 Jul 2017 19:55" href="/projects/exiv2/activity?from=2017-07-31">over 4 years</a> ago
      <span id="journal-6070-private_notes" class=""></span>
    </h4>

    <div id="journal-6070-notes" class="wiki"><p>and also thanks to Matze for its code to make my lens recognized by exiv2.</p>


	<p>I think in darktable the patch will be usable in the near timeframe if the patch is accepted.</p>


	<p>But for my NAS it will take some time before a fresh exiv2 version is integrated into it...</p></div>
    </div>
  </div>
  
  <div id="change-6072" class="journal has-notes">
    <div id="note-13">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-13" class="journal-link">#13</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="31 Jul 2017 21:08" href="/projects/exiv2/activity?from=2017-07-31">over 4 years</a> ago
      <span id="journal-6072-private_notes" class=""></span>
    </h4>

    <div id="journal-6072-notes" class="wiki"><p>Thanks very much indeed to both of you for discussing and working on this.  It's my intention to review and accept this patch.  I'm on vacation at the moment and arrive home on Wednesday.  I'll review and submit this by the weekend.  When I submit any patch, I like to update the test suite to be sure I get an alert if the patch regresses.  I intend to copy the metadata from images attached to <a class="issue tracker-1 status-5 priority-4 priority-default closed" title="Bug: Lens missing Tamron SP 90mm f/2.8 Di Macro 1:1 VC USD F017 (Closed)" href="/issues/1304">#1304</a> and <a class="issue tracker-4 status-5 priority-4 priority-default closed" title="Patch: the lens TAMRON SP 15-30mm F/2.8 Di VC USD A012 is not properly recognised (Closed)" href="/issues/1306">#1306</a> and put them in the test suite.</p>


	<p>At the moment, Ben and I are working on a major change on 'master' and regrettably the build has been broken while we have both been on vacation.  Getting the build fixed is my first priority when I get home.</p>


<blockquote>

	<p>To my question original question : <br />why doing complicated things with lenstype and not returning lensmodel in all cases ?<br />what am i missing ?</p>


</blockquote>

	<p>I didn't write Exiv2, so I can only discuss the code as I understand from reading and using it.  In general, Exiv2 reports the data in the file with the option -pv (print values).  The option -pa (== -pt "translated values") does conversion to "human" values.  Figuring out the lens type depends on the Manufacturer's MakeNotes (which are different for every manufacturer).  Phil Harvey (of ExifTool fame) described it as a "heuristic".  I've seen images for which both Exiv2 and ExifTool get the lens wrong.</p>


	<p>Exiv2 is open-source.  Everybody is welcome to contribute.  You are welcome to find a better way.  I have worked on Exiv2 for 10 years and I have never rejected any contributor's patch.</p>


	<p>It is my intention to make a "dot" release in September.  Exiv2 v0.26.1 will include your patch for both <a class="issue tracker-1 status-5 priority-4 priority-default closed" title="Bug: Lens missing Tamron SP 90mm f/2.8 Di Macro 1:1 VC USD F017 (Closed)" href="/issues/1304">#1304</a> and <a class="issue tracker-4 status-5 priority-4 priority-default closed" title="Patch: the lens TAMRON SP 15-30mm F/2.8 Di VC USD A012 is not properly recognised (Closed)" href="/issues/1306">#1306</a>.  Please provide a test image for "747" and that can also be serviced.</p></div>
    </div>
  </div>
  
  <div id="change-6318" class="journal has-notes has-details">
    <div id="note-14">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-14" class="journal-link">#14</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="08 Nov 2018 09:59" href="/projects/exiv2/activity?from=2018-11-08">about 3 years</a> ago
      <span id="journal-6318-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>Assigned</i> to <i>Closed</i></li>
       <li><strong>% Done</strong> changed from <i>50</i> to <i>100</i></li>
       <li><strong>Estimated time</strong> changed from <i>4.00 h</i> to <i>2.00 h</i></li>
    </ul>
    <div id="journal-6318-notes" class="wiki"><p>Discussion of this issue will continue on <a class="external" href="https://github.com/Exiv2/exiv2/issues/532">https://github.com/Exiv2/exiv2/issues/532</a></p>


	<p>I am closing this issue on Redmine in preparation for Exiv2 v0.27 (expected 2018-12-31) when Redmine will become read-only.</p></div>
    </div>
  </div>
  


</div>

<div style="clear: both;"></div>
<div class="contextual">





</div>


<div style="clear: both;"></div>


<p class="other-formats">Also available in:  <span><a class="atom" rel="nofollow" href="/issues/1306.atom">Atom</a></span>
  <span><a class="pdf" rel="nofollow" href="/issues/1306.pdf">PDF</a></span>
</p>





        
        <div style="clear:both;"></div>
    </div>
</div>
</div>

<div id="ajax-indicator" style="display:none;"><span>Loading...</span></div>
<div id="ajax-modal" style="display:none;"></div>

<div id="footer">
  <div class="bgl"><div class="bgr">
    Powered by <a href="https://www.redmine.org/">Redmine</a> &copy; 2006-2018 Jean-Philippe Lang
  </div></div>
</div>
</div>
</div>

</body>
</html>
