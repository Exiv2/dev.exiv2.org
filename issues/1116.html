<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<title>Bug #1116: Issues with namespace &#39;video&#39; - Exiv2</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="description" content="Redmine" />
<meta name="keywords" content="issue,bug,tracker" />
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="ewSfCGcOwvbfz9wm3qg8DC9DAWt/X7/GZ874BXB0LYyZSTTnFXQO9oqrwyphfzA/ENFVEo68Hnya7miNM03K4w==" />
<link rel='shortcut icon' href='/favicon.ico?1550767427' />
<link rel="stylesheet" media="all" href="/stylesheets/jquery/jquery-ui-1.11.0.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/application.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/responsive.css?1550767427" />

<script src="/javascripts/jquery-1.11.1-ui-1.11.0-ujs-4.3.1.js?1550767427"></script>
<script src="/javascripts/application.js?1550767427"></script>
<script src="/javascripts/responsive.js?1550767427"></script>
<script>
//<![CDATA[
$(window).load(function(){ warnLeavingUnsaved('The current page contains unsaved text that will be lost if you leave this page.'); });
//]]>
</script>


<!-- page specific tags -->
    <link rel="alternate" type="application/atom+xml" title="Exiv2 - Bug #1116: Issues with namespace &#39;video&#39;" href="https://dev.exiv2.org/issues/1116.atom" />
<script src="/javascripts/context_menu.js?1550767427"></script><link rel="stylesheet" media="screen" href="/stylesheets/context_menu.css?1550767427" /></head>
<body class="project-exiv2 has-main-menu controller-issues action-show avatars-off">

<div id="wrapper">

<div class="flyout-menu js-flyout-menu">


        <div class="flyout-menu__search">
            <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
            <input type="hidden" name="issues" value="1" />
            <label class="search-magnifier search-magnifier--flyout" for="flyout-search">&#9906;</label>
            <input type="text" name="q" id="flyout-search" class="small js-search-input" placeholder="Search" />
</form>        </div>


        <h3>Project</h3>
        <span class="js-project-menu"></span>

    <h3>General</h3>
    <span class="js-general-menu"></span>

    <span class="js-sidebar flyout-menu__sidebar"></span>

    <h3>Profile</h3>
    <span class="js-profile-menu"></span>

</div>

<div id="wrapper2">
<div id="wrapper3">
<div id="top-menu">
    <div id="account">
        <ul><li><a class="login" href="/login">Sign in</a></li></ul>    </div>
    
    <ul><li><a class="home" href="/">Home</a></li><li><a class="projects" href="/projects">Projects</a></li><li><a class="help" href="https://www.redmine.org/guide">Help</a></li></ul></div>

<div id="header">

    <a href="#" class="mobile-toggle-button js-flyout-menu-toggle-button"></a>

    <div id="quick-search">
        <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
        <input type="hidden" name="scope" />
        <input type="hidden" name="issues" value="1" />
        <label for='q'>
          <a accesskey="4" href="/projects/exiv2/search">Search</a>:
        </label>
        <input type="text" name="q" id="q" size="20" class="small" accesskey="f" />
</form>        <div id="project-jump" class="drdn"><span class="drdn-trigger">Exiv2</span><div class="drdn-content"><div class="quick-search"><input type="text" name="q" id="projects-quick-search" value="" class="autocomplete" data-automcomplete-url="/projects/autocomplete.js?jump=issues" autocomplete="off" /></div><div class="drdn-items projects selection"></div><div class="drdn-items all-projects selection"><a href="/projects?jump=issues">All Projects</a></div></div></div>
    </div>

    <h1><span class="current-project">Exiv2</span></h1>

    <div id="main-menu" class="tabs">
        <ul><li><a class="overview" href="/projects/exiv2">Overview</a></li><li><a class="activity" href="/projects/exiv2/activity">Activity</a></li><li><a class="roadmap" href="/projects/exiv2/roadmap">Roadmap</a></li><li><a class="issues selected" href="/projects/exiv2/issues">Issues</a></li><li><a class="news" href="/projects/exiv2/news">News</a></li><li><a class="wiki" href="/projects/exiv2/wiki">Wiki</a></li><li><a class="boards" href="/projects/exiv2/boards">Forums</a></li><li><a class="repository" href="/projects/exiv2/repository">Repository</a></li></ul>
        <div class="tabs-buttons" style="display:none;">
            <button class="tab-left" onclick="moveTabLeft(this); return false;"></button>
            <button class="tab-right" onclick="moveTabRight(this); return false;"></button>
        </div>
    </div>
</div>

<div id="main" class="">
    <div id="sidebar">
          <h3>Issues</h3>

<ul>
<li><a href="/projects/exiv2/issues?set_filter=1">View all issues</a></li>
<li><a href="/projects/exiv2/issues/report">Summary</a></li>

</ul>









        
    </div>

    <div id="content">
        
        <div class="contextual">





</div>


<h2>Bug #1116</h2>

<div class="issue tracker-1 status-5 priority-4 priority-default closed details">

  <div class="gravatar-with-child">
    
    
  </div>

<div class="subject">
<div><h3>Issues with namespace &#39;video&#39;</h3></div>
</div>
        <p class="author">
        Added by <a class="user active" href="/users/119">Robin Mills</a> <a title="08 Sep 2015 17:42" href="/projects/exiv2/activity?from=2015-09-08">about 6 years</a> ago.
        Updated <a title="24 Apr 2017 08:17" href="/projects/exiv2/activity?from=2017-04-24">over 4 years</a> ago.
        </p>

<div class="attributes">
<div class="splitcontent"><div class="splitcontentleft"><div class="status attribute"><div class="label">Status:</div><div class="value">Closed</div></div><div class="priority attribute"><div class="label">Priority:</div><div class="value">Normal</div></div><div class="assigned-to attribute"><div class="label">Assignee:</div><div class="value"><a class="user active" href="/users/53">Andreas Huggel</a></div></div><div class="category attribute"><div class="label">Category:</div><div class="value">xmp</div></div><div class="fixed-version attribute"><div class="label">Target version:</div><div class="value"><a title="28 Apr 2017" href="/versions/52">0.26</a></div></div></div><div class="splitcontentleft"><div class="start-date attribute"><div class="label">Start date:</div><div class="value">08 Sep 2015</div></div><div class="due-date attribute"><div class="label">Due date:</div><div class="value"></div></div><div class="progress attribute"><div class="label">% Done:</div><div class="value"><table class="progress progress-100"><tr><td style="width: 100%;" class="closed" title="100%"></td></tr></table><p class="percent">100%</p></div></div><div class="estimated-hours attribute"><div class="label">Estimated time:</div><div class="value">4.00 h</div></div></div></div>


</div>

<hr />
<div class="description">
  <div class="contextual">
  
  </div>

  <p><strong>Description</strong></p>
  <div class="wiki">
  <p>This issue relates to the namespace 'video' and probably also applies to 'audio'</p>


	<p>It is listed as available: <pre>$ exiv2 -vV -g video
exiv2 0.25 001900 (64 bit build)
enable_video=0
xmlns=video:http://www.video
$ </pre>1) Cannot use it "out of the box"<pre>$ curl --silent -O http://dev.exiv2.org/attachments/download/805/DSC_7154.jpg
$ exiv2 -M"Xmp.video.title movie" DSC_7154.jpg 
-M option 1: Invalid command `Xmp.video.title'
exiv2: Error parsing -M option arguments
Usage: exiv2 [ options ] [ action ] file ...

Manipulate the Exif metadata of images.
$ </pre>It can be used if registered:<pre>$ exiv2 -M"reg video http://www.video" -M"set Xmp.video.title movie" DSC_7154.jpg 
$ exiv2 -px DSC_7154.jpg 
Xmp.xmp.Rating                               XmpText     1  0
Xmp.xmp.ModifyDate                           XmpText    25  2015-07-16T20:25:28+01:00
Xmp.video.title                              XmpText     5  movie
Xmp.dc.description                           LangAlt     1  lang="x-default" Classic View
$</pre>2 Throws an exception in exiv2json:<pre>$ bin/exiv2json -x DSC_7154.jpg 
Caught Exiv2 exception 'XMP Toolkit error 9: Fatal namespace map problem'
$ </pre></p>
  </div>
</div>






<hr />
<div id="relations">
<div class="contextual">
</div>

<p><strong>Related issues</strong></p>

<form data-cm-url="/issues/context_menu" action="/issues/1116" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><input type="hidden" name="authenticity_token" value="kJhe/2U9ZNY+wiGJ6goCWofzDu41uNTvlql+moHX6zZy1fUQF0eo1mumPoVV3Q5puGFal8RbdVVrie4Swu4MWQ==" />
  <table class="list issues odd-even"><tr id="relation-179" class="issue hascontextmenu issue tracker-2 status-5 priority-4 priority-default closed"><td class="checkbox"><input type="checkbox" name="ids[]" value="640" /></td><td class="subject" style="width: 50%">Related to Exiv2 - <a class="issue tracker-2 status-5 priority-4 priority-default closed" href="/issues/640">Feature #640</a>: method is missing in Exiv2 to get list of known XMP namespaces</td><td class="status">Closed</td><td class="start_date">18 Jul 2009</td><td class="due_date"></td><td class="done_ratio"><table class="progress progress-100"><tr><td style="width: 100%;" class="closed" title="100%"></td></tr></table><p class="percent"></p></td><td class="buttons"><a title="Actions" class="icon-only icon-actions js-contextmenu" href="#">Actions</a></td></tr></table>
</form>
<form class="new_relation" id="new-relation-form" style="display: none;" action="/issues/1116/relations" accept-charset="UTF-8" data-remote="true" method="post"><input name="utf8" type="hidden" value="&#x2713;" />


<p><select onchange="setPredecessorFieldsVisibility();" name="relation[relation_type]" id="relation_relation_type"><option selected="selected" value="relates">Related to</option>
<option value="duplicates">Is duplicate of</option>
<option value="duplicated">Has duplicate</option>
<option value="blocks">Blocks</option>
<option value="blocked">Blocked by</option>
<option value="precedes">Precedes</option>
<option value="follows">Follows</option>
<option value="copied_to">Copied to</option>
<option value="copied_from">Copied from</option></select>
Issue #<input size="10" type="text" name="relation[issue_to_id]" id="relation_issue_to_id" />
<span id="predecessor_fields" style="display:none;">
Delay: <input size="3" type="text" name="relation[delay]" id="relation_delay" /> days
</span>
<input type="submit" name="commit" value="Add" data-disable-with="Add" />
<a href="#" onclick="$(&quot;#new-relation-form&quot;).hide();; return false;">Cancel</a>
</p>

<script>
//<![CDATA[
observeAutocompleteField('relation_issue_to_id', '/issues/auto_complete?issue_id=1116&project_id=exiv2&scope=all')
//]]>
</script>

<script>
//<![CDATA[
setPredecessorFieldsVisibility();
//]]>
</script>

</form>
</div>

</div>

<div id="issue-changesets">
<h3>Associated revisions</h3>
    <div class="changeset">
    <p><a title="Revision 3933" href="/projects/exiv2/repository/exiv2/revisions/3933">Revision 3933</a>
        (<a href="/projects/exiv2/repository/exiv2/revisions/3933/diff">diff</a>)
        <br />
        <span class="author">Added by <a class="user active" href="/users/119">Robin Mills</a> <a title="08 Sep 2015 22:17" href="/projects/exiv2/activity?from=2015-09-08">about 6 years</a> ago</span></p>
    <div class="wiki changeset-comments">
        <p><a class="issue tracker-1 status-5 priority-4 priority-default closed" title="Bug: Issues with namespace &#39;video&#39; (Closed)" href="/issues/1116">#1116</a>.  Fix submitted.</p>
    </div>
    </div>
    <div class="changeset">
    <p><a title="Revision 3981" href="/projects/exiv2/repository/exiv2/revisions/3981">Revision 3981</a>
        (<a href="/projects/exiv2/repository/exiv2/revisions/3981/diff">diff</a>)
        <br />
        <span class="author">Added by <a class="user active" href="/users/53">Andreas Huggel</a> <a title="10 Oct 2015 07:10" href="/projects/exiv2/activity?from=2015-10-10">about 6 years</a> ago</span></p>
    <div class="wiki changeset-comments">
        <p><a class="issue tracker-1 status-5 priority-4 priority-default closed" title="Bug: Issues with namespace &#39;video&#39; (Closed)" href="/issues/1116">#1116</a>: Reverted changes to BasicIo::BasicIo() introduced in <a class="changeset" title="#1116.  Fix submitted." href="/projects/exiv2/repository/exiv2/revisions/3933">r3933</a></p>
    </div>
    </div>
    <div class="changeset">
    <p><a title="Revision 3982" href="/projects/exiv2/repository/exiv2/revisions/3982">Revision 3982</a>
        (<a href="/projects/exiv2/repository/exiv2/revisions/3982/diff">diff</a>)
        <br />
        <span class="author">Added by <a class="user active" href="/users/53">Andreas Huggel</a> <a title="10 Oct 2015 07:19" href="/projects/exiv2/activity?from=2015-10-10">about 6 years</a> ago</span></p>
    <div class="wiki changeset-comments">
        <p><a class="issue tracker-1 status-5 priority-4 priority-default closed" title="Bug: Issues with namespace &#39;video&#39; (Closed)" href="/issues/1116">#1116</a>: Register missing namespaces (audio, video), changed xapG to xmpG in accordance with the XMP specs.</p>
    </div>
    </div>

</div>



<div id="history">
<h3>History</h3>
  <div id="change-4212" class="journal has-notes">
    <div id="note-1">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-1" class="journal-link">#1</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4035">Alan Pater</a> <a title="08 Sep 2015 20:07" href="/projects/exiv2/activity?from=2015-09-08">about 6 years</a> ago
      <span id="journal-4212-private_notes" class=""></span>
    </h4>

    <div id="journal-4212-notes" class="wiki"><p>Several random thoughts:</p>


	<p>Does the 'video' namespace only apply to video files?</p>


	<p>Is video support enabled in the build?</p>


	<p>Is video support read only? <br />  If that is the case, then trying to set a Xmp.video property should not work.</p></div>
    </div>
  </div>
  
  <div id="change-4214" class="journal has-notes has-details">
    <div id="note-2">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-2" class="journal-link">#2</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="08 Sep 2015 22:17" href="/projects/exiv2/activity?from=2015-09-08">about 6 years</a> ago
      <span id="journal-4214-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>% Done</strong> changed from <i>0</i> to <i>70</i></li>
       <li><strong>Estimated time</strong> set to <i>4.00 h</i></li>
    </ul>
    <div id="journal-4214-notes" class="wiki"><p>Fix submitted: <a class="changeset" title="#1116.  Fix submitted." href="/projects/exiv2/repository/exiv2/revisions/3933">r3933</a>.</p>


	<p>The command/message in <strong>Fault 1</strong> in the issue report is incorrect.  It should be:<pre>$ exiv2 -M"set Xmp.video.title movie" DSC_7154.jpg
-M option 1: Invalid key `Xmp.video.title'
exiv2: Error parsing -M option arguments
Usage: exiv2 [ options ] [ action ] file ...

Manipulate the Exif metadata of images.
662 rmills@rmillsmbp:~/gnu/exiv2/trunk $ </pre></p>


	<p><strong>Fault 1</strong> (Invalid key Xmp.video.title) is caused by libexiv2 namespaces not being registered with XMPsdk.</p>


	<p>Exiv2 has no library initialization function.  If we had this, we could register namespaces uniquely known to libexiv2 with XMPsdk.  I've hijacked BasicIo::BasicIo to call XmpProperties::registeredNamespaces() to force this.  This imposes overhead on every Io object.</p>


	<p><strong>Fault 2</strong> (exiv2json throwing exception XMP Toolkit error 9: Fatal namespace map problem) has two causes.</p>


	<p>a) Failure to register libexiv2 namespace (as <em><strong>Fault 1</strong></em>).<br />However even explicitly calling XmpProperties::registeredNamespaces() from exiv2json.cpp/main() was insufficient to fix this.<br />b) Duplicated namespace.<br />We were registering the namespace 'video' with two URIs <a class="external" href="http://www.video">http://www.video</a> and <a class="external" href="http://www.video/">http://www.video/</a></p></div>
    </div>
  </div>
  
  <div id="change-4215" class="journal has-notes">
    <div id="note-3">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-3" class="journal-link">#3</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/53">Andreas Huggel</a> <a title="09 Sep 2015 03:37" href="/projects/exiv2/activity?from=2015-09-09">about 6 years</a> ago
      <span id="journal-4215-private_notes" class=""></span>
    </h4>

    <div id="journal-4215-notes" class="wiki"><blockquote>

	<p>Exiv2 has no library initialization function.  If we had this, we could register namespaces uniquely known to libexiv2 with XMPsdk.  I've hijacked BasicIo::BasicIo to call XmpProperties::registeredNamespaces() to force this.  This imposes overhead on every Io object.</p>


</blockquote>

	<p>We do, and it does exactly that; register namespaces in XMPSDK: <a href="http://www.exiv2.org/doc/classExiv2_1_1XmpParser.html#ea661a7039adb5a748eb7639c8ce9294" class="external">Exiv2::XmpParser::initialize</a>. There is also a comment in <code>properties.cpp</code> that says new namespaces need to be registered with XMP-SDK there:</p>


<pre>
    extern const XmpNsInfo xmpNsInfo[] = {
        // Schemas   -   NOTE: Schemas which the XMP-SDK doesn't know must be registered in XmpParser::initialize - Todo: Automate this
        { "http://purl.org/dc/elements/1.1/",             "dc",             xmpDcInfo,        N_("Dublin Core schema")                        },
</pre> 

	<p>When I last looked (in connection with <a class="issue tracker-2 status-5 priority-4 priority-default closed" title="Feature: method is missing in Exiv2 to get list of known XMP namespaces (Closed)" href="/issues/640">#640</a> the other day), this was simply one of the namespaces missing there. I wanted to fix that: those namespaces that Exiv2 knows and XMP-SDK doesn't just need to be registered there (I think), but those that XMP-SDK has and Exiv2 doesn't, will require a bit more thought and work. For the current implementation of <code>XmpProperties::registerNamespaces()</code>, registering the missing namespaces in XMP-SDK in <code>XmpParser::initialize()</code> should suffice.</p>


	<p>See also <a class="external" href="http://dev.exiv2.org/projects/exiv2/wiki/Thread_safety">http://dev.exiv2.org/projects/exiv2/wiki/Thread_safety</a></p></div>
    </div>
  </div>
  
  <div id="change-4217" class="journal has-notes has-details">
    <div id="note-4">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-4" class="journal-link">#4</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="09 Sep 2015 08:57" href="/projects/exiv2/activity?from=2015-09-09">about 6 years</a> ago
      <span id="journal-4217-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>Assigned</i> to <i>Feedback</i></li>
       <li><strong>Assignee</strong> changed from <i>Robin Mills</i> to <i>Andreas Huggel</i></li>
       <li><strong>% Done</strong> changed from <i>70</i> to <i>80</i></li>
    </ul>
    <div id="journal-4217-notes" class="wiki"><p>Thanks, Andreas.  I'm pushing this to you for comment (status 'Feedback').</p>


	<p>I'm not happy with calling XmpParser::initialize() from main().  Do we have to also in-line the CriticalSection stuff?  This is overly complicated and obscure.</p>


	<p>Can we add a new API Exiv2::libraryInitialize() function and I'll call this from exiv2json.cpp/main()?</p>


	<p>I will restore BasicIo::BasicIo() to the empty in-line function in include/exiv2/basicio.hpp: BasicIo::BasicIo{}</p>


	<p>Exiv2::libraryInitialize() should call a new API Exiv2::XmpProperties::initialize()</p>


	<p>XmpProperties::initialize() can call XmpParser::initialize(), because he's a friend class.  And he should include the following code, which can then be removed from XmpProperty::registeredNamespaces()<pre>for (unsigned int i = 0; i &lt; EXV_COUNTOF(xmpNsInfo); ++i) {
    Exiv2::XmpParser::registerNs(xmpNsInfo[i].ns_,xmpNsInfo[i].prefix_);
}</pre></p></div>
    </div>
  </div>
  
  <div id="change-4219" class="journal has-notes">
    <div id="note-5">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-5" class="journal-link">#5</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/53">Andreas Huggel</a> <a title="10 Sep 2015 02:36" href="/projects/exiv2/activity?from=2015-09-10">about 6 years</a> ago
      <span id="journal-4219-private_notes" class=""></span>
    </h4>

    <div id="journal-4219-notes" class="wiki"><p>The idea of looping through <code>xmpNsInfo[]</code> to register the namespaces in the XMP parser automatically is good, I like that. But let's take this step by step. The real issue is that Exiv2 and XMPSDK are not in sync, let me fix that first: Exiv2 and XMPSDK must be in agreement of what are the known namespaces. That will make sure we don't hit namespace-related obscure errors and will make <code>XmpProperties::registeredNamespaces()</code> trivial.</p>


	<p>As for the API:</p>


	<p>You do not need to call <code>XmpParser::initialize()</code> from your <code>exiv2json.cpp</code> <code>main()</code>. Exiv2 will take care of that. Only multithreaded apps have to be careful. They need to follow the simple guidelines in the Thread-safety Wiki article, then they are fine. For now, we need <code>XmpParser::initialize()</code> in the new function to list the registered namespaces, because it uses the XMP parser.</p>


	<p>We currently only have <code>XmpParser::initialize()</code> because that is all we need: the XMP parser (XMPSDK) needs to be initialized. Exif and IPTC do not need any initialization code, phew! Generally, an initialization function in a C++ library is bad. It should be avoided at all costs. That's why there is no function to initialize the library. I think we should not add one, unless we really really have to, and I hope we never will.</p>


	<p>Let's try hard to keep the API as stable and as small as possible. (API: Consider any code change in the <code>include/exiv2/*</code> files an API change.) Every time we modify or delete an API, we create an incompatible release. Every API we do <em><strong>not</strong></em> add, we will not have to modify or delete later. We have hardly made changes since the last release, but the upcoming release is already binary incompatible. <br />Exiv2 is a library to deal with image metadata. We should provide only a very specific and consistent API related to this task and resist the temptation to add kitchen-drawer all-purpose interfaces, as convenient they may seem. Every application has its own utilities and every developer has her own preferences. <br />The API is already quite overwhelming as it is. Imagine you're new to Exiv2 and look at our <a href="http://www.exiv2.org/doc/classes.html" class="external">class list</a>. Where do you start? I've had comments "Exiv2 only deals with image metadata, why do you need 100 classes for that?" (97 at the moment, and only counting those in the public API.) The question is valid and difficult to answer, especially if you consider how many Exiv2 classes you actually need in an average application.</p></div>
    </div>
  </div>
  
  <div id="change-4220" class="journal has-notes">
    <div id="note-6">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-6" class="journal-link">#6</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4035">Alan Pater</a> <a title="10 Sep 2015 19:41" href="/projects/exiv2/activity?from=2015-09-10">about 6 years</a> ago
      <span id="journal-4220-private_notes" class=""></span>
    </h4>

    <div id="journal-4220-notes" class="wiki"><p>When adding previously unknown XMP namespaces, I've been listing them in xmp.cpp</p>


	<p><a class="external" href="http://dev.exiv2.org/projects/exiv2/repository/entry/trunk/src/xmp.cpp#L396">http://dev.exiv2.org/projects/exiv2/repository/entry/trunk/src/xmp.cpp#L396</a></p>


	<p>Do these changes mean that those entries are not longer needed?</p></div>
    </div>
  </div>
  
  <div id="change-4221" class="journal has-notes has-details">
    <div id="note-7">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-7" class="journal-link">#7</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="10 Sep 2015 21:43" href="/projects/exiv2/activity?from=2015-09-10">about 6 years</a> ago
      <span id="journal-4221-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>Feedback</i> to <i>Assigned</i></li>
    </ul>
    <div id="journal-4221-notes" class="wiki"><p>Thank Alan and Andreas for your comments.</p>


	<p>Alan:<br />The calls you make in XmpParser::initialize() register those namespace directly with XMPsdk using SXMPMeta::RegisterNamespace().</p>


	<p>The for loop above is currently in properties.cpp/XmpProperties::registeredNamespaces() which calls xmp.cpp/Exiv2::XmpParser::registerNs() which calls SXMPMeta::RegisterNamespace().</p>


	<p>Andreas:<br />I'm sorry to have misunderstood the initialization code.  I was under the impression that we did not have a library initialization function.  And while I understand your point of view that you don't wish to see a function such as Exiv2::libraryInitialize(), we none-the-less have to sync those disparate sources of namespaces.  And if we don't push this responsibility on the user, we should assume it in BasicIo::BasicIo() - or some such gateway to libexiv2.  I'll leave you to resolve this.  I set this to 70% complete with the intention of revisiting BasicIo::BasicIo() to install a lower overhead synchronisation function (possibly XmpParser::initialize()).</p>


	<p>I'm going to leave you to fix this as you think best.  You may begin by rolling back the changes to  BasicIo.{cpp|hpp} in <a class="changeset" title="#1116.  Fix submitted." href="/projects/exiv2/repository/exiv2/revisions/3933">r3933</a>.  The changes in <a class="changeset" title="#1116.  Fix submitted." href="/projects/exiv2/repository/exiv2/revisions/3933">r3933</a> to properties.cpp concerning the declaration of 'video' and 'audio' are essential to fix <em><strong>fault 2</strong></em> above.</p>


	<p>Gentlemen:<br />To help a new user get quickly started with libexiv2, I believe our sample applications are of great importance.  I've discussed giving the man pages a makeover for this very purpose.  <a class="issue tracker-2 status-2 priority-4 priority-default" title="Feature: Exiv2 manpage overhaul (Assigned)" href="/issues/1061">#1061</a>.  You are both aware that I endeavour to help users on the Forum.  We're providing a rich mix of solid code-base and build, api documentation, good man-pages, simple to understand samples and on-line support.</p></div>
    </div>
  </div>
  
  <div id="change-5969" class="journal has-details">
    <div id="note-8">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-8" class="journal-link">#8</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="24 Apr 2017 08:17" href="/projects/exiv2/activity?from=2017-04-24">over 4 years</a> ago
      <span id="journal-5969-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>Assigned</i> to <i>Closed</i></li>
       <li><strong>% Done</strong> changed from <i>80</i> to <i>100</i></li>
    </ul>
    
    </div>
  </div>
  


</div>

<div style="clear: both;"></div>
<div class="contextual">





</div>


<div style="clear: both;"></div>


<p class="other-formats">Also available in:  <span><a class="atom" rel="nofollow" href="/issues/1116.atom">Atom</a></span>
  <span><a class="pdf" rel="nofollow" href="/issues/1116.pdf">PDF</a></span>
</p>





        
        <div style="clear:both;"></div>
    </div>
</div>
</div>

<div id="ajax-indicator" style="display:none;"><span>Loading...</span></div>
<div id="ajax-modal" style="display:none;"></div>

<div id="footer">
  <div class="bgl"><div class="bgr">
    Powered by <a href="https://www.redmine.org/">Redmine</a> &copy; 2006-2018 Jean-Philippe Lang
  </div></div>
</div>
</div>
</div>

</body>
</html>
