<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<title>Bug #898: GCC warning when including exiv2.hpp - Exiv2</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="description" content="Redmine" />
<meta name="keywords" content="issue,bug,tracker" />
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="Utis2Cqa8NALKxRhSpwWR3c+5CgzulhviRTNUIFBxBGwlQc3WOA80F5PC231Sxp0SKywUcJZ+dV0NF3Ywngjfg==" />
<link rel='shortcut icon' href='/favicon.ico?1550767427' />
<link rel="stylesheet" media="all" href="/stylesheets/jquery/jquery-ui-1.11.0.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/application.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/responsive.css?1550767427" />

<script src="/javascripts/jquery-1.11.1-ui-1.11.0-ujs-4.3.1.js?1550767427"></script>
<script src="/javascripts/application.js?1550767427"></script>
<script src="/javascripts/responsive.js?1550767427"></script>
<script>
//<![CDATA[
$(window).load(function(){ warnLeavingUnsaved('The current page contains unsaved text that will be lost if you leave this page.'); });
//]]>
</script>


<!-- page specific tags -->
    <link rel="alternate" type="application/atom+xml" title="Exiv2 - Bug #898: GCC warning when including exiv2.hpp" href="https://dev.exiv2.org/issues/898.atom" />
<script src="/javascripts/context_menu.js?1550767427"></script><link rel="stylesheet" media="screen" href="/stylesheets/context_menu.css?1550767427" /></head>
<body class="project-exiv2 has-main-menu controller-issues action-show avatars-off">

<div id="wrapper">

<div class="flyout-menu js-flyout-menu">


        <div class="flyout-menu__search">
            <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
            <input type="hidden" name="issues" value="1" />
            <label class="search-magnifier search-magnifier--flyout" for="flyout-search">&#9906;</label>
            <input type="text" name="q" id="flyout-search" class="small js-search-input" placeholder="Search" />
</form>        </div>


        <h3>Project</h3>
        <span class="js-project-menu"></span>

    <h3>General</h3>
    <span class="js-general-menu"></span>

    <span class="js-sidebar flyout-menu__sidebar"></span>

    <h3>Profile</h3>
    <span class="js-profile-menu"></span>

</div>

<div id="wrapper2">
<div id="wrapper3">
<div id="top-menu">
    <div id="account">
        <ul><li><a class="login" href="/login">Sign in</a></li></ul>    </div>
    
    <ul><li><a class="home" href="/">Home</a></li><li><a class="projects" href="/projects">Projects</a></li><li><a class="help" href="https://www.redmine.org/guide">Help</a></li></ul></div>

<div id="header">

    <a href="#" class="mobile-toggle-button js-flyout-menu-toggle-button"></a>

    <div id="quick-search">
        <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
        <input type="hidden" name="scope" />
        <input type="hidden" name="issues" value="1" />
        <label for='q'>
          <a accesskey="4" href="/projects/exiv2/search">Search</a>:
        </label>
        <input type="text" name="q" id="q" size="20" class="small" accesskey="f" />
</form>        <div id="project-jump" class="drdn"><span class="drdn-trigger">Exiv2</span><div class="drdn-content"><div class="quick-search"><input type="text" name="q" id="projects-quick-search" value="" class="autocomplete" data-automcomplete-url="/projects/autocomplete.js?jump=issues" autocomplete="off" /></div><div class="drdn-items projects selection"></div><div class="drdn-items all-projects selection"><a href="/projects?jump=issues">All Projects</a></div></div></div>
    </div>

    <h1><span class="current-project">Exiv2</span></h1>

    <div id="main-menu" class="tabs">
        <ul><li><a class="overview" href="/projects/exiv2">Overview</a></li><li><a class="activity" href="/projects/exiv2/activity">Activity</a></li><li><a class="roadmap" href="/projects/exiv2/roadmap">Roadmap</a></li><li><a class="issues selected" href="/projects/exiv2/issues">Issues</a></li><li><a class="news" href="/projects/exiv2/news">News</a></li><li><a class="wiki" href="/projects/exiv2/wiki">Wiki</a></li><li><a class="boards" href="/projects/exiv2/boards">Forums</a></li><li><a class="repository" href="/projects/exiv2/repository">Repository</a></li></ul>
        <div class="tabs-buttons" style="display:none;">
            <button class="tab-left" onclick="moveTabLeft(this); return false;"></button>
            <button class="tab-right" onclick="moveTabRight(this); return false;"></button>
        </div>
    </div>
</div>

<div id="main" class="">
    <div id="sidebar">
          <h3>Issues</h3>

<ul>
<li><a href="/projects/exiv2/issues?set_filter=1">View all issues</a></li>
<li><a href="/projects/exiv2/issues/report">Summary</a></li>

</ul>









        
    </div>

    <div id="content">
        
        <div class="contextual">





</div>


<h2>Bug #898</h2>

<div class="issue tracker-1 status-5 priority-4 priority-default closed details">

  <div class="gravatar-with-child">
    
    
  </div>

<div class="subject">
<div><h3>GCC warning when including exiv2.hpp</h3></div>
</div>
        <p class="author">
        Added by <a class="user active" href="/users/3802">Jan Rüegg</a> <a title="10 Apr 2013 23:53" href="/projects/exiv2/activity?from=2013-04-10">over 8 years</a> ago.
        Updated <a title="13 Apr 2013 00:02" href="/projects/exiv2/activity?from=2013-04-13">over 8 years</a> ago.
        </p>

<div class="attributes">
<div class="splitcontent"><div class="splitcontentleft"><div class="status attribute"><div class="label">Status:</div><div class="value">Closed</div></div><div class="priority attribute"><div class="label">Priority:</div><div class="value">Normal</div></div><div class="assigned-to attribute"><div class="label">Assignee:</div><div class="value"><a class="user active" href="/users/119">Robin Mills</a></div></div><div class="category attribute"><div class="label">Category:</div><div class="value">build</div></div><div class="fixed-version attribute"><div class="label">Target version:</div><div class="value"><a title="31 Jul 2013" href="/versions/50">0.24</a></div></div></div><div class="splitcontentleft"><div class="start-date attribute"><div class="label">Start date:</div><div class="value">10 Apr 2013</div></div><div class="due-date attribute"><div class="label">Due date:</div><div class="value"></div></div><div class="progress attribute"><div class="label">% Done:</div><div class="value"><table class="progress progress-0"><tr><td style="width: 100%;" class="todo"></td></tr></table><p class="percent">0%</p></div></div><div class="estimated-hours attribute"><div class="label">Estimated time:</div><div class="value"></div></div></div></div>


</div>

<hr />
<div class="description">
  <div class="contextual">
  
  </div>

  <p><strong>Description</strong></p>
  <div class="wiki">
  <p>With gcc 4.8.0, I get the following warning when including the exiv2 header:</p>


	<p>In file included from /usr/include/exiv2/metadatum.hpp:39:0,<br />                 from /usr/include/exiv2/exif.hpp:34,<br />                 from /usr/include/exiv2/bmpimage.hpp:34,<br />                 from /usr/include/exiv2/exiv2.hpp:35,<br />                 from ...<br />/usr/include/exiv2/value.hpp:984:56: note: attribute for ‘struct Exiv2::DateValue::Date’ must follow the ‘struct’ keyword<br />         EXIV2API struct Date</p>
  </div>
</div>
  <hr />
  <p><strong>Files</strong></p>
  <div class="attachments">
<div class="contextual">
  
</div>
<table>
<tr>
  <td>
    <a class="icon icon-attachment" href="/attachments/470">value.hpp</a>    <span class="size">(59.7 KB)</span>
    <a class="icon-only icon-download" title="Download" href="/attachments/download/470/value.hpp">value.hpp</a>  </td>
  <td></td>
  <td>
      <span class="author">Robin Mills, 11 Apr 2013 07:09</span>
  </td>
  <td>
  </td>
</tr>
</table>
</div>







<hr />
<div id="relations">
<div class="contextual">
</div>

<p><strong>Related issues</strong></p>

<form data-cm-url="/issues/context_menu" action="/issues/898" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><input type="hidden" name="authenticity_token" value="8hdoVIjKYV3tY2qqiOgZpRIGGn+6iiS49Da2IumdqbQQWsO7+rCtXbgHdaY3PxWWLZROBktphQIJFiaqqqRO2w==" />
  <table class="list issues odd-even"><tr id="relation-95" class="issue hascontextmenu issue tracker-1 status-5 priority-4 priority-default closed"><td class="checkbox"><input type="checkbox" name="ids[]" value="897" /></td><td class="subject" style="width: 50%">Related to Exiv2 - <a class="issue tracker-1 status-5 priority-4 priority-default closed" href="/issues/897">Bug #897</a>: New Compilation Warnings </td><td class="status">Closed</td><td class="start_date">26 Mar 2013</td><td class="due_date"></td><td class="done_ratio"><table class="progress progress-0"><tr><td style="width: 100%;" class="todo"></td></tr></table><p class="percent"></p></td><td class="buttons"><a title="Actions" class="icon-only icon-actions js-contextmenu" href="#">Actions</a></td></tr></table>
</form>
<form class="new_relation" id="new-relation-form" style="display: none;" action="/issues/898/relations" accept-charset="UTF-8" data-remote="true" method="post"><input name="utf8" type="hidden" value="&#x2713;" />


<p><select onchange="setPredecessorFieldsVisibility();" name="relation[relation_type]" id="relation_relation_type"><option selected="selected" value="relates">Related to</option>
<option value="duplicates">Is duplicate of</option>
<option value="duplicated">Has duplicate</option>
<option value="blocks">Blocks</option>
<option value="blocked">Blocked by</option>
<option value="precedes">Precedes</option>
<option value="follows">Follows</option>
<option value="copied_to">Copied to</option>
<option value="copied_from">Copied from</option></select>
Issue #<input size="10" type="text" name="relation[issue_to_id]" id="relation_issue_to_id" />
<span id="predecessor_fields" style="display:none;">
Delay: <input size="3" type="text" name="relation[delay]" id="relation_delay" /> days
</span>
<input type="submit" name="commit" value="Add" data-disable-with="Add" />
<a href="#" onclick="$(&quot;#new-relation-form&quot;).hide();; return false;">Cancel</a>
</p>

<script>
//<![CDATA[
observeAutocompleteField('relation_issue_to_id', '/issues/auto_complete?issue_id=898&project_id=exiv2&scope=all')
//]]>
</script>

<script>
//<![CDATA[
setPredecessorFieldsVisibility();
//]]>
</script>

</form>
</div>

</div>




<div id="history">
<h3>History</h3>
  <div id="change-2453" class="journal has-notes has-details">
    <div id="note-1">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-1" class="journal-link">#1</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="11 Apr 2013 00:11" href="/projects/exiv2/activity?from=2013-04-11">over 8 years</a> ago
      <span id="journal-2453-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Category</strong> set to <i>build</i></li>
       <li><strong>Status</strong> changed from <i>New</i> to <i>Assigned</i></li>
       <li><strong>Assignee</strong> set to <i>Robin Mills</i></li>
       <li><strong>Target version</strong> set to <i>0.24</i></li>
    </ul>
    <div id="journal-2453-notes" class="wiki"><p>Thanks for report this, Jan.  I built and run the test suite on the trunk last week with 4.8.0 on Ubuntu 12.10 (64 bit).  I reported details here: <a class="external" href="http://dev.exiv2.org/issues/897">http://dev.exiv2.org/issues/897</a></p>


	<p>Can you provide a more detail, please.  Which version of exiv2 (eg trunk or tar-bundle) and information about your platform 32 or 64 bit. Can you post your &lt;exiv2dir&gt;/config.log file please.</p>


	<p>Robin</p></div>
    </div>
  </div>
  
  <div id="change-2454" class="journal has-notes">
    <div id="note-2">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-2" class="journal-link">#2</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/3802">Jan Rüegg</a> <a title="11 Apr 2013 05:54" href="/projects/exiv2/activity?from=2013-04-11">over 8 years</a> ago
      <span id="journal-2454-private_notes" class=""></span>
    </h4>

    <div id="journal-2454-notes" class="wiki"><p>Using exiv2 on Archlinux 64-bit (precompiled, so I don't have the config.log):<br />extra/exiv2 0.23-1</p>


	<p>gcc --version<br />gcc (GCC) 4.8.0<br />Copyright (C) 2013 Free Software Foundation, Inc.<br />This is free software; see the source for copying conditions.  There is NO<br />warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</p>


	<p>Compiling this example:<br /><a class="external" href="http://www.exiv2.org/doc/exifprint_8cpp-example.html">http://www.exiv2.org/doc/exifprint_8cpp-example.html</a></p>


	<p>with "g++ test.cpp -lexiv2":<br />In file included from /usr/include/exiv2/metadatum.hpp:39:0,<br />                 from /usr/include/exiv2/exif.hpp:34,<br />                 from /usr/include/exiv2/bmpimage.hpp:34,<br />                 from /usr/include/exiv2/exiv2.hpp:35,<br />                 from test.cpp:5:<br />/usr/include/exiv2/value.hpp:984:25: note: attribute for ‘struct Exiv2::DateValue::Date’ must follow the ‘struct’ keyword<br />         EXIV2API struct Date</p>


	<p>Do you need more information?</p></div>
    </div>
  </div>
  
  <div id="change-2455" class="journal has-notes has-details">
    <div id="note-3">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-3" class="journal-link">#3</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="11 Apr 2013 07:09" href="/projects/exiv2/activity?from=2013-04-11">over 8 years</a> ago
      <span id="journal-2455-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>File</strong> <a href="/attachments/470">value.hpp</a> <a class="icon-only icon-download" title="Download" href="/attachments/download/470/value.hpp">value.hpp</a> added</li>
    </ul>
    <div id="journal-2455-notes" class="wiki"><p>Jan</p>


	<p>I've downloaded the tar-bundle from here:  <a class="external" href="http://exiv2.org/download.html">http://exiv2.org/download.html</a>  <a class="external" href="http://exiv2.org/exiv2-0.23.tar.gz">http://exiv2.org/exiv2-0.23.tar.gz</a> and I when I build with GCC 4.8.0, I get that message everywhere when I build.  When I build from the trunk, it's clean.</p>


	<p>There are two changes in src/value.hpp on the trunk and those were fixed in this submission: <a class="external" href="http://dev.exiv2.org/projects/exiv2/repository/revisions/2907">http://dev.exiv2.org/projects/exiv2/repository/revisions/2907</a></p>


	<p>I've attached the version of value.hpp from the trunk.  The changes only impacts how Date is declared in the code, so there should be no side effects on running code.</p>


	<p>So ........ the fix is to replace your copy of value.hpp with the one I have attached here.</p>


	<p>Robin</p></div>
    </div>
  </div>
  
  <div id="change-2456" class="journal has-notes has-details">
    <div id="note-4">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-4" class="journal-link">#4</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="12 Apr 2013 00:22" href="/projects/exiv2/activity?from=2013-04-12">over 8 years</a> ago
      <span id="journal-2456-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>Assigned</i> to <i>Resolved</i></li>
    </ul>
    <div id="journal-2456-notes" class="wiki"><p>I've built the tar-ball of 0.23 with GCC 4.7.2 and ran the test suite.  It passes.   I've replaced value.hpp with the version attached to this issue report and built with GCC 4.8.0.  The test suite passes.</p>


	<p>I'm going to update this issue to "Resolved". If you feel there is something else to discuss, please update the issue to "Feedback" and explain your thoughts.</p>


	<p>If you're satisfied with this answer, can you update the issue to 'closed'.</p>


	<p>Robin</p></div>
    </div>
  </div>
  
  <div id="change-2457" class="journal has-notes">
    <div id="note-5">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-5" class="journal-link">#5</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/3802">Jan Rüegg</a> <a title="12 Apr 2013 23:08" href="/projects/exiv2/activity?from=2013-04-12">over 8 years</a> ago
      <span id="journal-2457-private_notes" class=""></span>
    </h4>

    <div id="journal-2457-notes" class="wiki"><p>Yes, thats fine, thanks a lot! I guess it will be in version 0.24 then, once it is out?</p>


	<p>Closing sounds good. However, I think I don't see how to do it. Maybe I don't have the permissions? Anyway, you can close it if you want.</p></div>
    </div>
  </div>
  
  <div id="change-2458" class="journal has-notes has-details">
    <div id="note-6">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-6" class="journal-link">#6</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="13 Apr 2013 00:02" href="/projects/exiv2/activity?from=2013-04-13">over 8 years</a> ago
      <span id="journal-2458-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>Resolved</i> to <i>Closed</i></li>
    </ul>
    <div id="journal-2458-notes" class="wiki"><p>Jan</p>


	<p>I must have the power!  The UI provides me with tools to assign issues and stuff.  Yes, it makes sense that users would not have those tools.  No problem, I've closed this.</p>


	<p>You can always sync and build from the trunk.  Our code is stable and I run the test suite frequently on Linux/Windows/Mac.  <a class="changeset" title="#859: Fixed position of visibility support macro." href="/projects/exiv2/repository/exiv2/revisions/2907">r2907</a> (the only change to value.hpp since 0.23) will be in the 0.24 version when we release it.</p>


	<p>Robin</p></div>
    </div>
  </div>
  


</div>

<div style="clear: both;"></div>
<div class="contextual">





</div>


<div style="clear: both;"></div>


<p class="other-formats">Also available in:  <span><a class="atom" rel="nofollow" href="/issues/898.atom">Atom</a></span>
  <span><a class="pdf" rel="nofollow" href="/issues/898.pdf">PDF</a></span>
</p>





        
        <div style="clear:both;"></div>
    </div>
</div>
</div>

<div id="ajax-indicator" style="display:none;"><span>Loading...</span></div>
<div id="ajax-modal" style="display:none;"></div>

<div id="footer">
  <div class="bgl"><div class="bgr">
    Powered by <a href="https://www.redmine.org/">Redmine</a> &copy; 2006-2018 Jean-Philippe Lang
  </div></div>
</div>
</div>
</div>

</body>
</html>
