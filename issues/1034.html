<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<title>Feature #1034: Camera accessory overflow file - Exiv2</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="description" content="Redmine" />
<meta name="keywords" content="issue,bug,tracker" />
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="HlVxBaadbxJ1TXVJKr8OX+0/ev4jTUL0uw7ce6KoBd/8GNrq1OejEiApakWVaAJs0q0uh9Ku405GLkzz4ZHisA==" />
<link rel='shortcut icon' href='/favicon.ico?1550767427' />
<link rel="stylesheet" media="all" href="/stylesheets/jquery/jquery-ui-1.11.0.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/application.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/responsive.css?1550767427" />

<script src="/javascripts/jquery-1.11.1-ui-1.11.0-ujs-4.3.1.js?1550767427"></script>
<script src="/javascripts/application.js?1550767427"></script>
<script src="/javascripts/responsive.js?1550767427"></script>
<script>
//<![CDATA[
$(window).load(function(){ warnLeavingUnsaved('The current page contains unsaved text that will be lost if you leave this page.'); });
//]]>
</script>


<!-- page specific tags -->
    <link rel="alternate" type="application/atom+xml" title="Exiv2 - Feature #1034: Camera accessory overflow file" href="https://dev.exiv2.org/issues/1034.atom" />
<script src="/javascripts/context_menu.js?1550767427"></script><link rel="stylesheet" media="screen" href="/stylesheets/context_menu.css?1550767427" /></head>
<body class="project-exiv2 has-main-menu controller-issues action-show avatars-off">

<div id="wrapper">

<div class="flyout-menu js-flyout-menu">


        <div class="flyout-menu__search">
            <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
            <input type="hidden" name="issues" value="1" />
            <label class="search-magnifier search-magnifier--flyout" for="flyout-search">&#9906;</label>
            <input type="text" name="q" id="flyout-search" class="small js-search-input" placeholder="Search" />
</form>        </div>


        <h3>Project</h3>
        <span class="js-project-menu"></span>

    <h3>General</h3>
    <span class="js-general-menu"></span>

    <span class="js-sidebar flyout-menu__sidebar"></span>

    <h3>Profile</h3>
    <span class="js-profile-menu"></span>

</div>

<div id="wrapper2">
<div id="wrapper3">
<div id="top-menu">
    <div id="account">
        <ul><li><a class="login" href="/login">Sign in</a></li></ul>    </div>
    
    <ul><li><a class="home" href="/">Home</a></li><li><a class="projects" href="/projects">Projects</a></li><li><a class="help" href="https://www.redmine.org/guide">Help</a></li></ul></div>

<div id="header">

    <a href="#" class="mobile-toggle-button js-flyout-menu-toggle-button"></a>

    <div id="quick-search">
        <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
        <input type="hidden" name="scope" />
        <input type="hidden" name="issues" value="1" />
        <label for='q'>
          <a accesskey="4" href="/projects/exiv2/search">Search</a>:
        </label>
        <input type="text" name="q" id="q" size="20" class="small" accesskey="f" />
</form>        <div id="project-jump" class="drdn"><span class="drdn-trigger">Exiv2</span><div class="drdn-content"><div class="quick-search"><input type="text" name="q" id="projects-quick-search" value="" class="autocomplete" data-automcomplete-url="/projects/autocomplete.js?jump=issues" autocomplete="off" /></div><div class="drdn-items projects selection"></div><div class="drdn-items all-projects selection"><a href="/projects?jump=issues">All Projects</a></div></div></div>
    </div>

    <h1><span class="current-project">Exiv2</span></h1>

    <div id="main-menu" class="tabs">
        <ul><li><a class="overview" href="/projects/exiv2">Overview</a></li><li><a class="activity" href="/projects/exiv2/activity">Activity</a></li><li><a class="roadmap" href="/projects/exiv2/roadmap">Roadmap</a></li><li><a class="issues selected" href="/projects/exiv2/issues">Issues</a></li><li><a class="news" href="/projects/exiv2/news">News</a></li><li><a class="wiki" href="/projects/exiv2/wiki">Wiki</a></li><li><a class="boards" href="/projects/exiv2/boards">Forums</a></li><li><a class="repository" href="/projects/exiv2/repository">Repository</a></li></ul>
        <div class="tabs-buttons" style="display:none;">
            <button class="tab-left" onclick="moveTabLeft(this); return false;"></button>
            <button class="tab-right" onclick="moveTabRight(this); return false;"></button>
        </div>
    </div>
</div>

<div id="main" class="">
    <div id="sidebar">
          <h3>Issues</h3>

<ul>
<li><a href="/projects/exiv2/issues?set_filter=1">View all issues</a></li>
<li><a href="/projects/exiv2/issues/report">Summary</a></li>

</ul>









        
    </div>

    <div id="content">
        
        <div class="contextual">





</div>


<h2>Feature #1034</h2>

<div class="issue tracker-2 status-5 priority-4 priority-default closed details">

  <div class="gravatar-with-child">
    
    
  </div>

<div class="subject">
<div><h3>Camera accessory overflow file</h3></div>
</div>
        <p class="author">
        Added by <a class="user active" href="/users/4350">Tobias Jakobs</a> <a title="19 Feb 2015 08:44" href="/projects/exiv2/activity?from=2015-02-19">almost 7 years</a> ago.
        Updated <a title="28 Aug 2016 07:07" href="/projects/exiv2/activity?from=2016-08-28">about 5 years</a> ago.
        </p>

<div class="attributes">
<div class="splitcontent"><div class="splitcontentleft"><div class="status attribute"><div class="label">Status:</div><div class="value">Closed</div></div><div class="priority attribute"><div class="label">Priority:</div><div class="value">Normal</div></div><div class="assigned-to attribute"><div class="label">Assignee:</div><div class="value"><a class="user active" href="/users/119">Robin Mills</a></div></div><div class="category attribute"><div class="label">Category:</div><div class="value">design</div></div><div class="fixed-version attribute"><div class="label">Target version:</div><div class="value"><a title="28 Apr 2017" href="/versions/52">0.26</a></div></div></div><div class="splitcontentleft"><div class="start-date attribute"><div class="label">Start date:</div><div class="value">19 Feb 2015</div></div><div class="due-date attribute"><div class="label">Due date:</div><div class="value"></div></div><div class="progress attribute"><div class="label">% Done:</div><div class="value"><table class="progress progress-100"><tr><td style="width: 100%;" class="closed" title="100%"></td></tr></table><p class="percent">100%</p></div></div><div class="estimated-hours attribute"><div class="label">Estimated time:</div><div class="value">30.00 h</div></div></div></div>


</div>

<hr />
<div class="description">
  <div class="contextual">
  
  </div>

  <p><strong>Description</strong></p>
  <div class="wiki">
  <p>According to this forum post from Robin Mills:<br /><a class="external" href="http://dev.exiv2.org/boards/3/topics/1766">http://dev.exiv2.org/boards/3/topics/1766</a></p>


	<p>And the discussion here.<br /><a class="external" href="http://www.darktable.org/2015/02/on-lens-detection-and-correction/comment-page-1/#comment-42822">http://www.darktable.org/2015/02/on-lens-detection-and-correction/comment-page-1/#comment-42822</a></p>


	<p>Provide an ascii file (XML, JSON, ...) for new cameras and accessories like lenses. This enable applications to update Maker Notes without compiling code.</p>
  </div>
</div>






<hr />
<div id="relations">
<div class="contextual">
</div>

<p><strong>Related issues</strong></p>

<form data-cm-url="/issues/context_menu" action="/issues/1034" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><input type="hidden" name="authenticity_token" value="uY2nb8/gK5UYLq/iwkZvKBUv/aPs5uiKnt66TaLAsWxbwAyAvZrnlU1KsO59kWMbKr2p2h0FSTBj/irF4flWAw==" />
  <table class="list issues odd-even"><tr id="relation-205" class="issue hascontextmenu issue tracker-2 status-5 priority-4 priority-default closed"><td class="checkbox"><input type="checkbox" name="ids[]" value="1160" /></td><td class="subject" style="width: 50%">Related to Exiv2 - <a class="issue tracker-2 status-5 priority-4 priority-default closed" href="/issues/1160">Feature #1160</a>: Feature Request - New Lens</td><td class="status">Closed</td><td class="start_date">03 Feb 2016</td><td class="due_date"></td><td class="done_ratio"><table class="progress progress-100"><tr><td style="width: 100%;" class="closed" title="100%"></td></tr></table><p class="percent"></p></td><td class="buttons"><a title="Actions" class="icon-only icon-actions js-contextmenu" href="#">Actions</a></td></tr><tr id="relation-211" class="issue hascontextmenu issue tracker-2 status-5 priority-4 priority-default closed"><td class="checkbox"><input type="checkbox" name="ids[]" value="1170" /></td><td class="subject" style="width: 50%">Related to Exiv2 - <a class="issue tracker-2 status-5 priority-4 priority-default closed" href="/issues/1170">Feature #1170</a>: Sigma 35mm F1.4 DG HSM on Canon 6D</td><td class="status">Closed</td><td class="start_date">22 Mar 2016</td><td class="due_date"></td><td class="done_ratio"><table class="progress progress-100"><tr><td style="width: 100%;" class="closed" title="100%"></td></tr></table><p class="percent"></p></td><td class="buttons"><a title="Actions" class="icon-only icon-actions js-contextmenu" href="#">Actions</a></td></tr><tr id="relation-216" class="issue hascontextmenu issue tracker-2 status-5 priority-4 priority-default closed"><td class="checkbox"><input type="checkbox" name="ids[]" value="801" /></td><td class="subject" style="width: 50%">Related to Exiv2 - <a class="issue tracker-2 status-5 priority-4 priority-default closed" href="/issues/801">Feature #801</a>: Add Lens &quot;Sigma 18-200mm f/3.5-6.3 DC OS HSM&quot; for Canon</td><td class="status">Closed</td><td class="start_date">13 Jan 2012</td><td class="due_date"></td><td class="done_ratio"><table class="progress progress-100"><tr><td style="width: 100%;" class="closed" title="100%"></td></tr></table><p class="percent"></p></td><td class="buttons"><a title="Actions" class="icon-only icon-actions js-contextmenu" href="#">Actions</a></td></tr><tr id="relation-231" class="issue hascontextmenu issue tracker-1 status-2 priority-4 priority-default"><td class="checkbox"><input type="checkbox" name="ids[]" value="867" /></td><td class="subject" style="width: 50%">Related to Exiv2 - <a class="issue tracker-1 status-2 priority-4 priority-default" href="/issues/867">Bug #867</a>: Lens not detected on Olympus E-1</td><td class="status">Assigned</td><td class="start_date">10 Nov 2012</td><td class="due_date"></td><td class="done_ratio"><table class="progress progress-0"><tr><td style="width: 100%;" class="todo"></td></tr></table><p class="percent"></p></td><td class="buttons"><a title="Actions" class="icon-only icon-actions js-contextmenu" href="#">Actions</a></td></tr><tr id="relation-234" class="issue hascontextmenu issue tracker-1 status-5 priority-4 priority-default closed"><td class="checkbox"><input type="checkbox" name="ids[]" value="1200" /></td><td class="subject" style="width: 50%">Related to Exiv2 - <a class="issue tracker-1 status-5 priority-4 priority-default closed" href="/issues/1200">Bug #1200</a>: Support for Sigma 17-70mm F2.8-4 DC Macro OS HSM | C</td><td class="status">Closed</td><td class="start_date">09 Aug 2016</td><td class="due_date"></td><td class="done_ratio"><table class="progress progress-100"><tr><td style="width: 100%;" class="closed" title="100%"></td></tr></table><p class="percent"></p></td><td class="buttons"><a title="Actions" class="icon-only icon-actions js-contextmenu" href="#">Actions</a></td></tr></table>
</form>
<form class="new_relation" id="new-relation-form" style="display: none;" action="/issues/1034/relations" accept-charset="UTF-8" data-remote="true" method="post"><input name="utf8" type="hidden" value="&#x2713;" />


<p><select onchange="setPredecessorFieldsVisibility();" name="relation[relation_type]" id="relation_relation_type"><option selected="selected" value="relates">Related to</option>
<option value="duplicates">Is duplicate of</option>
<option value="duplicated">Has duplicate</option>
<option value="blocks">Blocks</option>
<option value="blocked">Blocked by</option>
<option value="precedes">Precedes</option>
<option value="follows">Follows</option>
<option value="copied_to">Copied to</option>
<option value="copied_from">Copied from</option></select>
Issue #<input size="10" type="text" name="relation[issue_to_id]" id="relation_issue_to_id" />
<span id="predecessor_fields" style="display:none;">
Delay: <input size="3" type="text" name="relation[delay]" id="relation_delay" /> days
</span>
<input type="submit" name="commit" value="Add" data-disable-with="Add" />
<a href="#" onclick="$(&quot;#new-relation-form&quot;).hide();; return false;">Cancel</a>
</p>

<script>
//<![CDATA[
observeAutocompleteField('relation_issue_to_id', '/issues/auto_complete?issue_id=1034&project_id=exiv2&scope=all')
//]]>
</script>

<script>
//<![CDATA[
setPredecessorFieldsVisibility();
//]]>
</script>

</form>
</div>

</div>

<div id="issue-changesets">
<h3>Associated revisions</h3>
    <div class="changeset">
    <p><a title="Revision 4249" href="/projects/exiv2/repository/exiv2/revisions/4249">Revision 4249</a>
        (<a href="/projects/exiv2/repository/exiv2/revisions/4249/diff">diff</a>)
        <br />
        <span class="author">Added by <a class="user active" href="/users/119">Robin Mills</a> <a title="25 Mar 2016 08:12" href="/projects/exiv2/activity?from=2016-03-25">over 5 years</a> ago</span></p>
    <div class="wiki changeset-comments">
        <p><a class="issue tracker-2 status-5 priority-4 priority-default closed" title="Feature: Camera accessory overflow file (Closed)" href="/issues/1034">#1034</a>  Added exiv2 config file support for lens recognition.</p>
    </div>
    </div>
    <div class="changeset">
    <p><a title="Revision 4250" href="/projects/exiv2/repository/exiv2/revisions/4250">Revision 4250</a>
        (<a href="/projects/exiv2/repository/exiv2/revisions/4250/diff">diff</a>)
        <br />
        <span class="author">Added by <a class="user active" href="/users/119">Robin Mills</a> <a title="25 Mar 2016 09:02" href="/projects/exiv2/activity?from=2016-03-25">over 5 years</a> ago</span></p>
    <div class="wiki changeset-comments">
        <p><a class="issue tracker-2 status-5 priority-4 priority-default closed" title="Feature: Camera accessory overflow file (Closed)" href="/issues/1034">#1034</a>.  Corrections to <a class="changeset" title="#1034  Added exiv2 config file support for lens recognition." href="/projects/exiv2/repository/exiv2/revisions/4249">r4249</a> to fix build-breakers</p>
    </div>
    </div>
    <div class="changeset">
    <p><a title="Revision 4251" href="/projects/exiv2/repository/exiv2/revisions/4251">Revision 4251</a>
        (<a href="/projects/exiv2/repository/exiv2/revisions/4251/diff">diff</a>)
        <br />
        <span class="author">Added by <a class="user active" href="/users/119">Robin Mills</a> <a title="25 Mar 2016 10:18" href="/projects/exiv2/activity?from=2016-03-25">over 5 years</a> ago</span></p>
    <div class="wiki changeset-comments">
        <p><a class="issue tracker-2 status-5 priority-4 priority-default closed" title="Feature: Camera accessory overflow file (Closed)" href="/issues/1034">#1034</a>. Corrections to <a class="changeset" title="#1034  Added exiv2 config file support for lens recognition." href="/projects/exiv2/repository/exiv2/revisions/4249">r4249</a> to fix build-breakers</p>
    </div>
    </div>
    <div class="changeset">
    <p><a title="Revision 4253" href="/projects/exiv2/repository/exiv2/revisions/4253">Revision 4253</a>
        (<a href="/projects/exiv2/repository/exiv2/revisions/4253/diff">diff</a>)
        <br />
        <span class="author">Added by <a class="user active" href="/users/119">Robin Mills</a> <a title="25 Mar 2016 10:36" href="/projects/exiv2/activity?from=2016-03-25">over 5 years</a> ago</span></p>
    <div class="wiki changeset-comments">
        <p><a class="issue tracker-2 status-5 priority-4 priority-default closed" title="Feature: Camera accessory overflow file (Closed)" href="/issues/1034">#1034</a>. Corrections to <a class="changeset" title="#1034  Added exiv2 config file support for lens recognition." href="/projects/exiv2/repository/exiv2/revisions/4249">r4249</a> to fix build-breakers</p>
    </div>
    </div>
    <div class="changeset">
    <p><a title="Revision 4254" href="/projects/exiv2/repository/exiv2/revisions/4254">Revision 4254</a>
        (<a href="/projects/exiv2/repository/exiv2/revisions/4254/diff">diff</a>)
        <br />
        <span class="author">Added by <a class="user active" href="/users/119">Robin Mills</a> <a title="25 Mar 2016 11:50" href="/projects/exiv2/activity?from=2016-03-25">over 5 years</a> ago</span></p>
    <div class="wiki changeset-comments">
        <p><a class="issue tracker-2 status-5 priority-4 priority-default closed" title="Feature: Camera accessory overflow file (Closed)" href="/issues/1034">#1034</a>. Corrections to <a class="changeset" title="#1034  Added exiv2 config file support for lens recognition." href="/projects/exiv2/repository/exiv2/revisions/4249">r4249</a> to fix erroneous test suite messages.</p>
    </div>
    </div>
    <div class="changeset">
    <p><a title="Revision 4259" href="/projects/exiv2/repository/exiv2/revisions/4259">Revision 4259</a>
        (<a href="/projects/exiv2/repository/exiv2/revisions/4259/diff">diff</a>)
        <br />
        <span class="author">Added by <a class="user active" href="/users/119">Robin Mills</a> <a title="28 Mar 2016 13:33" href="/projects/exiv2/activity?from=2016-03-28">over 5 years</a> ago</span></p>
    <div class="wiki changeset-comments">
        <p><a class="issue tracker-2 status-5 priority-4 priority-default closed" title="Feature: Camera accessory overflow file (Closed)" href="/issues/1034">#1034</a> Added msvc2005/ini-test</p>
    </div>
    </div>
    <div class="changeset">
    <p><a title="Revision 4293" href="/projects/exiv2/repository/exiv2/revisions/4293">Revision 4293</a>
        (<a href="/projects/exiv2/repository/exiv2/revisions/4293/diff">diff</a>)
        <br />
        <span class="author">Added by <a class="user active" href="/users/119">Robin Mills</a> <a title="29 Apr 2016 19:20" href="/projects/exiv2/activity?from=2016-04-29">over 5 years</a> ago</span></p>
    <div class="wiki changeset-comments">
        <p><a class="issue tracker-2 status-5 priority-4 priority-default closed" title="Feature: Camera accessory overflow file (Closed)" href="/issues/1034">#1034</a> Added samples/toexv This is a first step to write exif metadata to memory to send to a web service.</p>
    </div>
    </div>
    <div class="changeset">
    <p><a title="Revision 4294" href="/projects/exiv2/repository/exiv2/revisions/4294">Revision 4294</a>
        (<a href="/projects/exiv2/repository/exiv2/revisions/4294/diff">diff</a>)
        <br />
        <span class="author">Added by <a class="user active" href="/users/119">Robin Mills</a> <a title="29 Apr 2016 19:24" href="/projects/exiv2/activity?from=2016-04-29">over 5 years</a> ago</span></p>
    <div class="wiki changeset-comments">
        <p><a class="issue tracker-2 status-5 priority-4 priority-default closed" title="Feature: Camera accessory overflow file (Closed)" href="/issues/1034">#1034</a> Correction to <a class="changeset" title="#1034 Added samples/toexv This is a first step to write exif metadata to memory to send to a web ..." href="/projects/exiv2/repository/exiv2/revisions/4293">r4293</a>.  Adding forgotton files!</p>
    </div>
    </div>
    <div class="changeset">
    <p><a title="Revision 4299" href="/projects/exiv2/repository/exiv2/revisions/4299">Revision 4299</a>
        (<a href="/projects/exiv2/repository/exiv2/revisions/4299/diff">diff</a>)
        <br />
        <span class="author">Added by <a class="user active" href="/users/119">Robin Mills</a> <a title="07 May 2016 16:40" href="/projects/exiv2/activity?from=2016-05-07">over 5 years</a> ago</span></p>
    <div class="wiki changeset-comments">
        <p><a class="issue tracker-2 status-5 priority-4 priority-default closed" title="Feature: Camera accessory overflow file (Closed)" href="/issues/1034">#1034</a>.  Nikon support for ~/.exiv2</p>
    </div>
    </div>
    <div class="changeset">
    <p><a title="Revision 4300" href="/projects/exiv2/repository/exiv2/revisions/4300">Revision 4300</a>
        (<a href="/projects/exiv2/repository/exiv2/revisions/4300/diff">diff</a>)
        <br />
        <span class="author">Added by <a class="user active" href="/users/119">Robin Mills</a> <a title="07 May 2016 16:54" href="/projects/exiv2/activity?from=2016-05-07">over 5 years</a> ago</span></p>
    <div class="wiki changeset-comments">
        <p><a class="issue tracker-2 status-5 priority-4 priority-default closed" title="Feature: Camera accessory overflow file (Closed)" href="/issues/1034">#1034</a> Pentax support for ~/.exiv2</p>
    </div>
    </div>
    <div class="changeset">
    <p><a title="Revision 4301" href="/projects/exiv2/repository/exiv2/revisions/4301">Revision 4301</a>
        (<a href="/projects/exiv2/repository/exiv2/revisions/4301/diff">diff</a>)
        <br />
        <span class="author">Added by <a class="user active" href="/users/119">Robin Mills</a> <a title="07 May 2016 18:44" href="/projects/exiv2/activity?from=2016-05-07">over 5 years</a> ago</span></p>
    <div class="wiki changeset-comments">
        <p><a class="issue tracker-2 status-5 priority-4 priority-default closed" title="Feature: Camera accessory overflow file (Closed)" href="/issues/1034">#1034</a> Sony and Minolta support for ~/.exiv2</p>
    </div>
    </div>
    <div class="changeset">
    <p><a title="Revision 4320" href="/projects/exiv2/repository/exiv2/revisions/4320">Revision 4320</a>
        (<a href="/projects/exiv2/repository/exiv2/revisions/4320/diff">diff</a>)
        <br />
        <span class="author">Added by <a class="user active" href="/users/119">Robin Mills</a> <a title="12 Jun 2016 12:17" href="/projects/exiv2/activity?from=2016-06-12">over 5 years</a> ago</span></p>
    <div class="wiki changeset-comments">
        <p><a class="issue tracker-2 status-5 priority-4 priority-default closed" title="Feature: Camera accessory overflow file (Closed)" href="/issues/1034">#1034</a> (and <a class="issue tracker-1 status-5 priority-4 priority-default closed" title="Bug: Crash while reading in parallel threads (Closed)" href="/issues/1187">#1187</a>).  Fixed buildbreaker in MinGW/configure build.</p>
    </div>
    </div>
    <div class="changeset">
    <p><a title="Revision 4330" href="/projects/exiv2/repository/exiv2/revisions/4330">Revision 4330</a>
        (<a href="/projects/exiv2/repository/exiv2/revisions/4330/diff">diff</a>)
        <br />
        <span class="author">Added by <a class="user active" href="/users/119">Robin Mills</a> <a title="14 Jun 2016 21:25" href="/projects/exiv2/activity?from=2016-06-14">over 5 years</a> ago</span></p>
    <div class="wiki changeset-comments">
        <p><a class="issue tracker-2 status-5 priority-4 priority-default closed" title="Feature: Camera accessory overflow file (Closed)" href="/issues/1034">#1034</a> and <a class="issue tracker-1 status-2 priority-4 priority-default" title="Bug: Lens not detected on Olympus E-1 (Assigned)" href="/issues/867">#867</a>.  Adding support for "Camera Overflow File" for olympus cameras.</p>
    </div>
    </div>
    <div class="changeset">
    <p><a title="Revision 4358" href="/projects/exiv2/repository/exiv2/revisions/4358">Revision 4358</a>
        (<a href="/projects/exiv2/repository/exiv2/revisions/4358/diff">diff</a>)
        <br />
        <span class="author">Added by <a class="user active" href="/users/119">Robin Mills</a> <a title="09 Aug 2016 20:55" href="/projects/exiv2/activity?from=2016-08-09">over 5 years</a> ago</span></p>
    <div class="wiki changeset-comments">
        <p><a class="issue tracker-1 status-5 priority-4 priority-default closed" title="Bug: Support for Sigma 17-70mm F2.8-4 DC Macro OS HSM | C (Closed)" href="/issues/1200">#1200</a> and <a class="issue tracker-2 status-5 priority-4 priority-default closed" title="Feature: Camera accessory overflow file (Closed)" href="/issues/1034">#1034</a>.  Adding support for ~/.exiv2 for Nikon Cameras.</p>
    </div>
    </div>

</div>



<div id="history">
<h3>History</h3>
  <div id="change-3147" class="journal has-notes">
    <div id="note-1">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-1" class="journal-link">#1</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/360">Thomas Beutlich</a> <a title="19 Feb 2015 11:10" href="/projects/exiv2/activity?from=2015-02-19">almost 7 years</a> ago
      <span id="journal-3147-private_notes" class=""></span>
    </h4>

    <div id="journal-3147-notes" class="wiki"><p>Actually the status quo is really annoying. Mots times I svn update the exiv2 repo I can see makernote updates corresponding to camera/lense changes. Since exiv2 is released very rarely this means the hard-coded camera/lense data are out of sync most of the time exiv2 is used when it comes to new camera/lense models.</p>


	<p>The enhanced feature actually is fairly simple to implement. One should decide on how to textual store the camera/lens data and how and when to read it from file. This is no big issue at all. One thing I have in mind is performance though. As a user of exiv2.lib (as opposed to exiv2.exe) (Yes, Win user I am.) I can easily life with reading the camera/lens data from file only once at the life time of the application. But having exiv2.exe as a stand-alone command-line tool reading this file with every start may decrease performance. So maybe one should think of splitting this feature for exiv2.lib and exiv2.exe.</p></div>
    </div>
  </div>
  
  <div id="change-3148" class="journal has-notes has-details">
    <div id="note-2">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-2" class="journal-link">#2</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="19 Feb 2015 14:28" href="/projects/exiv2/activity?from=2015-02-19">almost 7 years</a> ago
      <span id="journal-3148-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Target version</strong> set to <i>1.0</i></li>
    </ul>
    <div id="journal-3148-notes" class="wiki"><p>Gentlemen</p>


	<p>We make formal release about once a year.</p>


	<p>I agree that this feature is not very difficult to implement.  We have XML support provided by expat, and the v0.25 library has JSON support provided by Jzon.cpp.  The design has to be negotiated with Niels who is our makernote engineer.  And the location of the file in the file system (or registry) has to be determined.</p>


	<p>The performance issue is interesting.  If we find the accessory in the "compiled in" tables, maybe we don't need to look in the overflow file.  However there was a bug reported recently concerning two lenses having the same ID.  We could not guess which was expected by the user.  A possible fix for that is to provide the overflow file and search before checking the "compiled in" tables.  The user could modify the overflow file to force his preference.  If we adopted the "overflow first, compiled in second" design, we'd have to examine the performance implications.</p>


	<p>All team members are volunteers and have busy lives with commitments to work/family/college/what-not..  If you wish to see a feature added to the library, you are welcome to join the team and write it.  I think you'll discover that the effort to add features is more than you expect.  It has to work on all supported platforms (Mac, Linux, Cygwin, MinGW and MSVC).  You will need to add to our test suite which is written in bash.  It needs to be documented.  And you have to be willing to deal with user issues and bugs which arise.</p>


	<p>I have thought of proposing this as a GSoC project.  However, I don't have time in 2015 to be a mentor.</p>


	<p>Robin</p></div>
    </div>
  </div>
  
  <div id="change-3149" class="journal has-notes">
    <div id="note-3">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-3" class="journal-link">#3</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/360">Thomas Beutlich</a> <a title="19 Feb 2015 15:52" href="/projects/exiv2/activity?from=2015-02-19">almost 7 years</a> ago
      <span id="journal-3149-private_notes" class=""></span>
    </h4>

    <div id="journal-3149-notes" class="wiki"><p>Why 1.0? Milestone 1.0 translates to never (in my opinion as observer and part-time contribuor of exiv2). Let's see what Niels suggests for the design and discuss it here.</p></div>
    </div>
  </div>
  
  <div id="change-3150" class="journal has-notes">
    <div id="note-4">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-4" class="journal-link">#4</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="19 Feb 2015 17:04" href="/projects/exiv2/activity?from=2015-02-19">almost 7 years</a> ago
      <span id="journal-3150-private_notes" class=""></span>
    </h4>

    <div id="journal-3150-notes" class="wiki"><p>Are you offering to undertake this project?  I don't want to commit this to the v0.26 release and I haven't given a single thought to v0.27. So, I've declared it as v1.0.</p></div>
    </div>
  </div>
  
  <div id="change-3151" class="journal has-notes">
    <div id="note-5">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-5" class="journal-link">#5</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/134">Niels Kristian Bech Jensen</a> <a title="19 Feb 2015 20:37" href="/projects/exiv2/activity?from=2015-02-19">almost 7 years</a> ago
      <span id="journal-3151-private_notes" class=""></span>
    </h4>

    <div id="journal-3151-notes" class="wiki"><p>A few thoughts about this. Not a real design specification, but more like a unstructured brain-storm. I think it can be developed in two stages:</p>


	<p>1. I think such a system should be designed around XML. It is a mature and portable format (stage 1).<br />2. The text files should be considered temporary, meaning that they should be converted to source code and included in each release (stage 1).<br />3. The XML file(s) should supercede built in lens definition with same lens ID number to enable setting a "prefered lens" when several lenses share the lens same ID number (stage 1).<br />4. The XML file(s) must be placed in a standard directory structure with priority to the users home directory. On Linux/Unix systems the search order should be: ~/.local/share/exiv2, /usr/local/share/exiv2, /usr/share/exiv2. Similar standards should be followed on other systems.<br />4. Scripts for automatic conversion of XML files to source code should be developed (stage 2). Perl or Python could be used for this and the next item.<br />5. Scripts for generation of XML files from ExifTool updates should be developed (stage 2).</p>


	<p>Only camera models and lens models should be defined this way. All other metadata tags should be hardcoded for safety reasons.</p>


	<p>Please comment on this and volunteer to implement it.</p>


	<p>Best regards,<br />Niels Kristian Bech Jensen</p></div>
    </div>
  </div>
  
  <div id="change-3153" class="journal has-notes">
    <div id="note-6">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-6" class="journal-link">#6</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/360">Thomas Beutlich</a> <a title="20 Feb 2015 12:16" href="/projects/exiv2/activity?from=2015-02-20">over 6 years</a> ago
      <span id="journal-3153-private_notes" class=""></span>
    </h4>

    <div id="journal-3153-notes" class="wiki"><p>If I read it correctly you want to have the XML data on top of the hard-coded data and not instead, right?</p></div>
    </div>
  </div>
  
  <div id="change-3155" class="journal has-notes has-details">
    <div id="note-7">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-7" class="journal-link">#7</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="20 Feb 2015 13:24" href="/projects/exiv2/activity?from=2015-02-20">over 6 years</a> ago
      <span id="journal-3155-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>New</i> to <i>Assigned</i></li>
       <li><strong>Assignee</strong> set to <i>Thomas Beutlich</i></li>
       <li><strong>Target version</strong> changed from <i>1.0</i> to <i>0.26</i></li>
    </ul>
    <div id="journal-3155-notes" class="wiki"><p>I think we should use the strategy "overflow first, compiled-in second".  However I don't think we can decide that without some performance testing.</p>


	<p>I've assigned this issue to you and updated the Target to v0.26.</p></div>
    </div>
  </div>
  
  <div id="change-3157" class="journal has-notes">
    <div id="note-8">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-8" class="journal-link">#8</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/134">Niels Kristian Bech Jensen</a> <a title="20 Feb 2015 14:37" href="/projects/exiv2/activity?from=2015-02-20">over 6 years</a> ago
      <span id="journal-3157-private_notes" class=""></span>
    </h4>

    <div id="journal-3157-notes" class="wiki"><p>My idea is that the library should search the overflow files first and the hardcoded data second. For releases we will only include hardcoded data.</p>


	<p>Best regards,<br />Niels Kristian Bech Jensen</p></div>
    </div>
  </div>
  
  <div id="change-3159" class="journal has-notes">
    <div id="note-9">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-9" class="journal-link">#9</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/53">Andreas Huggel</a> <a title="23 Feb 2015 03:34" href="/projects/exiv2/activity?from=2015-02-23">over 6 years</a> ago
      <span id="journal-3159-private_notes" class=""></span>
    </h4>

    <div id="journal-3159-notes" class="wiki"><blockquote>

	<p>And the discussion here.<br /><a class="external" href="http://www.darktable.org/2015/02/on-lens-detection-and-correction/comment-page-1/#comment-42822">http://www.darktable.org/2015/02/on-lens-detection-and-correction/comment-page-1/#comment-42822</a></p>


</blockquote>

	<p>Pascal's comment you're replying to is spot-on.</p>


	<p>Re Niels' thoughts:</p>


<blockquote>

	<p>1. I think such a system should be designed around XML. It is a mature and portable format (stage 1).</p>


</blockquote>

	<p>Very much agree this should be limited to lenses. So if the format is simple, I'd prefer a simple text file that can be parsed without an XML parser. (To avoid the dependency on Expat - currently only needed for XMP - and the parsing overhead it introduces.)</p>


	<p>Besides my main concerns are</p>


	<p>a. Technical: This will require the library to perform some kind of one-time initialization, something which is ugly and hairy. We do have a precedent for that for XMP, but it's really not something I'd like to promote.<br />b. Conceptual: Chances are we won't get feedback from users anymore for lens definitions, they'll all just update their own files. So we'll rely on Exiftool completely. What if Phil adds a similar feature?</p>


<blockquote>

	<p>My idea is that the library should search the overflow files first and the hardcoded data second. For releases we will only include hardcoded data.</p>


</blockquote>

	<p>Agreed</p></div>
    </div>
  </div>
  
  <div id="change-3160" class="journal has-notes">
    <div id="note-10">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-10" class="journal-link">#10</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4350">Tobias Jakobs</a> <a title="23 Feb 2015 09:47" href="/projects/exiv2/activity?from=2015-02-23">over 6 years</a> ago
      <span id="journal-3160-private_notes" class=""></span>
    </h4>

    <div id="journal-3160-notes" class="wiki"><blockquote>

	<p>b. Conceptual: Chances are we won't get feedback from users anymore for lens definitions, they'll all just update their own files. So we'll rely on Exiftool completely.</p>


</blockquote>

	<p>This is of cause pure guessing and I would expect the opposite. I expect more users to contribute new lenses, because they can test it directly and benefit faster. I wrote the long version of this argument here:<br /><a class="external" href="http://www.darktable.org/2015/02/on-lens-detection-and-correction/comment-page-1/#comment-42822">http://www.darktable.org/2015/02/on-lens-detection-and-correction/comment-page-1/#comment-42822</a></p>


	<p>At the moment I, as a user, have to wait ~1 year or longer to get benefit from a bugreport with a new lens. (New exiv2 version + new distribution version) I think in Exiftool I can very easily add a lens to the Perl file. (Not tested, my lens was already there.)</p></div>
    </div>
  </div>
  
  <div id="change-3161" class="journal has-notes">
    <div id="note-11">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-11" class="journal-link">#11</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/3595">Torsten Bronger</a> <a title="23 Feb 2015 15:01" href="/projects/exiv2/activity?from=2015-02-23">over 6 years</a> ago
      <span id="journal-3161-private_notes" class=""></span>
    </h4>

    <div id="journal-3161-notes" class="wiki"><p>Is it at all possible to map exiv2's lens detection data to a not-too-complicated XML schema?  As a related question, are we talking about moving the whole of exiv2's lens detection data into external text files, or only about infrastructure to add simple cases ad hoc?</p></div>
    </div>
  </div>
  
  <div id="change-3162" class="journal has-notes">
    <div id="note-12">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-12" class="journal-link">#12</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/134">Niels Kristian Bech Jensen</a> <a title="23 Feb 2015 16:02" href="/projects/exiv2/activity?from=2015-02-23">over 6 years</a> ago
      <span id="journal-3162-private_notes" class=""></span>
    </h4>

    <div id="journal-3162-notes" class="wiki"><p>It is meant as an ad hoc solution to add new lenses between releases.</p>


	<p>Best regards,<br />Niels Kristian Bech Jensen</p></div>
    </div>
  </div>
  
  <div id="change-3166" class="journal has-notes">
    <div id="note-13">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-13" class="journal-link">#13</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="25 Feb 2015 11:49" href="/projects/exiv2/activity?from=2015-02-25">over 6 years</a> ago
      <span id="journal-3166-private_notes" class=""></span>
    </h4>

    <div id="journal-3166-notes" class="wiki"><p>Here's another idea to consider for v0.25+.</p>


	<p>We can create a new branch 'stable' which will begin life as a copy of v0.25.  When any maker-note code is modified on 'trunk', the same code is synced on 'stable'.  Anybody can download and build 'stable' during the life of v0.25 and get the latest makernote updates.  The 'overflow' file isn't needed.  And ... (drum roll) we can bring this to life as soon as v0.25 is published (taa-raa).  This doesn't conflict with adding the 'overflow' file feature in v0.26.</p>


	<p>As we now have a Jenkins build server (<a class="external" href="http://exiv2.dyndns.org:8080">http://exiv2.dyndns.org:8080</a>) we can publish the latest binary build of 'stable' for download by anybody.  For applications which use Exiv2 dynamic libraries, it's possible to 'patch' the application by downloading the built library.</p>


	<p>This doesn't put a burden on Niels to keep trunk/makernotes -> stable/makernotes in perfect sync.  There are only 11 makernote .cpp/.hpp file pairs and if we forget to sync a file occasionally, it will 'catch up' later.  To relieve Niels of the sync burden, I can add a script to Jenkins to promote trunk/makernotes -> stable.  To ensure quality, the build server builds and runs the test suite on all monitored branches. <pre>638 rmills@rmillsmm:~/gnu/exiv2/foo/trunk $ finder "*mn*" | rev | sort | rev
./src/sigmamn.cpp
./src/minoltamn.cpp
./src/panasonicmn.cpp
./src/samsungmn.cpp
./src/fujimn.cpp
./src/nikonmn.cpp
./src/canonmn.cpp
./src/casiomn.cpp
./src/olympusmn.cpp
./src/pentaxmn.cpp
./src/sonymn.cpp

./src/tiffmn-test.cpp

./src/sigmamn_int.hpp
./src/minoltamn_int.hpp
./src/panasonicmn_int.hpp
./src/samsungmn_int.hpp
./src/fujimn_int.hpp
./src/nikonmn_int.hpp
./src/canonmn_int.hpp
./src/casiomn_int.hpp
./src/olympusmn_int.hpp
./src/pentaxmn_int.hpp
./src/sonymn_int.hpp
639 rmills@rmillsmm:~/gnu/exiv2/foo/trunk $ </pre>Comments Welcome.</p></div>
    </div>
  </div>
  
  <div id="change-3254" class="journal has-notes">
    <div id="note-14">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-14" class="journal-link">#14</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/360">Thomas Beutlich</a> <a title="23 Mar 2015 22:42" href="/projects/exiv2/activity?from=2015-03-23">over 6 years</a> ago
      <span id="journal-3254-private_notes" class=""></span>
    </h4>

    <div id="journal-3254-notes" class="wiki"><p>Robin, does this really mean that stable binaries of library and command line tool are released (and provided by official distro repos like OpenSuse etc.) every time a maker note changes? Or does it mean that the source is provided and users can use and build them on their own?</p></div>
    </div>
  </div>
  
  <div id="change-3259" class="journal has-notes">
    <div id="note-15">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-15" class="journal-link">#15</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="23 Mar 2015 23:15" href="/projects/exiv2/activity?from=2015-03-23">over 6 years</a> ago
      <span id="journal-3259-private_notes" class=""></span>
    </h4>

    <div id="journal-3259-notes" class="wiki"><p>Well, the long term plan is to add the 'overflow' file.  However that's not going to be available until v0.26 which hopefully will ship in 2016.  Niels has explained how the 'overflow' file will work after v0.26 ships.</p>


	<p>v0.26 is quite a long way off.  At the moment, I can't even say when v0.25 will ship.  I don't have credentials for exiv2.org, so I have to wait for the Exiv2 Release Engineers (Andreas and Shawn) to make that release.</p>


	<p>However, I'm suggesting that v0.25 can have simple "dot releases" only involving makernote changes.  We can have a very high confidence that the quality of v0.25.n = v0.25.0 if we only automatically sync changes to the above files into the "dot" branch.</p>


	<p>This is just a suggestion.  Thanks for asking for clarification.  As nobody else has commented, I don't know if my suggestion is:</p>


	<ul>
	<li>Not understoood</li>
		<li>Everybody's too busy to think about this</li>
		<li>Stupid and everybody's too polite to say so</li>
		<li>Something else!</li>
	</ul>


	<p>However the intent would be that we would have lots of v0.25 "dot" releases.  Any "dot" could be picked up by Suse etc.  Every distro would have the latest makernote changes on the day they collect our code.</p></div>
    </div>
  </div>
  
  <div id="change-4585" class="journal has-notes">
    <div id="note-16">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-16" class="journal-link">#16</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="27 Dec 2015 12:48" href="/projects/exiv2/activity?from=2015-12-27">almost 6 years</a> ago
      <span id="journal-4585-private_notes" class=""></span>
    </h4>

    <div id="journal-4585-notes" class="wiki"><p>I've had a new idea about this while working on the camera lens issues such as <a class="issue tracker-1 status-5 priority-4 priority-default closed" title="Bug: Unable to extract embedded preview from jpg for Sony a77 (Closed)" href="/issues/1143">#1143</a> and <a class="issue tracker-2 status-5 priority-4 priority-default closed" title="Feature: Respect Sony/Minolta lenses with shared LensID such as Tamron SP AF 17-50mm F2.8 XR Di II LD (Closed)" href="/issues/1145">#1145</a>.</p>


	<p>We don't need an overflow file!  We can have an SQL server on the internet and when an unidentified lens appears, libexiv2 can send a request using HTTP (which is part of all versions of libexiv2) along the lines of:<pre>SELECT LensID where Exif.Image.Model = 'NIKON D5300' [AND key relop value]+"</pre>By adopting such an architecture we:</p>


	<ol>
	<li>Don't need an overflow file on the user's computer</li>
		<li>We don't need dot releases with new lenses/accessories/cameras</li>
		<li>Failing to identify a lens (or returning multiple lenses) can be logged so that the database notifies us of new devices</li>
	</ol>


</pre>This solves the file format issue.  We store the Lens database in an open-source database (such as MySQL).  We might get lucky and be able to convert Phil's code and/or web site into SQL Tables.

	<p>This could be an interesting project.  Perhaps we can get a Student from GSoC 2016 to implement this.</p></div>
    </div>
  </div>
  
  <div id="change-4608" class="journal has-notes">
    <div id="note-17">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-17" class="journal-link">#17</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="28 Dec 2015 22:22" href="/projects/exiv2/activity?from=2015-12-28">almost 6 years</a> ago
      <span id="journal-4608-private_notes" class=""></span>
    </h4>

    <div id="journal-4608-notes" class="wiki"><p>And here's another even simpler solution.  exiftool understands .exv files (exiv2 extracted metadata files).  If we don't know the lens, we can send the .exv file to an http server (such as exiv2.org) that has a CGI script to run exiftool on the .exv file.  So simple.  It's 100% cross platform because our http code is already cross platform.  So we set this up and live happily ever after.  We inherit all the wonderful work done by Phil and have no maintenance effort.  No files on the client computer.  No horrible dos box on Windows.  No need for the client to install exiftool.  And, we register failures and send the metadata to Phil - so he learns about new devices.</p></div>
    </div>
  </div>
  
  <div id="change-4628" class="journal has-notes has-details">
    <div id="note-18">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-18" class="journal-link">#18</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="02 Jan 2016 23:41" href="/projects/exiv2/activity?from=2016-01-02">almost 6 years</a> ago
      <span id="journal-4628-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Assignee</strong> changed from <i>Thomas Beutlich</i> to <i>Robin Mills</i></li>
       <li><strong>% Done</strong> changed from <i>0</i> to <i>10</i></li>
       <li><strong>Estimated time</strong> set to <i>50.00 h</i></li>
    </ul>
    <div id="journal-4628-notes" class="wiki"><p>I'm going to take on this challenge.  It's not very difficult.  We have:<br />1) extract the .exv from the image and send it to the server<br />2) On the server, run exiftool on the .exv and transmit it to the client</p>


	<p>To achieve this:</p>


	<p>1) To transmit a .exv file to a server:<pre>curl --silent --data-binary @Stonehenge.exv 'http://klanmills/exiftool.pl'</pre>2) The cgi script to respond:<pre>#!/usr/bin/perl

my $length = int $ENV{CONTENT_LENGTH};
my $exv;
read(STDIN, $exv,$length);

##
#  $q is both the request and response!
use  CGI qw(:standard);
my   $q       = CGI-&gt;new;
my   @request = $q-&gt;http();

# are we a CGI script?
if ( scalar(@request) ) {
    ##
    # announce ourselves
    print $q-&gt;header(-expires=&gt;'+0s') ;

    ##
    # save the payload
    my $filename = '/tmp/exiftool.exv';
    open(my $fh, '&gt;', $filename) or die "Could not open file '$filename' $!";
    binmode($fh);
    syswrite $fh,$exv,$length;
    close $fh;

    ##
    # run exiftool on the payload
    print $q-&gt;header(-expires=&gt;'+0s') ;
    system("/usr/local/bin/exiftool -j $filename");
}

# that's all Folks!
##</pre>Obviously there are packaging and error handling matters to fix.  However it doesn't look difficult.</p>


	<p>Initially exiftool.pl can reside on clanmills.com or exiv2.dyndns.org.  I'll provide an environment variable to redefine the server.  Eg:<pre>export EXIV2_EXIFTOOL=http://clanmills.com/exiftool.pl</pre>I will ask Phil about using his code in this way.  As the cgi script is written in Perl, there will be a more efficient way than system() to invoke exiftool.</p></div>
    </div>
  </div>
  
  <div id="change-4852" class="journal has-notes">
    <div id="note-19">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-19" class="journal-link">#19</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="23 Mar 2016 09:00" href="/projects/exiv2/activity?from=2016-03-23">over 5 years</a> ago
      <span id="journal-4852-private_notes" class=""></span>
    </h4>

    <div id="journal-4852-notes" class="wiki"><p>I'm going to add the following to v0.26.  The user can put the file .exiv2 (in .ini format) in their home directory to define a new lens:</p>


	<p>[canon]<br />169=Sigma 35mm F1.4 DG HSM ART</p>


	<p>Exiv2 will consult that file and use definitions in preference to what's compiled into the library.  Let's not discuss the performance implication.  I'll find a way to make it very fast (don't read if not necessary, then read/cache).</p></div>
    </div>
  </div>
  
  <div id="change-4860" class="journal has-notes has-details">
    <div id="note-20">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-20" class="journal-link">#20</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="25 Mar 2016 08:13" href="/projects/exiv2/activity?from=2016-03-25">over 5 years</a> ago
      <span id="journal-4860-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>% Done</strong> changed from <i>10</i> to <i>30</i></li>
    </ul>
    <div id="journal-4860-notes" class="wiki"><p><a class="changeset" title="#1034  Added exiv2 config file support for lens recognition." href="/projects/exiv2/repository/exiv2/revisions/4249">r4249</a> Add 'overflow' file.  exiv2 --verbose --version reports the path.  Currently this is only used by canonmn.cpp.</p>


	<p>The MSVC builds the path is <span>HOMEDIR</span>\exiv2.ini and ~/.exiv2 for others builds.</p></div>
    </div>
  </div>
  
  <div id="change-5040" class="journal has-notes has-details">
    <div id="note-21">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-21" class="journal-link">#21</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="07 May 2016 16:55" href="/projects/exiv2/activity?from=2016-05-07">over 5 years</a> ago
      <span id="journal-5040-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>% Done</strong> changed from <i>30</i> to <i>40</i></li>
    </ul>
    <div id="journal-5040-notes" class="wiki"><p>Added support ~/.exiv2 for Nikon and Pentax cameras</p></div>
    </div>
  </div>
  
  <div id="change-5042" class="journal has-notes has-details">
    <div id="note-22">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-22" class="journal-link">#22</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="07 May 2016 18:47" href="/projects/exiv2/activity?from=2016-05-07">over 5 years</a> ago
      <span id="journal-5042-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>% Done</strong> changed from <i>40</i> to <i>50</i></li>
    </ul>
    <div id="journal-5042-notes" class="wiki"><p><a class="changeset" title="#1034 Sony and Minolta support for ~/.exiv2" href="/projects/exiv2/repository/exiv2/revisions/4301">r4301</a>.  Added sony and minolta support to ~/.exiv2</p></div>
    </div>
  </div>
  
  <div id="change-5169" class="journal has-notes has-details">
    <div id="note-23">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-23" class="journal-link">#23</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="14 Jun 2016 21:32" href="/projects/exiv2/activity?from=2016-06-14">over 5 years</a> ago
      <span id="journal-5169-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>Assigned</i> to <i>Closed</i></li>
       <li><strong>% Done</strong> changed from <i>50</i> to <i>100</i></li>
       <li><strong>Estimated time</strong> changed from <i>50.00 h</i> to <i>30.00 h</i></li>
    </ul>
    <div id="journal-5169-notes" class="wiki"><p><a class="changeset" title="#1034 and #867.  Adding support for &quot;Camera Overflow File&quot; for olympus cameras." href="/projects/exiv2/repository/exiv2/revisions/4330">r4330</a> Added olympus support to ~/.exiv2</p>


	<p>Support for "camera overflow file" has been added in v0.26 for the following cameras:</p>


	<ol>
	<li>Canon</li>
		<li>Minolta (Sony)</li>
		<li>Nikon</li>
		<li>Olympus</li>
		<li>Pentax</li>
	</ol>


	<p>I'm reducing the scope of this feature for v0.26.  The web-service feature has been partially developed and documented here, however I'm not going to develop it for v0.26.  I'm intending to get a <em><strong>GSoC</strong></em> student in 2017 to work on <a class="issue tracker-2 status-2 priority-4 priority-default" title="Feature: Better raw file support and test (Assigned)" href="/issues/992">#992</a> Raw Image Support.  Let's wait to see how that develops to see if the exiftool web service is required after that work has been completed.</p></div>
    </div>
  </div>
  
  <div id="change-5476" class="journal has-notes">
    <div id="note-24">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-24" class="journal-link">#24</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="28 Aug 2016 07:07" href="/projects/exiv2/activity?from=2016-08-28">about 5 years</a> ago
      <span id="journal-5476-private_notes" class=""></span>
    </h4>

    <div id="journal-5476-notes" class="wiki"><p>In a conversation with Martin, he raised the subject of line-endings in ~/.exiv2  <a class="external" href="http://dev.exiv2.org/issues/1212#note-13">http://dev.exiv2.org/issues/1212#note-13</a></p>


	<p>The code uses library function <em><strong><code>fgets(...)</code></strong></em> to read lines from the .ini file.  On the Mac, that handles UNIX (\n) and Windows (\r\n) and doesn't handle Mac (\r) lines. MSVC, Cygwin and Linux behave the same.</p>


	<p>The code in src/ini.cpp code can use a local function instead of <em><strong><code>fgets(...)</code></strong></em>.  I'm not going to do anything about this for v0.26 and probably never will.  The "Mac Legacy \r" line-ending is a long buried relic.  In the process of testing line endings on Linux, I consulted the man page for unix2dos and unix2mac.  Gosh, there's a mine-field of ways to complicate this file including character sets, BOM markers and all manner of stuff.  This feature works well enough on "simple/plain" Unix and DOS files.</p></div>
    </div>
  </div>
  


</div>

<div style="clear: both;"></div>
<div class="contextual">





</div>


<div style="clear: both;"></div>


<p class="other-formats">Also available in:  <span><a class="atom" rel="nofollow" href="/issues/1034.atom">Atom</a></span>
  <span><a class="pdf" rel="nofollow" href="/issues/1034.pdf">PDF</a></span>
</p>





        
        <div style="clear:both;"></div>
    </div>
</div>
</div>

<div id="ajax-indicator" style="display:none;"><span>Loading...</span></div>
<div id="ajax-modal" style="display:none;"></div>

<div id="footer">
  <div class="bgl"><div class="bgr">
    Powered by <a href="https://www.redmine.org/">Redmine</a> &copy; 2006-2018 Jean-Philippe Lang
  </div></div>
</div>
</div>
</div>

</body>
</html>
