<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<title>Bug #1144: Sigma 10-20mm f/4-5.6 EX DC is detected as Tamaron  - Exiv2</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="description" content="Redmine" />
<meta name="keywords" content="issue,bug,tracker" />
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="g4CeWcNfw96/rIQ9LSBXf8qHxeNr6pcjEbe+yVQKtTthzTW2sSUP3urImzGS91tM9RWRmpoJNpnsly5BFzNSVA==" />
<link rel='shortcut icon' href='/favicon.ico?1550767427' />
<link rel="stylesheet" media="all" href="/stylesheets/jquery/jquery-ui-1.11.0.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/application.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/responsive.css?1550767427" />

<script src="/javascripts/jquery-1.11.1-ui-1.11.0-ujs-4.3.1.js?1550767427"></script>
<script src="/javascripts/application.js?1550767427"></script>
<script src="/javascripts/responsive.js?1550767427"></script>
<script>
//<![CDATA[
$(window).load(function(){ warnLeavingUnsaved('The current page contains unsaved text that will be lost if you leave this page.'); });
//]]>
</script>


<!-- page specific tags -->
    <link rel="alternate" type="application/atom+xml" title="Exiv2 - Bug #1144: Sigma 10-20mm f/4-5.6 EX DC is detected as Tamaron " href="https://dev.exiv2.org/issues/1144.atom" />
<script src="/javascripts/context_menu.js?1550767427"></script><link rel="stylesheet" media="screen" href="/stylesheets/context_menu.css?1550767427" /></head>
<body class="project-exiv2 has-main-menu controller-issues action-show avatars-off">

<div id="wrapper">

<div class="flyout-menu js-flyout-menu">


        <div class="flyout-menu__search">
            <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
            <input type="hidden" name="issues" value="1" />
            <label class="search-magnifier search-magnifier--flyout" for="flyout-search">&#9906;</label>
            <input type="text" name="q" id="flyout-search" class="small js-search-input" placeholder="Search" />
</form>        </div>


        <h3>Project</h3>
        <span class="js-project-menu"></span>

    <h3>General</h3>
    <span class="js-general-menu"></span>

    <span class="js-sidebar flyout-menu__sidebar"></span>

    <h3>Profile</h3>
    <span class="js-profile-menu"></span>

</div>

<div id="wrapper2">
<div id="wrapper3">
<div id="top-menu">
    <div id="account">
        <ul><li><a class="login" href="/login">Sign in</a></li></ul>    </div>
    
    <ul><li><a class="home" href="/">Home</a></li><li><a class="projects" href="/projects">Projects</a></li><li><a class="help" href="https://www.redmine.org/guide">Help</a></li></ul></div>

<div id="header">

    <a href="#" class="mobile-toggle-button js-flyout-menu-toggle-button"></a>

    <div id="quick-search">
        <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
        <input type="hidden" name="scope" />
        <input type="hidden" name="issues" value="1" />
        <label for='q'>
          <a accesskey="4" href="/projects/exiv2/search">Search</a>:
        </label>
        <input type="text" name="q" id="q" size="20" class="small" accesskey="f" />
</form>        <div id="project-jump" class="drdn"><span class="drdn-trigger">Exiv2</span><div class="drdn-content"><div class="quick-search"><input type="text" name="q" id="projects-quick-search" value="" class="autocomplete" data-automcomplete-url="/projects/autocomplete.js?jump=issues" autocomplete="off" /></div><div class="drdn-items projects selection"></div><div class="drdn-items all-projects selection"><a href="/projects?jump=issues">All Projects</a></div></div></div>
    </div>

    <h1><span class="current-project">Exiv2</span></h1>

    <div id="main-menu" class="tabs">
        <ul><li><a class="overview" href="/projects/exiv2">Overview</a></li><li><a class="activity" href="/projects/exiv2/activity">Activity</a></li><li><a class="roadmap" href="/projects/exiv2/roadmap">Roadmap</a></li><li><a class="issues selected" href="/projects/exiv2/issues">Issues</a></li><li><a class="news" href="/projects/exiv2/news">News</a></li><li><a class="wiki" href="/projects/exiv2/wiki">Wiki</a></li><li><a class="boards" href="/projects/exiv2/boards">Forums</a></li><li><a class="repository" href="/projects/exiv2/repository">Repository</a></li></ul>
        <div class="tabs-buttons" style="display:none;">
            <button class="tab-left" onclick="moveTabLeft(this); return false;"></button>
            <button class="tab-right" onclick="moveTabRight(this); return false;"></button>
        </div>
    </div>
</div>

<div id="main" class="">
    <div id="sidebar">
          <h3>Issues</h3>

<ul>
<li><a href="/projects/exiv2/issues?set_filter=1">View all issues</a></li>
<li><a href="/projects/exiv2/issues/report">Summary</a></li>

</ul>









        
    </div>

    <div id="content">
        
        <div class="contextual">





</div>


<h2>Bug #1144</h2>

<div class="issue tracker-1 status-5 priority-4 priority-default closed details">

  <div class="gravatar-with-child">
    
    
  </div>

<div class="subject">
<div><h3>Sigma 10-20mm f/4-5.6 EX DC is detected as Tamaron </h3></div>
</div>
        <p class="author">
        Added by <a class="user active" href="/users/3328">Simon Harhues</a> <a title="26 Dec 2015 21:53" href="/projects/exiv2/activity?from=2015-12-26">almost 6 years</a> ago.
        Updated <a title="01 Feb 2016 11:33" href="/projects/exiv2/activity?from=2016-02-01">almost 6 years</a> ago.
        </p>

<div class="attributes">
<div class="splitcontent"><div class="splitcontentleft"><div class="status attribute"><div class="label">Status:</div><div class="value">Closed</div></div><div class="priority attribute"><div class="label">Priority:</div><div class="value">Normal</div></div><div class="assigned-to attribute"><div class="label">Assignee:</div><div class="value"><a class="user active" href="/users/119">Robin Mills</a></div></div><div class="category attribute"><div class="label">Category:</div><div class="value">lens</div></div><div class="fixed-version attribute"><div class="label">Target version:</div><div class="value"><a title="28 Apr 2017" href="/versions/52">0.26</a></div></div></div><div class="splitcontentleft"><div class="start-date attribute"><div class="label">Start date:</div><div class="value">26 Dec 2015</div></div><div class="due-date attribute"><div class="label">Due date:</div><div class="value"></div></div><div class="progress attribute"><div class="label">% Done:</div><div class="value"><table class="progress progress-100"><tr><td style="width: 100%;" class="closed" title="100%"></td></tr></table><p class="percent">100%</p></div></div><div class="estimated-hours attribute"><div class="label">Estimated time:</div><div class="value">4.00 h</div></div></div></div>


</div>

<hr />
<div class="description">
  <div class="contextual">
  
  </div>

  <p><strong>Description</strong></p>
  <div class="wiki">
  <p>As Christmas is nearly over, so here is another bug in current trunk. I shot the attached photo with a <br /><pre>Sigma 10-20mm f/4-5.6 EX DC</pre> using a Pentax K10 body.<br />But looking at exiv2 it is recognised wrongly: <br /><pre>
simon@vmubuntu1510:/tmp/fotos/101_2212$ exiv2 --version
exiv2 0.25 001900 (64 bit build)
Copyright (C) 2004-2015 Andreas Huggel.

Dieses Programm ist freie Software. Sie können es weitergeben und/oder
verändern unter den Bedingungen der GNU General Public Lizenz, die von
der Free Software Foundation veröffentlicht wurde. Gültig ist die Version 2
der Lizenz oder, wenn Sie es wünschen, spätere Versionen.

Dieses Programm wird Ihnen in der Hoffnung zur Verfügung gestellt,
das Sie es brauchbar finden. Es gibt KEINE GARANTIE, noch nicht mal
eine implizite Zusicherung allgemeiner Gebrauchstauglichkeit oder der
Zusicherung der erforderlichen Gebrauchstauglichkeit. Weitere Details
finden Sie in der GNU General Public Lizenz.

Sie sollten mit diesem Programm eine Kopie der GNU General Public
Lizenz bekommen haben. Falls nicht, so wenden Sie sich bitte an die
Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
Boston, MA 02110-1301 USA
simon@vmubuntu1510:/tmp/fotos/101_2212$ exiv2 -pt _IGP9302.DNG | grep Lens
Exif.PentaxDng.LensType                      Byte        3  Tamron 35-90mm F4 AF
Exif.PentaxDng.LensInfo                      Undefined  69  131 0 0 44 0 40 148 55 134 102 102 234 65 108 170 80 56 1 78 108 3 255 255 255 0 0 102 102 234 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
simon@vmubuntu1510:/tmp/fotos/101_2212$ 
</pre><br />If you need any further information from me let me know.</p>
  </div>
</div>
  <hr />
  <p><strong>Files</strong></p>
  <div class="attachments">
<div class="contextual">
  
</div>
<table>
<tr>
  <td>
    <a class="icon icon-attachment" href="/attachments/872">_IGP9302.DNG</a>    <span class="size">(16.1 MB)</span>
    <a class="icon-only icon-download" title="Download" href="/attachments/download/872/_IGP9302.DNG">_IGP9302.DNG</a>  </td>
  <td>raw photo taken with a Sigma lens</td>
  <td>
      <span class="author">Simon Harhues, 26 Dec 2015 21:53</span>
  </td>
  <td>
  </td>
</tr>
</table>
</div>







<hr />
<div id="relations">
<div class="contextual">
</div>

<p><strong>Related issues</strong></p>

<form data-cm-url="/issues/context_menu" action="/issues/1144" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><input type="hidden" name="authenticity_token" value="bZ6AXZ1cQnmd++2rWHQsA7E98WXCkIzAUhDTctGp5rCP0yuy7yaOecif8qfnoyAwjq+lHDNzLXqvMEP6kpAB3w==" />
  <table class="list issues odd-even"><tr id="relation-190" class="issue hascontextmenu issue tracker-1 status-5 priority-4 priority-default closed"><td class="checkbox"><input type="checkbox" name="ids[]" value="1143" /></td><td class="subject" style="width: 50%">Related to Exiv2 - <a class="issue tracker-1 status-5 priority-4 priority-default closed" href="/issues/1143">Bug #1143</a>: Unable to extract embedded preview from jpg for Sony a77</td><td class="status">Closed</td><td class="start_date">24 Dec 2015</td><td class="due_date"></td><td class="done_ratio"><table class="progress progress-100"><tr><td style="width: 100%;" class="closed" title="100%"></td></tr></table><p class="percent"></p></td><td class="buttons"><a title="Actions" class="icon-only icon-actions js-contextmenu" href="#">Actions</a></td></tr><tr id="relation-193" class="issue hascontextmenu issue tracker-2 status-5 priority-4 priority-default closed"><td class="checkbox"><input type="checkbox" name="ids[]" value="1145" /></td><td class="subject" style="width: 50%">Related to Exiv2 - <a class="issue tracker-2 status-5 priority-4 priority-default closed" href="/issues/1145">Feature #1145</a>: Respect Sony/Minolta lenses with shared LensID such as Tamron SP AF 17-50mm F2.8 XR Di II LD</td><td class="status">Closed</td><td class="start_date">27 Dec 2015</td><td class="due_date"></td><td class="done_ratio"><table class="progress progress-100"><tr><td style="width: 100%;" class="closed" title="100%"></td></tr></table><p class="percent"></p></td><td class="buttons"><a title="Actions" class="icon-only icon-actions js-contextmenu" href="#">Actions</a></td></tr></table>
</form>
<form class="new_relation" id="new-relation-form" style="display: none;" action="/issues/1144/relations" accept-charset="UTF-8" data-remote="true" method="post"><input name="utf8" type="hidden" value="&#x2713;" />


<p><select onchange="setPredecessorFieldsVisibility();" name="relation[relation_type]" id="relation_relation_type"><option selected="selected" value="relates">Related to</option>
<option value="duplicates">Is duplicate of</option>
<option value="duplicated">Has duplicate</option>
<option value="blocks">Blocks</option>
<option value="blocked">Blocked by</option>
<option value="precedes">Precedes</option>
<option value="follows">Follows</option>
<option value="copied_to">Copied to</option>
<option value="copied_from">Copied from</option></select>
Issue #<input size="10" type="text" name="relation[issue_to_id]" id="relation_issue_to_id" />
<span id="predecessor_fields" style="display:none;">
Delay: <input size="3" type="text" name="relation[delay]" id="relation_delay" /> days
</span>
<input type="submit" name="commit" value="Add" data-disable-with="Add" />
<a href="#" onclick="$(&quot;#new-relation-form&quot;).hide();; return false;">Cancel</a>
</p>

<script>
//<![CDATA[
observeAutocompleteField('relation_issue_to_id', '/issues/auto_complete?issue_id=1144&project_id=exiv2&scope=all')
//]]>
</script>

<script>
//<![CDATA[
setPredecessorFieldsVisibility();
//]]>
</script>

</form>
</div>

</div>

<div id="issue-changesets">
<h3>Associated revisions</h3>
    <div class="changeset">
    <p><a title="Revision 4151" href="/projects/exiv2/repository/exiv2/revisions/4151">Revision 4151</a>
        (<a href="/projects/exiv2/repository/exiv2/revisions/4151/diff">diff</a>)
        <br />
        <span class="author">Added by <a class="user active" href="/users/119">Robin Mills</a> <a title="27 Dec 2015 18:29" href="/projects/exiv2/activity?from=2015-12-27">almost 6 years</a> ago</span></p>
    <div class="wiki changeset-comments">
        <p><a class="issue tracker-1 status-5 priority-4 priority-default closed" title="Bug: Sigma 10-20mm f/4-5.6 EX DC is detected as Tamaron  (Closed)" href="/issues/1144">#1144</a> Fix submitted.  <a class="changeset" title="#1109.  Documentation update.  daily build uses cmakeBuildAll to generate 12 Visual Studio builds." href="/projects/exiv2/repository/exiv2/revisions/4147">r4147</a>.</p>
    </div>
    </div>
    <div class="changeset">
    <p><a title="Revision 4152" href="/projects/exiv2/repository/exiv2/revisions/4152">Revision 4152</a>
        (<a href="/projects/exiv2/repository/exiv2/revisions/4152/diff">diff</a>)
        <br />
        <span class="author">Added by <a class="user active" href="/users/119">Robin Mills</a> <a title="27 Dec 2015 19:28" href="/projects/exiv2/activity?from=2015-12-27">almost 6 years</a> ago</span></p>
    <div class="wiki changeset-comments">
        <p><a class="issue tracker-1 status-5 priority-4 priority-default closed" title="Bug: Sigma 10-20mm f/4-5.6 EX DC is detected as Tamaron  (Closed)" href="/issues/1144">#1144</a>.  Correction to <a class="changeset" title="#1144 Fix submitted.  r4147." href="/projects/exiv2/repository/exiv2/revisions/4151">r4151</a> and update to test suite.</p>
    </div>
    </div>
    <div class="changeset">
    <p><a title="Revision 4153" href="/projects/exiv2/repository/exiv2/revisions/4153">Revision 4153</a>
        (<a href="/projects/exiv2/repository/exiv2/revisions/4153/diff">diff</a>)
        <br />
        <span class="author">Added by <a class="user active" href="/users/119">Robin Mills</a> <a title="28 Dec 2015 06:24" href="/projects/exiv2/activity?from=2015-12-28">almost 6 years</a> ago</span></p>
    <div class="wiki changeset-comments">
        <p><a class="issue tracker-1 status-5 priority-4 priority-default closed" title="Bug: Sigma 10-20mm f/4-5.6 EX DC is detected as Tamaron  (Closed)" href="/issues/1144">#1144</a> Fix submitted.  Thank You, Simon for the test files on dropbox.  I have extracted the metadata and added it to the test suite.</p>
    </div>
    </div>

</div>



<div id="history">
<h3>History</h3>
  <div id="change-4579" class="journal has-notes has-details">
    <div id="note-1">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-1" class="journal-link">#1</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="26 Dec 2015 22:27" href="/projects/exiv2/activity?from=2015-12-26">almost 6 years</a> ago
      <span id="journal-4579-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>New</i> to <i>Assigned</i></li>
       <li><strong>Assignee</strong> set to <i>Robin Mills</i></li>
       <li><strong>Target version</strong> set to <i>0.26</i></li>
       <li><strong>Estimated time</strong> set to <i>3.00 h</i></li>
    </ul>
    <div id="journal-4579-notes" class="wiki"><p>Thanks, Simon.  I think this is quite easy.  It's another variant of <a class="issue tracker-2 status-5 priority-4 priority-default closed" title="Feature: Enable detection of Sigma 55-200mm lens (Closed)" href="/issues/816">#816</a> - so I know what to do and I'll fix it in the next day or two (I'm working on a Sony/Minolta puzzle at the moment <a class="issue tracker-1 status-5 priority-4 priority-default closed" title="Bug: Unable to extract embedded preview from jpg for Sony a77 (Closed)" href="/issues/1143">#1143</a>).  Can you take a look in src/pentaxmn.cpp.  You'll see the "duplicate" lens groups like this:<pre>        { 0x0317, "smc PENTAX-F 100-300mm F4.5-5.6" },                   //0
        { 0x0317, "Sigma AF 28-300mm F3.5-6.3 DG IF Macro" },            //1
        { 0x0317, "Tokina 80-200mm F2.8 ATX-Pro" },                      //2
        { 0x0318, "smc PENTAX-F 35-135mm F3.5-4.5" },
        { 0x0319, "smc PENTAX-F 35-105mm F4-5.6" },                      //0
        { 0x0319, "Sigma AF 28-300mm F3.5-5.6 DL IF" },                  //1
        { 0x0319, "Sigma 55-200mm F4-5.6 DC" },                          //2
        { 0x0319, "Sigma AF 28-300mm F3.5-5.6 DL IF" },                  //3
        { 0x0319, "Sigma AF 28-300mm F3.5-6.3 DG IF Macro" },            //4
        { 0x0319, "Tokina 80-200mm F2.8 ATX-Pro" },                      //5
        { 0x031a, "smc PENTAX-F* 250-600mm F5.6 ED[IF]" },
        { 0x031b, "smc PENTAX-F 28-80mm F3.5-4.5" },                     //0
        { 0x031b, "Tokina AT-X Pro AF 28-70mm F2.6-2.8" },               //1
        { 0x031c, "smc PENTAX-F 35-70mm F3.5-4.5" },                     //0
        { 0x031c, "Tokina 19-35mm F3.5-4.5 AF" },                        //1
        { 0x031c, "Tokina AT-X AF 400mm F5.6" },                         //2
        { 0x031d, "PENTAX-F 28-80mm F3.5-4.5" },                         //0
        { 0x031d, "Sigma AF 18-125mm F3.5-5.6 DC" },                     //1
        { 0x031d, "Tokina AT-X PRO 28-70mm F2.6-2.8" },                  //2
        { 0x031e, "PENTAX-F 70-200mm F4-5.6" },
        { 0x031f, "smc PENTAX-F 70-210mm F4-5.6" },                      //0
        { 0x031f, "Tokina AF 730 75-300mm F4.5-5.6" },                   //1
        { 0x031f, "Takumar-F 70-210mm F4-5.6" },                         //2
        { 0x0320, "smc PENTAX-F 50mm F1.4" },
        { 0x0321, "smc PENTAX-F 50mm F1.7" },
        { 0x0322, "smc PENTAX-F 135mm F2.8 [IF]" },
        { 0x0323, "smc PENTAX-F 28mm F2.8" },
        { 0x0324, "Sigma 20mm F1.8 EX DG Aspherical RF" },
        { 0x0326, "smc PENTAX-F* 300mm F4.5 ED[IF]" },
        { 0x0327, "smc PENTAX-F* 600mm F4 ED[IF]" },
        { 0x0328, "smc PENTAX-F Macro 100mm F2.8" },
        { 0x0329, "smc PENTAX-F Macro 50mm F2.8" },                      //0
        { 0x0329, "Sigma 50mm F2.8 Macro" },                             //1
        { 0x032a, "Sigma 300mm F2.8 EX DG APO IF" },
        { 0x032c, "Tamron 35-90mm F4 AF" },                              //0
        { 0x032c, "Sigma AF 10-20mm F4-5.6 EX DC" },                     //1
        { 0x032c, "Sigma 12-24mm F4.5-5.6 EX DG" },                      //2
        { 0x032c, "Sigma 17-70mm F2.8-4.5 DC Macro" },                   //3
        { 0x032c, "Sigma 18-50mm F3.5-5.6 DC" },                         //4
        { 0x032e, "Sigma or Samsung Lens" },                             //0
        { 0x032e, "Sigma APO 70-200mm F2.8 EX" },                        //1
        { 0x032e, "Sigma EX APO 100-300mm F4 IF" },                      //2
        { 0x032e, "Samsung/Schneider D-XENON 50-200mm F4-5.6 ED" },      //3
        { 0x0332, "smc PENTAX-FA 28-70mm F4 AL" },
        { 0x0333, "Sigma 28mm F1.8 EX DG Aspherical Macro" },
        { 0x0334, "smc PENTAX-FA 28-200mm F3.8-5.6 AL[IF]" },            //0
        { 0x0334, "Tamron AF LD 28-200mm F3.8-5.6 [IF] Aspherical (171D)" },//1
        { 0x0335, "smc PENTAX-FA 28-80mm F3.5-5.6 AL" },
        { 0x03f7, "smc PENTAX-DA FISH-EYE 10-17mm F3.5-4.5 ED[IF]" },
        { 0x03f8, "smc PENTAX-DA 12-24mm F4 ED AL[IF]" },
        { 0x03fa, "smc PENTAX-DA 50-200mm F4-5.6 ED" },
        { 0x03fb, "smc PENTAX-DA 40mm F2.8 Limited" },
        { 0x03fc, "smc PENTAX-DA 18-55mm F3.5-5.6 AL" },
        { 0x03fd, "smc PENTAX-DA 14mm F2.8 ED[IF]" },
        { 0x03fe, "smc PENTAX-DA 16-45mm F4 ED AL" },
        { 0x03ff, "Sigma Lens" },                                        //0
        { 0x03ff, "Sigma 18-200mm F3.5-6.3 DC" },                        //1
        { 0x03ff, "Sigma DL-II 35-80mm F4-5.6" },                        //2
        { 0x03ff, "Sigma DL Zoom 75-300mm F4-5.6" },                     //3
        { 0x03ff, "Sigma DF EX Aspherical 28-70mm F2.8" },               //4
        { 0x03ff, "Sigma AF Tele 400mm F5.6 Multi-coated" },             //5
        { 0x03ff, "Sigma 24-60mm F2.8 EX DG" },                          //6
        { 0x03ff, "Sigma 70-300mm F4-5.6 Macro" },                       //7
        { 0x03ff, "Sigma 55-200mm F4-5.6 DC" },                          //8
        { 0x03ff, "Sigma 18-50mm F2.8 EX DC" },                          //9
        { 0x03ff, "Sigma 18-50mm F2.8 EX DC Macro" },                    //10</pre>There are more than those.  I haven't listed them all.  If you have any of these lenses for any of your cameras, can you take a photo and attach the image to this issue and I'll clear them up.</p>


	<p>What's going on here is that there are several lenses that share the same LensID.  For example 0x3ff is shared by at least 9 known lenses.  There's special code to deduce the lens by sniffing other metadata such as MaxAperture.</p>


	<p>I'm travelling ground already tramped by Phil Harvey in exiftool.  I've been thinking that when I encounter these, maybe I should just call exiftool and get the answer.  Cheating?  Maybe.  Simple and effective?  Yes on Linux and Mac.  Windows will probably throw a horrible dos box onto the screen - however I might be able to get Windows to throw the dos box onto an invisible desktop and hide the perl from the user.</p></div>
    </div>
  </div>
  
  <div id="change-4580" class="journal has-notes">
    <div id="note-2">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-2" class="journal-link">#2</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="26 Dec 2015 22:38" href="/projects/exiv2/activity?from=2015-12-26">almost 6 years</a> ago
      <span id="journal-4580-private_notes" class=""></span>
    </h4>

    <div id="journal-4580-notes" class="wiki"><p>Oh, another little point.  When you send the version information, could you include the svn number.  Like this:<pre>$ exiv2 --verbose --version --grep svn
exiv2 0.25 001900 (64 bit build)
svn=4146
$ </pre>You'll discover that <pre>$ exiv2 --verbose --version</pre>prints lot of stuff about the build and run-time environment.  You can use grep multiple times to filter date/time and other stuff.  For example to show me when you built the library and the libraries that have been loaded at run time:<pre>$ exiv2 --verbose --version --grep svn --grep date --grep time --grep version --grep library
exiv2 0.25 001900 (64 bit build)
version=4.2.1 Compatible Apple LLVM 7.0.2 (clang-700.1.81)
date=Dec 26 2015
time=11:36:17
svn=4146
id=$Id: version.cpp 4075 2015-12-08 09:27:38Z robinwmills $
library=/usr/local/lib/libexiv2.14.dylib
library=/usr/local/lib/libintl.8.dylib
library=/usr/lib/libSystem.B.dylib
library=/usr/lib/libiconv.2.dylib
library=/usr/local/lib/libz.1.dylib
library=/usr/local/lib/libexpat.1.dylib
library=/usr/lib/libc++.1.dylib
library=/System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation
...
library=/usr/lib/libz.1.dylib
have_gmtime_r=1
have_timegm=1
xmlns=mediapro:http://ns.iview-multimedia.com/mediapro/1.0/
749 rmills@rmillsmbp:~/gnu/exiv2/trunk $ </pre>So now you know that I was working on <a class="issue tracker-1 status-5 priority-4 priority-default closed" title="Bug: Unable to extract embedded preview from jpg for Sony a77 (Closed)" href="/issues/1143">#1143</a> this morning at 11:36.  I also worked on it on Christmas Day.  Don't know why I put so much effort into this.  Maybe it's because I enjoy it!<br /><img src="http://clanmills.com/Exiv2Facebook.png" alt="" /></p></div>
    </div>
  </div>
  
  <div id="change-4591" class="journal has-notes">
    <div id="note-3">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-3" class="journal-link">#3</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/3328">Simon Harhues</a> <a title="27 Dec 2015 18:08" href="/projects/exiv2/activity?from=2015-12-27">almost 6 years</a> ago
      <span id="journal-4591-private_notes" class=""></span>
    </h4>

    <div id="journal-4591-notes" class="wiki"><p>I went through the file looking at the ambiguous entries, but believe I didn't find any other lens I have at hand atm beside the here mentioned Sigma 10-20mm and the Sigma 55-200mm from <a class="issue tracker-2 status-5 priority-4 priority-default closed" title="Feature: Enable detection of Sigma 55-200mm lens (Closed)" href="/issues/816">#816</a>.</p>


	<p>I did find a duplicated list entry though -- maybe one line can be removed:<br />line 709: { 0x0319, "Sigma AF 28-300mm F3.5-5.6 DL IF" },                  //1<br />line 711: { 0x0319, "Sigma AF 28-300mm F3.5-5.6 DL IF" },                  //3</p>


	<p>Thanks for you effort!</p></div>
    </div>
  </div>
  
  <div id="change-4592" class="journal has-notes has-details">
    <div id="note-4">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-4" class="journal-link">#4</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="27 Dec 2015 19:43" href="/projects/exiv2/activity?from=2015-12-27">almost 6 years</a> ago
      <span id="journal-4592-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>% Done</strong> changed from <i>0</i> to <i>80</i></li>
    </ul>
    <div id="journal-4592-notes" class="wiki"><p>OK.  I think I've got that fixed.  <a class="changeset" title="#1144.  Correction to r4151 and update to test suite." href="/projects/exiv2/repository/exiv2/revisions/4152">r4152</a>.  Run some tests and let me know if/when you find something.  You'll probably be interested in <a class="issue tracker-2 status-5 priority-4 priority-default closed" title="Feature: Respect Sony/Minolta lenses with shared LensID such as Tamron SP AF 17-50mm F2.8 XR Di II LD (Closed)" href="/issues/1145">#1145</a> which is something similar for the Sony/Minolta cameras.  Michael has given me some images for various Tamron lenses and that will keep my busy tomorrow!</p>


	<p>I'm sure you are correct and one of the duplicates on either 709 or 711 can be removed.  However I didn't write this code, so I'm going to leave those records in place.</p>


	<p>Michael originally reported something much more complex <a class="issue tracker-1 status-5 priority-4 priority-default closed" title="Bug: Unable to extract embedded preview from jpg for Sony a77 (Closed)" href="/issues/1143">#1143</a> which contains a "hidden" preview.  I'm not going to get that fixed tomorrow.  I'll have to think more about the hidden preview.  However I think the lens identification is much the same as the matters you've raised here and <a class="changeset" title="New TIFF parser: Extract TIFF thumbnail from IFD1 if there is one." href="/projects/exiv2/repository/exiv2/revisions/816">r816</a>.</p>


	<p>Incidentally, we have a long standing idea to have an "overflow" file: <a class="changeset" title="Added remaining makernote tests." href="/projects/exiv2/repository/exiv2/revisions/1034">r1034</a>.  Working on <a class="changeset" title="New TIFF parser: Extract TIFF thumbnail from IFD1 if there is one." href="/projects/exiv2/repository/exiv2/revisions/816">r816</a>, <a class="changeset" title="Tagged release 0.15" href="/projects/exiv2/repository/exiv2/revisions/1145">r1145</a> and this (<a class="changeset" title="Documented and partly automated build of commercial version." href="/projects/exiv2/repository/exiv2/revisions/1144">r1144</a>) has caused me to rethink the solution for the "overflow" file.  So this has been very useful - both for you and for the Exiv2 project.</p>


	<p>As before, I've extracted the metadata from _IGP9302.DNG into test/data/exiv2-bug1144.exv and used it as a regression detector in our test suite:<pre>$ exiv2 -pa --grep Lens/i test/data/exiv2-bug{816a,1144}.exv 
test/data/exiv2-bug816a.exv  Exif.Pentax.LensType                 Byte        2  Sigma 55-200mm F4-5.6 DC
test/data/exiv2-bug816a.exv  Exif.Pentax.LensInfo                 Undefined  36  3 255 0 0 40 148 71 152 80 6 241 65 ...
test/data/exiv2-bug1144.exv  Exif.PentaxDng.LensType              Byte        3  Sigma AF 10-20mm F4-5.6 EX DC
data/exiv2-bug1144.exv  Exif.PentaxDng.LensInfo                   Undefined  69  131 0 0 44 0 40 148 55 134 102 102 234  ...
$ </pre></p></div>
    </div>
  </div>
  
  <div id="change-4595" class="journal has-notes">
    <div id="note-5">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-5" class="journal-link">#5</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/3328">Simon Harhues</a> <a title="27 Dec 2015 22:12" href="/projects/exiv2/activity?from=2015-12-27">almost 6 years</a> ago
      <span id="journal-4595-private_notes" class=""></span>
    </h4>

    <div id="journal-4595-notes" class="wiki"><p>Thanks for the fast reply, I hope your family doesn't get angry with me/the exiv2 project.<br />I did as you told. And I'm feeling sorry for Michael, but I believe this issue is unfortunately not fixed yet. I uploaded some more pictures taken by the Sigma 10-20mm lens to <a class="external" href="https://www.dropbox.com/sh/zb7cb5o71u8p1dz/AABIQetKGrhzncDaP-aHMtCja?dl=0">https://www.dropbox.com/sh/zb7cb5o71u8p1dz/AABIQetKGrhzncDaP-aHMtCja?dl=0</a> and tested it against<br /><pre>
exiv2 0.25 001900 (64 bit build)
svn=4025
</pre><br />(thanks for the --verbose and --grep svn info btw. Generally I do a fresh checkout just before I test and report back here; but as often in life, better have information than guess :) )<br />Here is the result:<br /><pre>
./IMGP2248.PEF nok
./IMGP2247.JPG nok
./IMGP2246.JPG nok
./_IGP9302.DNG ok
./_IGP9303.DNG nok
./IMGP2247.PEF nok
./IMGP2248.JPG nok
./_IGP9301.DNG nok
./IMGP2246.PEF nok
</pre><br />Looks pretty sad to me. You know my sentence already: Feel free to use the photos for further tests. If you need more test data let me know (I only have access to that lens for another week or so).</p></div>
    </div>
  </div>
  
  <div id="change-4597" class="journal has-notes">
    <div id="note-6">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-6" class="journal-link">#6</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="27 Dec 2015 22:50" href="/projects/exiv2/activity?from=2015-12-27">almost 6 years</a> ago
      <span id="journal-4597-private_notes" class=""></span>
    </h4>

    <div id="journal-4597-notes" class="wiki"><p>Thanks for testing this and providing the test files.  I'm confident that we'll get this resolved tomorrow.  And probably Michael's <a class="issue tracker-2 status-5 priority-4 priority-default closed" title="Feature: Respect Sony/Minolta lenses with shared LensID such as Tamron SP AF 17-50mm F2.8 XR Di II LD (Closed)" href="/issues/1145">#1145</a> also.  Michael's little horror with the hidden preview is something else, however I'll put him to the sword in 2015!</p>


	<p>I think my wife is quite happy that I keep busy and quiet!  I am retired and happy to potter about on Exiv2.  Mind you on busy weeks, it feels like a full time unpaid job.</p></div>
    </div>
  </div>
  
  <div id="change-4598" class="journal has-notes">
    <div id="note-7">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-7" class="journal-link">#7</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="28 Dec 2015 06:30" href="/projects/exiv2/activity?from=2015-12-28">almost 6 years</a> ago
      <span id="journal-4598-private_notes" class=""></span>
    </h4>

    <div id="journal-4598-notes" class="wiki"><p>Fix submitted.  <a class="changeset" title="#1144 Fix submitted.  Thank You, Simon for the test files on dropbox.  I have extracted the metad..." href="/projects/exiv2/repository/exiv2/revisions/4153">r4153</a>.  Thank You, Simon for the test files you sent via Dropbox.  I've extracted the metadata and added it to the test suite. <pre>$ exiv2 -pa --grep Lens/i --grep Photo.FocalLength/i ~/Downloads/exiv2-1144/* 
/Users/rmills/Downloads/exiv2-1144/IMGP2246.JPG  Exif.Photo.FocalLength              Rational    1  10.0 mm
/Users/rmills/Downloads/exiv2-1144/IMGP2246.JPG  Exif.PentaxDng.LensType             Byte        4  Sigma AF 10-20mm F4-5.6 EX DC
/Users/rmills/Downloads/exiv2-1144/IMGP2246.JPG  Exif.PentaxDng.LensInfo             Undefined 128  0 131 128 0 0 44 0 80 0 0 ...
/Users/rmills/Downloads/exiv2-1144/IMGP2246.JPG  Exif.Photo.FocalLengthIn35mmFilm    Short       1  15.0 mm
/Users/rmills/Downloads/exiv2-1144/IMGP2246.PEF  Exif.Photo.FocalLength              Rational    1  10.0 mm
/Users/rmills/Downloads/exiv2-1144/IMGP2246.PEF  Exif.PentaxDng.LensType             Byte        4  Sigma AF 10-20mm F4-5.6 EX DC
/Users/rmills/Downloads/exiv2-1144/IMGP2246.PEF  Exif.PentaxDng.LensInfo             Undefined 128  0 131 128 0 0 44 0 80 0 0 ...
/Users/rmills/Downloads/exiv2-1144/IMGP2246.PEF  Exif.Photo.FocalLengthIn35mmFilm    Short       1  15.0 mm
/Users/rmills/Downloads/exiv2-1144/IMGP2247.JPG  Exif.Photo.FocalLength              Rational    1  18.0 mm
/Users/rmills/Downloads/exiv2-1144/IMGP2247.JPG  Exif.PentaxDng.LensType             Byte        4  Sigma AF 10-20mm F4-5.6 EX DC
/Users/rmills/Downloads/exiv2-1144/IMGP2247.JPG  Exif.PentaxDng.LensInfo             Undefined 128  0 131 128 0 0 44 0 140 0 0 ...
/Users/rmills/Downloads/exiv2-1144/IMGP2247.JPG  Exif.Photo.FocalLengthIn35mmFilm    Short       1  27.0 mm
/Users/rmills/Downloads/exiv2-1144/IMGP2247.PEF  Exif.Photo.FocalLength              Rational    1  18.0 mm
/Users/rmills/Downloads/exiv2-1144/IMGP2247.PEF  Exif.PentaxDng.LensType             Byte        4  Sigma AF 10-20mm F4-5.6 EX DC
/Users/rmills/Downloads/exiv2-1144/IMGP2247.PEF  Exif.PentaxDng.LensInfo             Undefined 128  0 131 128 0 0 44 0 140 0 0 ...
/Users/rmills/Downloads/exiv2-1144/IMGP2247.PEF  Exif.Photo.FocalLengthIn35mmFilm    Short       1  27.0 mm
/Users/rmills/Downloads/exiv2-1144/IMGP2248.JPG  Exif.Photo.FocalLength              Rational    1  20.0 mm
/Users/rmills/Downloads/exiv2-1144/IMGP2248.JPG  Exif.PentaxDng.LensType             Byte        4  Sigma AF 10-20mm F4-5.6 EX DC
/Users/rmills/Downloads/exiv2-1144/IMGP2248.JPG  Exif.PentaxDng.LensInfo             Undefined 128  0 131 128 0 0 44 0 160 0 0 ...
/Users/rmills/Downloads/exiv2-1144/IMGP2248.JPG  Exif.Photo.FocalLengthIn35mmFilm    Short       1  30.0 mm
/Users/rmills/Downloads/exiv2-1144/IMGP2248.PEF  Exif.Photo.FocalLength              Rational    1  20.0 mm
/Users/rmills/Downloads/exiv2-1144/IMGP2248.PEF  Exif.PentaxDng.LensType             Byte        4  Sigma AF 10-20mm F4-5.6 EX DC
/Users/rmills/Downloads/exiv2-1144/IMGP2248.PEF  Exif.PentaxDng.LensInfo             Undefined 128  0 131 128 0 0 44 0 160 0 0 ...
/Users/rmills/Downloads/exiv2-1144/IMGP2248.PEF  Exif.Photo.FocalLengthIn35mmFilm    Short       1  30.0 mm
/Users/rmills/Downloads/exiv2-1144/_IGP9301.DNG  Exif.Photo.FocalLength              Rational    1  10.0 mm
/Users/rmills/Downloads/exiv2-1144/_IGP9301.DNG  Exif.Photo.FocalLengthIn35mmFilm    Short       1  15.0 mm
/Users/rmills/Downloads/exiv2-1144/_IGP9301.DNG  Exif.PentaxDng.LensType             Byte        3  Sigma AF 10-20mm F4-5.6 EX DC
/Users/rmills/Downloads/exiv2-1144/_IGP9301.DNG  Exif.PentaxDng.LensInfo             Undefined  69  131 0 0 44 0 40 148 54 99 83 ...
/Users/rmills/Downloads/exiv2-1144/_IGP9302.DNG  Exif.Photo.FocalLength              Rational    1  17.0 mm
/Users/rmills/Downloads/exiv2-1144/_IGP9302.DNG  Exif.Photo.FocalLengthIn35mmFilm    Short       1  25.0 mm
/Users/rmills/Downloads/exiv2-1144/_IGP9302.DNG  Exif.PentaxDng.LensType             Byte        3  Sigma AF 10-20mm F4-5.6 EX DC
/Users/rmills/Downloads/exiv2-1144/_IGP9302.DNG  Exif.PentaxDng.LensInfo             Undefined  69  131 0 0 44 0 40 148 55 134 ...
/Users/rmills/Downloads/exiv2-1144/_IGP9303.DNG  Exif.Photo.FocalLength              Rational    1  20.0 mm
/Users/rmills/Downloads/exiv2-1144/_IGP9303.DNG  Exif.Photo.FocalLengthIn35mmFilm    Short       1  30.0 mm
/Users/rmills/Downloads/exiv2-1144/_IGP9303.DNG  Exif.PentaxDng.LensType             Byte        3  Sigma AF 10-20mm F4-5.6 EX DC
/Users/rmills/Downloads/exiv2-1144/_IGP9303.DNG  Exif.PentaxDng.LensInfo             Undefined  69  131 0 0 44 0 40 148 55 98 ...
1309 rmills@rmillsmbp:~/gnu/exiv2/trunk $ </pre></p></div>
    </div>
  </div>
  
  <div id="change-4603" class="journal has-notes">
    <div id="note-8">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-8" class="journal-link">#8</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/3328">Simon Harhues</a> <a title="28 Dec 2015 21:00" href="/projects/exiv2/activity?from=2015-12-28">almost 6 years</a> ago
      <span id="journal-4603-private_notes" class=""></span>
    </h4>

    <div id="journal-4603-notes" class="wiki"><p>Thanks for the fix. I did a couple of more test shots with the Sigma lens and all were correctly recognised. From my side you can close this issue.</p></div>
    </div>
  </div>
  
  <div id="change-4606" class="journal has-notes has-details">
    <div id="note-9">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-9" class="journal-link">#9</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="28 Dec 2015 21:16" href="/projects/exiv2/activity?from=2015-12-28">almost 6 years</a> ago
      <span id="journal-4606-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>% Done</strong> changed from <i>80</i> to <i>100</i></li>
       <li><strong>Estimated time</strong> changed from <i>3.00 h</i> to <i>4.00 h</i></li>
    </ul>
    <div id="journal-4606-notes" class="wiki"><p>I'm going to set this to 100% Resolved which means, I don't intend further work on this subject.</p>


	<p>If something does occur, please update this issue and I will investigate.  If nothing has happened after about a month, I'll close this.  Even when closed, you can update an issue report - however it's better to open a new issue and mention this issue report.</p>


	<p>Here's the bill for my help: I'd like you to visit OpenHub.net and register (it's free). Give the Exiv2 project a great rating and give me kudos.</p>


	<p>Exiv2: <a class="external" href="https://www.openhub.net/p/exiv2">https://www.openhub.net/p/exiv2</a><br />Clanmills: <a class="external" href="https://www.openhub.net/p/exiv2/contributors/60065117754297">https://www.openhub.net/p/exiv2/contributors/60065117754297</a></p>


	<p><img src="http://exiv2.org/Exiv2Logo.png" alt="" /></p></div>
    </div>
  </div>
  
  <div id="change-4774" class="journal has-details">
    <div id="note-10">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-10" class="journal-link">#10</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="01 Feb 2016 11:33" href="/projects/exiv2/activity?from=2016-02-01">almost 6 years</a> ago
      <span id="journal-4774-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>Assigned</i> to <i>Closed</i></li>
    </ul>
    
    </div>
  </div>
  


</div>

<div style="clear: both;"></div>
<div class="contextual">





</div>


<div style="clear: both;"></div>


<p class="other-formats">Also available in:  <span><a class="atom" rel="nofollow" href="/issues/1144.atom">Atom</a></span>
  <span><a class="pdf" rel="nofollow" href="/issues/1144.pdf">PDF</a></span>
</p>





        
        <div style="clear:both;"></div>
    </div>
</div>
</div>

<div id="ajax-indicator" style="display:none;"><span>Loading...</span></div>
<div id="ajax-modal" style="display:none;"></div>

<div id="footer">
  <div class="bgl"><div class="bgr">
    Powered by <a href="https://www.redmine.org/">Redmine</a> &copy; 2006-2018 Jean-Philippe Lang
  </div></div>
</div>
</div>
</div>

</body>
</html>
