<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<title>Support #929: Support Panasonic Makernote - Exiv2</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="description" content="Redmine" />
<meta name="keywords" content="issue,bug,tracker" />
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="nfeTO54lovXytVd0+QngDetpqT1ca2SglO9NkJMcc5V/ujjU7F9u9afRSHhG3uw+1Pv9RK2IxRppz90Y0CWU+g==" />
<link rel='shortcut icon' href='/favicon.ico?1550767427' />
<link rel="stylesheet" media="all" href="/stylesheets/jquery/jquery-ui-1.11.0.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/application.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/responsive.css?1550767427" />

<script src="/javascripts/jquery-1.11.1-ui-1.11.0-ujs-4.3.1.js?1550767427"></script>
<script src="/javascripts/application.js?1550767427"></script>
<script src="/javascripts/responsive.js?1550767427"></script>
<script>
//<![CDATA[
$(window).load(function(){ warnLeavingUnsaved('The current page contains unsaved text that will be lost if you leave this page.'); });
//]]>
</script>


<!-- page specific tags -->
    <link rel="alternate" type="application/atom+xml" title="Exiv2 - Support #929: Support Panasonic Makernote" href="https://dev.exiv2.org/issues/929.atom" />
<script src="/javascripts/context_menu.js?1550767427"></script><link rel="stylesheet" media="screen" href="/stylesheets/context_menu.css?1550767427" /></head>
<body class="project-exiv2 has-main-menu controller-issues action-show avatars-off">

<div id="wrapper">

<div class="flyout-menu js-flyout-menu">


        <div class="flyout-menu__search">
            <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
            <input type="hidden" name="issues" value="1" />
            <label class="search-magnifier search-magnifier--flyout" for="flyout-search">&#9906;</label>
            <input type="text" name="q" id="flyout-search" class="small js-search-input" placeholder="Search" />
</form>        </div>


        <h3>Project</h3>
        <span class="js-project-menu"></span>

    <h3>General</h3>
    <span class="js-general-menu"></span>

    <span class="js-sidebar flyout-menu__sidebar"></span>

    <h3>Profile</h3>
    <span class="js-profile-menu"></span>

</div>

<div id="wrapper2">
<div id="wrapper3">
<div id="top-menu">
    <div id="account">
        <ul><li><a class="login" href="/login">Sign in</a></li></ul>    </div>
    
    <ul><li><a class="home" href="/">Home</a></li><li><a class="projects" href="/projects">Projects</a></li><li><a class="help" href="https://www.redmine.org/guide">Help</a></li></ul></div>

<div id="header">

    <a href="#" class="mobile-toggle-button js-flyout-menu-toggle-button"></a>

    <div id="quick-search">
        <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
        <input type="hidden" name="scope" />
        <input type="hidden" name="issues" value="1" />
        <label for='q'>
          <a accesskey="4" href="/projects/exiv2/search">Search</a>:
        </label>
        <input type="text" name="q" id="q" size="20" class="small" accesskey="f" />
</form>        <div id="project-jump" class="drdn"><span class="drdn-trigger">Exiv2</span><div class="drdn-content"><div class="quick-search"><input type="text" name="q" id="projects-quick-search" value="" class="autocomplete" data-automcomplete-url="/projects/autocomplete.js?jump=issues" autocomplete="off" /></div><div class="drdn-items projects selection"></div><div class="drdn-items all-projects selection"><a href="/projects?jump=issues">All Projects</a></div></div></div>
    </div>

    <h1><span class="current-project">Exiv2</span></h1>

    <div id="main-menu" class="tabs">
        <ul><li><a class="overview" href="/projects/exiv2">Overview</a></li><li><a class="activity" href="/projects/exiv2/activity">Activity</a></li><li><a class="roadmap" href="/projects/exiv2/roadmap">Roadmap</a></li><li><a class="issues selected" href="/projects/exiv2/issues">Issues</a></li><li><a class="news" href="/projects/exiv2/news">News</a></li><li><a class="wiki" href="/projects/exiv2/wiki">Wiki</a></li><li><a class="boards" href="/projects/exiv2/boards">Forums</a></li><li><a class="repository" href="/projects/exiv2/repository">Repository</a></li></ul>
        <div class="tabs-buttons" style="display:none;">
            <button class="tab-left" onclick="moveTabLeft(this); return false;"></button>
            <button class="tab-right" onclick="moveTabRight(this); return false;"></button>
        </div>
    </div>
</div>

<div id="main" class="">
    <div id="sidebar">
          <h3>Issues</h3>

<ul>
<li><a href="/projects/exiv2/issues?set_filter=1">View all issues</a></li>
<li><a href="/projects/exiv2/issues/report">Summary</a></li>

</ul>









        
    </div>

    <div id="content">
        
        <div class="contextual">





</div>


<h2>Support #929</h2>

<div class="issue tracker-3 status-5 priority-4 priority-default closed details">

  <div class="gravatar-with-child">
    
    
  </div>

<div class="subject">
<div><h3>Support Panasonic Makernote</h3></div>
</div>
        <p class="author">
        Added by <a class="user active" href="/users/3996">Nicolas Nicofo</a> <a title="22 Oct 2013 10:22" href="/projects/exiv2/activity?from=2013-10-22">about 8 years</a> ago.
        Updated <a title="21 Jun 2015 16:42" href="/projects/exiv2/activity?from=2015-06-21">over 6 years</a> ago.
        </p>

<div class="attributes">
<div class="splitcontent"><div class="splitcontentleft"><div class="status attribute"><div class="label">Status:</div><div class="value">Closed</div></div><div class="priority attribute"><div class="label">Priority:</div><div class="value">Normal</div></div><div class="assigned-to attribute"><div class="label">Assignee:</div><div class="value"><a class="user active" href="/users/134">Niels Kristian Bech Jensen</a></div></div><div class="category attribute"><div class="label">Category:</div><div class="value">metadata</div></div><div class="fixed-version attribute"><div class="label">Target version:</div><div class="value"><a title="17 May 2015" href="/versions/51">0.25</a></div></div></div><div class="splitcontentleft"><div class="start-date attribute"><div class="label">Start date:</div><div class="value">22 Oct 2013</div></div><div class="due-date attribute"><div class="label">Due date:</div><div class="value">08 Sep 2014</div></div><div class="progress attribute"><div class="label">% Done:</div><div class="value"><table class="progress progress-100"><tr><td style="width: 100%;" class="closed" title="100%"></td></tr></table><p class="percent">100%</p></div></div><div class="estimated-hours attribute"><div class="label">Estimated time:</div><div class="value"></div></div></div></div>


</div>

<hr />
<div class="description">
  <div class="contextual">
  
  </div>

  <p><strong>Description</strong></p>
  <div class="wiki">
  <p>There are a lot of Panasonic exif tags that are not visible using exiv2 (or are not correctly displayed).<br />- Example of such jpg picture: <a class="external" href="http://nicofo.tuxfamily.org/tmp/panasonic-tz40-GPSinfo.JPG">http://nicofo.tuxfamily.org/tmp/panasonic-tz40-GPSinfo.JPG</a><br />- Panasonic tags displayed using exiv2 (as shown by digikam, using libexiv2): <a class="external" href="http://nicofo.tuxfamily.org/tmp/Screenshot_Digikam.jpg">http://nicofo.tuxfamily.org/tmp/Screenshot_Digikam.jpg</a><br />- Panasonic tags displayed by other software that deal correctly with Panasonic exif tags (like exiftool or ExifView (available on android)): <a class="external" href="http://nicofo.tuxfamily.org/tmp/Screenshot_ExifViewer(Android).jpg">http://nicofo.tuxfamily.org/tmp/Screenshot_ExifViewer(Android).jpg</a></p>


	<p>As you can see,<br />- missing tags include country name, city, landmark, etc...<br />- tags not correctly displayed include 'Baby Age' ("9999 .." instead of nothing) ; 'Time since power on' ("14987" instead of "149,87 sec") ; ...</p>


	<p>Thanks in advance to take these tags into account.</p>


	<p>&lt;Remark: bug initially reported on digikam bugzilla: <a class="external" href="https://bugs.kde.org/show_bug.cgi?id=326409">https://bugs.kde.org/show_bug.cgi?id=326409</a> &gt;</p>
  </div>
</div>
  <hr />
  <p><strong>Files</strong></p>
  <div class="attachments">
<div class="contextual">
  
</div>
<table>
<tr>
  <td>
    <a class="icon icon-attachment" href="/attachments/569">panasonicmn.cpp.patch</a>    <span class="size">(20.6 KB)</span>
    <a class="icon-only icon-download" title="Download" href="/attachments/download/569/panasonicmn.cpp.patch">panasonicmn.cpp.patch</a>  </td>
  <td>Patch</td>
  <td>
      <span class="author">T Modes, 29 Oct 2013 12:45</span>
  </td>
  <td>
  </td>
</tr>
<tr>
  <td>
    <a class="icon icon-attachment" href="/attachments/571">panasonicmn.cpp.patch</a>    <span class="size">(22.6 KB)</span>
    <a class="icon-only icon-download" title="Download" href="/attachments/download/571/panasonicmn.cpp.patch">panasonicmn.cpp.patch</a>  </td>
  <td>Updated patch</td>
  <td>
      <span class="author">T Modes, 30 Oct 2013 09:25</span>
  </td>
  <td>
  </td>
</tr>
<tr>
  <td>
    <a class="icon icon-attachment" href="/attachments/573">panasonicmn.cpp.patch</a>    <span class="size">(28.4 KB)</span>
    <a class="icon-only icon-download" title="Download" href="/attachments/download/573/panasonicmn.cpp.patch">panasonicmn.cpp.patch</a>  </td>
  <td>Further updated patch</td>
  <td>
      <span class="author">T Modes, 31 Oct 2013 08:19</span>
  </td>
  <td>
  </td>
</tr>
<tr>
  <td>
    <a class="icon icon-attachment" href="/attachments/575">panasonicmn.cpp.patch</a>    <span class="size">(31.5 KB)</span>
    <a class="icon-only icon-download" title="Download" href="/attachments/download/575/panasonicmn.cpp.patch">panasonicmn.cpp.patch</a>  </td>
  <td>Further extended patch</td>
  <td>
      <span class="author">T Modes, 09 Nov 2013 02:01</span>
  </td>
  <td>
  </td>
</tr>
<tr>
  <td>
    <a class="icon icon-attachment" href="/attachments/576">panasonicmn.cpp.patch</a>    <span class="size">(32.1 KB)</span>
    <a class="icon-only icon-download" title="Download" href="/attachments/download/576/panasonicmn.cpp.patch">panasonicmn.cpp.patch</a>  </td>
  <td>Improved patch: numbers added for duplicated tags</td>
  <td>
      <span class="author">Nicolas Nicofo, 16 Nov 2013 14:09</span>
  </td>
  <td>
  </td>
</tr>
<tr>
  <td>
    <a class="icon icon-attachment" href="/attachments/579">panasonicmn.cpp.patch</a>    <span class="size">(34.7 KB)</span>
    <a class="icon-only icon-download" title="Download" href="/attachments/download/579/panasonicmn.cpp.patch">panasonicmn.cpp.patch</a>  </td>
  <td>Further extended patch, v2</td>
  <td>
      <span class="author">T Modes, 04 Dec 2013 11:14</span>
  </td>
  <td>
  </td>
</tr>
<tr>
  <td>
    <a class="icon icon-attachment" href="/attachments/593">Panasonic_-_AdvancedSceneMode.ods</a>    <span class="size">(6.2 KB)</span>
    <a class="icon-only icon-download" title="Download" href="/attachments/download/593/Panasonic_-_AdvancedSceneMode.ods">Panasonic_-_AdvancedSceneMode.ods</a>  </td>
  <td>AdvancedSceneMode values (tags 0x003d and 0x8001)</td>
  <td>
      <span class="author">Nicolas Nicofo, 08 Jan 2014 14:21</span>
  </td>
  <td>
  </td>
</tr>
<tr>
  <td>
    <a class="icon icon-attachment" href="/attachments/594">panasonicmn.cpp.patch</a>    <span class="size">(35.3 KB)</span>
    <a class="icon-only icon-download" title="Download" href="/attachments/download/594/panasonicmn.cpp.patch">panasonicmn.cpp.patch</a>  </td>
  <td>Numbers added for duplicated tags and baby_age_1|2 swapped</td>
  <td>
      <span class="author">Nicolas Nicofo, 08 Jan 2014 14:23</span>
  </td>
  <td>
  </td>
</tr>
<tr>
  <td>
    <a class="icon icon-attachment" href="/attachments/635">panasonicmn.cpp.patch</a>    <span class="size">(35.2 KB)</span>
    <a class="icon-only icon-download" title="Download" href="/attachments/download/635/panasonicmn.cpp.patch">panasonicmn.cpp.patch</a>  </td>
  <td>updated patch</td>
  <td>
      <span class="author">Nicolas Nicofo, 13 Aug 2014 15:09</span>
  </td>
  <td>
  </td>
</tr>
</table>
</div>








</div>

<div id="issue-changesets">
<h3>Associated revisions</h3>
    <div class="changeset">
    <p><a title="Revision 3357" href="/projects/exiv2/repository/exiv2/revisions/3357">Revision 3357</a>
        (<a href="/projects/exiv2/repository/exiv2/revisions/3357/diff">diff</a>)
        <br />
        <span class="author">Added by <a class="user active" href="/users/134">Niels Kristian Bech Jensen</a> <a title="07 Sep 2014 20:57" href="/projects/exiv2/activity?from=2014-09-07">about 7 years</a> ago</span></p>
    <div class="wiki changeset-comments">
        <p>Fix issues <a class="issue tracker-3 status-5 priority-4 priority-default closed" title="Support: Support Panasonic Makernote (Closed)" href="/issues/929">#929</a> and <a class="issue tracker-4 status-5 priority-4 priority-default closed" title="Patch: Update Panasonic EXIF Information (Closed)" href="/issues/972">#972</a>: Improve Panasonic makernotes support. Thanks goes to numerous people for patches and input.</p>
    </div>
    </div>

</div>



<div id="history">
<h3>History</h3>
  <div id="change-2646" class="journal has-notes has-details">
    <div id="note-1">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-1" class="journal-link">#1</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4008">T Modes</a> <a title="29 Oct 2013 12:45" href="/projects/exiv2/activity?from=2013-10-29">about 8 years</a> ago
      <span id="journal-2646-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>File</strong> <a href="/attachments/569">panasonicmn.cpp.patch</a> <a class="icon-only icon-download" title="Download" href="/attachments/download/569/panasonicmn.cpp.patch">panasonicmn.cpp.patch</a> added</li>
    </ul>
    <div id="journal-2646-notes" class="wiki"><p>Find attached a patch for the Panasonic makernotes. It adds some new decoded tags and adds new values for known tags.</p></div>
    </div>
  </div>
  
  <div id="change-2647" class="journal has-notes">
    <div id="note-2">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-2" class="journal-link">#2</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/3996">Nicolas Nicofo</a> <a title="29 Oct 2013 15:31" href="/projects/exiv2/activity?from=2013-10-29">about 8 years</a> ago
      <span id="journal-2647-private_notes" class=""></span>
    </h4>

    <div id="journal-2647-notes" class="wiki"><p>Great, thank you !<br />I have tested your patch. The missing tags are now well visible, but are not correctly presented:<br />Here is an sample of 'exiv2 -pa &lt;picture&gt;' output:<br /><pre>...
Exif.Panasonic.FlashWarning                  Short       1  No
Exif.Panasonic.Title                         Undefined  64  0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
Exif.Panasonic.BabyName                      Undefined  64  0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
Exif.Panasonic.Location                      Undefined  64  85 83 65 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
Exif.Panasonic.Country                       Undefined  72  85 110 105 116 101 100 32 83 116 97 116 101 115 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
Exif.Panasonic.State                         Undefined  72  78 101 119 32 89 111 114 107 0 121 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
Exif.Panasonic.City                          Undefined  72  78 101 119 32 89 111 114 107 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
Exif.Panasonic.Landmark                      Undefined 128  87 104 105 116 110 101 121 32 77 117 115 101 117 109 32 97 116 32 80 104 105 108 105 112 32 77 111 114 114 105 115 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
Exif.Panasonic.IntelligentResolution         Byte        1  Standard
Exif.Panasonic.MakerNoteVersion              Undefined   4  1.43
Exif.Panasonic.SceneMode                     Short       1  Intelligent auto
Exif.Panasonic.WBRedLevel                    Short       1  2135
...
</pre></p>


	<p>I have tried to modify the patch file: I have changed 'undefined' by 'asciiString' (for instance line 451 of panasonicmn.cpp, for the Country tag). But I'm not familiar with it at all -> this was not very successful ...</p>


	<p>One remark: why is there 2 lines for the tag 'Baby Age'  (0x0033 and 0x8010 tags) ?</p>


	<p>Thanks in advance</p></div>
    </div>
  </div>
  
  <div id="change-2648" class="journal has-notes has-details">
    <div id="note-3">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-3" class="journal-link">#3</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4008">T Modes</a> <a title="30 Oct 2013 09:25" href="/projects/exiv2/activity?from=2013-10-30">about 8 years</a> ago
      <span id="journal-2648-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>File</strong> <a href="/attachments/571">panasonicmn.cpp.patch</a> <a class="icon-only icon-download" title="Download" href="/attachments/download/571/panasonicmn.cpp.patch">panasonicmn.cpp.patch</a> added</li>
    </ul>
    <div id="journal-2648-notes" class="wiki"><p>Find attached a modified patch, which should now correctly display the wrong tag values.</p>


Concerning the double Baby age tags:
	<ul>
	<li>maybe the cam writes the values twice</li>
		<li>or can can have 2 baby ages for different children in the cam.</li>
	</ul></div>
    </div>
  </div>
  
  <div id="change-2649" class="journal has-notes">
    <div id="note-4">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-4" class="journal-link">#4</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/3996">Nicolas Nicofo</a> <a title="30 Oct 2013 15:26" href="/projects/exiv2/activity?from=2013-10-30">about 8 years</a> ago
      <span id="journal-2649-private_notes" class=""></span>
    </h4>

    <div id="journal-2649-notes" class="wiki"><p>Thank you, it's better !! But it can still better. Here are a few remarks:</p>


	<p>1) Exif.Panasonic.InternalSerialNumber -> should also use your printPanasonicText function (panasonicmn.cpp line 405)</p>


	<p>2) Exif.Panasonic.ProgramISO displays '65534' instead of 'Intellent ISO' (according to exiftool) (see example on picture [1])</p>


	<p>3) if not set, Exif.Panasonic.TravelDay displays '65535' instead of 'not set' [1] ; otherwise it displays the correct number of days</p>


	<p>4) the <strong>Face Detection</strong> information is not correctly displayed. I have seen 3 exif tags:<br />  4.1)  Exif.Panasonic.FacesDetected -> number of detected faces: OK (there are 2 in the picture given as example in [1])<br />  4.2)  Exif.Panasonic.FaceDetInfo -> it is a list of the position of the faces on the picture<br />  4.3)  Exif.Panasonic.FaceRecInfo -> it is a list of information concerning the recognized persons: each recognized person has his Age + Name + position on the picture<br />  Points 4.2 and 4.3 are not shown with exiv2.<br />  For information, exiftool output for [1] is:<br /><pre>
exiftool Desktop/TEST_FACE_DETECTION.jpg | grep -i face
File Name                       : TEST_FACE_DETECTION.jpg
AF Area Mode                    : Face Detect
Faces Detected                  : 2
Num Face Positions              : 2
Face 1 Position                 : 92 110 25 25
Face 2 Position                 : 251 103 24 24
Faces Recognized                : 2
Recognized Face 1 Name          : POUTINE
Recognized Face 1 Position      : 92 110 25 25
Recognized Face 1 Age           : 0009:00:05 00:00:00     '9 year old, 0 month, 5 days: it is correct since I have not put the correct age in my camera ;-)
Recognized Face 2 Name          : OBAMA
Recognized Face 2 Position      : 251 103 24 24
Recognized Face 2 Age           : 0015:04:00 00:00:00
</pre></p>


	<p>5) Exif.Panasonic.TimeSincePowerOn not correctly diplayed (shows the time in milliseconds instead of a readable format in hour/minute/second). Just to try, I have add the following function 'printTimeSincePowerOn' in  panasonicmn.cpp following your 'printPanasonicText' function (+ added it on line 409 + in panasonicmn_int.hpp file).<br />And it works (but needs amelioration to have a better format). For [1], it outputs "0:4:31.48" (instead of "00:04:31.48")<br /><pre>
    std::ostream&#38; PanasonicMakerNote::printTimeSincePowerOn(std::ostream&#38; os,
                                                  const Value&#38; value,
                                                  const ExifData*)
    {
    //if(value.size()&gt;0 ) //not needed ?
        //{
        long time=value.toLong();
        //TODO: add something like  &lt;&lt;std::setw(2)&lt;&lt;std::setfill('0') to format the output
        os &lt;&lt; time/360000&lt;&lt;":"&lt;&lt;(time%360000)/6000&lt;&lt;":"&lt;&lt;(time%6000)/100&lt;&lt;"."&lt;&lt;time%100;
        return os;
        //}
        //else
        //{
        //    return os &lt;&lt; value;
        //};
    } // PanasonicMakerNote::printTimeSincePowerOn
</pre></p>


	<p>[1] <del>> see example on the picture <a class="external" href="http://nicofo.tuxfamily.org/tmp/TEST_FACE_DETECTION.jpg">http://nicofo.tuxfamily.org/tmp/TEST_FACE_DETECTION.jpg</a> where I have added the face detection of Poutine and Obama ;</del>)</p></div>
    </div>
  </div>
  
  <div id="change-2650" class="journal has-notes has-details">
    <div id="note-5">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-5" class="journal-link">#5</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4008">T Modes</a> <a title="31 Oct 2013 08:19" href="/projects/exiv2/activity?from=2013-10-31">about 8 years</a> ago
      <span id="journal-2650-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>File</strong> <a href="/attachments/573">panasonicmn.cpp.patch</a> <a class="icon-only icon-download" title="Download" href="/attachments/download/573/panasonicmn.cpp.patch">panasonicmn.cpp.patch</a> added</li>
    </ul>
    <div id="journal-2650-notes" class="wiki"><p>A further improved patch.</p>


	<p>Points 1, 2, 3 and 5 are fixed.</p>


	<p>The face detection information is a little bit more complicated. It is saved as sub tags. This requires some more changes. But I'm not so firm with the exiv2 code base to write this code. So I leave this point open.</p></div>
    </div>
  </div>
  
  <div id="change-2651" class="journal has-notes">
    <div id="note-6">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-6" class="journal-link">#6</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/3996">Nicolas Nicofo</a> <a title="02 Nov 2013 15:21" href="/projects/exiv2/activity?from=2013-11-02">about 8 years</a> ago
      <span id="journal-2651-private_notes" class=""></span>
    </h4>

    <div id="journal-2651-notes" class="wiki"><p>Excellent, thanks again, it works as expected, I have no other remark except concerning the "baby age2": you changed the second 'BabyAge' into 'BabyAge2': maybe you should also change the description i.e. 'Baby (or pet) age' -> 'Baby (or pet) age2'. Rem: exiftool has only one tag 'Baby age'.</p>


	<p>For the Face detection information, I can eventually fill a new bug report so that this one can be closed. I don't know if it is useful ??? (eventually to have your patch included in the next release of exiv2 even if Face Detection is not fixed)</p></div>
    </div>
  </div>
  
  <div id="change-2652" class="journal has-notes has-details">
    <div id="note-7">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-7" class="journal-link">#7</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4008">T Modes</a> <a title="09 Nov 2013 02:01" href="/projects/exiv2/activity?from=2013-11-09">about 8 years</a> ago
      <span id="journal-2652-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>File</strong> <a href="/attachments/575">panasonicmn.cpp.patch</a> <a class="icon-only icon-download" title="Download" href="/attachments/download/575/panasonicmn.cpp.patch">panasonicmn.cpp.patch</a> added</li>
    </ul>
    <div id="journal-2652-notes" class="wiki"><p>I extended the patch with some newly decoded tag values.</p></div>
    </div>
  </div>
  
  <div id="change-2653" class="journal has-notes has-details">
    <div id="note-8">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-8" class="journal-link">#8</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/3996">Nicolas Nicofo</a> <a title="16 Nov 2013 14:09" href="/projects/exiv2/activity?from=2013-11-16">about 8 years</a> ago
      <span id="journal-2653-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>File</strong> <a href="/attachments/576">panasonicmn.cpp.patch</a> <a class="icon-only icon-download" title="Download" href="/attachments/download/576/panasonicmn.cpp.patch">panasonicmn.cpp.patch</a> added</li>
    </ul>
    <div id="journal-2653-notes" class="wiki"><p>Thanks again.</p>


	<p>1) Concerning your last patch, is it normal that I don't see any RollAngle nor PitchAngle tags using exiv2 ? (maybe it's just my camera that don't handle them ?)<br />I see well the other tags you added (Accelerometer...)</p>


	<p>2) There is a slight improvement to do: there are several tags that have the same description which is a little bit confusing.<br />For instance digikam displays 4 tags "Text Stamp" :-( It would be better if it states "Text stamp 1" ; "Text Stamp 2" ; ...)</p>


	<p>This concerns the following tags:<br />- Baby Age 1,2<br />- Text Stamp 1,2,3,4<br />- Transform 1,2</p>


	<p>I have updated your patch to add a number (so "Text stamp" becomes "Text stamp 1" etc.)</p></div>
    </div>
  </div>
  
  <div id="change-2656" class="journal has-details">
    <div id="note-9">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-9" class="journal-link">#9</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/53">Andreas Huggel</a> <a title="02 Dec 2013 19:24" href="/projects/exiv2/activity?from=2013-12-02">almost 8 years</a> ago
      <span id="journal-2656-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Category</strong> set to <i>metadata</i></li>
       <li><strong>Status</strong> changed from <i>New</i> to <i>Assigned</i></li>
       <li><strong>Assignee</strong> set to <i>Andreas Huggel</i></li>
       <li><strong>Target version</strong> set to <i>0.25</i></li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-2658" class="journal has-notes has-details">
    <div id="note-10">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-10" class="journal-link">#10</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4008">T Modes</a> <a title="04 Dec 2013 11:14" href="/projects/exiv2/activity?from=2013-12-04">almost 8 years</a> ago
      <span id="journal-2658-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>File</strong> <a href="/attachments/579">panasonicmn.cpp.patch</a> <a class="icon-only icon-download" title="Download" href="/attachments/download/579/panasonicmn.cpp.patch">panasonicmn.cpp.patch</a> added</li>
    </ul>
    <div id="journal-2658-notes" class="wiki"><p>Attached a version with some more tags.</p>


	<p>Concerning the tags with the same name: it seems they are duplicate information. But I don't know how exiv2 should handle them.</p></div>
    </div>
  </div>
  
  <div id="change-2715" class="journal has-notes">
    <div id="note-11">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-11" class="journal-link">#11</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/3996">Nicolas Nicofo</a> <a title="02 Jan 2014 07:59" href="/projects/exiv2/activity?from=2014-01-02">almost 8 years</a> ago
      <span id="journal-2715-private_notes" class=""></span>
    </h4>

    <div id="journal-2715-notes" class="wiki"><p>Thank you.<br />Concerning the tag 0x003d "Advanced Scene Type" you just added, you just use the 'printValue' method to display it. As a result a code (1 to 14) is displayed. Here are the information that should be printed (instead of the number):<br /><pre>
1    normal        Normal
2    outdoor        Outdoor/Illuminations/Flower/HDR Art
3    indoor        Indoor/Architecture/Objects/HDR B&#38;W
4    creative    Creative
5    auto        Auto
7    expressive    Expressive
8    retro        Retro
9    pure        Pure
10    elegant        Elegant
12    monochrome    Monochrome
13    dynamic        Dynamic Art
14    silhouette    Silhouette
</pre><br />(I found the information <a class="external" href="http://www.hugsan.com/exifutils/exifutils-fieldref.pdf">http://www.hugsan.com/exifutils/exifutils-fieldref.pdf</a> page 111 and can confirm it, at least for the common 1, 4 and 5 modes)</p>


	<p>Rem: I have updated your patch to swap baby age 1 and 2 (according to the same pdf and other programs) and add a number (so "Text stamp" becomes "Text stamp 1" etc.)</p></div>
    </div>
  </div>
  
  <div id="change-2717" class="journal has-notes">
    <div id="note-12">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-12" class="journal-link">#12</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4008">T Modes</a> <a title="03 Jan 2014 01:05" href="/projects/exiv2/activity?from=2014-01-03">almost 8 years</a> ago
      <span id="journal-2717-private_notes" class=""></span>
    </h4>

    <div id="journal-2717-notes" class="wiki"><p>According to <a class="external" href="http://www.sno.phy.queensu.ca/~phil/exiftool/TagNames/Panasonic.html">http://www.sno.phy.queensu.ca/~phil/exiftool/TagNames/Panasonic.html</a> the tag 0x003d can contain more values and should be seen with tag 0x8001 SceneMode (see composite tag AdvancedSceneMode). Your implementation covers only a small subset of the values. So I don't agree with your changes.</p></div>
    </div>
  </div>
  
  <div id="change-2718" class="journal has-notes">
    <div id="note-13">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-13" class="journal-link">#13</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/3996">Nicolas Nicofo</a> <a title="04 Jan 2014 03:25" href="/projects/exiv2/activity?from=2014-01-04">almost 8 years</a> ago
      <span id="journal-2718-private_notes" class=""></span>
    </h4>

    <div id="journal-2718-notes" class="wiki"><p>Yes, I had seen your page too, but what I read there did not correspond to my pictures metadata (or all the combinations of 003d and 8001 are not listed).<br />Unless I don't interpret it correctly.</p>


	<p>For instance, for a picture made using full automatic control (and where the camera detects a night scene), I have:<br />- Advanced Scene Type = 5<br />- Scene Mode = "Handheld Night Shot" (55)</p>


	<p>For another picture made using the scene mode 'night scene', I have:<br />- Advanced Scene Type = 1<br />- Scene Mode = "Handheld Night Shot" (55)</p>


	<p>-> How should I understand that with your table ?</p></div>
    </div>
  </div>
  
  <div id="change-2719" class="journal has-notes">
    <div id="note-14">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-14" class="journal-link">#14</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4008">T Modes</a> <a title="04 Jan 2014 07:51" href="/projects/exiv2/activity?from=2014-01-04">almost 8 years</a> ago
      <span id="journal-2719-private_notes" class=""></span>
    </h4>

    <div id="journal-2719-notes" class="wiki"><blockquote>

	<p>or all the combinations of 003d and 8001 are not listed</p>


</blockquote>

	<p>That may be. So if you found other combination report them also to Phil Harvey from ExifTool.</p>


	<p>Just one example:<br />- Advanced Scene Type = 3<br />can mean<br />- Indoor Portrait<br />- Architecture<br />- Indoor Sports<br />- Object<br />- HDR B&#38;W<br />- High Key<br />- Color Select<br />- Old Day<br />depending on the value of SceneMode. (At least these are the already decoded combinations. Not all combinations are used by all cameras. The possible combination depends on the actual camera model.)<br />So which value should be printed for tag AdvancedSceneType? All like in your example? This would not be helpful.</p></div>
    </div>
  </div>
  
  <div id="change-2721" class="journal has-notes has-details">
    <div id="note-15">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-15" class="journal-link">#15</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/3996">Nicolas Nicofo</a> <a title="08 Jan 2014 14:21" href="/projects/exiv2/activity?from=2014-01-08">almost 8 years</a> ago
      <span id="journal-2721-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>File</strong> <a href="/attachments/593">Panasonic_-_AdvancedSceneMode.ods</a> <a class="icon-only icon-download" title="Download" href="/attachments/download/593/Panasonic_-_AdvancedSceneMode.ods">Panasonic_-_AdvancedSceneMode.ods</a> added</li>
    </ul>
    <div id="journal-2721-notes" class="wiki"><p>I have made some tests with my camera (TZ40) and I have listed <ins>all the tags for the 'creative control' mode</ins> (and also the common values for the other modes: full automatic (iA), Program (P), Aperture (A)/Shutter (S) priority and scene mode (SCN).<br /><strong>-> See document ods attached</strong>.<br />(Rem: also the patch from my comment #11 that I have forgotten to attach)</p></div>
    </div>
  </div>
  
  <div id="change-2722" class="journal has-details">
    <div id="note-16">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-16" class="journal-link">#16</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/3996">Nicolas Nicofo</a> <a title="08 Jan 2014 14:23" href="/projects/exiv2/activity?from=2014-01-08">almost 8 years</a> ago
      <span id="journal-2722-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>File</strong> <a href="/attachments/594">panasonicmn.cpp.patch</a> <a class="icon-only icon-download" title="Download" href="/attachments/download/594/panasonicmn.cpp.patch">panasonicmn.cpp.patch</a> added</li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-2833" class="journal has-notes has-details">
    <div id="note-17">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-17" class="journal-link">#17</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/3996">Nicolas Nicofo</a> <a title="13 Aug 2014 15:11" href="/projects/exiv2/activity?from=2014-08-13">over 7 years</a> ago
      <span id="journal-2833-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>File</strong> <a href="/attachments/635">panasonicmn.cpp.patch</a> <a class="icon-only icon-download" title="Download" href="/attachments/download/635/panasonicmn.cpp.patch">panasonicmn.cpp.patch</a> added</li>
    </ul>
    <div id="journal-2833-notes" class="wiki"><p>Hi,<br />I have added a new tag ('City') to the new metadata list (see <a class="external" href="http://u88.n24.queensu.ca/exiftool/forum/index.php/topic,5997.0.html">http://u88.n24.queensu.ca/exiftool/forum/index.php/topic,5997.0.html</a>  for detail).<br />Here is the new patch.</p></div>
    </div>
  </div>
  
  <div id="change-2863" class="journal has-details">
    <div id="note-18">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-18" class="journal-link">#18</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/134">Niels Kristian Bech Jensen</a> <a title="30 Aug 2014 23:21" href="/projects/exiv2/activity?from=2014-08-30">about 7 years</a> ago
      <span id="journal-2863-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Assignee</strong> changed from <i>Andreas Huggel</i> to <i>Niels Kristian Bech Jensen</i></li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-2903" class="journal has-notes">
    <div id="note-19">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-19" class="journal-link">#19</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4008">T Modes</a> <a title="06 Sep 2014 01:53" href="/projects/exiv2/activity?from=2014-09-06">about 7 years</a> ago
      <span id="journal-2903-private_notes" class=""></span>
    </h4>

    <div id="journal-2903-notes" class="wiki"><p>Hi, <br />I don't agree with the last version of the patch.<br />The tag 0x6d is used for the "City" tag. All (previous) models are using this nomenclature.<br />Only for the newer TZ40 the meaning changed and the city tag moved to 0x80 and tag 0x6d is used for the county.<br />So this version would not so fine for all (older) cameras.</p>


	<p>So maybe City for 0x6d and City2 for 0x80 is more appreciate (and also used by exiftool).</p></div>
    </div>
  </div>
  
  <div id="change-2905" class="journal has-notes has-details">
    <div id="note-20">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-20" class="journal-link">#20</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/134">Niels Kristian Bech Jensen</a> <a title="07 Sep 2014 21:04" href="/projects/exiv2/activity?from=2014-09-07">about 7 years</a> ago
      <span id="journal-2905-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Due date</strong> set to <i>08 Sep 2014</i></li>
       <li><strong>Status</strong> changed from <i>Assigned</i> to <i>Resolved</i></li>
       <li><strong>% Done</strong> changed from <i>0</i> to <i>100</i></li>
    </ul>
    <div id="journal-2905-notes" class="wiki"><p>Thanks to all for patches and input. I have submitted the latest patch with the County->City and City->City2 changes. I prefer to follow ExifTool in these matters.</p>


	<p>Please test and report any issues.</p>


	<p>Best regards,<br />Niels Kristian Bech Jensen</p></div>
    </div>
  </div>
  
  <div id="change-3929" class="journal has-details">
    <div id="note-21">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-21" class="journal-link">#21</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/53">Andreas Huggel</a> <a title="21 Jun 2015 16:42" href="/projects/exiv2/activity?from=2015-06-21">over 6 years</a> ago
      <span id="journal-3929-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>Resolved</i> to <i>Closed</i></li>
    </ul>
    
    </div>
  </div>
  


</div>

<div style="clear: both;"></div>
<div class="contextual">





</div>


<div style="clear: both;"></div>


<p class="other-formats">Also available in:  <span><a class="atom" rel="nofollow" href="/issues/929.atom">Atom</a></span>
  <span><a class="pdf" rel="nofollow" href="/issues/929.pdf">PDF</a></span>
</p>





        
        <div style="clear:both;"></div>
    </div>
</div>
</div>

<div id="ajax-indicator" style="display:none;"><span>Loading...</span></div>
<div id="ajax-modal" style="display:none;"></div>

<div id="footer">
  <div class="bgl"><div class="bgr">
    Powered by <a href="https://www.redmine.org/">Redmine</a> &copy; 2006-2018 Jean-Philippe Lang
  </div></div>
</div>
</div>
</div>

</body>
</html>
