<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<title>Feature #1191: New lens request - Exiv2</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="description" content="Redmine" />
<meta name="keywords" content="issue,bug,tracker" />
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="xVgyHox4sYCuxcWBW+qHcfqdBL+XntDHNFkQAyWfjsQnFZnx/gJ9gPuh2o3kPYtCxQ9QxmZ9cX3JeYCLZqZpqw==" />
<link rel='shortcut icon' href='/favicon.ico?1550767427' />
<link rel="stylesheet" media="all" href="/stylesheets/jquery/jquery-ui-1.11.0.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/application.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/responsive.css?1550767427" />

<script src="/javascripts/jquery-1.11.1-ui-1.11.0-ujs-4.3.1.js?1550767427"></script>
<script src="/javascripts/application.js?1550767427"></script>
<script src="/javascripts/responsive.js?1550767427"></script>
<script>
//<![CDATA[
$(window).load(function(){ warnLeavingUnsaved('The current page contains unsaved text that will be lost if you leave this page.'); });
//]]>
</script>


<!-- page specific tags -->
    <link rel="alternate" type="application/atom+xml" title="Exiv2 - Feature #1191: New lens request" href="https://dev.exiv2.org/issues/1191.atom" />
<script src="/javascripts/context_menu.js?1550767427"></script><link rel="stylesheet" media="screen" href="/stylesheets/context_menu.css?1550767427" /></head>
<body class="project-exiv2 has-main-menu controller-issues action-show avatars-off">

<div id="wrapper">

<div class="flyout-menu js-flyout-menu">


        <div class="flyout-menu__search">
            <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
            <input type="hidden" name="issues" value="1" />
            <label class="search-magnifier search-magnifier--flyout" for="flyout-search">&#9906;</label>
            <input type="text" name="q" id="flyout-search" class="small js-search-input" placeholder="Search" />
</form>        </div>


        <h3>Project</h3>
        <span class="js-project-menu"></span>

    <h3>General</h3>
    <span class="js-general-menu"></span>

    <span class="js-sidebar flyout-menu__sidebar"></span>

    <h3>Profile</h3>
    <span class="js-profile-menu"></span>

</div>

<div id="wrapper2">
<div id="wrapper3">
<div id="top-menu">
    <div id="account">
        <ul><li><a class="login" href="/login">Sign in</a></li></ul>    </div>
    
    <ul><li><a class="home" href="/">Home</a></li><li><a class="projects" href="/projects">Projects</a></li><li><a class="help" href="https://www.redmine.org/guide">Help</a></li></ul></div>

<div id="header">

    <a href="#" class="mobile-toggle-button js-flyout-menu-toggle-button"></a>

    <div id="quick-search">
        <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
        <input type="hidden" name="scope" />
        <input type="hidden" name="issues" value="1" />
        <label for='q'>
          <a accesskey="4" href="/projects/exiv2/search">Search</a>:
        </label>
        <input type="text" name="q" id="q" size="20" class="small" accesskey="f" />
</form>        <div id="project-jump" class="drdn"><span class="drdn-trigger">Exiv2</span><div class="drdn-content"><div class="quick-search"><input type="text" name="q" id="projects-quick-search" value="" class="autocomplete" data-automcomplete-url="/projects/autocomplete.js?jump=issues" autocomplete="off" /></div><div class="drdn-items projects selection"></div><div class="drdn-items all-projects selection"><a href="/projects?jump=issues">All Projects</a></div></div></div>
    </div>

    <h1><span class="current-project">Exiv2</span></h1>

    <div id="main-menu" class="tabs">
        <ul><li><a class="overview" href="/projects/exiv2">Overview</a></li><li><a class="activity" href="/projects/exiv2/activity">Activity</a></li><li><a class="roadmap" href="/projects/exiv2/roadmap">Roadmap</a></li><li><a class="issues selected" href="/projects/exiv2/issues">Issues</a></li><li><a class="news" href="/projects/exiv2/news">News</a></li><li><a class="wiki" href="/projects/exiv2/wiki">Wiki</a></li><li><a class="boards" href="/projects/exiv2/boards">Forums</a></li><li><a class="repository" href="/projects/exiv2/repository">Repository</a></li></ul>
        <div class="tabs-buttons" style="display:none;">
            <button class="tab-left" onclick="moveTabLeft(this); return false;"></button>
            <button class="tab-right" onclick="moveTabRight(this); return false;"></button>
        </div>
    </div>
</div>

<div id="main" class="">
    <div id="sidebar">
          <h3>Issues</h3>

<ul>
<li><a href="/projects/exiv2/issues?set_filter=1">View all issues</a></li>
<li><a href="/projects/exiv2/issues/report">Summary</a></li>

</ul>









        
    </div>

    <div id="content">
        
        <div class="contextual">





</div>


<h2>Feature #1191</h2>

<div class="issue tracker-2 status-5 priority-4 priority-default closed details">

  <div class="gravatar-with-child">
    
    
  </div>

<div class="subject">
<div><h3>New lens request</h3></div>
</div>
        <p class="author">
        Added by <a class="user active" href="/users/4687">Yvi San</a> <a title="09 Jun 2016 02:39" href="/projects/exiv2/activity?from=2016-06-09">over 5 years</a> ago.
        Updated <a title="09 Jun 2016 08:13" href="/projects/exiv2/activity?from=2016-06-09">over 5 years</a> ago.
        </p>

<div class="attributes">
<div class="splitcontent"><div class="splitcontentleft"><div class="status attribute"><div class="label">Status:</div><div class="value">Closed</div></div><div class="priority attribute"><div class="label">Priority:</div><div class="value">Normal</div></div><div class="assigned-to attribute"><div class="label">Assignee:</div><div class="value"><a class="user active" href="/users/119">Robin Mills</a></div></div><div class="category attribute"><div class="label">Category:</div><div class="value">lens</div></div><div class="fixed-version attribute"><div class="label">Target version:</div><div class="value"><a title="28 Apr 2017" href="/versions/52">0.26</a></div></div></div><div class="splitcontentleft"><div class="start-date attribute"><div class="label">Start date:</div><div class="value">09 Jun 2016</div></div><div class="due-date attribute"><div class="label">Due date:</div><div class="value"></div></div><div class="progress attribute"><div class="label">% Done:</div><div class="value"><table class="progress progress-100"><tr><td style="width: 100%;" class="closed" title="100%"></td></tr></table><p class="percent">100%</p></div></div><div class="estimated-hours attribute"><div class="label">Estimated time:</div><div class="value">1.00 h</div></div></div></div>


</div>

<hr />
<div class="description">
  <div class="contextual">
  
  </div>

  <p><strong>Description</strong></p>
  <div class="wiki">
  <p>exiv2 -pt IMG_8087.CR2 | grep -ai lens<br />Exif.CanonCs.LensType                        Short       1  161<br />Exif.CanonCs.Lens                            Short       3  100.0 mm<br />Exif.Canon.LensModel                         Ascii      74  100mm<br />Exif.Photo.LensSpecification                 Rational    4  100/1 100/1 0/1 0/1<br />Exif.Photo.LensModel                         Ascii       6  100mm<br />Exif.Photo.LensSerialNumber                  Ascii      11  0000000000</p>


	<p>Lens name: Tokina AT-X M100 AF PRO D 100mm F2.8 Macro</p>


	<p>Link to product page: <a class="external" href="http://www.tokinalens.com/tokina/products/atxpro/atxm100afprod/">http://www.tokinalens.com/tokina/products/atxpro/atxm100afprod/</a></p>


	<p>Low resolution JPG file attached. I had white balance bracketing on. Let me know if you need another pic.</p>
  </div>
</div>
  <hr />
  <p><strong>Files</strong></p>
  <div class="attachments">
<div class="contextual">
  
</div>
<table>
<tr>
  <td>
    <a class="icon icon-attachment" href="/attachments/1012">IMG_8401.JPG</a>    <span class="size">(6.38 MB)</span>
    <a class="icon-only icon-download" title="Download" href="/attachments/download/1012/IMG_8401.JPG">IMG_8401.JPG</a>  </td>
  <td></td>
  <td>
      <span class="author">Yvi San, 09 Jun 2016 02:39</span>
  </td>
  <td>
  </td>
</tr>
</table>
</div>








</div>




<div id="history">
<h3>History</h3>
  <div id="change-5139" class="journal has-notes has-details">
    <div id="note-1">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-1" class="journal-link">#1</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="09 Jun 2016 08:13" href="/projects/exiv2/activity?from=2016-06-09">over 5 years</a> ago
      <span id="journal-5139-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Category</strong> set to <i>lens</i></li>
       <li><strong>Status</strong> changed from <i>New</i> to <i>Closed</i></li>
       <li><strong>Assignee</strong> set to <i>Robin Mills</i></li>
       <li><strong>Target version</strong> set to <i>0.26</i></li>
       <li><strong>% Done</strong> changed from <i>0</i> to <i>100</i></li>
       <li><strong>Estimated time</strong> set to <i>1.00 h</i></li>
    </ul>
    <div id="journal-5139-notes" class="wiki"><p>There is no fix, however there is a work-around.  Canon record LensType 161 for your lens.</p>


	<p>We know of at least 8 other lenses with LensType 161.  In v0.26 (currently on the trunk), you can add a file called the <em><strong>"camera override file"</strong></em> to provide the definition.  This file is in Windows/.ini format and located at <strong><em>~/.exiv2</em></strong> on Linux/Mac and <em><strong>c:\Users\username\exiv2.ini</strong></em> on Windows.  The section <strong><code>[canon]</code></strong> is required for your camera and the entry <strong><code>161=Tokina AT-X M100 AF PRO D 100mm F2.8 Macro</code></strong> defines your lens. <pre>588 rmills@rmillsmbp:~/gnu/exiv2/bigtiff $ exiv2 -pa --grep lens/i IMG_8401.JPG 
Exif.CanonCs.LensType                        Short       1  161
Exif.CanonCs.Lens                            Short       3  100.0 mm
Exif.Canon.LensModel                         Ascii      74  100mm
Exif.Photo.LensSpecification                 Rational    4  100/1 100/1 0/1 0/1
Exif.Photo.LensModel                         Ascii       6  100mm
Exif.Photo.LensSerialNumber                  Ascii      11  0000000000
589 rmills@rmillsmbp:~/gnu/exiv2/bigtiff $ ce src/canonmn.cpp 
bbedit "src/canonmn.cpp" 

590 rmills@rmillsmbp:~/gnu/exiv2/bigtiff $ bbedit ~/.exiv2 

591 rmills@rmillsmbp:~/gnu/exiv2/bigtiff $ cat ~/.exiv2 
[canon]
161=Tokina AT-X M100 AF PRO D 100mm F2.8 Macro

592 rmills@rmillsmbp:~/gnu/exiv2/bigtiff $ exiv2 -pa --grep lens/i IMG_8401.JPG 
Exif.CanonCs.LensType                        Short       1  Tokina AT-X M100 AF PRO D 100mm F2.8 Macro
Exif.CanonCs.Lens                            Short       3  100.0 mm
Exif.Canon.LensModel                         Ascii      74  100mm
Exif.Photo.LensSpecification                 Rational    4  100/1 100/1 0/1 0/1
Exif.Photo.LensModel                         Ascii       6  100mm
Exif.Photo.LensSerialNumber                  Ascii      11  0000000000

593 rmills@rmillsmbp:~/gnu/exiv2/bigtiff $ </pre><em><strong>Exiftool</em></strong> cannot recognise this lens uniquely either.<pre>593 rmills@rmillsmbp:~/gnu/exiv2/bigtiff $ exiftool IMG_8401.JPG  | grep -i lens
Lens Type                       : Canon EF 28-70mm f/2.8L or Sigma or Tamron Lens
Lens Info                       : 100mm f/0
Lens Model                      : 100mm
Lens Serial Number              : 0000000000
Lens                            : 100.0 mm
Lens ID                         : Unknown (161) 100mm
Lens                            : 100.0 mm (35 mm equivalent: 157.7 mm)
594 rmills@rmillsmbp:~/gnu/exiv2/bigtiff $</pre>Because the <em><strong>"camera override file"</strong></em> file is in your home directory, all applications using libexiv2 will read the file.  GIMP, Darktable and other applications will all read this file when v0.26 ships and in use by those applications.</p></div>
    </div>
  </div>
  


</div>

<div style="clear: both;"></div>
<div class="contextual">





</div>


<div style="clear: both;"></div>


<p class="other-formats">Also available in:  <span><a class="atom" rel="nofollow" href="/issues/1191.atom">Atom</a></span>
  <span><a class="pdf" rel="nofollow" href="/issues/1191.pdf">PDF</a></span>
</p>





        
        <div style="clear:both;"></div>
    </div>
</div>
</div>

<div id="ajax-indicator" style="display:none;"><span>Loading...</span></div>
<div id="ajax-modal" style="display:none;"></div>

<div id="footer">
  <div class="bgl"><div class="bgr">
    Powered by <a href="https://www.redmine.org/">Redmine</a> &copy; 2006-2018 Jean-Philippe Lang
  </div></div>
</div>
</div>
</div>

</body>
</html>
