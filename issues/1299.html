<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<title>Bug #1299: exiv2-0.26-trunk.tar.gz changed on download server - Exiv2</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="description" content="Redmine" />
<meta name="keywords" content="issue,bug,tracker" />
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="VeKWuoZO0nK5tq/TzIxeH/fgyhXUH3sf/xKk8a2zaP23rz1V9DQecuzSsN9zW1IsyHKebCX82qUCMjR57oqPkg==" />
<link rel='shortcut icon' href='/favicon.ico?1550767427' />
<link rel="stylesheet" media="all" href="/stylesheets/jquery/jquery-ui-1.11.0.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/application.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/responsive.css?1550767427" />

<script src="/javascripts/jquery-1.11.1-ui-1.11.0-ujs-4.3.1.js?1550767427"></script>
<script src="/javascripts/application.js?1550767427"></script>
<script src="/javascripts/responsive.js?1550767427"></script>
<script>
//<![CDATA[
$(window).load(function(){ warnLeavingUnsaved('The current page contains unsaved text that will be lost if you leave this page.'); });
//]]>
</script>


<!-- page specific tags -->
    <link rel="alternate" type="application/atom+xml" title="Exiv2 - Bug #1299: exiv2-0.26-trunk.tar.gz changed on download server" href="https://dev.exiv2.org/issues/1299.atom" />
<script src="/javascripts/context_menu.js?1550767427"></script><link rel="stylesheet" media="screen" href="/stylesheets/context_menu.css?1550767427" /></head>
<body class="project-exiv2 has-main-menu controller-issues action-show avatars-off">

<div id="wrapper">

<div class="flyout-menu js-flyout-menu">


        <div class="flyout-menu__search">
            <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
            <input type="hidden" name="issues" value="1" />
            <label class="search-magnifier search-magnifier--flyout" for="flyout-search">&#9906;</label>
            <input type="text" name="q" id="flyout-search" class="small js-search-input" placeholder="Search" />
</form>        </div>


        <h3>Project</h3>
        <span class="js-project-menu"></span>

    <h3>General</h3>
    <span class="js-general-menu"></span>

    <span class="js-sidebar flyout-menu__sidebar"></span>

    <h3>Profile</h3>
    <span class="js-profile-menu"></span>

</div>

<div id="wrapper2">
<div id="wrapper3">
<div id="top-menu">
    <div id="account">
        <ul><li><a class="login" href="/login">Sign in</a></li></ul>    </div>
    
    <ul><li><a class="home" href="/">Home</a></li><li><a class="projects" href="/projects">Projects</a></li><li><a class="help" href="https://www.redmine.org/guide">Help</a></li></ul></div>

<div id="header">

    <a href="#" class="mobile-toggle-button js-flyout-menu-toggle-button"></a>

    <div id="quick-search">
        <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
        <input type="hidden" name="scope" />
        <input type="hidden" name="issues" value="1" />
        <label for='q'>
          <a accesskey="4" href="/projects/exiv2/search">Search</a>:
        </label>
        <input type="text" name="q" id="q" size="20" class="small" accesskey="f" />
</form>        <div id="project-jump" class="drdn"><span class="drdn-trigger">Exiv2</span><div class="drdn-content"><div class="quick-search"><input type="text" name="q" id="projects-quick-search" value="" class="autocomplete" data-automcomplete-url="/projects/autocomplete.js?jump=issues" autocomplete="off" /></div><div class="drdn-items projects selection"></div><div class="drdn-items all-projects selection"><a href="/projects?jump=issues">All Projects</a></div></div></div>
    </div>

    <h1><span class="current-project">Exiv2</span></h1>

    <div id="main-menu" class="tabs">
        <ul><li><a class="overview" href="/projects/exiv2">Overview</a></li><li><a class="activity" href="/projects/exiv2/activity">Activity</a></li><li><a class="roadmap" href="/projects/exiv2/roadmap">Roadmap</a></li><li><a class="issues selected" href="/projects/exiv2/issues">Issues</a></li><li><a class="news" href="/projects/exiv2/news">News</a></li><li><a class="wiki" href="/projects/exiv2/wiki">Wiki</a></li><li><a class="boards" href="/projects/exiv2/boards">Forums</a></li><li><a class="repository" href="/projects/exiv2/repository">Repository</a></li></ul>
        <div class="tabs-buttons" style="display:none;">
            <button class="tab-left" onclick="moveTabLeft(this); return false;"></button>
            <button class="tab-right" onclick="moveTabRight(this); return false;"></button>
        </div>
    </div>
</div>

<div id="main" class="">
    <div id="sidebar">
          <h3>Issues</h3>

<ul>
<li><a href="/projects/exiv2/issues?set_filter=1">View all issues</a></li>
<li><a href="/projects/exiv2/issues/report">Summary</a></li>

</ul>









        
    </div>

    <div id="content">
        
        <div class="contextual">





</div>


<h2>Bug #1299</h2>

<div class="issue tracker-1 status-5 priority-4 priority-default closed details">

  <div class="gravatar-with-child">
    
    
  </div>

<div class="subject">
<div><h3>exiv2-0.26-trunk.tar.gz changed on download server</h3></div>
</div>
        <p class="author">
        Added by <a class="user active" href="/users/6157">Jonathan Riddell</a> <a title="14 Jul 2017 14:20" href="/projects/exiv2/activity?from=2017-07-14">over 4 years</a> ago.
        Updated <a title="15 Jul 2017 06:19" href="/projects/exiv2/activity?from=2017-07-15">over 4 years</a> ago.
        </p>

<div class="attributes">
<div class="splitcontent"><div class="splitcontentleft"><div class="status attribute"><div class="label">Status:</div><div class="value">Closed</div></div><div class="priority attribute"><div class="label">Priority:</div><div class="value">Normal</div></div><div class="assigned-to attribute"><div class="label">Assignee:</div><div class="value"><a class="user active" href="/users/119">Robin Mills</a></div></div><div class="category attribute"><div class="label">Category:</div><div class="value">build</div></div><div class="fixed-version attribute"><div class="label">Target version:</div><div class="value"><a title="28 Dec 2018" href="/versions/55">0.27</a></div></div></div><div class="splitcontentleft"><div class="start-date attribute"><div class="label">Start date:</div><div class="value">14 Jul 2017</div></div><div class="due-date attribute"><div class="label">Due date:</div><div class="value"></div></div><div class="progress attribute"><div class="label">% Done:</div><div class="value"><table class="progress progress-100"><tr><td style="width: 100%;" class="closed" title="100%"></td></tr></table><p class="percent">100%</p></div></div><div class="estimated-hours attribute"><div class="label">Estimated time:</div><div class="value">1.00 h</div></div></div></div>


</div>

<hr />
<div class="description">
  <div class="contextual">
  
  </div>

  <p><strong>Description</strong></p>
  <div class="wiki">
  <p>The file at <a class="external" href="http://www.exiv2.org/builds/exiv2-0.26-trunk.tar.gz">http://www.exiv2.org/builds/exiv2-0.26-trunk.tar.gz</a> was changed on 7 July</p>


	<p>The file was first released on 17 May.  We package it in KDE neon and built it on 3 July.  Rebuilding it today we find the file has changed.</p>


	<p>It may have been compromised.</p>


	<p>On <a class="external" href="http://web.archive.org/web/20170606065325/http://www.exiv2.org/download.html">http://web.archive.org/web/20170606065325/http://www.exiv2.org/download.html</a> the md5sum is listed as f936d2ca5cbe1e18c71ca2baa5e84fb4<br />Currently on <a class="external" href="http://www.exiv2.org/download.html">http://www.exiv2.org/download.html</a> it is listed as 5399e3b570d7f9205f0e76d47582da4c<br />But the date has not changed</p>
  </div>
</div>







</div>




<div id="history">
<h3>History</h3>
  <div id="change-6016" class="journal has-notes">
    <div id="note-1">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-1" class="journal-link">#1</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/76">Gilles Caulier</a> <a title="14 Jul 2017 14:28" href="/projects/exiv2/activity?from=2017-07-14">over 4 years</a> ago
      <span id="journal-6016-private_notes" class=""></span>
    </h4>

    <div id="journal-6016-notes" class="wiki"><p>It's confirmed.</p>


	<p>For digiKam bundles packaging, I already change 2 time in my scripts the checksums while donwloading the official 0.26 tarball generated from trunk. Why ?</p>


	<p>Current Exiv2 0.26 fail to build under Macport because the checksum is wrong !</p>


	<p>A official tarball release must not be changed. A new tarball with a minor release ID must be published. This is the rules in Open Source...</p></div>
    </div>
  </div>
  
  <div id="change-6017" class="journal has-notes has-details">
    <div id="note-2">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-2" class="journal-link">#2</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="14 Jul 2017 15:21" href="/projects/exiv2/activity?from=2017-07-14">over 4 years</a> ago
      <span id="journal-6017-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Category</strong> set to <i>build</i></li>
       <li><strong>Status</strong> changed from <i>New</i> to <i>Closed</i></li>
       <li><strong>Assignee</strong> set to <i>Robin Mills</i></li>
       <li><strong>Target version</strong> set to <i>0.28</i></li>
    </ul>
    <div id="journal-6017-notes" class="wiki"><p>Well spotted, Gentlemen.  The file has not been compromised.  The tar was regenerated without changing contents.  The reason is documented here:  <a class="external" href="https://github.com/Exiv2/exiv2/issues/14">https://github.com/Exiv2/exiv2/issues/14</a></p>


	<p>The original tar was created on MacOS-X.  The version of tar provided by Apple stores hidden files in the tar with names such as ._foo which contain extended file-system metadata.  When <code>$ tar -xf foo.tar.tz</code> is used on MacOS-X, the extended metadata is applied.  However on Linux, these files appear on the filesystem and caused a CMake build failure on Linux when building the i18n .po files with the option EXIV2_ENABLE_BUILD_PO.</p>


	<p>The only file involved is the source download.  The other bundles with builds of Cygwin/MSVC/Linux/MacOS and MinGW have been created using tar on the target system.</p>


	<p>For your information, I will start work on a dot release Exiv2 v0.26.1 when I return from vacation in Early August.  I hope that will be ready in September.  There will be no API changes in v0.26.1 and be a replacement for v0.26.0  However the build for v0.26.1 will be significantly changed as the Adobe XMPsdk will be an external library.</p>


	<p>I am unaware of the "rules of open source".  If you want this bundle to be relabelled as v0.26.1, I will change this.</p></div>
    </div>
  </div>
  
  <div id="change-6018" class="journal has-notes">
    <div id="note-3">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-3" class="journal-link">#3</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/76">Gilles Caulier</a> <a title="14 Jul 2017 15:36" href="/projects/exiv2/activity?from=2017-07-14">over 4 years</a> ago
      <span id="journal-6018-private_notes" class=""></span>
    </h4>

    <div id="journal-6018-notes" class="wiki"><p>0.26.0 => 0.26.1 ==> no API/ABI change. Only minor changes. See GNU guide :</p>


	<p><a class="external" href="https://www.gnu.org/software/libtool/manual/libtool.html#Updating-version-info">https://www.gnu.org/software/libtool/manual/libtool.html#Updating-version-info</a></p>


	<p>In 0.26.1 XMP sdk will be an external dependency. Right ?</p>


	<p>You will manage this external dependency release ? Adobe licence permit to do it safety ?</p></div>
    </div>
  </div>
  
  <div id="change-6019" class="journal has-notes">
    <div id="note-4">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-4" class="journal-link">#4</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="14 Jul 2017 16:04" href="/projects/exiv2/activity?from=2017-07-14">over 4 years</a> ago
      <span id="journal-6019-private_notes" class=""></span>
    </h4>

    <div id="journal-6019-notes" class="wiki"><p>I cannot yet say exactly how the dependency on Adobe XMPsdk will be handled as it's still a "work in progress".</p>


	<p>I haven't understood your question concerning Adobe.  Are you asking an engineering or a legal question?</p>


	<p>From an Engineering point of view, It's likely that there will be a CMake option to download and build XMPsdk and will be enabled by default.  So, it's likely that the users of CMake will notice very little change.  Users of msvc will have to manually download Adobe XMPsdk and place it in a directory parallel to exiv2.  This is similar to our current handling of expat and zlib.  I haven't started to consider what changes are required by the Exiv2 autotools (./configure) build.  It's likely that no changes are required, however the user will be responsible for building and installing XMPsdk.</p>


	<p>From a legal point of view, I expect Adobe will be very happy about this.  For the last 10 years, Exiv2 has contained a source copy of Adobe's code.  As I didn't participate in the project to integrate Adobe's code with Exiv2, I can't say what (if anything) was modified.  However as we build and link that code, it's not "pure Adobe".  And I don't know if Adobe were consulted about distributing their code in this way.</p>


	<p>In future, we will be building XMPsdk as released by Adobe without modification.  We have tested Exiv2 with both the 2014 and 2016 Editions.  Adobe license XMPsdk under BSD:  <a class="external" href="http://www.adobe.com/devnet/xmp/sdk/eula.html">http://www.adobe.com/devnet/xmp/sdk/eula.html</a>  I believe the way in which Exiv2 will use XMPsdk in future is legitimate.</p></div>
    </div>
  </div>
  
  <div id="change-6020" class="journal has-notes has-details">
    <div id="note-5">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-5" class="journal-link">#5</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="14 Jul 2017 16:27" href="/projects/exiv2/activity?from=2017-07-14">over 4 years</a> ago
      <span id="journal-6020-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Target version</strong> changed from <i>0.28</i> to <i>0.27</i></li>
       <li><strong>% Done</strong> changed from <i>0</i> to <i>100</i></li>
       <li><strong>Estimated time</strong> set to <i>1.00 h</i></li>
    </ul>
    <div id="journal-6020-notes" class="wiki"><p>Gilles: You are 100% correct in saying that the checksum of source bundle of Exiv2 v0.26 has been changed twice since the release at the end of April.  The most recent rebundling of the tar.gz was in July and that is what is being reported and discussed here.  After the release, Andreas wrote and asked me to remove all offers to issue a Commercial License on the web-site and in various ReadMe files in the release.  This was done in mid-May.  As with the change in July, the code in the different bundles is identical.</p></div>
    </div>
  </div>
  
  <div id="change-6029" class="journal has-notes">
    <div id="note-6">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-6" class="journal-link">#6</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/76">Gilles Caulier</a> <a title="14 Jul 2017 22:26" href="/projects/exiv2/activity?from=2017-07-14">over 4 years</a> ago
      <span id="journal-6029-private_notes" class=""></span>
    </h4>

    <div id="journal-6029-notes" class="wiki"><p>Yes, i'm talking about legally point with Adobe licensing.</p>


	<p>About technical point :</p>


	<p>1/ a XMP sdk version already exist to be redistributed in Open Source world : libexempi</p>


	<p><a class="external" href="https://github.com/hfiguiere/exempi">https://github.com/hfiguiere/exempi</a></p>


	<p>2/ yes Cmake has all the capabilities to manage 3rd-party component to download and compile with a project. I use it to bundle the whole digiKam under Windows, MacOS, and Linux. Look here :</p>


	<p><a class="external" href="https://cgit.kde.org/digikam-software-compilation.git/tree/project/bundles">https://cgit.kde.org/digikam-software-compilation.git/tree/project/bundles</a></p>


	<p>and expecially the 3rdparty sub directory and all cmakelists.txt script. The main cmake macro to know is ExternalProject_Add. This script download and compile Exiv2 for bundle packaging :</p>


	<p><a class="external" href="https://cgit.kde.org/digikam-software-compilation.git/tree/project/bundles/3rdparty/ext_exiv2/CMakeLists.txt">https://cgit.kde.org/digikam-software-compilation.git/tree/project/bundles/3rdparty/ext_exiv2/CMakeLists.txt</a></p>


	<p>It's very simple and powerfull to use.</p></div>
    </div>
  </div>
  
  <div id="change-6030" class="journal has-notes">
    <div id="note-7">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-7" class="journal-link">#7</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="15 Jul 2017 05:54" href="/projects/exiv2/activity?from=2017-07-15">over 4 years</a> ago
      <span id="journal-6030-private_notes" class=""></span>
    </h4>

    <div id="journal-6030-notes" class="wiki"><p>We've been asked by a user to support "pure external Adobe XMPsdk" as an external library.  This enables host applications to link and use XMPsdk without encountering linking errors.  Currently, static externals in &lt;exiv2-dir&gt;/xmpsdk/src conflict those used by Adobe.  Nobody has requested that we support exempi, although once XMPsdk is an external library, the use of exempi may be an alternative way to build Adobe's code.</p>


	<p>I don't see any licensing issue with Adobe and our plans.  Can you see a conflict that I have overlooked?</p>


	<p>Thank you for the pointers to your scripts concerning CMake/ExternalProject_Add  That's what I'm planning to use and why I said:</p>


<blockquote>

	<p>From an Engineering point of view, It's likely that there will be a CMake option to download and build XMPsdk and will be enabled by default.</p>


</blockquote>

	<p>The most important issue concerning the Adobe XMP is the linking issue.  I suggested to the user that the static externals in &lt;exiv2dir&gt;/xmpsdk/src be wrapped in the Exiv2 namespace to avoid conflict.  The user was able to construct something along those lines, however he was unhappy and requested the "pure external Adobe XMPsdk" approach.  The second objective is to keep our XMP code up-to-date as it has not been refreshed for about 10 years.  The XMPsdk support destined for v0.26.1 enables the user to choose either the 2016 or 2014 Editions from Adobe.</p>


	<p>I will be happy to hear your thoughts about this if you think this approach is wrong, illegal, or won't work.  I've explained the rationale and hope that v0.26.1 can ship in September and am working hard to make this happen.  If you believe there is a flaw in what is being done, it's not too late to consider alternatives.</p>


	<p>I hope that v0.26.1 will also include improved Video/Read support.</p></div>
    </div>
  </div>
  
  <div id="change-6031" class="journal has-notes">
    <div id="note-8">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-8" class="journal-link">#8</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/76">Gilles Caulier</a> <a title="15 Jul 2017 06:19" href="/projects/exiv2/activity?from=2017-07-15">over 4 years</a> ago
      <span id="journal-6031-private_notes" class=""></span>
    </h4>

    <div id="journal-6031-notes" class="wiki"><p>I don't see any legal issue with Adobe SDK, if licensing from Adobe do not change since a while. I'm not expert here... If Exempie library, based on Adobe SDK, is updated with recent release from Adobe code, well, all must be fine.</p>


	<p>Note : Exempi, as i know include compilation fixes for portabilities as Adode do not report as UPSTREAM. This can prevent any patch to include in your side in the future (so less work to maintain portability). Look well Exempi project description.</p>


	<p><a class="external" href="https://libopenraw.freedesktop.org/wiki/Exempi/">https://libopenraw.freedesktop.org/wiki/Exempi/</a></p>


	<p>Another advantage is to see Exempi lib already included in Linux distributions.</p>


	<p>About the linking issue with Exiv2 and XMP sdk, yes, in the pass digiKam has seen some runtime issue due to wrong linking rules, fixed with cmake > 3.0 options as i remember.</p></div>
    </div>
  </div>
  


</div>

<div style="clear: both;"></div>
<div class="contextual">





</div>


<div style="clear: both;"></div>


<p class="other-formats">Also available in:  <span><a class="atom" rel="nofollow" href="/issues/1299.atom">Atom</a></span>
  <span><a class="pdf" rel="nofollow" href="/issues/1299.pdf">PDF</a></span>
</p>





        
        <div style="clear:both;"></div>
    </div>
</div>
</div>

<div id="ajax-indicator" style="display:none;"><span>Loading...</span></div>
<div id="ajax-modal" style="display:none;"></div>

<div id="footer">
  <div class="bgl"><div class="bgr">
    Powered by <a href="https://www.redmine.org/">Redmine</a> &copy; 2006-2018 Jean-Philippe Lang
  </div></div>
</div>
</div>
</div>

</body>
</html>
