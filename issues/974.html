<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<title>Bug #974: svn_version.h not installed, but included in installed version.hpp - Exiv2</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="description" content="Redmine" />
<meta name="keywords" content="issue,bug,tracker" />
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="9peYvpUGc3KYXZQ6TLndvTZ5olD4oGz4n3xM3rASmM8U2jNR53y/cs05izbzbtGOCev2KQlDzUJiXNxW8yt/oA==" />
<link rel='shortcut icon' href='/favicon.ico?1550767427' />
<link rel="stylesheet" media="all" href="/stylesheets/jquery/jquery-ui-1.11.0.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/application.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/responsive.css?1550767427" />

<script src="/javascripts/jquery-1.11.1-ui-1.11.0-ujs-4.3.1.js?1550767427"></script>
<script src="/javascripts/application.js?1550767427"></script>
<script src="/javascripts/responsive.js?1550767427"></script>
<script>
//<![CDATA[
$(window).load(function(){ warnLeavingUnsaved('The current page contains unsaved text that will be lost if you leave this page.'); });
//]]>
</script>


<!-- page specific tags -->
    <link rel="alternate" type="application/atom+xml" title="Exiv2 - Bug #974: svn_version.h not installed, but included in installed version.hpp" href="https://dev.exiv2.org/issues/974.atom" />
<script src="/javascripts/context_menu.js?1550767427"></script><link rel="stylesheet" media="screen" href="/stylesheets/context_menu.css?1550767427" /></head>
<body class="project-exiv2 has-main-menu controller-issues action-show avatars-off">

<div id="wrapper">

<div class="flyout-menu js-flyout-menu">


        <div class="flyout-menu__search">
            <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
            <input type="hidden" name="issues" value="1" />
            <label class="search-magnifier search-magnifier--flyout" for="flyout-search">&#9906;</label>
            <input type="text" name="q" id="flyout-search" class="small js-search-input" placeholder="Search" />
</form>        </div>


        <h3>Project</h3>
        <span class="js-project-menu"></span>

    <h3>General</h3>
    <span class="js-general-menu"></span>

    <span class="js-sidebar flyout-menu__sidebar"></span>

    <h3>Profile</h3>
    <span class="js-profile-menu"></span>

</div>

<div id="wrapper2">
<div id="wrapper3">
<div id="top-menu">
    <div id="account">
        <ul><li><a class="login" href="/login">Sign in</a></li></ul>    </div>
    
    <ul><li><a class="home" href="/">Home</a></li><li><a class="projects" href="/projects">Projects</a></li><li><a class="help" href="https://www.redmine.org/guide">Help</a></li></ul></div>

<div id="header">

    <a href="#" class="mobile-toggle-button js-flyout-menu-toggle-button"></a>

    <div id="quick-search">
        <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
        <input type="hidden" name="scope" />
        <input type="hidden" name="issues" value="1" />
        <label for='q'>
          <a accesskey="4" href="/projects/exiv2/search">Search</a>:
        </label>
        <input type="text" name="q" id="q" size="20" class="small" accesskey="f" />
</form>        <div id="project-jump" class="drdn"><span class="drdn-trigger">Exiv2</span><div class="drdn-content"><div class="quick-search"><input type="text" name="q" id="projects-quick-search" value="" class="autocomplete" data-automcomplete-url="/projects/autocomplete.js?jump=issues" autocomplete="off" /></div><div class="drdn-items projects selection"></div><div class="drdn-items all-projects selection"><a href="/projects?jump=issues">All Projects</a></div></div></div>
    </div>

    <h1><span class="current-project">Exiv2</span></h1>

    <div id="main-menu" class="tabs">
        <ul><li><a class="overview" href="/projects/exiv2">Overview</a></li><li><a class="activity" href="/projects/exiv2/activity">Activity</a></li><li><a class="roadmap" href="/projects/exiv2/roadmap">Roadmap</a></li><li><a class="issues selected" href="/projects/exiv2/issues">Issues</a></li><li><a class="news" href="/projects/exiv2/news">News</a></li><li><a class="wiki" href="/projects/exiv2/wiki">Wiki</a></li><li><a class="boards" href="/projects/exiv2/boards">Forums</a></li><li><a class="repository" href="/projects/exiv2/repository">Repository</a></li></ul>
        <div class="tabs-buttons" style="display:none;">
            <button class="tab-left" onclick="moveTabLeft(this); return false;"></button>
            <button class="tab-right" onclick="moveTabRight(this); return false;"></button>
        </div>
    </div>
</div>

<div id="main" class="">
    <div id="sidebar">
          <h3>Issues</h3>

<ul>
<li><a href="/projects/exiv2/issues?set_filter=1">View all issues</a></li>
<li><a href="/projects/exiv2/issues/report">Summary</a></li>

</ul>









        
    </div>

    <div id="content">
        
        <div class="contextual">





</div>


<h2>Bug #974</h2>

<div class="issue tracker-1 status-5 priority-4 priority-default closed details">

  <div class="gravatar-with-child">
    
    
  </div>

<div class="subject">
<div><h3>svn_version.h not installed, but included in installed version.hpp</h3></div>
</div>
        <p class="author">
        Added by <a class="user active" href="/users/4017">Jehan Pag√®s</a> <a title="24 Jul 2014 07:06" href="/projects/exiv2/activity?from=2014-07-24">over 7 years</a> ago.
        Updated <a title="21 Jun 2015 16:41" href="/projects/exiv2/activity?from=2015-06-21">over 6 years</a> ago.
        </p>

<div class="attributes">
<div class="splitcontent"><div class="splitcontentleft"><div class="status attribute"><div class="label">Status:</div><div class="value">Closed</div></div><div class="priority attribute"><div class="label">Priority:</div><div class="value">Normal</div></div><div class="assigned-to attribute"><div class="label">Assignee:</div><div class="value"><a class="user active" href="/users/119">Robin Mills</a></div></div><div class="category attribute"><div class="label">Category:</div><div class="value">build</div></div><div class="fixed-version attribute"><div class="label">Target version:</div><div class="value"><a title="17 May 2015" href="/versions/51">0.25</a></div></div></div><div class="splitcontentleft"><div class="start-date attribute"><div class="label">Start date:</div><div class="value">24 Jul 2014</div></div><div class="due-date attribute"><div class="label">Due date:</div><div class="value"></div></div><div class="progress attribute"><div class="label">% Done:</div><div class="value"><table class="progress progress-100"><tr><td style="width: 100%;" class="closed" title="100%"></td></tr></table><p class="percent">100%</p></div></div><div class="estimated-hours attribute"><div class="label">Estimated time:</div><div class="value"></div></div></div></div>


</div>

<hr />
<div class="description">
  <div class="contextual">
  
  </div>

  <p><strong>Description</strong></p>
  <div class="wiki">
  <p>Hi,</p>


	<p>I'm a GIMP dev and I was updating some of the dependencies on my locale environment.<br />I noticed that the header version.hpp would #include "svn_version.h", but that "svn_version.h" is not amongst the installed headers. Well as you guess, that breaks when a third party uses Exiv2. :-)<br />Easily fixed by adding svn_version.h in the installed files (just adding it in the LIBEXIV2_HDR list in src/CMakeLists.txt seems to do the trick).</p>


	<p>Thanks!</p>


	<p>Jehan</p>


	<p>P.S.: does Exiv2 plan to ever pass to git or any other decentralized versionning system?</p>
  </div>
</div>







</div>




<div id="history">
<h3>History</h3>
  <div id="change-2805" class="journal has-notes has-details">
    <div id="note-1">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-1" class="journal-link">#1</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="24 Jul 2014 08:54" href="/projects/exiv2/activity?from=2014-07-24">over 7 years</a> ago
      <span id="journal-2805-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Category</strong> set to <i>build</i></li>
       <li><strong>Status</strong> changed from <i>New</i> to <i>Assigned</i></li>
       <li><strong>Assignee</strong> set to <i>Robin Mills</i></li>
    </ul>
    <div id="journal-2805-notes" class="wiki"><p>svn_version.h is dynamically created by the build (using the svn command).  There is a script svn_version.sh which is run to generate the file.</p>


	<p>Try: $ make distclean ; make config ; ./configure ; make and everything should be OK.  I think make rebuild is about the same.</p>


	<p>I did submit a fix last week to the CMakeLists.txt to execute svn_version.sh (<a class="changeset" title="Fix CMake to execute the script src/svn_version.h (which generates the SVN support for Exiv2 -v -..." href="/projects/exiv2/repository/exiv2/revisions/3278">r3278</a> 2014-07-17) - perhaps you need to sync and run cmake again to get that change.</p>


	<p>The team hasn't discussed changing the version control system.  I recently started contributing to another project in which git is being used.  When I'm more confident of my understanding of git, I'll give this more thought.  I'm reluctant to change without a git guru on the team to keep us out of trouble.  I'm sure that we'll move in time, For the moment, SVN seems OK to me.  You are welcome to persuade me that we should adopt this in 2015.</p></div>
    </div>
  </div>
  
  <div id="change-2806" class="journal has-notes has-details">
    <div id="note-2">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-2" class="journal-link">#2</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="24 Jul 2014 09:10" href="/projects/exiv2/activity?from=2014-07-24">over 7 years</a> ago
      <span id="journal-2806-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Target version</strong> set to <i>0.25</i></li>
    </ul>
    <div id="journal-2806-notes" class="wiki"><p>Ah, Jehan</p>


	<p>Thanks very much for reporting this - and for providing the fix!  I've just understood what you've said about LIBEXIV2_HDR.  Quite so, I didn't think of that.  I've added a fix. <a class="changeset" title="Issue: #973.  svn_version.h is now exported with headers to /usr/include/exiv2/svn_version.h" href="/projects/exiv2/repository/exiv2/revisions/3284">r3284</a></p>


	<p>As you requested, I deleted your message on the Forum about this matter.  If you wish to start a team discussion about adopting git, can you kick that off on the Forum.</p>


	<p>Robin</p></div>
    </div>
  </div>
  
  <div id="change-2807" class="journal has-details">
    <div id="note-3">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-3" class="journal-link">#3</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="24 Jul 2014 09:10" href="/projects/exiv2/activity?from=2014-07-24">over 7 years</a> ago
      <span id="journal-2807-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>Assigned</i> to <i>Resolved</i></li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-2808" class="journal has-notes">
    <div id="note-4">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-4" class="journal-link">#4</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4017">Jehan Pag√®s</a> <a title="24 Jul 2014 09:34" href="/projects/exiv2/activity?from=2014-07-24">over 7 years</a> ago
      <span id="journal-2808-private_notes" class=""></span>
    </h4>

    <div id="journal-2808-notes" class="wiki"><p>Hi,</p>


	<p>Robin Mills wrote:</p>


<blockquote>

	<p>svn_version.h is dynamically created by the build (using the svn command).  There is a script svn_version.sh which is run to generate the file.</p>


	<p>Try: $ make distclean ; make config ; ./configure ; make and everything should be OK.  I think make rebuild is about the same.</p>


</blockquote>

	<p>I saw this script and the header is indeed created. I checked that I could find it in the repo with a `find` as soon as I encountered a compilation error (when I was compiling gexiv2). So it is <strong>created</strong> when I `make` BUT not <strong>installed</strong> when I `make install`.<br />The "not installed" part is the bug I was reporting.</p>


<blockquote>

	<p>I did submit a fix last week to the CMakeLists.txt to execute svn_version.sh (<a class="changeset" title="Fix CMake to execute the script src/svn_version.h (which generates the SVN support for Exiv2 -v -..." href="/projects/exiv2/repository/exiv2/revisions/3278">r3278</a> 2014-07-17) - perhaps you need to sync and run cmake again to get that change.</p>


</blockquote>

	<p>No I checked out a brand new locale copy just like 1 hour before I wrote this report. So I believe I have the last version.</p>


<blockquote>

	<p>The team hasn't discussed changing the version control system.  I recently started contributing to another project in which git is being used.  When I'm more confident of my understanding of git, I'll give this more thought.  I'm reluctant to change without a git guru on the team to keep us out of trouble.  I'm sure that we'll move in time, For the moment, SVN seems OK to me.  You are welcome to persuade me that we should adopt this in 2015.</p>


</blockquote>

	<p>I see many advantages to git: branches (which are not copy-paste of the whole tree, annoying to merge back to the main tree when it diverged a lot, etc.), working out of the network (it depends on people. Some are always connected. But I have regular occasions when I code without a connection. Not being able to check the logs, make diffs, checkout old commits, etc. makes life very complicated when working on a project with svn), very neat commit management, and so on.<br />Also I am always checking the right syntax to make and apply patches with svn. Do I have to patch <del>p0? -p1? It depends on how the contributor made the patch. Etc. On git, you ask the contributor to `git format-patch origin/master` and you `git am the-contributed-patch.patch`, you check, optionally ammend the commit and you push. You even keep the commit description and the authorship of the commit (the contributor, not yours!), which is very appealing to contributors. I have contributed many patches to many svn projects, and except the ones where I had my own svn account, I don't have my name in the logs (it can be in a commit message, or in a README or CONTRIBUTORS or AUTHORS sometimes, if the project people don't forget to add it which don't happen that often actually, but not in the logical place: the commit author). I still contribute but you could say that's not as welcoming (so potentially less contributions). Which is also good for you, to efficiently manage your contributions (who wrote what?), etc.<br />And last but not least, I find git a lot easier. But this one may be because I have mainly coded on git projects in the last years, and have not come around many svn projects lately. So I kind of forgot most of what I used to know about svn. :</del>)</p>


	<p>Anyway I was just saying. I don't really plan on persuading you. Better managing your own project the way you like it. :-) I just had a few annoyances on your repo today and I was thinking that if it had been a git repo, I would have spent half the time I spent on it.</p></div>
    </div>
  </div>
  
  <div id="change-2809" class="journal has-notes">
    <div id="note-5">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-5" class="journal-link">#5</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/4017">Jehan Pag√®s</a> <a title="24 Jul 2014 09:36" href="/projects/exiv2/activity?from=2014-07-24">over 7 years</a> ago
      <span id="journal-2809-private_notes" class=""></span>
    </h4>

    <div id="journal-2809-notes" class="wiki"><p>Oups did not see the next answer. Just ignore my last message.</p></div>
    </div>
  </div>
  
  <div id="change-2810" class="journal has-notes">
    <div id="note-6">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-6" class="journal-link">#6</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="24 Jul 2014 09:52" href="/projects/exiv2/activity?from=2014-07-24">over 7 years</a> ago
      <span id="journal-2810-private_notes" class=""></span>
    </h4>

    <div id="journal-2810-notes" class="wiki"><p>Thanks for all of this, Jehan.  I'm sorry to have inconvenienced you with both this issue and difficulties with svn.  I really appreciate you letting us know.  We aim to please and sometimes don't!</p>


	<p>For sure, we have to consider git.  Everybody who has adopted it, reports great happiness.  It's not the pain of change that causes me to hesitate.  It's the possibility of getting into trouble as we learn "the ways of the force.".  I'll put this on the agenda for the next team meeting which will probably be to plan the v0.26 release.  Currently we have a plan to release v0.25 in November.</p></div>
    </div>
  </div>
  
  <div id="change-3653" class="journal has-details">
    <div id="note-7">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-7" class="journal-link">#7</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="08 May 2015 16:28" href="/projects/exiv2/activity?from=2015-05-08">over 6 years</a> ago
      <span id="journal-3653-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>% Done</strong> changed from <i>0</i> to <i>100</i></li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-3875" class="journal has-details">
    <div id="note-8">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-8" class="journal-link">#8</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/53">Andreas Huggel</a> <a title="21 Jun 2015 16:41" href="/projects/exiv2/activity?from=2015-06-21">over 6 years</a> ago
      <span id="journal-3875-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>Resolved</i> to <i>Closed</i></li>
    </ul>
    
    </div>
  </div>
  


</div>

<div style="clear: both;"></div>
<div class="contextual">





</div>


<div style="clear: both;"></div>


<p class="other-formats">Also available in:  <span><a class="atom" rel="nofollow" href="/issues/974.atom">Atom</a></span>
  <span><a class="pdf" rel="nofollow" href="/issues/974.pdf">PDF</a></span>
</p>





        
        <div style="clear:both;"></div>
    </div>
</div>
</div>

<div id="ajax-indicator" style="display:none;"><span>Loading...</span></div>
<div id="ajax-modal" style="display:none;"></div>

<div id="footer">
  <div class="bgl"><div class="bgr">
    Powered by <a href="https://www.redmine.org/">Redmine</a> &copy; 2006-2018 Jean-Philippe Lang
  </div></div>
</div>
</div>
</div>

</body>
</html>
