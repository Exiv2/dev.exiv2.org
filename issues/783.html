<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<title>Bug #783: Xmp.fwl.LocalCaption wrong key - Exiv2</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="description" content="Redmine" />
<meta name="keywords" content="issue,bug,tracker" />
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="QOU7T+K4wMPVzmGLa60cBFeeE4eXS4ieU3Bcrd/qaWWiqJCgkMIMw4CqfofUehA3aAxH/maoKSSuUMwlnNOOCg==" />
<link rel='shortcut icon' href='/favicon.ico?1550767427' />
<link rel="stylesheet" media="all" href="/stylesheets/jquery/jquery-ui-1.11.0.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/application.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/responsive.css?1550767427" />

<script src="/javascripts/jquery-1.11.1-ui-1.11.0-ujs-4.3.1.js?1550767427"></script>
<script src="/javascripts/application.js?1550767427"></script>
<script src="/javascripts/responsive.js?1550767427"></script>
<script>
//<![CDATA[
$(window).load(function(){ warnLeavingUnsaved('The current page contains unsaved text that will be lost if you leave this page.'); });
//]]>
</script>


<!-- page specific tags -->
    <link rel="alternate" type="application/atom+xml" title="Exiv2 - Bug #783: Xmp.fwl.LocalCaption wrong key" href="https://dev.exiv2.org/issues/783.atom" />
<script src="/javascripts/context_menu.js?1550767427"></script><link rel="stylesheet" media="screen" href="/stylesheets/context_menu.css?1550767427" /></head>
<body class="project-exiv2 has-main-menu controller-issues action-show avatars-off">

<div id="wrapper">

<div class="flyout-menu js-flyout-menu">


        <div class="flyout-menu__search">
            <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
            <input type="hidden" name="issues" value="1" />
            <label class="search-magnifier search-magnifier--flyout" for="flyout-search">&#9906;</label>
            <input type="text" name="q" id="flyout-search" class="small js-search-input" placeholder="Search" />
</form>        </div>


        <h3>Project</h3>
        <span class="js-project-menu"></span>

    <h3>General</h3>
    <span class="js-general-menu"></span>

    <span class="js-sidebar flyout-menu__sidebar"></span>

    <h3>Profile</h3>
    <span class="js-profile-menu"></span>

</div>

<div id="wrapper2">
<div id="wrapper3">
<div id="top-menu">
    <div id="account">
        <ul><li><a class="login" href="/login">Sign in</a></li></ul>    </div>
    
    <ul><li><a class="home" href="/">Home</a></li><li><a class="projects" href="/projects">Projects</a></li><li><a class="help" href="https://www.redmine.org/guide">Help</a></li></ul></div>

<div id="header">

    <a href="#" class="mobile-toggle-button js-flyout-menu-toggle-button"></a>

    <div id="quick-search">
        <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
        <input type="hidden" name="scope" />
        <input type="hidden" name="issues" value="1" />
        <label for='q'>
          <a accesskey="4" href="/projects/exiv2/search">Search</a>:
        </label>
        <input type="text" name="q" id="q" size="20" class="small" accesskey="f" />
</form>        <div id="project-jump" class="drdn"><span class="drdn-trigger">Exiv2</span><div class="drdn-content"><div class="quick-search"><input type="text" name="q" id="projects-quick-search" value="" class="autocomplete" data-automcomplete-url="/projects/autocomplete.js?jump=issues" autocomplete="off" /></div><div class="drdn-items projects selection"></div><div class="drdn-items all-projects selection"><a href="/projects?jump=issues">All Projects</a></div></div></div>
    </div>

    <h1><span class="current-project">Exiv2</span></h1>

    <div id="main-menu" class="tabs">
        <ul><li><a class="overview" href="/projects/exiv2">Overview</a></li><li><a class="activity" href="/projects/exiv2/activity">Activity</a></li><li><a class="roadmap" href="/projects/exiv2/roadmap">Roadmap</a></li><li><a class="issues selected" href="/projects/exiv2/issues">Issues</a></li><li><a class="news" href="/projects/exiv2/news">News</a></li><li><a class="wiki" href="/projects/exiv2/wiki">Wiki</a></li><li><a class="boards" href="/projects/exiv2/boards">Forums</a></li><li><a class="repository" href="/projects/exiv2/repository">Repository</a></li></ul>
        <div class="tabs-buttons" style="display:none;">
            <button class="tab-left" onclick="moveTabLeft(this); return false;"></button>
            <button class="tab-right" onclick="moveTabRight(this); return false;"></button>
        </div>
    </div>
</div>

<div id="main" class="">
    <div id="sidebar">
          <h3>Issues</h3>

<ul>
<li><a href="/projects/exiv2/issues?set_filter=1">View all issues</a></li>
<li><a href="/projects/exiv2/issues/report">Summary</a></li>

</ul>









        
    </div>

    <div id="content">
        
        <div class="contextual">





</div>


<h2>Bug #783</h2>

<div class="issue tracker-1 status-5 priority-4 priority-default closed details">

  <div class="gravatar-with-child">
    
    
  </div>

<div class="subject">
<div><h3>Xmp.fwl.LocalCaption wrong key</h3></div>
</div>
        <p class="author">
        Added by <a class="user active" href="/users/2620">Oliver Loch</a> <a title="02 Aug 2011 05:05" href="/projects/exiv2/activity?from=2011-08-02">over 10 years</a> ago.
        Updated <a title="21 Jun 2015 16:42" href="/projects/exiv2/activity?from=2015-06-21">over 6 years</a> ago.
        </p>

<div class="attributes">
<div class="splitcontent"><div class="splitcontentleft"><div class="status attribute"><div class="label">Status:</div><div class="value">Closed</div></div><div class="priority attribute"><div class="label">Priority:</div><div class="value">Normal</div></div><div class="assigned-to attribute"><div class="label">Assignee:</div><div class="value"><a class="user active" href="/users/53">Andreas Huggel</a></div></div><div class="category attribute"><div class="label">Category:</div><div class="value">xmp</div></div><div class="fixed-version attribute"><div class="label">Target version:</div><div class="value"><a title="17 May 2015" href="/versions/51">0.25</a></div></div></div><div class="splitcontentleft"><div class="start-date attribute"><div class="label">Start date:</div><div class="value">02 Aug 2011</div></div><div class="due-date attribute"><div class="label">Due date:</div><div class="value"></div></div><div class="progress attribute"><div class="label">% Done:</div><div class="value"><table class="progress progress-0"><tr><td style="width: 100%;" class="todo"></td></tr></table><p class="percent">0%</p></div></div><div class="estimated-hours attribute"><div class="label">Estimated time:</div><div class="value"></div></div></div></div>


</div>

<hr />
<div class="description">
  <div class="contextual">
  
  </div>

  <p><strong>Description</strong></p>
  <div class="wiki">
  <p>Hi,</p>


	<p>I'm not 100% sure this is a bug:</p>


	<p>I have a lot of pictures that use Xmp.fwl.LocalCaption as the main description.</p>


	<p>I can see the key when I do a 'exiv2 -PX $picture'</p>


<pre>
Xmp.fwl.LocalCaption                         XmpText   239 blablahblah lot of text here 
</pre>

	<p>but trying to change it:</p>


<pre>

# exiv2 -ix -M "set Xmp.fwl.LocalCaption XmpText blahblah" A_S_9686.JPG 
-M option 1: Invalid key `Xmp.fwl.LocalCaption'
exiv2: Error parsing -M option arguments
Usage: exiv2 [ options ] [ action ] file ...

Manipulate the Exif metadata of images.

# exiv2 -ix -M "set Xmp.fwl.LocalCaption blahblah" A_S_9686.JPG 
-M option 1: Invalid key `Xmp.fwl.LocalCaption'
exiv2: Error parsing -M option arguments
Usage: exiv2 [ options ] [ action ] file ...

Manipulate the Exif metadata of images.

</pre>

	<p>is not working. Am I missing something or did I hit a bug?</p>


	<p>Btw. There are other keys in the Xmp.fwl "class".</p>


	<p>If you want to have the picture for further investigation just write me an email :)</p>


	<p>Here the exiv2 version and stuff:</p>


<pre>
# exiv2 -V
exiv2 0.20
Copyright (C) 2004-2010 Andreas Huggel.

This program is free software; you can redistribute it and/or
modify it under the terms of the GNU General Public License
as published by the Free Software Foundation; either version 2
of the License, or (at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public
License along with this program; if not, write to the Free
Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
Boston, MA 02110-1301 USA
</pre>

	<p>Thanks!</p>


	<p>KR,</p>


	<p>Grimeton</p>
  </div>
</div>







</div>




<div id="history">
<h3>History</h3>
  <div id="change-1961" class="journal has-notes has-details">
    <div id="note-1">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-1" class="journal-link">#1</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/53">Andreas Huggel</a> <a title="04 Aug 2011 07:18" href="/projects/exiv2/activity?from=2011-08-04">over 10 years</a> ago
      <span id="journal-1961-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>New</i> to <i>Feedback</i></li>
    </ul>
    <div id="journal-1961-notes" class="wiki"><p>Exiv2 doesn't know the <code>fwl</code> prefix. You need to register it. Something like this works:</p>


<pre>
exiv2 -M"reg fwl some-namespace" -M"set Xmp.fwl.LocalCaption blahblah" image.jpg
</pre>

	<p>Where <code>some-namespace</code> should be replaced with the proper namespace URI for <code>fwl</code>.</p>


	<p>If you know that URI, good. If not, you can trick exiv2 into showing it by running the above command (with "some-namespace") on a copy of an existing image that already has <code>fwl</code> properties and you'll get a warning of the form</p>


<pre>
Warning: Updating namespace URI for fwl from http://the.real.uri/ to some-namespace/
</pre>

	<p>(maybe you'll need a newer version of exiv2 for that than 0.20, that warning was introduced relatively recently IIRC)</p>


	<p>Andreas</p></div>
    </div>
  </div>
  
  <div id="change-3553" class="journal has-notes has-details">
    <div id="note-2">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-2" class="journal-link">#2</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/119">Robin Mills</a> <a title="28 Apr 2015 12:18" href="/projects/exiv2/activity?from=2015-04-28">over 6 years</a> ago
      <span id="journal-3553-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>Feedback</i> to <i>Resolved</i></li>
       <li><strong>Assignee</strong> set to <i>Andreas Huggel</i></li>
       <li><strong>Target version</strong> set to <i>0.25</i></li>
    </ul>
    <div id="journal-3553-notes" class="wiki"><p>I'm going to set the status of this to "Resolved".  Google can help me find the definition of the fwl namespace.  In fact, this bug report is the first item that Google lists!  I've confirmed that Andreas suggestion is totally correct:<pre>$ exiv2 -M"reg fwl http://exiv2.org/issue783" -M"set Xmp.fwl.LocalCaption XmpText blahblah" jpg.jpg 
Warning: Updating namespace URI for fwl from http://clanmils.com/ to http://exiv2.org/issue783/
607 rmills@rmillsmbp:~/gnu/exiv2/trunk $ exiv2 -pX jpg.jpg | xmllint -pretty 1 -
&lt;?xml version="1.0"?&gt;
&lt;?xpacket begin="ï»¿" id="W5M0MpCehiHzreSzNTczkc9d"?&gt;
&lt;x:xmpmeta xmlns:x="adobe:ns:meta/" x:xmptk="XMP Core 4.4.0-Exiv2"&gt;
  &lt;rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"&gt;
    &lt;rdf:Description xmlns:xmp="http://ns.adobe.com/xap/1.0/" 
       xmlns:fwl="http://exiv2.org/issue783/"      fwl:LocalCaption="blahblah" 
       xmlns:dc="http://purl.org/dc/elements/1.1/" rdf:about="" xmp:Rating="0" 
       xmp:ModifyDate="2015-02-13T20:46:51-06:00"&gt;
      &lt;dc:title&gt;
        &lt;rdf:Alt&gt;
          &lt;rdf:li xml:lang="x-default"&gt;the rest drink soda&lt;/rdf:li&gt;
          &lt;rdf:li xml:lang="en-GB"&gt;the Brits are in the bar&lt;/rdf:li&gt;
          &lt;rdf:li xml:lang="de-DE"&gt;the Germans like beer&lt;/rdf:li&gt;
        &lt;/rdf:Alt&gt;
      &lt;/dc:title&gt;
    &lt;/rdf:Description&gt;
  &lt;/rdf:RDF&gt;
&lt;/x:xmpmeta&gt;
&lt;?xpacket end="w"?&gt;
$ bin/exiv2json -x jpg.jpg 
{
    "Xmp": {
        "xmp": {
            "Rating": "0",
            "ModifyDate": "2015-02-13T20:46:51-06:00" 
        },
        "fwl": {
            "LocalCaption": "blahblah" 
        },
        "dc": {
            "title": {
                "lang": {
                    "x-default": "the rest drink soda",
                    "en-GB": "the Brits are in the bar",
                    "de-DE": "the Germans like beer" 
                }
            }
        }
    }
}</pre></p></div>
    </div>
  </div>
  
  <div id="change-3906" class="journal has-details">
    <div id="note-3">
    <div class="contextual">
      <span class="journal-actions"></span>
      <a href="#note-3" class="journal-link">#3</a>
    </div>
    <h4>
      
      Updated by <a class="user active" href="/users/53">Andreas Huggel</a> <a title="21 Jun 2015 16:42" href="/projects/exiv2/activity?from=2015-06-21">over 6 years</a> ago
      <span id="journal-3906-private_notes" class=""></span>
    </h4>

    <ul class="details">
       <li><strong>Status</strong> changed from <i>Resolved</i> to <i>Closed</i></li>
    </ul>
    
    </div>
  </div>
  


</div>

<div style="clear: both;"></div>
<div class="contextual">





</div>


<div style="clear: both;"></div>


<p class="other-formats">Also available in:  <span><a class="atom" rel="nofollow" href="/issues/783.atom">Atom</a></span>
  <span><a class="pdf" rel="nofollow" href="/issues/783.pdf">PDF</a></span>
</p>





        
        <div style="clear:both;"></div>
    </div>
</div>
</div>

<div id="ajax-indicator" style="display:none;"><span>Loading...</span></div>
<div id="ajax-modal" style="display:none;"></div>

<div id="footer">
  <div class="bgl"><div class="bgr">
    Powered by <a href="https://www.redmine.org/">Redmine</a> &copy; 2006-2018 Jean-Philippe Lang
  </div></div>
</div>
</div>
</div>

</body>
</html>
