<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<title>properties.patch - Exiv2</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="description" content="Redmine" />
<meta name="keywords" content="issue,bug,tracker" />
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="Y8m4/Wt0zNPB5/yzQ1qbzdLwT/xmmzkvMzc9Mn36wA6BhBMSGQ4A05SD47/8jZf+7WIbhZd4mJXOF626PsMnYQ==" />
<link rel='shortcut icon' href='/favicon.ico?1550767427' />
<link rel="stylesheet" media="all" href="/stylesheets/jquery/jquery-ui-1.11.0.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/application.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/responsive.css?1550767427" />

<script src="/javascripts/jquery-1.11.1-ui-1.11.0-ujs-4.3.1.js?1550767427"></script>
<script src="/javascripts/application.js?1550767427"></script>
<script src="/javascripts/responsive.js?1550767427"></script>
<script>
//<![CDATA[
$(window).load(function(){ warnLeavingUnsaved('The current page contains unsaved text that will be lost if you leave this page.'); });
//]]>
</script>


<!-- page specific tags -->
    <link rel="stylesheet" media="screen" href="/stylesheets/scm.css?1550767427" /></head>
<body class="project-exiv2 has-main-menu controller-attachments action-show avatars-off">

<div id="wrapper">

<div class="flyout-menu js-flyout-menu">


        <div class="flyout-menu__search">
            <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
            
            <label class="search-magnifier search-magnifier--flyout" for="flyout-search">&#9906;</label>
            <input type="text" name="q" id="flyout-search" class="small js-search-input" placeholder="Search" />
</form>        </div>


        <h3>Project</h3>
        <span class="js-project-menu"></span>

    <h3>General</h3>
    <span class="js-general-menu"></span>

    <span class="js-sidebar flyout-menu__sidebar"></span>

    <h3>Profile</h3>
    <span class="js-profile-menu"></span>

</div>

<div id="wrapper2">
<div id="wrapper3">
<div id="top-menu">
    <div id="account">
        <ul><li><a class="login" href="/login">Sign in</a></li></ul>    </div>
    
    <ul><li><a class="home" href="/">Home</a></li><li><a class="projects" href="/projects">Projects</a></li><li><a class="help" href="https://www.redmine.org/guide">Help</a></li></ul></div>

<div id="header">

    <a href="#" class="mobile-toggle-button js-flyout-menu-toggle-button"></a>

    <div id="quick-search">
        <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
        <input type="hidden" name="scope" />
        
        <label for='q'>
          <a accesskey="4" href="/projects/exiv2/search">Search</a>:
        </label>
        <input type="text" name="q" id="q" size="20" class="small" accesskey="f" />
</form>        <div id="project-jump" class="drdn"><span class="drdn-trigger">Exiv2</span><div class="drdn-content"><div class="quick-search"><input type="text" name="q" id="projects-quick-search" value="" class="autocomplete" data-automcomplete-url="/projects/autocomplete.js?jump=issues" autocomplete="off" /></div><div class="drdn-items projects selection"></div><div class="drdn-items all-projects selection"><a href="/projects?jump=issues">All Projects</a></div></div></div>
    </div>

    <h1><span class="current-project">Exiv2</span></h1>

    <div id="main-menu" class="tabs">
        <ul><li><a class="overview" href="/projects/exiv2">Overview</a></li><li><a class="activity" href="/projects/exiv2/activity">Activity</a></li><li><a class="roadmap" href="/projects/exiv2/roadmap">Roadmap</a></li><li><a class="issues selected" href="/projects/exiv2/issues">Issues</a></li><li><a class="news" href="/projects/exiv2/news">News</a></li><li><a class="wiki" href="/projects/exiv2/wiki">Wiki</a></li><li><a class="boards" href="/projects/exiv2/boards">Forums</a></li><li><a class="repository" href="/projects/exiv2/repository">Repository</a></li></ul>
        <div class="tabs-buttons" style="display:none;">
            <button class="tab-left" onclick="moveTabLeft(this); return false;"></button>
            <button class="tab-right" onclick="moveTabRight(this); return false;"></button>
        </div>
    </div>
</div>

<div id="main" class="nosidebar">
    <div id="sidebar">
        
        
    </div>

    <div id="content">
        
        <div class="contextual">
  <a class="icon icon-download" href="/attachments/download/56/properties.patch">Download (49 KB)</a></div>

<h2>
  <a class="issue tracker-1 status-5 priority-4 priority-default closed" title="SVN property changes" href="/issues/589">Bug #589</a> Â» properties.patch
</h2>

<div class="attachments">
<p>
   <span class="author">Redmine Admin, 12 Dec 2008 01:43</span></p>
</div>
<div class="filecontent-container">
  
  <form action="/attachments/56" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
    <p>
      View differences:
      <label><input type="radio" name="type" id="type_inline" value="inline" onchange="this.form.submit()" checked="checked" /> inline</label>
      <label><input type="radio" name="type" id="type_sbs" value="sbs" onchange="this.form.submit()" /> side by side</label>
    </p>
</form>  
<div class="autoscroll">
<table class="filecontent">
<thead>
  <tr>
    <th colspan="3" class="filename">
      src/pngimage.cpp	(working copy)
    </th>
  </tr>
</thead>
<tbody>
<tr>
  <th class="line-num">20</th>
  <th class="line-num">20</th>
  <td class="line-code ">
    <pre> */</pre>
  </td>
</tr>
<tr>
  <th class="line-num">21</th>
  <th class="line-num">21</th>
  <td class="line-code ">
    <pre>/*</pre>
  </td>
</tr>
<tr>
  <th class="line-num">22</th>
  <th class="line-num">22</th>
  <td class="line-code ">
    <pre>  File:    pngimage.cpp</pre>
  </td>
</tr>
<tr>
  <th class="line-num">23</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  Version: $Rev<span>: 823 </span>$</pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">23</th>
  <td class="line-code diff_in">
    <pre>  Version: $Rev<span></span>$</pre>
  </td>
</tr>
<tr>
  <th class="line-num">24</th>
  <th class="line-num">24</th>
  <td class="line-code ">
    <pre>  Author(s): Gilles Caulier (cgilles) &lt;caulier dot gilles at gmail dot com&gt;</pre>
  </td>
</tr>
<tr>
  <th class="line-num">25</th>
  <th class="line-num">25</th>
  <td class="line-code ">
    <pre>  History: 12-Jun-06, gc: submitted</pre>
  </td>
</tr>
<tr>
  <th class="line-num">26</th>
  <th class="line-num">26</th>
  <td class="line-code ">
    <pre>  Credits: See header file</pre>
  </td>
</tr>
<tr>
  <th class="line-num">27</th>
  <th class="line-num">27</th>
  <td class="line-code ">
    <pre> */</pre>
  </td>
</tr>
<tr>
  <th class="line-num">28</th>
  <th class="line-num">28</th>
  <td class="line-code ">
    <pre>// *****************************************************************************</pre>
  </td>
</tr>
<tr>
  <th class="line-num">29</th>
  <th class="line-num">29</th>
  <td class="line-code ">
    <pre>#include &quot;rcsid.hpp&quot;</pre>
  </td>
</tr>
<tr>
  <th class="line-num">30</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>EXIV2_RCSID(&quot;@(#) $Id<span>: pngimage.cpp 823 2006-06-12 07:35:00Z cgilles </span>$&quot;)</pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">30</th>
  <td class="line-code diff_in">
    <pre>EXIV2_RCSID(&quot;@(#) $Id<span></span>$&quot;)</pre>
  </td>
</tr>
<tr>
  <th class="line-num">31</th>
  <th class="line-num">31</th>
  <td class="line-code ">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num">32</th>
  <th class="line-num">32</th>
  <td class="line-code ">
    <pre>// *****************************************************************************</pre>
  </td>
</tr>
<tr>
  <th class="line-num">33</th>
  <th class="line-num">33</th>
  <td class="line-code ">
    <pre></pre>
  </td>
</tr>
</tbody>
</table>
</div>
<div class="autoscroll">
<table class="filecontent">
<thead>
  <tr>
    <th colspan="3" class="filename">
      src/pngchunk.cpp	(working copy)
    </th>
  </tr>
</thead>
<tbody>
<tr>
  <th class="line-num">20</th>
  <th class="line-num">20</th>
  <td class="line-code ">
    <pre> */</pre>
  </td>
</tr>
<tr>
  <th class="line-num">21</th>
  <th class="line-num">21</th>
  <td class="line-code ">
    <pre>/*</pre>
  </td>
</tr>
<tr>
  <th class="line-num">22</th>
  <th class="line-num">22</th>
  <td class="line-code ">
    <pre>  File:    pngchunk.cpp</pre>
  </td>
</tr>
<tr>
  <th class="line-num">23</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  Version: $Rev<span>: 823 </span>$</pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">23</th>
  <td class="line-code diff_in">
    <pre>  Version: $Rev<span></span>$</pre>
  </td>
</tr>
<tr>
  <th class="line-num">24</th>
  <th class="line-num">24</th>
  <td class="line-code ">
    <pre>  Author(s): Gilles Caulier (cgilles) &lt;caulier dot gilles at gmail dot com&gt;</pre>
  </td>
</tr>
<tr>
  <th class="line-num">25</th>
  <th class="line-num">25</th>
  <td class="line-code ">
    <pre>  History: 12-Jun-06, gc: submitted</pre>
  </td>
</tr>
<tr>
  <th class="line-num">26</th>
  <th class="line-num">26</th>
  <td class="line-code ">
    <pre>  Credits: See header file</pre>
  </td>
</tr>
<tr>
  <th class="line-num">27</th>
  <th class="line-num">27</th>
  <td class="line-code ">
    <pre> */</pre>
  </td>
</tr>
<tr>
  <th class="line-num">28</th>
  <th class="line-num">28</th>
  <td class="line-code ">
    <pre>// *****************************************************************************</pre>
  </td>
</tr>
<tr>
  <th class="line-num">29</th>
  <th class="line-num">29</th>
  <td class="line-code ">
    <pre>#include &quot;rcsid.hpp&quot;</pre>
  </td>
</tr>
<tr>
  <th class="line-num">30</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>EXIV2_RCSID(&quot;@(#) $Id<span>: pngchunk.cpp 823 2006-06-23 07:35:00Z cgilles </span>$&quot;)</pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">30</th>
  <td class="line-code diff_in">
    <pre>EXIV2_RCSID(&quot;@(#) $Id<span></span>$&quot;)</pre>
  </td>
</tr>
<tr>
  <th class="line-num">31</th>
  <th class="line-num">31</th>
  <td class="line-code ">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num">32</th>
  <th class="line-num">32</th>
  <td class="line-code ">
    <pre>// *****************************************************************************</pre>
  </td>
</tr>
<tr>
  <th class="line-num">33</th>
  <th class="line-num">33</th>
  <td class="line-code ">
    <pre>// included header files</pre>
  </td>
</tr>
</tbody>
</table>
</div>
<div class="autoscroll">
<table class="filecontent">
<thead>
  <tr>
    <th colspan="3" class="filename">
      src/pngchunk_int.hpp	(working copy)
    </th>
  </tr>
</thead>
<tbody>
<tr>
  <th class="line-num">25</th>
  <th class="line-num">25</th>
  <td class="line-code ">
    <pre>           &lt;a href=&quot;http://www.vias.org/pngguide/chapter11_04.html&quot;&gt;PNG tTXt and zTXt chunks structures&lt;/a&gt; from PNG definitive guide,&lt;br&gt;</pre>
  </td>
</tr>
<tr>
  <th class="line-num">26</th>
  <th class="line-num">26</th>
  <td class="line-code ">
    <pre>           &lt;a href=&quot;http://www.sno.phy.queensu.ca/~phil/exiftool/TagNames/PNG.html&quot;&gt;PNG tags list&lt;/a&gt; by Phil Harvey&lt;br&gt;</pre>
  </td>
</tr>
<tr>
  <th class="line-num">27</th>
  <th class="line-num">27</th>
  <td class="line-code ">
    <pre>           Email communication with &lt;a href=&quot;mailto:caulier dot gilles at gmail dot com&quot;&gt;caulier dot gilles at gmail dot com&lt;/a&gt;&lt;br&gt;</pre>
  </td>
</tr>
<tr>
  <th class="line-num">28</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  @version $Rev<span>: 823 </span>$</pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">28</th>
  <td class="line-code diff_in">
    <pre>  @version $Rev<span></span>$</pre>
  </td>
</tr>
<tr>
  <th class="line-num">29</th>
  <th class="line-num">29</th>
  <td class="line-code ">
    <pre>  @author  Andreas Huggel (ahu)</pre>
  </td>
</tr>
<tr>
  <th class="line-num">30</th>
  <th class="line-num">30</th>
  <td class="line-code ">
    <pre>           &lt;a href=&quot;mailto:ahuggel@gmx.net&quot;&gt;ahuggel@gmx.net&lt;/a&gt;</pre>
  </td>
</tr>
<tr>
  <th class="line-num">31</th>
  <th class="line-num">31</th>
  <td class="line-code ">
    <pre>  @author  Gilles Caulier (cgilles)</pre>
  </td>
</tr>
</tbody>
</table>
</div>
<div class="autoscroll">
<table class="filecontent">
<thead>
  <tr>
    <th colspan="3" class="filename">
      src/pngimage.hpp	(working copy)
    </th>
  </tr>
</thead>
<tbody>
<tr>
  <th class="line-num">23</th>
  <th class="line-num">23</th>
  <td class="line-code ">
    <pre>  @brief   PNG image, implemented using the following references:</pre>
  </td>
</tr>
<tr>
  <th class="line-num">24</th>
  <th class="line-num">24</th>
  <td class="line-code ">
    <pre>           &lt;a href=&quot;http://www.w3.org/TR/PNG/&quot;&gt;PNG specification&lt;/a&gt; by W3C&lt;br&gt;</pre>
  </td>
</tr>
<tr>
  <th class="line-num">25</th>
  <th class="line-num">25</th>
  <td class="line-code ">
    <pre>           &lt;a href=&quot;http://www.sno.phy.queensu.ca/~phil/exiftool/TagNames/PNG.html&quot;&gt;PNG tags list&lt;/a&gt; by Phil Harvey&lt;br&gt;</pre>
  </td>
</tr>
<tr>
  <th class="line-num">26</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  @version $Rev<span>: 823 </span>$</pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">26</th>
  <td class="line-code diff_in">
    <pre>  @version $Rev<span></span>$</pre>
  </td>
</tr>
<tr>
  <th class="line-num">27</th>
  <th class="line-num">27</th>
  <td class="line-code ">
    <pre>  @author  Andreas Huggel (ahu)</pre>
  </td>
</tr>
<tr>
  <th class="line-num">28</th>
  <th class="line-num">28</th>
  <td class="line-code ">
    <pre>           &lt;a href=&quot;mailto:ahuggel@gmx.net&quot;&gt;ahuggel@gmx.net&lt;/a&gt;</pre>
  </td>
</tr>
<tr>
  <th class="line-num">29</th>
  <th class="line-num">29</th>
  <td class="line-code ">
    <pre>  @author  Gilles Caulier (cgilles)</pre>
  </td>
</tr>
</tbody>
</table>
</div>
<div class="autoscroll">
<table class="filecontent">
<thead>
  <tr>
    <th colspan="3" class="filename">
      msvc/exivsimple/stdafx.h	(working copy)
    </th>
  </tr>
</thead>
<tbody>
<tr>
  <th class="line-num">1</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>// ***************************************************************** -*- C++ -*-<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">2</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>/*<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">3</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> * Copyright (C) 2004-2007 Andreas Huggel &lt;ahuggel@gmx.net&gt;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">4</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> * <span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">5</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> * This program is part of the Exiv2 distribution.<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">6</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> *<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">7</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> * This program is free software; you can redistribute it and/or<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">8</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> * modify it under the terms of the GNU General Public License<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">9</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> * as published by the Free Software Foundation; either version 2<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">10</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> * of the License, or (at your option) any later version.<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">11</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> * <span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">12</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> * This program is distributed in the hope that it will be useful,<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">13</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> * but WITHOUT ANY WARRANTY; without even the implied warranty of<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">14</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">15</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> * GNU General Public License for more details.<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">16</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> * <span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">17</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> * You should have received a copy of the GNU General Public License<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">18</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> * along with this program; if not, write to the Free Software<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">19</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> * Foundation, Inc., 51 Franklin Street, 5th Floor, Boston, MA 02110-1301 USA.<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">20</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> */<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">21</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>/*!<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">22</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  @file    stdafx.h<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">23</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  @brief   Precompiled header file support<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">24</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  @version $Rev$<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">25</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  @author  Brad Schick (brad) <span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">26</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>           &lt;a href=&quot;mailto:brad@robotbattle.com&quot;&gt;brad@robotbattle.com&lt;/a&gt;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">27</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  @date    12-Nov-04, brad: created<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">28</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> */<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">29</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>// *****************************************************************************<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">30</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num">31</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>#pragma once<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">32</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num">33</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>#define WIN32_LEAN_AND_MEAN<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">34</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>#include &lt;windows.h&gt;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">1</th>
  <td class="line-code diff_in">
    <pre>// ***************************************************************** -*- C++ -*-<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">2</th>
  <td class="line-code diff_in">
    <pre>/*<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">3</th>
  <td class="line-code diff_in">
    <pre> * Copyright (C) 2004-2007 Andreas Huggel &lt;ahuggel@gmx.net&gt;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">4</th>
  <td class="line-code diff_in">
    <pre> * <span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">5</th>
  <td class="line-code diff_in">
    <pre> * This program is part of the Exiv2 distribution.<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">6</th>
  <td class="line-code diff_in">
    <pre> *<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">7</th>
  <td class="line-code diff_in">
    <pre> * This program is free software; you can redistribute it and/or<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">8</th>
  <td class="line-code diff_in">
    <pre> * modify it under the terms of the GNU General Public License<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">9</th>
  <td class="line-code diff_in">
    <pre> * as published by the Free Software Foundation; either version 2<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">10</th>
  <td class="line-code diff_in">
    <pre> * of the License, or (at your option) any later version.<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">11</th>
  <td class="line-code diff_in">
    <pre> * <span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">12</th>
  <td class="line-code diff_in">
    <pre> * This program is distributed in the hope that it will be useful,<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">13</th>
  <td class="line-code diff_in">
    <pre> * but WITHOUT ANY WARRANTY; without even the implied warranty of<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">14</th>
  <td class="line-code diff_in">
    <pre> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">15</th>
  <td class="line-code diff_in">
    <pre> * GNU General Public License for more details.<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">16</th>
  <td class="line-code diff_in">
    <pre> * <span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">17</th>
  <td class="line-code diff_in">
    <pre> * You should have received a copy of the GNU General Public License<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">18</th>
  <td class="line-code diff_in">
    <pre> * along with this program; if not, write to the Free Software<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">19</th>
  <td class="line-code diff_in">
    <pre> * Foundation, Inc., 51 Franklin Street, 5th Floor, Boston, MA 02110-1301 USA.<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">20</th>
  <td class="line-code diff_in">
    <pre> */<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">21</th>
  <td class="line-code diff_in">
    <pre>/*!<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">22</th>
  <td class="line-code diff_in">
    <pre>  @file    stdafx.h<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">23</th>
  <td class="line-code diff_in">
    <pre>  @brief   Precompiled header file support<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">24</th>
  <td class="line-code diff_in">
    <pre>  @version $Rev$<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">25</th>
  <td class="line-code diff_in">
    <pre>  @author  Brad Schick (brad) <span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">26</th>
  <td class="line-code diff_in">
    <pre>           &lt;a href=&quot;mailto:brad@robotbattle.com&quot;&gt;brad@robotbattle.com&lt;/a&gt;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">27</th>
  <td class="line-code diff_in">
    <pre>  @date    12-Nov-04, brad: created<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">28</th>
  <td class="line-code diff_in">
    <pre> */<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">29</th>
  <td class="line-code diff_in">
    <pre>// *****************************************************************************<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">30</th>
  <td class="line-code diff_in">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">31</th>
  <td class="line-code diff_in">
    <pre>#pragma once<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">32</th>
  <td class="line-code diff_in">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">33</th>
  <td class="line-code diff_in">
    <pre>#define WIN32_LEAN_AND_MEAN<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">34</th>
  <td class="line-code diff_in">
    <pre>#include &lt;windows.h&gt;<span></span></pre>
  </td>
</tr>
</tbody>
</table>
</div>
<div class="autoscroll">
<table class="filecontent">
<thead>
  <tr>
    <th colspan="3" class="filename">
      msvc/exivsimple/exivsimple.cpp	(working copy)
    </th>
  </tr>
</thead>
<tbody>
<tr>
  <th class="line-num">1</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>// ***************************************************************** -*- C++ -*-<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">2</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>/*<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">3</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> * Copyright (C) 2004-2008 Andreas Huggel &lt;ahuggel@gmx.net&gt;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">4</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> * <span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">5</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> * This program is part of the Exiv2 distribution.<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">6</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> *<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">7</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> * This program is free software; you can redistribute it and/or<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">8</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> * modify it under the terms of the GNU General Public License<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">9</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> * as published by the Free Software Foundation; either version 2<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">10</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> * of the License, or (at your option) any later version.<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">11</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> * <span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">12</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> * This program is distributed in the hope that it will be useful,<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">13</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> * but WITHOUT ANY WARRANTY; without even the implied warranty of<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">14</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">15</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> * GNU General Public License for more details.<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">16</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> * <span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">17</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> * You should have received a copy of the GNU General Public License<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">18</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> * along with this program; if not, write to the Free Software<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">19</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> * Foundation, Inc., 51 Franklin Street, 5th Floor, Boston, MA 02110-1301 USA.<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">20</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> */<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">21</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>/*<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">22</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  File:      exivsimple.cpp<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">23</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  Version:   $Rev$<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">24</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  Author(s): Brad Schick &lt;brad@robotbattle.com&gt;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">25</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>             Christian Kuster &lt;christian@kusti.ch&gt;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">26</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  History:   12-Nov-04, brad: created<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">27</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> */<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">28</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>// *****************************************************************************<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">29</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num">30</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>#include &quot;stdafx.h&quot;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">31</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>#include &quot;exivsimple.h&quot;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">32</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>#include &lt;exiv2/image.hpp&gt;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">33</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>#include &lt;exiv2/exif.hpp&gt;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">34</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>#include &lt;exiv2/iptc.hpp&gt;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">35</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>#include &lt;cassert&gt;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">36</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>#include &lt;cstring&gt;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">37</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num">38</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>struct ImageWrapper<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">39</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>{<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">40</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    Exiv2::Image::AutoPtr image;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">41</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>};<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">42</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num">43</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>// Returns NULL (0) handle if failed.<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">44</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>EXIVSIMPLE_API HIMAGE OpenFileImage(const char *file)<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">45</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>{<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">46</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    assert(file);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">47</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num">48</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    // See if file exists. Sorry for very bad error handling<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">49</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    if (INVALID_FILE_ATTRIBUTES == GetFileAttributes(file)) {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">50</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        return 0;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">51</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    }<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">52</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num">53</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    ImageWrapper *imgWrap = new ImageWrapper;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">54</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>	try {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">55</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>		imgWrap-&gt;image = Exiv2::ImageFactory::open(file);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">56</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>	}<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">57</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>	catch(const Exiv2::AnyError&amp;) {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">58</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>		delete imgWrap;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">59</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>		return 0;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">60</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>	}<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">61</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>	if (imgWrap-&gt;image.get() == 0) {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">62</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>		delete imgWrap;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">63</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>		return 0;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">64</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>	}<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">65</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    // Load existing metadata<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">66</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>	try {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">67</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>		imgWrap-&gt;image-&gt;readMetadata();<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">68</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>	}<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">69</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>	catch(const Exiv2::AnyError&amp;) { <span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">70</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>		delete imgWrap;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">71</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>		return 0;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">72</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>	}<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">73</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num">74</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    return (HIMAGE)imgWrap;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">75</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>}<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">76</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num">77</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>EXIVSIMPLE_API HIMAGE OpenMemImage(const BYTE *data, unsigned int size)<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">78</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>{<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">79</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    assert(data);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">80</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    ImageWrapper *imgWrap = new ImageWrapper;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">81</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num">82</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>	try {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">83</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>	    imgWrap-&gt;image = Exiv2::ImageFactory::open(data, size);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">84</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>	}<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">85</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>	catch(const Exiv2::AnyError&amp;) {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">86</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>		delete imgWrap;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">87</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>		return 0;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">88</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>	}<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">89</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>	if (imgWrap-&gt;image.get() == 0) {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">90</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        delete imgWrap;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">91</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>		return 0;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">92</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    }<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">93</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    // Load existing metadata<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">94</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>	try {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">95</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>	    imgWrap-&gt;image-&gt;readMetadata();<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">96</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>	}<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">97</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>	catch(const Exiv2::AnyError&amp;) {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">98</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>		delete imgWrap;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">99</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>		return 0;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">100</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>	}<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">101</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num">102</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    return (HIMAGE)imgWrap;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">103</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>}<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">104</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num">105</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>EXIVSIMPLE_API void FreeImage(HIMAGE img)<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">106</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>{<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">107</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    if (img) {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">108</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        ImageWrapper *imgWrap = (ImageWrapper*)img;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">109</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        delete imgWrap;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">110</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    }<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">111</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>}<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">112</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num">113</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>// Returns 0 on success<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">114</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>EXIVSIMPLE_API int SaveImage(HIMAGE img)<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">115</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>{<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">116</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    assert(img);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">117</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    ImageWrapper *imgWrap = (ImageWrapper*)img;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">118</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>	try {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">119</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>		imgWrap-&gt;image-&gt;writeMetadata();<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">120</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>	}<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">121</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>	catch(const Exiv2::AnyError&amp;) {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">122</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>		return 1;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">123</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>	}<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">124</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    return 0;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">125</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>}<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">126</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num">127</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>// Note that if you have modified the metadata in any way and want the<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">128</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>// size of the image after these modifications, you must call SaveImage<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">129</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>// before calling ImageSize.<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">130</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>// Returns -1 on failure, otherwise the image size<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">131</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>EXIVSIMPLE_API int ImageSize(HIMAGE img)<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">132</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>{<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">133</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    assert(img);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">134</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    ImageWrapper *imgWrap = (ImageWrapper*)img;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">135</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    return imgWrap-&gt;image-&gt;io().size();<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">136</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>}<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">137</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num">138</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>// Note that if you have modified the metadata in any way and want the<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">139</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>// image data after these modifications, you must call SaveImage before<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">140</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>// calling ImageData.<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">141</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>// Returns number of bytes read, 0 if failure<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">142</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>EXIVSIMPLE_API int ImageData(HIMAGE img, BYTE *buffer, unsigned int size)<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">143</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>{<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">144</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    assert(img);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">145</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    int result = 0;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">146</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    ImageWrapper *imgWrap = (ImageWrapper*)img;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">147</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    Exiv2::BasicIo &amp;io = imgWrap-&gt;image-&gt;io();<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">148</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    if(io.open() == 0) {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">149</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        result = imgWrap-&gt;image-&gt;io().read(buffer, size);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">150</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        io.close();<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">151</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    }<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">152</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    return result;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">153</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>}<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">154</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num">155</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>EXIVSIMPLE_API void SetThumbnail(HIMAGE img, const BYTE *buffer, unsigned int size)<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">156</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>{<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">157</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    ImageWrapper *imgWrap = (ImageWrapper*)img;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">158</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    Exiv2::ExifData&amp; exifData = imgWrap-&gt;image-&gt;exifData();<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">159</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    Exiv2::ExifThumb exifThumb(exifData);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">160</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    exifThumb.setJpegThumbnail(buffer, size);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">161</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>}<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">162</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num">163</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>EXIVSIMPLE_API unsigned int GetThumbnail(HIMAGE img, BYTE *buffer, unsigned int size)<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">164</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>{<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">165</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    ImageWrapper *imgWrap = (ImageWrapper*)img;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">166</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    Exiv2::ExifData&amp; exifData = imgWrap-&gt;image-&gt;exifData();<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">167</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    Exiv2::ExifThumb exifThumb(exifData);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">168</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    Exiv2::DataBuf buf = exifThumb.copy();<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">169</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    if (buf.size_ == 0) {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">170</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        return 0;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">171</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    }<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">172</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    if (buf.size_ &gt; (long)size) {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">173</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        return unsigned int(-1);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">174</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    }<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">175</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    memcpy(buffer, buf.pData_, buf.size_);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">176</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    return buf.size_;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">177</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>}<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">178</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num">179</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>// This is weird because iptc and exif have not been &quot;unified&quot;. Once<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">180</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>// they are unified, this DLL should not have to know<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">181</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>// about either... just generic images, keys, values, etc.<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">182</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>//<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">183</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>// buffsize should be the total size of *buff (including space for null)<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">184</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>// Note that if there is more than one entry (for some IPTC datasets) this<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">185</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>// returns the first one found. Currently no way to get the others.<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">186</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>// Returns 0 on success<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">187</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>EXIVSIMPLE_API int ReadMeta(HIMAGE img, const char *key, char *buff, int buffsize)<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">188</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>{<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">189</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    assert(img &amp;&amp; key &amp;&amp; buff);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">190</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    if (img==0 || key==0 || buff==0 || buffsize==0) return -1;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">191</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    ImageWrapper *imgWrap = (ImageWrapper*)img;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">192</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    int rc = 2;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">193</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num">194</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    Exiv2::IptcData &amp;iptcData = imgWrap-&gt;image-&gt;iptcData();<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">195</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    Exiv2::ExifData &amp;exifData = imgWrap-&gt;image-&gt;exifData();<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">196</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num">197</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    try {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">198</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        // First try iptc<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">199</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        Exiv2::IptcKey iptcKey(key);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">200</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        rc = 1;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">201</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        Exiv2::IptcData::const_iterator iter = iptcData.findKey(iptcKey);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">202</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        if (iter != iptcData.end()) {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">203</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            strncpy(buff, iter-&gt;value().toString().c_str(), buffsize);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">204</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            buff[buffsize-1] = 0;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">205</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            rc = 0;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">206</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        }<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">207</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    } <span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">208</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    catch(const Exiv2::AnyError&amp;) {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">209</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    }<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">210</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num">211</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    if (rc) {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">212</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        // No iptc value, so try exif<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">213</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        try {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">214</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            Exiv2::ExifKey exifKey(key);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">215</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            rc = 1;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">216</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            Exiv2::ExifData::const_iterator iter = exifData.findKey(exifKey);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">217</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            if (iter != exifData.end()) {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">218</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>                strncpy(buff, iter-&gt;value().toString().c_str(), buffsize);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">219</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>                buff[buffsize-1] = 0;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">220</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>                rc = 0;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">221</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            }<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">222</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        }<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">223</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        catch(const Exiv2::AnyError&amp;) {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">224</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        }<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">225</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    }<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">226</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num">227</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    return rc;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">228</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>}<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">229</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num">230</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>// Overwrites existing value if found, otherwise creates a new one.<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">231</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>// Passing invalidTypeId causes the type to be guessed.<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">232</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>// Guessing types is accurate for IPTC, but not for EXIF.<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">233</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>// Returns 0 on success<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">234</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>EXIVSIMPLE_API int ModifyMeta(HIMAGE img, const char *key, const char *val, DllTypeId type)<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">235</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>{<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">236</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    assert(img &amp;&amp; key &amp;&amp; val);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">237</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    if (img==0 || key==0 || val==0) return -1;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">238</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    ImageWrapper *imgWrap = (ImageWrapper*)img;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">239</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    int rc = 2;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">240</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num">241</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    Exiv2::IptcData &amp;iptcData = imgWrap-&gt;image-&gt;iptcData();<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">242</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    Exiv2::ExifData &amp;exifData = imgWrap-&gt;image-&gt;exifData();<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">243</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num">244</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    std::string data(val);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">245</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    // if data starts and ends with quotes, remove them<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">246</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    if (data.at(0) == &#39;\&quot;&#39; &amp;&amp; data.at(data.size()-1) == &#39;\&quot;&#39;) {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">247</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        data = data.substr(1, data.size()-2);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">248</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    }<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">249</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num">250</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    try {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">251</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        Exiv2::IptcKey iptcKey(key);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">252</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        rc = 1;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">253</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num">254</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        if (type == invalidTypeId)<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">255</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            type = (DllTypeId)Exiv2::IptcDataSets::dataSetType(iptcKey.tag(), iptcKey.record());<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">256</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        Exiv2::Value::AutoPtr value = Exiv2::Value::create((Exiv2::TypeId)type);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">257</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        value-&gt;read(data);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">258</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num">259</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        Exiv2::IptcData::iterator iter = iptcData.findKey(iptcKey);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">260</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        if (iter != iptcData.end()) {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">261</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            iter-&gt;setValue(value.get());<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">262</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            rc = 0;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">263</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        }<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">264</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        else {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">265</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            rc = iptcData.add(iptcKey, value.get());<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">266</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        }<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">267</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    } <span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">268</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    catch(const Exiv2::AnyError&amp;) {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">269</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    }<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">270</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num">271</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    if (rc) {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">272</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        // Failed with iptc, so try exif<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">273</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        try {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">274</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            Exiv2::ExifKey exifKey(key);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">275</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            rc = 1;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">276</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num">277</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            // No way to get value type for exif... string is the most common<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">278</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            if (type == invalidTypeId)<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">279</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>                type = asciiString;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">280</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            Exiv2::Value::AutoPtr value = Exiv2::Value::create((Exiv2::TypeId)type);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">281</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            value-&gt;read(data);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">282</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num">283</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            Exiv2::ExifData::iterator iter = exifData.findKey(exifKey);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">284</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            if (iter != exifData.end()) {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">285</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>                iter-&gt;setValue(value.get());<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">286</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>                rc = 0;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">287</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            }<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">288</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            else {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">289</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>                exifData.add(exifKey, value.get());<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">290</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>                rc = 0;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">291</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            }<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">292</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        }<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">293</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        catch(const Exiv2::AnyError&amp;) {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">294</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        }<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">295</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    }<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">296</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num">297</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    return rc;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">298</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>}<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">299</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num">300</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>// Always creates a new metadata entry.<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">301</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>// Passing invalidTypeId causes the type to be guessed.<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">302</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>// Guessing types is accurate for IPTC, but not for EXIF.<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">303</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>// Returns 0 on success<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">304</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>EXIVSIMPLE_API int AddMeta(HIMAGE img, const char *key, const char *val, DllTypeId type)<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">305</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>{<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">306</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    assert(img &amp;&amp; key &amp;&amp; val);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">307</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    if (img==0 || key==0 || val==0) return -1;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">308</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    ImageWrapper *imgWrap = (ImageWrapper*)img;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">309</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    int rc = 2;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">310</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num">311</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    Exiv2::IptcData &amp;iptcData = imgWrap-&gt;image-&gt;iptcData();<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">312</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    Exiv2::ExifData &amp;exifData = imgWrap-&gt;image-&gt;exifData();<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">313</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num">314</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    std::string data(val);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">315</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    // if data starts and ends with quotes, remove them<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">316</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    if (data.at(0) == &#39;\&quot;&#39; &amp;&amp; data.at(data.size()-1) == &#39;\&quot;&#39;) {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">317</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        data = data.substr(1, data.size()-2);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">318</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    }<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">319</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num">320</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    try {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">321</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        Exiv2::IptcKey iptcKey(key);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">322</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        rc = 1;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">323</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num">324</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        if (type == invalidTypeId)<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">325</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            type = (DllTypeId)Exiv2::IptcDataSets::dataSetType(iptcKey.tag(), iptcKey.record());<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">326</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        Exiv2::Value::AutoPtr value = Exiv2::Value::create((Exiv2::TypeId)type);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">327</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        value-&gt;read(data);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">328</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num">329</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        rc = iptcData.add(iptcKey, value.get());<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">330</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    } <span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">331</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    catch(const Exiv2::AnyError&amp;) {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">332</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    }<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">333</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num">334</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    if (rc) {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">335</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        // Failed with iptc, so try exif<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">336</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        try {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">337</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            Exiv2::ExifKey exifKey(key);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">338</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            rc = 1;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">339</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num">340</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            // No way to get value type for exif... string is the most common<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">341</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            if (type == invalidTypeId)<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">342</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>                type = asciiString;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">343</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            Exiv2::Value::AutoPtr value = Exiv2::Value::create((Exiv2::TypeId)type);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">344</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            value-&gt;read(data);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">345</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num">346</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            exifData.add(exifKey, value.get());<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">347</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            rc = 0;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">348</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        }<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">349</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        catch(const Exiv2::AnyError&amp;) {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">350</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        }<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">351</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    }<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">352</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num">353</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    return rc;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">354</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>}<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">355</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num">356</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>// If multiple entires exist, this only remove the first one<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">357</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>// found. Call multiple times to remove many.<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">358</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>// Returns 0 on success<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">359</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>EXIVSIMPLE_API int RemoveMeta(HIMAGE img, const char *key)<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">360</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>{<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">361</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    assert(img &amp;&amp; key);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">362</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    if (img==0 || key==0) return -1;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">363</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    ImageWrapper *imgWrap = (ImageWrapper*)img;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">364</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    int rc = 2;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">365</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num">366</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    Exiv2::IptcData &amp;iptcData = imgWrap-&gt;image-&gt;iptcData();<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">367</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    Exiv2::ExifData &amp;exifData = imgWrap-&gt;image-&gt;exifData();<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">368</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num">369</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    try {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">370</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        Exiv2::IptcKey iptcKey(key);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">371</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        rc = 1;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">372</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        Exiv2::IptcData::iterator iter = iptcData.findKey(iptcKey);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">373</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        if (iter != iptcData.end()) {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">374</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            iptcData.erase(iter);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">375</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            rc = 0;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">376</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        }<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">377</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    } <span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">378</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    catch(const Exiv2::AnyError&amp;) {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">379</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    }<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">380</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num">381</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    if (rc) {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">382</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        // No iptc value, so try exif<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">383</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        try {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">384</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            Exiv2::ExifKey exifKey(key);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">385</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            rc = 1;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">386</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            Exiv2::ExifData::iterator iter = exifData.findKey(exifKey);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">387</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            if (iter != exifData.end()) {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">388</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>                exifData.erase(iter);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">389</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>                rc = 0;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">390</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            }<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">391</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        }<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">392</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        catch(const Exiv2::AnyError&amp;) {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">393</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        }<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">394</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    }<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">395</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num">396</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    return rc;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">397</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>}<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">398</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num">399</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>EXIVSIMPLE_API int EnumMeta(HIMAGE img, METAENUMPROC proc, void *user)<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">400</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>{<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">401</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    assert(img &amp;&amp; proc);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">402</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    if (img==0 || proc==0) return -1;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">403</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    ImageWrapper *imgWrap = (ImageWrapper*)img;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">404</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    bool more = true;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">405</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num">406</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    Exiv2::IptcData &amp;iptcData = imgWrap-&gt;image-&gt;iptcData();<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">407</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    Exiv2::ExifData &amp;exifData = imgWrap-&gt;image-&gt;exifData();<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">408</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num">409</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    Exiv2::IptcData::const_iterator iend = iptcData.end();<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">410</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    for (Exiv2::IptcData::const_iterator i = iptcData.begin(); <span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">411</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            i != iend &amp;&amp; more; ++i) {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">412</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        more = proc(i-&gt;key().c_str(), i-&gt;value().toString().c_str(), user);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">413</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    }<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">414</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num">415</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    Exiv2::ExifData::const_iterator eend = exifData.end();<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">416</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    for (Exiv2::ExifData::const_iterator e = exifData.begin();<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">417</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            e != eend &amp;&amp; more; ++e) {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">418</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        more = proc(e-&gt;key().c_str(), e-&gt;value().toString().c_str(), user);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">419</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    }<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">420</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num">421</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    return 0;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">422</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>}<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">423</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num">424</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num">425</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>BOOL APIENTRY DllMain( HANDLE hModule, <span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">426</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>                       DWORD  ul_reason_for_call, <span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">427</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>                       LPVOID lpReserved<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">428</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>                     )<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">429</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>{<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">430</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    switch (ul_reason_for_call) {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">431</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        case DLL_PROCESS_ATTACH:<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">432</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        case DLL_THREAD_ATTACH:<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">433</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        case DLL_THREAD_DETACH:<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">434</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>        case DLL_PROCESS_DETACH:<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">435</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>            break;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">436</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    }<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">437</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>    return TRUE;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">438</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>}<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">439</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">1</th>
  <td class="line-code diff_in">
    <pre>// ***************************************************************** -*- C++ -*-<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">2</th>
  <td class="line-code diff_in">
    <pre>/*<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">3</th>
  <td class="line-code diff_in">
    <pre> * Copyright (C) 2004-2008 Andreas Huggel &lt;ahuggel@gmx.net&gt;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">4</th>
  <td class="line-code diff_in">
    <pre> * <span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">5</th>
  <td class="line-code diff_in">
    <pre> * This program is part of the Exiv2 distribution.<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">6</th>
  <td class="line-code diff_in">
    <pre> *<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">7</th>
  <td class="line-code diff_in">
    <pre> * This program is free software; you can redistribute it and/or<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">8</th>
  <td class="line-code diff_in">
    <pre> * modify it under the terms of the GNU General Public License<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">9</th>
  <td class="line-code diff_in">
    <pre> * as published by the Free Software Foundation; either version 2<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">10</th>
  <td class="line-code diff_in">
    <pre> * of the License, or (at your option) any later version.<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">11</th>
  <td class="line-code diff_in">
    <pre> * <span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">12</th>
  <td class="line-code diff_in">
    <pre> * This program is distributed in the hope that it will be useful,<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">13</th>
  <td class="line-code diff_in">
    <pre> * but WITHOUT ANY WARRANTY; without even the implied warranty of<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">14</th>
  <td class="line-code diff_in">
    <pre> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">15</th>
  <td class="line-code diff_in">
    <pre> * GNU General Public License for more details.<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">16</th>
  <td class="line-code diff_in">
    <pre> * <span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">17</th>
  <td class="line-code diff_in">
    <pre> * You should have received a copy of the GNU General Public License<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">18</th>
  <td class="line-code diff_in">
    <pre> * along with this program; if not, write to the Free Software<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">19</th>
  <td class="line-code diff_in">
    <pre> * Foundation, Inc., 51 Franklin Street, 5th Floor, Boston, MA 02110-1301 USA.<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">20</th>
  <td class="line-code diff_in">
    <pre> */<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">21</th>
  <td class="line-code diff_in">
    <pre>/*<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">22</th>
  <td class="line-code diff_in">
    <pre>  File:      exivsimple.cpp<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">23</th>
  <td class="line-code diff_in">
    <pre>  Version:   $Rev$<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">24</th>
  <td class="line-code diff_in">
    <pre>  Author(s): Brad Schick &lt;brad@robotbattle.com&gt;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">25</th>
  <td class="line-code diff_in">
    <pre>             Christian Kuster &lt;christian@kusti.ch&gt;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">26</th>
  <td class="line-code diff_in">
    <pre>  History:   12-Nov-04, brad: created<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">27</th>
  <td class="line-code diff_in">
    <pre> */<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">28</th>
  <td class="line-code diff_in">
    <pre>// *****************************************************************************<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">29</th>
  <td class="line-code diff_in">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">30</th>
  <td class="line-code diff_in">
    <pre>#include &quot;stdafx.h&quot;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">31</th>
  <td class="line-code diff_in">
    <pre>#include &quot;exivsimple.h&quot;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">32</th>
  <td class="line-code diff_in">
    <pre>#include &lt;exiv2/image.hpp&gt;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">33</th>
  <td class="line-code diff_in">
    <pre>#include &lt;exiv2/exif.hpp&gt;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">34</th>
  <td class="line-code diff_in">
    <pre>#include &lt;exiv2/iptc.hpp&gt;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">35</th>
  <td class="line-code diff_in">
    <pre>#include &lt;cassert&gt;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">36</th>
  <td class="line-code diff_in">
    <pre>#include &lt;cstring&gt;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">37</th>
  <td class="line-code diff_in">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">38</th>
  <td class="line-code diff_in">
    <pre>struct ImageWrapper<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">39</th>
  <td class="line-code diff_in">
    <pre>{<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">40</th>
  <td class="line-code diff_in">
    <pre>    Exiv2::Image::AutoPtr image;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">41</th>
  <td class="line-code diff_in">
    <pre>};<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">42</th>
  <td class="line-code diff_in">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">43</th>
  <td class="line-code diff_in">
    <pre>// Returns NULL (0) handle if failed.<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">44</th>
  <td class="line-code diff_in">
    <pre>EXIVSIMPLE_API HIMAGE OpenFileImage(const char *file)<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">45</th>
  <td class="line-code diff_in">
    <pre>{<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">46</th>
  <td class="line-code diff_in">
    <pre>    assert(file);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">47</th>
  <td class="line-code diff_in">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">48</th>
  <td class="line-code diff_in">
    <pre>    // See if file exists. Sorry for very bad error handling<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">49</th>
  <td class="line-code diff_in">
    <pre>    if (INVALID_FILE_ATTRIBUTES == GetFileAttributes(file)) {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">50</th>
  <td class="line-code diff_in">
    <pre>        return 0;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">51</th>
  <td class="line-code diff_in">
    <pre>    }<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">52</th>
  <td class="line-code diff_in">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">53</th>
  <td class="line-code diff_in">
    <pre>    ImageWrapper *imgWrap = new ImageWrapper;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">54</th>
  <td class="line-code diff_in">
    <pre>	try {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">55</th>
  <td class="line-code diff_in">
    <pre>		imgWrap-&gt;image = Exiv2::ImageFactory::open(file);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">56</th>
  <td class="line-code diff_in">
    <pre>	}<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">57</th>
  <td class="line-code diff_in">
    <pre>	catch(const Exiv2::AnyError&amp;) {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">58</th>
  <td class="line-code diff_in">
    <pre>		delete imgWrap;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">59</th>
  <td class="line-code diff_in">
    <pre>		return 0;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">60</th>
  <td class="line-code diff_in">
    <pre>	}<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">61</th>
  <td class="line-code diff_in">
    <pre>	if (imgWrap-&gt;image.get() == 0) {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">62</th>
  <td class="line-code diff_in">
    <pre>		delete imgWrap;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">63</th>
  <td class="line-code diff_in">
    <pre>		return 0;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">64</th>
  <td class="line-code diff_in">
    <pre>	}<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">65</th>
  <td class="line-code diff_in">
    <pre>    // Load existing metadata<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">66</th>
  <td class="line-code diff_in">
    <pre>	try {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">67</th>
  <td class="line-code diff_in">
    <pre>		imgWrap-&gt;image-&gt;readMetadata();<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">68</th>
  <td class="line-code diff_in">
    <pre>	}<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">69</th>
  <td class="line-code diff_in">
    <pre>	catch(const Exiv2::AnyError&amp;) { <span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">70</th>
  <td class="line-code diff_in">
    <pre>		delete imgWrap;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">71</th>
  <td class="line-code diff_in">
    <pre>		return 0;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">72</th>
  <td class="line-code diff_in">
    <pre>	}<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">73</th>
  <td class="line-code diff_in">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">74</th>
  <td class="line-code diff_in">
    <pre>    return (HIMAGE)imgWrap;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">75</th>
  <td class="line-code diff_in">
    <pre>}<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">76</th>
  <td class="line-code diff_in">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">77</th>
  <td class="line-code diff_in">
    <pre>EXIVSIMPLE_API HIMAGE OpenMemImage(const BYTE *data, unsigned int size)<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">78</th>
  <td class="line-code diff_in">
    <pre>{<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">79</th>
  <td class="line-code diff_in">
    <pre>    assert(data);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">80</th>
  <td class="line-code diff_in">
    <pre>    ImageWrapper *imgWrap = new ImageWrapper;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">81</th>
  <td class="line-code diff_in">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">82</th>
  <td class="line-code diff_in">
    <pre>	try {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">83</th>
  <td class="line-code diff_in">
    <pre>	    imgWrap-&gt;image = Exiv2::ImageFactory::open(data, size);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">84</th>
  <td class="line-code diff_in">
    <pre>	}<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">85</th>
  <td class="line-code diff_in">
    <pre>	catch(const Exiv2::AnyError&amp;) {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">86</th>
  <td class="line-code diff_in">
    <pre>		delete imgWrap;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">87</th>
  <td class="line-code diff_in">
    <pre>		return 0;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">88</th>
  <td class="line-code diff_in">
    <pre>	}<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">89</th>
  <td class="line-code diff_in">
    <pre>	if (imgWrap-&gt;image.get() == 0) {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">90</th>
  <td class="line-code diff_in">
    <pre>        delete imgWrap;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">91</th>
  <td class="line-code diff_in">
    <pre>		return 0;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">92</th>
  <td class="line-code diff_in">
    <pre>    }<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">93</th>
  <td class="line-code diff_in">
    <pre>    // Load existing metadata<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">94</th>
  <td class="line-code diff_in">
    <pre>	try {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">95</th>
  <td class="line-code diff_in">
    <pre>	    imgWrap-&gt;image-&gt;readMetadata();<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">96</th>
  <td class="line-code diff_in">
    <pre>	}<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">97</th>
  <td class="line-code diff_in">
    <pre>	catch(const Exiv2::AnyError&amp;) {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">98</th>
  <td class="line-code diff_in">
    <pre>		delete imgWrap;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">99</th>
  <td class="line-code diff_in">
    <pre>		return 0;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">100</th>
  <td class="line-code diff_in">
    <pre>	}<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">101</th>
  <td class="line-code diff_in">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">102</th>
  <td class="line-code diff_in">
    <pre>    return (HIMAGE)imgWrap;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">103</th>
  <td class="line-code diff_in">
    <pre>}<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">104</th>
  <td class="line-code diff_in">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">105</th>
  <td class="line-code diff_in">
    <pre>EXIVSIMPLE_API void FreeImage(HIMAGE img)<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">106</th>
  <td class="line-code diff_in">
    <pre>{<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">107</th>
  <td class="line-code diff_in">
    <pre>    if (img) {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">108</th>
  <td class="line-code diff_in">
    <pre>        ImageWrapper *imgWrap = (ImageWrapper*)img;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">109</th>
  <td class="line-code diff_in">
    <pre>        delete imgWrap;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">110</th>
  <td class="line-code diff_in">
    <pre>    }<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">111</th>
  <td class="line-code diff_in">
    <pre>}<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">112</th>
  <td class="line-code diff_in">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">113</th>
  <td class="line-code diff_in">
    <pre>// Returns 0 on success<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">114</th>
  <td class="line-code diff_in">
    <pre>EXIVSIMPLE_API int SaveImage(HIMAGE img)<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">115</th>
  <td class="line-code diff_in">
    <pre>{<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">116</th>
  <td class="line-code diff_in">
    <pre>    assert(img);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">117</th>
  <td class="line-code diff_in">
    <pre>    ImageWrapper *imgWrap = (ImageWrapper*)img;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">118</th>
  <td class="line-code diff_in">
    <pre>	try {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">119</th>
  <td class="line-code diff_in">
    <pre>		imgWrap-&gt;image-&gt;writeMetadata();<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">120</th>
  <td class="line-code diff_in">
    <pre>	}<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">121</th>
  <td class="line-code diff_in">
    <pre>	catch(const Exiv2::AnyError&amp;) {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">122</th>
  <td class="line-code diff_in">
    <pre>		return 1;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">123</th>
  <td class="line-code diff_in">
    <pre>	}<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">124</th>
  <td class="line-code diff_in">
    <pre>    return 0;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">125</th>
  <td class="line-code diff_in">
    <pre>}<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">126</th>
  <td class="line-code diff_in">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">127</th>
  <td class="line-code diff_in">
    <pre>// Note that if you have modified the metadata in any way and want the<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">128</th>
  <td class="line-code diff_in">
    <pre>// size of the image after these modifications, you must call SaveImage<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">129</th>
  <td class="line-code diff_in">
    <pre>// before calling ImageSize.<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">130</th>
  <td class="line-code diff_in">
    <pre>// Returns -1 on failure, otherwise the image size<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">131</th>
  <td class="line-code diff_in">
    <pre>EXIVSIMPLE_API int ImageSize(HIMAGE img)<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">132</th>
  <td class="line-code diff_in">
    <pre>{<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">133</th>
  <td class="line-code diff_in">
    <pre>    assert(img);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">134</th>
  <td class="line-code diff_in">
    <pre>    ImageWrapper *imgWrap = (ImageWrapper*)img;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">135</th>
  <td class="line-code diff_in">
    <pre>    return imgWrap-&gt;image-&gt;io().size();<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">136</th>
  <td class="line-code diff_in">
    <pre>}<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">137</th>
  <td class="line-code diff_in">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">138</th>
  <td class="line-code diff_in">
    <pre>// Note that if you have modified the metadata in any way and want the<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">139</th>
  <td class="line-code diff_in">
    <pre>// image data after these modifications, you must call SaveImage before<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">140</th>
  <td class="line-code diff_in">
    <pre>// calling ImageData.<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">141</th>
  <td class="line-code diff_in">
    <pre>// Returns number of bytes read, 0 if failure<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">142</th>
  <td class="line-code diff_in">
    <pre>EXIVSIMPLE_API int ImageData(HIMAGE img, BYTE *buffer, unsigned int size)<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">143</th>
  <td class="line-code diff_in">
    <pre>{<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">144</th>
  <td class="line-code diff_in">
    <pre>    assert(img);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">145</th>
  <td class="line-code diff_in">
    <pre>    int result = 0;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">146</th>
  <td class="line-code diff_in">
    <pre>    ImageWrapper *imgWrap = (ImageWrapper*)img;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">147</th>
  <td class="line-code diff_in">
    <pre>    Exiv2::BasicIo &amp;io = imgWrap-&gt;image-&gt;io();<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">148</th>
  <td class="line-code diff_in">
    <pre>    if(io.open() == 0) {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">149</th>
  <td class="line-code diff_in">
    <pre>        result = imgWrap-&gt;image-&gt;io().read(buffer, size);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">150</th>
  <td class="line-code diff_in">
    <pre>        io.close();<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">151</th>
  <td class="line-code diff_in">
    <pre>    }<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">152</th>
  <td class="line-code diff_in">
    <pre>    return result;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">153</th>
  <td class="line-code diff_in">
    <pre>}<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">154</th>
  <td class="line-code diff_in">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">155</th>
  <td class="line-code diff_in">
    <pre>EXIVSIMPLE_API void SetThumbnail(HIMAGE img, const BYTE *buffer, unsigned int size)<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">156</th>
  <td class="line-code diff_in">
    <pre>{<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">157</th>
  <td class="line-code diff_in">
    <pre>    ImageWrapper *imgWrap = (ImageWrapper*)img;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">158</th>
  <td class="line-code diff_in">
    <pre>    Exiv2::ExifData&amp; exifData = imgWrap-&gt;image-&gt;exifData();<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">159</th>
  <td class="line-code diff_in">
    <pre>    Exiv2::ExifThumb exifThumb(exifData);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">160</th>
  <td class="line-code diff_in">
    <pre>    exifThumb.setJpegThumbnail(buffer, size);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">161</th>
  <td class="line-code diff_in">
    <pre>}<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">162</th>
  <td class="line-code diff_in">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">163</th>
  <td class="line-code diff_in">
    <pre>EXIVSIMPLE_API unsigned int GetThumbnail(HIMAGE img, BYTE *buffer, unsigned int size)<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">164</th>
  <td class="line-code diff_in">
    <pre>{<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">165</th>
  <td class="line-code diff_in">
    <pre>    ImageWrapper *imgWrap = (ImageWrapper*)img;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">166</th>
  <td class="line-code diff_in">
    <pre>    Exiv2::ExifData&amp; exifData = imgWrap-&gt;image-&gt;exifData();<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">167</th>
  <td class="line-code diff_in">
    <pre>    Exiv2::ExifThumb exifThumb(exifData);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">168</th>
  <td class="line-code diff_in">
    <pre>    Exiv2::DataBuf buf = exifThumb.copy();<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">169</th>
  <td class="line-code diff_in">
    <pre>    if (buf.size_ == 0) {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">170</th>
  <td class="line-code diff_in">
    <pre>        return 0;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">171</th>
  <td class="line-code diff_in">
    <pre>    }<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">172</th>
  <td class="line-code diff_in">
    <pre>    if (buf.size_ &gt; (long)size) {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">173</th>
  <td class="line-code diff_in">
    <pre>        return unsigned int(-1);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">174</th>
  <td class="line-code diff_in">
    <pre>    }<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">175</th>
  <td class="line-code diff_in">
    <pre>    memcpy(buffer, buf.pData_, buf.size_);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">176</th>
  <td class="line-code diff_in">
    <pre>    return buf.size_;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">177</th>
  <td class="line-code diff_in">
    <pre>}<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">178</th>
  <td class="line-code diff_in">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">179</th>
  <td class="line-code diff_in">
    <pre>// This is weird because iptc and exif have not been &quot;unified&quot;. Once<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">180</th>
  <td class="line-code diff_in">
    <pre>// they are unified, this DLL should not have to know<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">181</th>
  <td class="line-code diff_in">
    <pre>// about either... just generic images, keys, values, etc.<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">182</th>
  <td class="line-code diff_in">
    <pre>//<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">183</th>
  <td class="line-code diff_in">
    <pre>// buffsize should be the total size of *buff (including space for null)<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">184</th>
  <td class="line-code diff_in">
    <pre>// Note that if there is more than one entry (for some IPTC datasets) this<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">185</th>
  <td class="line-code diff_in">
    <pre>// returns the first one found. Currently no way to get the others.<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">186</th>
  <td class="line-code diff_in">
    <pre>// Returns 0 on success<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">187</th>
  <td class="line-code diff_in">
    <pre>EXIVSIMPLE_API int ReadMeta(HIMAGE img, const char *key, char *buff, int buffsize)<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">188</th>
  <td class="line-code diff_in">
    <pre>{<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">189</th>
  <td class="line-code diff_in">
    <pre>    assert(img &amp;&amp; key &amp;&amp; buff);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">190</th>
  <td class="line-code diff_in">
    <pre>    if (img==0 || key==0 || buff==0 || buffsize==0) return -1;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">191</th>
  <td class="line-code diff_in">
    <pre>    ImageWrapper *imgWrap = (ImageWrapper*)img;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">192</th>
  <td class="line-code diff_in">
    <pre>    int rc = 2;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">193</th>
  <td class="line-code diff_in">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">194</th>
  <td class="line-code diff_in">
    <pre>    Exiv2::IptcData &amp;iptcData = imgWrap-&gt;image-&gt;iptcData();<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">195</th>
  <td class="line-code diff_in">
    <pre>    Exiv2::ExifData &amp;exifData = imgWrap-&gt;image-&gt;exifData();<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">196</th>
  <td class="line-code diff_in">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">197</th>
  <td class="line-code diff_in">
    <pre>    try {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">198</th>
  <td class="line-code diff_in">
    <pre>        // First try iptc<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">199</th>
  <td class="line-code diff_in">
    <pre>        Exiv2::IptcKey iptcKey(key);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">200</th>
  <td class="line-code diff_in">
    <pre>        rc = 1;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">201</th>
  <td class="line-code diff_in">
    <pre>        Exiv2::IptcData::const_iterator iter = iptcData.findKey(iptcKey);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">202</th>
  <td class="line-code diff_in">
    <pre>        if (iter != iptcData.end()) {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">203</th>
  <td class="line-code diff_in">
    <pre>            strncpy(buff, iter-&gt;value().toString().c_str(), buffsize);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">204</th>
  <td class="line-code diff_in">
    <pre>            buff[buffsize-1] = 0;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">205</th>
  <td class="line-code diff_in">
    <pre>            rc = 0;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">206</th>
  <td class="line-code diff_in">
    <pre>        }<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">207</th>
  <td class="line-code diff_in">
    <pre>    } <span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">208</th>
  <td class="line-code diff_in">
    <pre>    catch(const Exiv2::AnyError&amp;) {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">209</th>
  <td class="line-code diff_in">
    <pre>    }<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">210</th>
  <td class="line-code diff_in">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">211</th>
  <td class="line-code diff_in">
    <pre>    if (rc) {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">212</th>
  <td class="line-code diff_in">
    <pre>        // No iptc value, so try exif<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">213</th>
  <td class="line-code diff_in">
    <pre>        try {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">214</th>
  <td class="line-code diff_in">
    <pre>            Exiv2::ExifKey exifKey(key);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">215</th>
  <td class="line-code diff_in">
    <pre>            rc = 1;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">216</th>
  <td class="line-code diff_in">
    <pre>            Exiv2::ExifData::const_iterator iter = exifData.findKey(exifKey);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">217</th>
  <td class="line-code diff_in">
    <pre>            if (iter != exifData.end()) {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">218</th>
  <td class="line-code diff_in">
    <pre>                strncpy(buff, iter-&gt;value().toString().c_str(), buffsize);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">219</th>
  <td class="line-code diff_in">
    <pre>                buff[buffsize-1] = 0;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">220</th>
  <td class="line-code diff_in">
    <pre>                rc = 0;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">221</th>
  <td class="line-code diff_in">
    <pre>            }<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">222</th>
  <td class="line-code diff_in">
    <pre>        }<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">223</th>
  <td class="line-code diff_in">
    <pre>        catch(const Exiv2::AnyError&amp;) {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">224</th>
  <td class="line-code diff_in">
    <pre>        }<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">225</th>
  <td class="line-code diff_in">
    <pre>    }<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">226</th>
  <td class="line-code diff_in">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">227</th>
  <td class="line-code diff_in">
    <pre>    return rc;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">228</th>
  <td class="line-code diff_in">
    <pre>}<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">229</th>
  <td class="line-code diff_in">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">230</th>
  <td class="line-code diff_in">
    <pre>// Overwrites existing value if found, otherwise creates a new one.<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">231</th>
  <td class="line-code diff_in">
    <pre>// Passing invalidTypeId causes the type to be guessed.<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">232</th>
  <td class="line-code diff_in">
    <pre>// Guessing types is accurate for IPTC, but not for EXIF.<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">233</th>
  <td class="line-code diff_in">
    <pre>// Returns 0 on success<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">234</th>
  <td class="line-code diff_in">
    <pre>EXIVSIMPLE_API int ModifyMeta(HIMAGE img, const char *key, const char *val, DllTypeId type)<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">235</th>
  <td class="line-code diff_in">
    <pre>{<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">236</th>
  <td class="line-code diff_in">
    <pre>    assert(img &amp;&amp; key &amp;&amp; val);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">237</th>
  <td class="line-code diff_in">
    <pre>    if (img==0 || key==0 || val==0) return -1;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">238</th>
  <td class="line-code diff_in">
    <pre>    ImageWrapper *imgWrap = (ImageWrapper*)img;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">239</th>
  <td class="line-code diff_in">
    <pre>    int rc = 2;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">240</th>
  <td class="line-code diff_in">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">241</th>
  <td class="line-code diff_in">
    <pre>    Exiv2::IptcData &amp;iptcData = imgWrap-&gt;image-&gt;iptcData();<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">242</th>
  <td class="line-code diff_in">
    <pre>    Exiv2::ExifData &amp;exifData = imgWrap-&gt;image-&gt;exifData();<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">243</th>
  <td class="line-code diff_in">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">244</th>
  <td class="line-code diff_in">
    <pre>    std::string data(val);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">245</th>
  <td class="line-code diff_in">
    <pre>    // if data starts and ends with quotes, remove them<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">246</th>
  <td class="line-code diff_in">
    <pre>    if (data.at(0) == &#39;\&quot;&#39; &amp;&amp; data.at(data.size()-1) == &#39;\&quot;&#39;) {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">247</th>
  <td class="line-code diff_in">
    <pre>        data = data.substr(1, data.size()-2);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">248</th>
  <td class="line-code diff_in">
    <pre>    }<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">249</th>
  <td class="line-code diff_in">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">250</th>
  <td class="line-code diff_in">
    <pre>    try {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">251</th>
  <td class="line-code diff_in">
    <pre>        Exiv2::IptcKey iptcKey(key);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">252</th>
  <td class="line-code diff_in">
    <pre>        rc = 1;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">253</th>
  <td class="line-code diff_in">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">254</th>
  <td class="line-code diff_in">
    <pre>        if (type == invalidTypeId)<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">255</th>
  <td class="line-code diff_in">
    <pre>            type = (DllTypeId)Exiv2::IptcDataSets::dataSetType(iptcKey.tag(), iptcKey.record());<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">256</th>
  <td class="line-code diff_in">
    <pre>        Exiv2::Value::AutoPtr value = Exiv2::Value::create((Exiv2::TypeId)type);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">257</th>
  <td class="line-code diff_in">
    <pre>        value-&gt;read(data);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">258</th>
  <td class="line-code diff_in">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">259</th>
  <td class="line-code diff_in">
    <pre>        Exiv2::IptcData::iterator iter = iptcData.findKey(iptcKey);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">260</th>
  <td class="line-code diff_in">
    <pre>        if (iter != iptcData.end()) {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">261</th>
  <td class="line-code diff_in">
    <pre>            iter-&gt;setValue(value.get());<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">262</th>
  <td class="line-code diff_in">
    <pre>            rc = 0;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">263</th>
  <td class="line-code diff_in">
    <pre>        }<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">264</th>
  <td class="line-code diff_in">
    <pre>        else {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">265</th>
  <td class="line-code diff_in">
    <pre>            rc = iptcData.add(iptcKey, value.get());<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">266</th>
  <td class="line-code diff_in">
    <pre>        }<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">267</th>
  <td class="line-code diff_in">
    <pre>    } <span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">268</th>
  <td class="line-code diff_in">
    <pre>    catch(const Exiv2::AnyError&amp;) {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">269</th>
  <td class="line-code diff_in">
    <pre>    }<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">270</th>
  <td class="line-code diff_in">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">271</th>
  <td class="line-code diff_in">
    <pre>    if (rc) {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">272</th>
  <td class="line-code diff_in">
    <pre>        // Failed with iptc, so try exif<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">273</th>
  <td class="line-code diff_in">
    <pre>        try {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">274</th>
  <td class="line-code diff_in">
    <pre>            Exiv2::ExifKey exifKey(key);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">275</th>
  <td class="line-code diff_in">
    <pre>            rc = 1;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">276</th>
  <td class="line-code diff_in">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">277</th>
  <td class="line-code diff_in">
    <pre>            // No way to get value type for exif... string is the most common<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">278</th>
  <td class="line-code diff_in">
    <pre>            if (type == invalidTypeId)<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">279</th>
  <td class="line-code diff_in">
    <pre>                type = asciiString;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">280</th>
  <td class="line-code diff_in">
    <pre>            Exiv2::Value::AutoPtr value = Exiv2::Value::create((Exiv2::TypeId)type);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">281</th>
  <td class="line-code diff_in">
    <pre>            value-&gt;read(data);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">282</th>
  <td class="line-code diff_in">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">283</th>
  <td class="line-code diff_in">
    <pre>            Exiv2::ExifData::iterator iter = exifData.findKey(exifKey);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">284</th>
  <td class="line-code diff_in">
    <pre>            if (iter != exifData.end()) {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">285</th>
  <td class="line-code diff_in">
    <pre>                iter-&gt;setValue(value.get());<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">286</th>
  <td class="line-code diff_in">
    <pre>                rc = 0;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">287</th>
  <td class="line-code diff_in">
    <pre>            }<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">288</th>
  <td class="line-code diff_in">
    <pre>            else {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">289</th>
  <td class="line-code diff_in">
    <pre>                exifData.add(exifKey, value.get());<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">290</th>
  <td class="line-code diff_in">
    <pre>                rc = 0;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">291</th>
  <td class="line-code diff_in">
    <pre>            }<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">292</th>
  <td class="line-code diff_in">
    <pre>        }<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">293</th>
  <td class="line-code diff_in">
    <pre>        catch(const Exiv2::AnyError&amp;) {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">294</th>
  <td class="line-code diff_in">
    <pre>        }<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">295</th>
  <td class="line-code diff_in">
    <pre>    }<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">296</th>
  <td class="line-code diff_in">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">297</th>
  <td class="line-code diff_in">
    <pre>    return rc;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">298</th>
  <td class="line-code diff_in">
    <pre>}<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">299</th>
  <td class="line-code diff_in">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">300</th>
  <td class="line-code diff_in">
    <pre>// Always creates a new metadata entry.<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">301</th>
  <td class="line-code diff_in">
    <pre>// Passing invalidTypeId causes the type to be guessed.<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">302</th>
  <td class="line-code diff_in">
    <pre>// Guessing types is accurate for IPTC, but not for EXIF.<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">303</th>
  <td class="line-code diff_in">
    <pre>// Returns 0 on success<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">304</th>
  <td class="line-code diff_in">
    <pre>EXIVSIMPLE_API int AddMeta(HIMAGE img, const char *key, const char *val, DllTypeId type)<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">305</th>
  <td class="line-code diff_in">
    <pre>{<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">306</th>
  <td class="line-code diff_in">
    <pre>    assert(img &amp;&amp; key &amp;&amp; val);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">307</th>
  <td class="line-code diff_in">
    <pre>    if (img==0 || key==0 || val==0) return -1;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">308</th>
  <td class="line-code diff_in">
    <pre>    ImageWrapper *imgWrap = (ImageWrapper*)img;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">309</th>
  <td class="line-code diff_in">
    <pre>    int rc = 2;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">310</th>
  <td class="line-code diff_in">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">311</th>
  <td class="line-code diff_in">
    <pre>    Exiv2::IptcData &amp;iptcData = imgWrap-&gt;image-&gt;iptcData();<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">312</th>
  <td class="line-code diff_in">
    <pre>    Exiv2::ExifData &amp;exifData = imgWrap-&gt;image-&gt;exifData();<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">313</th>
  <td class="line-code diff_in">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">314</th>
  <td class="line-code diff_in">
    <pre>    std::string data(val);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">315</th>
  <td class="line-code diff_in">
    <pre>    // if data starts and ends with quotes, remove them<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">316</th>
  <td class="line-code diff_in">
    <pre>    if (data.at(0) == &#39;\&quot;&#39; &amp;&amp; data.at(data.size()-1) == &#39;\&quot;&#39;) {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">317</th>
  <td class="line-code diff_in">
    <pre>        data = data.substr(1, data.size()-2);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">318</th>
  <td class="line-code diff_in">
    <pre>    }<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">319</th>
  <td class="line-code diff_in">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">320</th>
  <td class="line-code diff_in">
    <pre>    try {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">321</th>
  <td class="line-code diff_in">
    <pre>        Exiv2::IptcKey iptcKey(key);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">322</th>
  <td class="line-code diff_in">
    <pre>        rc = 1;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">323</th>
  <td class="line-code diff_in">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">324</th>
  <td class="line-code diff_in">
    <pre>        if (type == invalidTypeId)<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">325</th>
  <td class="line-code diff_in">
    <pre>            type = (DllTypeId)Exiv2::IptcDataSets::dataSetType(iptcKey.tag(), iptcKey.record());<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">326</th>
  <td class="line-code diff_in">
    <pre>        Exiv2::Value::AutoPtr value = Exiv2::Value::create((Exiv2::TypeId)type);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">327</th>
  <td class="line-code diff_in">
    <pre>        value-&gt;read(data);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">328</th>
  <td class="line-code diff_in">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">329</th>
  <td class="line-code diff_in">
    <pre>        rc = iptcData.add(iptcKey, value.get());<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">330</th>
  <td class="line-code diff_in">
    <pre>    } <span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">331</th>
  <td class="line-code diff_in">
    <pre>    catch(const Exiv2::AnyError&amp;) {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">332</th>
  <td class="line-code diff_in">
    <pre>    }<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">333</th>
  <td class="line-code diff_in">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">334</th>
  <td class="line-code diff_in">
    <pre>    if (rc) {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">335</th>
  <td class="line-code diff_in">
    <pre>        // Failed with iptc, so try exif<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">336</th>
  <td class="line-code diff_in">
    <pre>        try {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">337</th>
  <td class="line-code diff_in">
    <pre>            Exiv2::ExifKey exifKey(key);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">338</th>
  <td class="line-code diff_in">
    <pre>            rc = 1;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">339</th>
  <td class="line-code diff_in">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">340</th>
  <td class="line-code diff_in">
    <pre>            // No way to get value type for exif... string is the most common<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">341</th>
  <td class="line-code diff_in">
    <pre>            if (type == invalidTypeId)<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">342</th>
  <td class="line-code diff_in">
    <pre>                type = asciiString;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">343</th>
  <td class="line-code diff_in">
    <pre>            Exiv2::Value::AutoPtr value = Exiv2::Value::create((Exiv2::TypeId)type);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">344</th>
  <td class="line-code diff_in">
    <pre>            value-&gt;read(data);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">345</th>
  <td class="line-code diff_in">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">346</th>
  <td class="line-code diff_in">
    <pre>            exifData.add(exifKey, value.get());<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">347</th>
  <td class="line-code diff_in">
    <pre>            rc = 0;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">348</th>
  <td class="line-code diff_in">
    <pre>        }<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">349</th>
  <td class="line-code diff_in">
    <pre>        catch(const Exiv2::AnyError&amp;) {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">350</th>
  <td class="line-code diff_in">
    <pre>        }<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">351</th>
  <td class="line-code diff_in">
    <pre>    }<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">352</th>
  <td class="line-code diff_in">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">353</th>
  <td class="line-code diff_in">
    <pre>    return rc;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">354</th>
  <td class="line-code diff_in">
    <pre>}<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">355</th>
  <td class="line-code diff_in">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">356</th>
  <td class="line-code diff_in">
    <pre>// If multiple entires exist, this only remove the first one<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">357</th>
  <td class="line-code diff_in">
    <pre>// found. Call multiple times to remove many.<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">358</th>
  <td class="line-code diff_in">
    <pre>// Returns 0 on success<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">359</th>
  <td class="line-code diff_in">
    <pre>EXIVSIMPLE_API int RemoveMeta(HIMAGE img, const char *key)<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">360</th>
  <td class="line-code diff_in">
    <pre>{<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">361</th>
  <td class="line-code diff_in">
    <pre>    assert(img &amp;&amp; key);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">362</th>
  <td class="line-code diff_in">
    <pre>    if (img==0 || key==0) return -1;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">363</th>
  <td class="line-code diff_in">
    <pre>    ImageWrapper *imgWrap = (ImageWrapper*)img;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">364</th>
  <td class="line-code diff_in">
    <pre>    int rc = 2;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">365</th>
  <td class="line-code diff_in">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">366</th>
  <td class="line-code diff_in">
    <pre>    Exiv2::IptcData &amp;iptcData = imgWrap-&gt;image-&gt;iptcData();<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">367</th>
  <td class="line-code diff_in">
    <pre>    Exiv2::ExifData &amp;exifData = imgWrap-&gt;image-&gt;exifData();<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">368</th>
  <td class="line-code diff_in">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">369</th>
  <td class="line-code diff_in">
    <pre>    try {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">370</th>
  <td class="line-code diff_in">
    <pre>        Exiv2::IptcKey iptcKey(key);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">371</th>
  <td class="line-code diff_in">
    <pre>        rc = 1;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">372</th>
  <td class="line-code diff_in">
    <pre>        Exiv2::IptcData::iterator iter = iptcData.findKey(iptcKey);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">373</th>
  <td class="line-code diff_in">
    <pre>        if (iter != iptcData.end()) {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">374</th>
  <td class="line-code diff_in">
    <pre>            iptcData.erase(iter);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">375</th>
  <td class="line-code diff_in">
    <pre>            rc = 0;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">376</th>
  <td class="line-code diff_in">
    <pre>        }<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">377</th>
  <td class="line-code diff_in">
    <pre>    } <span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">378</th>
  <td class="line-code diff_in">
    <pre>    catch(const Exiv2::AnyError&amp;) {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">379</th>
  <td class="line-code diff_in">
    <pre>    }<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">380</th>
  <td class="line-code diff_in">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">381</th>
  <td class="line-code diff_in">
    <pre>    if (rc) {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">382</th>
  <td class="line-code diff_in">
    <pre>        // No iptc value, so try exif<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">383</th>
  <td class="line-code diff_in">
    <pre>        try {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">384</th>
  <td class="line-code diff_in">
    <pre>            Exiv2::ExifKey exifKey(key);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">385</th>
  <td class="line-code diff_in">
    <pre>            rc = 1;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">386</th>
  <td class="line-code diff_in">
    <pre>            Exiv2::ExifData::iterator iter = exifData.findKey(exifKey);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">387</th>
  <td class="line-code diff_in">
    <pre>            if (iter != exifData.end()) {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">388</th>
  <td class="line-code diff_in">
    <pre>                exifData.erase(iter);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">389</th>
  <td class="line-code diff_in">
    <pre>                rc = 0;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">390</th>
  <td class="line-code diff_in">
    <pre>            }<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">391</th>
  <td class="line-code diff_in">
    <pre>        }<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">392</th>
  <td class="line-code diff_in">
    <pre>        catch(const Exiv2::AnyError&amp;) {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">393</th>
  <td class="line-code diff_in">
    <pre>        }<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">394</th>
  <td class="line-code diff_in">
    <pre>    }<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">395</th>
  <td class="line-code diff_in">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">396</th>
  <td class="line-code diff_in">
    <pre>    return rc;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">397</th>
  <td class="line-code diff_in">
    <pre>}<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">398</th>
  <td class="line-code diff_in">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">399</th>
  <td class="line-code diff_in">
    <pre>EXIVSIMPLE_API int EnumMeta(HIMAGE img, METAENUMPROC proc, void *user)<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">400</th>
  <td class="line-code diff_in">
    <pre>{<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">401</th>
  <td class="line-code diff_in">
    <pre>    assert(img &amp;&amp; proc);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">402</th>
  <td class="line-code diff_in">
    <pre>    if (img==0 || proc==0) return -1;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">403</th>
  <td class="line-code diff_in">
    <pre>    ImageWrapper *imgWrap = (ImageWrapper*)img;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">404</th>
  <td class="line-code diff_in">
    <pre>    bool more = true;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">405</th>
  <td class="line-code diff_in">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">406</th>
  <td class="line-code diff_in">
    <pre>    Exiv2::IptcData &amp;iptcData = imgWrap-&gt;image-&gt;iptcData();<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">407</th>
  <td class="line-code diff_in">
    <pre>    Exiv2::ExifData &amp;exifData = imgWrap-&gt;image-&gt;exifData();<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">408</th>
  <td class="line-code diff_in">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">409</th>
  <td class="line-code diff_in">
    <pre>    Exiv2::IptcData::const_iterator iend = iptcData.end();<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">410</th>
  <td class="line-code diff_in">
    <pre>    for (Exiv2::IptcData::const_iterator i = iptcData.begin(); <span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">411</th>
  <td class="line-code diff_in">
    <pre>            i != iend &amp;&amp; more; ++i) {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">412</th>
  <td class="line-code diff_in">
    <pre>        more = proc(i-&gt;key().c_str(), i-&gt;value().toString().c_str(), user);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">413</th>
  <td class="line-code diff_in">
    <pre>    }<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">414</th>
  <td class="line-code diff_in">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">415</th>
  <td class="line-code diff_in">
    <pre>    Exiv2::ExifData::const_iterator eend = exifData.end();<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">416</th>
  <td class="line-code diff_in">
    <pre>    for (Exiv2::ExifData::const_iterator e = exifData.begin();<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">417</th>
  <td class="line-code diff_in">
    <pre>            e != eend &amp;&amp; more; ++e) {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">418</th>
  <td class="line-code diff_in">
    <pre>        more = proc(e-&gt;key().c_str(), e-&gt;value().toString().c_str(), user);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">419</th>
  <td class="line-code diff_in">
    <pre>    }<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">420</th>
  <td class="line-code diff_in">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">421</th>
  <td class="line-code diff_in">
    <pre>    return 0;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">422</th>
  <td class="line-code diff_in">
    <pre>}<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">423</th>
  <td class="line-code diff_in">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">424</th>
  <td class="line-code diff_in">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">425</th>
  <td class="line-code diff_in">
    <pre>BOOL APIENTRY DllMain( HANDLE hModule, <span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">426</th>
  <td class="line-code diff_in">
    <pre>                       DWORD  ul_reason_for_call, <span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">427</th>
  <td class="line-code diff_in">
    <pre>                       LPVOID lpReserved<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">428</th>
  <td class="line-code diff_in">
    <pre>                     )<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">429</th>
  <td class="line-code diff_in">
    <pre>{<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">430</th>
  <td class="line-code diff_in">
    <pre>    switch (ul_reason_for_call) {<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">431</th>
  <td class="line-code diff_in">
    <pre>        case DLL_PROCESS_ATTACH:<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">432</th>
  <td class="line-code diff_in">
    <pre>        case DLL_THREAD_ATTACH:<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">433</th>
  <td class="line-code diff_in">
    <pre>        case DLL_THREAD_DETACH:<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">434</th>
  <td class="line-code diff_in">
    <pre>        case DLL_PROCESS_DETACH:<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">435</th>
  <td class="line-code diff_in">
    <pre>            break;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">436</th>
  <td class="line-code diff_in">
    <pre>    }<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">437</th>
  <td class="line-code diff_in">
    <pre>    return TRUE;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">438</th>
  <td class="line-code diff_in">
    <pre>}<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">439</th>
  <td class="line-code diff_in">
    <pre></pre>
  </td>
</tr>
</tbody>
</table>
</div>
<div class="autoscroll">
<table class="filecontent">
<thead>
  <tr>
    <th colspan="3" class="filename">
      msvc/exivsimple/stdafx.cpp	(working copy)
    </th>
  </tr>
</thead>
<tbody>
<tr>
  <th class="line-num">1</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>// ***************************************************************** -*- C++ -*-<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">2</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>/*<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">3</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> * Copyright (C) 2004-2007 Andreas Huggel &lt;ahuggel@gmx.net&gt;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">4</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> * <span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">5</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> * This program is part of the Exiv2 distribution.<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">6</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> *<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">7</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> * This program is free software; you can redistribute it and/or<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">8</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> * modify it under the terms of the GNU General Public License<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">9</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> * as published by the Free Software Foundation; either version 2<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">10</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> * of the License, or (at your option) any later version.<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">11</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> * <span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">12</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> * This program is distributed in the hope that it will be useful,<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">13</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> * but WITHOUT ANY WARRANTY; without even the implied warranty of<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">14</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">15</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> * GNU General Public License for more details.<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">16</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> * <span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">17</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> * You should have received a copy of the GNU General Public License<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">18</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> * along with this program; if not, write to the Free Software<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">19</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> * Foundation, Inc., 51 Franklin Street, 5th Floor, Boston, MA 02110-1301 USA.<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">20</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> */<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">21</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>/*<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">22</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  File:      stdafx.cpp<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">23</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  Version:   $Rev$<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">24</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  Author(s): Brad Schick &lt;brad@robotbattle.com&gt;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">25</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  History:   12-Nov-04, brad: created<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">26</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> */<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">27</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>// *****************************************************************************<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">28</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num">29</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>#include &quot;stdafx.h&quot;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">1</th>
  <td class="line-code diff_in">
    <pre>// ***************************************************************** -*- C++ -*-<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">2</th>
  <td class="line-code diff_in">
    <pre>/*<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">3</th>
  <td class="line-code diff_in">
    <pre> * Copyright (C) 2004-2007 Andreas Huggel &lt;ahuggel@gmx.net&gt;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">4</th>
  <td class="line-code diff_in">
    <pre> * <span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">5</th>
  <td class="line-code diff_in">
    <pre> * This program is part of the Exiv2 distribution.<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">6</th>
  <td class="line-code diff_in">
    <pre> *<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">7</th>
  <td class="line-code diff_in">
    <pre> * This program is free software; you can redistribute it and/or<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">8</th>
  <td class="line-code diff_in">
    <pre> * modify it under the terms of the GNU General Public License<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">9</th>
  <td class="line-code diff_in">
    <pre> * as published by the Free Software Foundation; either version 2<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">10</th>
  <td class="line-code diff_in">
    <pre> * of the License, or (at your option) any later version.<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">11</th>
  <td class="line-code diff_in">
    <pre> * <span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">12</th>
  <td class="line-code diff_in">
    <pre> * This program is distributed in the hope that it will be useful,<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">13</th>
  <td class="line-code diff_in">
    <pre> * but WITHOUT ANY WARRANTY; without even the implied warranty of<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">14</th>
  <td class="line-code diff_in">
    <pre> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">15</th>
  <td class="line-code diff_in">
    <pre> * GNU General Public License for more details.<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">16</th>
  <td class="line-code diff_in">
    <pre> * <span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">17</th>
  <td class="line-code diff_in">
    <pre> * You should have received a copy of the GNU General Public License<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">18</th>
  <td class="line-code diff_in">
    <pre> * along with this program; if not, write to the Free Software<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">19</th>
  <td class="line-code diff_in">
    <pre> * Foundation, Inc., 51 Franklin Street, 5th Floor, Boston, MA 02110-1301 USA.<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">20</th>
  <td class="line-code diff_in">
    <pre> */<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">21</th>
  <td class="line-code diff_in">
    <pre>/*<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">22</th>
  <td class="line-code diff_in">
    <pre>  File:      stdafx.cpp<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">23</th>
  <td class="line-code diff_in">
    <pre>  Version:   $Rev$<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">24</th>
  <td class="line-code diff_in">
    <pre>  Author(s): Brad Schick &lt;brad@robotbattle.com&gt;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">25</th>
  <td class="line-code diff_in">
    <pre>  History:   12-Nov-04, brad: created<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">26</th>
  <td class="line-code diff_in">
    <pre> */<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">27</th>
  <td class="line-code diff_in">
    <pre>// *****************************************************************************<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">28</th>
  <td class="line-code diff_in">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">29</th>
  <td class="line-code diff_in">
    <pre>#include &quot;stdafx.h&quot;<span></span></pre>
  </td>
</tr>
</tbody>
</table>
</div>
<div class="autoscroll">
<table class="filecontent">
<thead>
  <tr>
    <th colspan="3" class="filename">
      msvc/exivsimple/exivsimple.h	(working copy)
    </th>
  </tr>
</thead>
<tbody>
<tr>
  <th class="line-num">1</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>// ***************************************************************** -*- C++ -*-<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">2</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>/*<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">3</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> * Copyright (C) 2004-2007 Andreas Huggel &lt;ahuggel@gmx.net&gt;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">4</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> * <span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">5</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> * This program is part of the Exiv2 distribution.<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">6</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> *<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">7</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> * This program is free software; you can redistribute it and/or<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">8</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> * modify it under the terms of the GNU General Public License<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">9</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> * as published by the Free Software Foundation; either version 2<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">10</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> * of the License, or (at your option) any later version.<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">11</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> * <span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">12</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> * This program is distributed in the hope that it will be useful,<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">13</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> * but WITHOUT ANY WARRANTY; without even the implied warranty of<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">14</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">15</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> * GNU General Public License for more details.<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">16</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> * <span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">17</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> * You should have received a copy of the GNU General Public License<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">18</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> * along with this program; if not, write to the Free Software<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">19</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> * Foundation, Inc., 51 Franklin Street, 5th Floor, Boston, MA 02110-1301 USA.<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">20</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> */<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">21</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>/*!<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">22</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  @file    exivsimple.h<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">23</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  @brief   Limited metadata dll for win32<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">24</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  @version $Rev$<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">25</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  @author  Brad Schick (brad)<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">26</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>           &lt;a href=&quot;mailto:brad@robotbattle.com&quot;&gt;brad@robotbattle.com&lt;/a&gt;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">27</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>           Christian Kuster (kusti)<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">28</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>           &lt;a href=&quot;mailto:christian@kusti.ch&quot;&gt;christian@kusti.ch&lt;/a&gt;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">29</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  @date    12-Nov-04, brad: created<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">30</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre> */<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">31</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>#ifndef EXIVSIMPLE_H_<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">32</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>#define EXIVSIMPLE_H_<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">33</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num">34</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>// *****************************************************************************<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">35</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num">36</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num">37</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>#ifdef EXIVSIMPLE_EXPORTS<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">38</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>#define EXIVSIMPLE_API __declspec(dllexport)<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">39</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>#else<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">40</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>#define EXIVSIMPLE_API __declspec(dllimport)<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">41</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>#endif<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">42</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num">43</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>DECLARE_HANDLE (HIMAGE);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">44</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num">45</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>#ifdef __cplusplus<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">46</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>extern &quot;C&quot;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">47</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>{<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">48</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>#endif<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">49</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num">50</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>// These types should match those in types.hpp. Copied here so that<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">51</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>// exiv2 headers are not needed.<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">52</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>// For all of the functions<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">53</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>// that take a type, passing invalidTypeId causes the type to be guessed.<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">54</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>// Guessing types is accurate for IPTC but not for EXIF.<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">55</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>enum DllTypeId { invalidTypeId, unsignedByte, asciiString, unsignedShort, <span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">56</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>                unsignedLong, unsignedRational, invalid6, undefined, <span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">57</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>                signedShort, signedLong, signedRational, <span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">58</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>                string, isoDate, isoTime,<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">59</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>                lastTypeId };<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">60</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num">61</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>typedef bool (CALLBACK* METAENUMPROC)(const char *key, const char *value, void *user);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">62</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num">63</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>EXIVSIMPLE_API HIMAGE OpenFileImage(const char *file);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">64</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>EXIVSIMPLE_API HIMAGE OpenMemImage(const BYTE *data, unsigned int size);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">65</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>EXIVSIMPLE_API void FreeImage(HIMAGE img);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">66</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>EXIVSIMPLE_API int SaveImage(HIMAGE img);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">67</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>EXIVSIMPLE_API int ImageSize(HIMAGE img);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">68</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>EXIVSIMPLE_API int ImageData(HIMAGE img, BYTE *buffer, unsigned int size);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">69</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>EXIVSIMPLE_API int ReadMeta(HIMAGE img, const char *key, char *buff, int buffsize);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">70</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>EXIVSIMPLE_API int EnumMeta(HIMAGE img, METAENUMPROC proc, void *user);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">71</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>EXIVSIMPLE_API int AddMeta(HIMAGE img, const char *key, const char *val, DllTypeId type);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">72</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>EXIVSIMPLE_API int ModifyMeta(HIMAGE img, const char *key, const char *val, DllTypeId type);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">73</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>EXIVSIMPLE_API int RemoveMeta(HIMAGE img, const char *key);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">74</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>/*!<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">75</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  @brief Set the Thumbnail<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">76</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num">77</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  @param img    Handle to the image<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">78</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  @param buffer Pointer to the Thumbnail data (JPEG)<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">79</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  @param size   Size of the thumbnail in bytes<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">80</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>*/<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">81</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>EXIVSIMPLE_API void SetThumbnail(HIMAGE img, const BYTE *buffer, unsigned int size);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">82</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>/*!<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">83</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  @brief Get the Thumbnail<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">84</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num">85</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  @param img    Handle to the image<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">86</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  @param buffer Pointer where the thumbnaildata is written to (large enough!)<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">87</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  @param size   Size of buffer<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">88</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num">89</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>  @return size of the thumbnail, 0 if failed to read the thumbnail, <span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">90</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>          (unsigned int)-1 if buffer is too small.<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">91</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>*/<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">92</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>EXIVSIMPLE_API unsigned int GetThumbnail(HIMAGE img, BYTE *buffer, unsigned int size);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">93</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num">94</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>#ifdef __cplusplus<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">95</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>}<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">96</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>#endif<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num">97</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num">98</th>
  <th class="line-num"></th>
  <td class="line-code diff_out">
    <pre>#endif                                  // #ifndef EXIVSIMPLE_H_<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">1</th>
  <td class="line-code diff_in">
    <pre>// ***************************************************************** -*- C++ -*-<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">2</th>
  <td class="line-code diff_in">
    <pre>/*<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">3</th>
  <td class="line-code diff_in">
    <pre> * Copyright (C) 2004-2007 Andreas Huggel &lt;ahuggel@gmx.net&gt;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">4</th>
  <td class="line-code diff_in">
    <pre> * <span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">5</th>
  <td class="line-code diff_in">
    <pre> * This program is part of the Exiv2 distribution.<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">6</th>
  <td class="line-code diff_in">
    <pre> *<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">7</th>
  <td class="line-code diff_in">
    <pre> * This program is free software; you can redistribute it and/or<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">8</th>
  <td class="line-code diff_in">
    <pre> * modify it under the terms of the GNU General Public License<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">9</th>
  <td class="line-code diff_in">
    <pre> * as published by the Free Software Foundation; either version 2<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">10</th>
  <td class="line-code diff_in">
    <pre> * of the License, or (at your option) any later version.<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">11</th>
  <td class="line-code diff_in">
    <pre> * <span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">12</th>
  <td class="line-code diff_in">
    <pre> * This program is distributed in the hope that it will be useful,<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">13</th>
  <td class="line-code diff_in">
    <pre> * but WITHOUT ANY WARRANTY; without even the implied warranty of<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">14</th>
  <td class="line-code diff_in">
    <pre> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">15</th>
  <td class="line-code diff_in">
    <pre> * GNU General Public License for more details.<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">16</th>
  <td class="line-code diff_in">
    <pre> * <span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">17</th>
  <td class="line-code diff_in">
    <pre> * You should have received a copy of the GNU General Public License<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">18</th>
  <td class="line-code diff_in">
    <pre> * along with this program; if not, write to the Free Software<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">19</th>
  <td class="line-code diff_in">
    <pre> * Foundation, Inc., 51 Franklin Street, 5th Floor, Boston, MA 02110-1301 USA.<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">20</th>
  <td class="line-code diff_in">
    <pre> */<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">21</th>
  <td class="line-code diff_in">
    <pre>/*!<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">22</th>
  <td class="line-code diff_in">
    <pre>  @file    exivsimple.h<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">23</th>
  <td class="line-code diff_in">
    <pre>  @brief   Limited metadata dll for win32<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">24</th>
  <td class="line-code diff_in">
    <pre>  @version $Rev$<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">25</th>
  <td class="line-code diff_in">
    <pre>  @author  Brad Schick (brad)<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">26</th>
  <td class="line-code diff_in">
    <pre>           &lt;a href=&quot;mailto:brad@robotbattle.com&quot;&gt;brad@robotbattle.com&lt;/a&gt;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">27</th>
  <td class="line-code diff_in">
    <pre>           Christian Kuster (kusti)<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">28</th>
  <td class="line-code diff_in">
    <pre>           &lt;a href=&quot;mailto:christian@kusti.ch&quot;&gt;christian@kusti.ch&lt;/a&gt;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">29</th>
  <td class="line-code diff_in">
    <pre>  @date    12-Nov-04, brad: created<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">30</th>
  <td class="line-code diff_in">
    <pre> */<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">31</th>
  <td class="line-code diff_in">
    <pre>#ifndef EXIVSIMPLE_H_<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">32</th>
  <td class="line-code diff_in">
    <pre>#define EXIVSIMPLE_H_<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">33</th>
  <td class="line-code diff_in">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">34</th>
  <td class="line-code diff_in">
    <pre>// *****************************************************************************<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">35</th>
  <td class="line-code diff_in">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">36</th>
  <td class="line-code diff_in">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">37</th>
  <td class="line-code diff_in">
    <pre>#ifdef EXIVSIMPLE_EXPORTS<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">38</th>
  <td class="line-code diff_in">
    <pre>#define EXIVSIMPLE_API __declspec(dllexport)<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">39</th>
  <td class="line-code diff_in">
    <pre>#else<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">40</th>
  <td class="line-code diff_in">
    <pre>#define EXIVSIMPLE_API __declspec(dllimport)<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">41</th>
  <td class="line-code diff_in">
    <pre>#endif<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">42</th>
  <td class="line-code diff_in">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">43</th>
  <td class="line-code diff_in">
    <pre>DECLARE_HANDLE (HIMAGE);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">44</th>
  <td class="line-code diff_in">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">45</th>
  <td class="line-code diff_in">
    <pre>#ifdef __cplusplus<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">46</th>
  <td class="line-code diff_in">
    <pre>extern &quot;C&quot;<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">47</th>
  <td class="line-code diff_in">
    <pre>{<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">48</th>
  <td class="line-code diff_in">
    <pre>#endif<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">49</th>
  <td class="line-code diff_in">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">50</th>
  <td class="line-code diff_in">
    <pre>// These types should match those in types.hpp. Copied here so that<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">51</th>
  <td class="line-code diff_in">
    <pre>// exiv2 headers are not needed.<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">52</th>
  <td class="line-code diff_in">
    <pre>// For all of the functions<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">53</th>
  <td class="line-code diff_in">
    <pre>// that take a type, passing invalidTypeId causes the type to be guessed.<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">54</th>
  <td class="line-code diff_in">
    <pre>// Guessing types is accurate for IPTC but not for EXIF.<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">55</th>
  <td class="line-code diff_in">
    <pre>enum DllTypeId { invalidTypeId, unsignedByte, asciiString, unsignedShort, <span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">56</th>
  <td class="line-code diff_in">
    <pre>                unsignedLong, unsignedRational, invalid6, undefined, <span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">57</th>
  <td class="line-code diff_in">
    <pre>                signedShort, signedLong, signedRational, <span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">58</th>
  <td class="line-code diff_in">
    <pre>                string, isoDate, isoTime,<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">59</th>
  <td class="line-code diff_in">
    <pre>                lastTypeId };<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">60</th>
  <td class="line-code diff_in">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">61</th>
  <td class="line-code diff_in">
    <pre>typedef bool (CALLBACK* METAENUMPROC)(const char *key, const char *value, void *user);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">62</th>
  <td class="line-code diff_in">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">63</th>
  <td class="line-code diff_in">
    <pre>EXIVSIMPLE_API HIMAGE OpenFileImage(const char *file);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">64</th>
  <td class="line-code diff_in">
    <pre>EXIVSIMPLE_API HIMAGE OpenMemImage(const BYTE *data, unsigned int size);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">65</th>
  <td class="line-code diff_in">
    <pre>EXIVSIMPLE_API void FreeImage(HIMAGE img);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">66</th>
  <td class="line-code diff_in">
    <pre>EXIVSIMPLE_API int SaveImage(HIMAGE img);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">67</th>
  <td class="line-code diff_in">
    <pre>EXIVSIMPLE_API int ImageSize(HIMAGE img);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">68</th>
  <td class="line-code diff_in">
    <pre>EXIVSIMPLE_API int ImageData(HIMAGE img, BYTE *buffer, unsigned int size);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">69</th>
  <td class="line-code diff_in">
    <pre>EXIVSIMPLE_API int ReadMeta(HIMAGE img, const char *key, char *buff, int buffsize);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">70</th>
  <td class="line-code diff_in">
    <pre>EXIVSIMPLE_API int EnumMeta(HIMAGE img, METAENUMPROC proc, void *user);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">71</th>
  <td class="line-code diff_in">
    <pre>EXIVSIMPLE_API int AddMeta(HIMAGE img, const char *key, const char *val, DllTypeId type);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">72</th>
  <td class="line-code diff_in">
    <pre>EXIVSIMPLE_API int ModifyMeta(HIMAGE img, const char *key, const char *val, DllTypeId type);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">73</th>
  <td class="line-code diff_in">
    <pre>EXIVSIMPLE_API int RemoveMeta(HIMAGE img, const char *key);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">74</th>
  <td class="line-code diff_in">
    <pre>/*!<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">75</th>
  <td class="line-code diff_in">
    <pre>  @brief Set the Thumbnail<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">76</th>
  <td class="line-code diff_in">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">77</th>
  <td class="line-code diff_in">
    <pre>  @param img    Handle to the image<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">78</th>
  <td class="line-code diff_in">
    <pre>  @param buffer Pointer to the Thumbnail data (JPEG)<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">79</th>
  <td class="line-code diff_in">
    <pre>  @param size   Size of the thumbnail in bytes<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">80</th>
  <td class="line-code diff_in">
    <pre>*/<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">81</th>
  <td class="line-code diff_in">
    <pre>EXIVSIMPLE_API void SetThumbnail(HIMAGE img, const BYTE *buffer, unsigned int size);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">82</th>
  <td class="line-code diff_in">
    <pre>/*!<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">83</th>
  <td class="line-code diff_in">
    <pre>  @brief Get the Thumbnail<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">84</th>
  <td class="line-code diff_in">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">85</th>
  <td class="line-code diff_in">
    <pre>  @param img    Handle to the image<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">86</th>
  <td class="line-code diff_in">
    <pre>  @param buffer Pointer where the thumbnaildata is written to (large enough!)<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">87</th>
  <td class="line-code diff_in">
    <pre>  @param size   Size of buffer<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">88</th>
  <td class="line-code diff_in">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">89</th>
  <td class="line-code diff_in">
    <pre>  @return size of the thumbnail, 0 if failed to read the thumbnail, <span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">90</th>
  <td class="line-code diff_in">
    <pre>          (unsigned int)-1 if buffer is too small.<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">91</th>
  <td class="line-code diff_in">
    <pre>*/<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">92</th>
  <td class="line-code diff_in">
    <pre>EXIVSIMPLE_API unsigned int GetThumbnail(HIMAGE img, BYTE *buffer, unsigned int size);<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">93</th>
  <td class="line-code diff_in">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">94</th>
  <td class="line-code diff_in">
    <pre>#ifdef __cplusplus<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">95</th>
  <td class="line-code diff_in">
    <pre>}<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">96</th>
  <td class="line-code diff_in">
    <pre>#endif<span></span></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">97</th>
  <td class="line-code diff_in">
    <pre></pre>
  </td>
</tr>
<tr>
  <th class="line-num"></th>
  <th class="line-num">98</th>
  <td class="line-code diff_in">
    <pre>#endif                                  // #ifndef EXIVSIMPLE_H_<span></span></pre>
  </td>
</tr>
</tbody>
</table>
</div>

... This diff was truncated because it exceeds the maximum size that can be displayed.


</div>

<span class="pagination filepreview">
  <ul class="pages"></ul><span><span class="items">(1-1/1)</span> </span>
</span>



        
        <div style="clear:both;"></div>
    </div>
</div>
</div>

<div id="ajax-indicator" style="display:none;"><span>Loading...</span></div>
<div id="ajax-modal" style="display:none;"></div>

<div id="footer">
  <div class="bgl"><div class="bgr">
    Powered by <a href="https://www.redmine.org/">Redmine</a> &copy; 2006-2018 Jean-Philippe Lang
  </div></div>
</div>
</div>
</div>

</body>
</html>
