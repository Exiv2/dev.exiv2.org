<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<title>Can&#39;t locate ~/.exiv2 file - Exiv2</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="description" content="Redmine" />
<meta name="keywords" content="issue,bug,tracker" />
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="TUa1nH+qGfV/+FLC9Xul0BS4iXeYcnPTXIBN8sNywqCvCx5zDdDV9SqcTc5KrKnjKyrdDmmR0mmhoN16gEslzw==" />
<link rel='shortcut icon' href='/favicon.ico?1550767427' />
<link rel="stylesheet" media="all" href="/stylesheets/jquery/jquery-ui-1.11.0.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/application.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/responsive.css?1550767427" />

<script src="/javascripts/jquery-1.11.1-ui-1.11.0-ujs-4.3.1.js?1550767427"></script>
<script src="/javascripts/application.js?1550767427"></script>
<script src="/javascripts/responsive.js?1550767427"></script>
<script>
//<![CDATA[
$(window).load(function(){ warnLeavingUnsaved('The current page contains unsaved text that will be lost if you leave this page.'); });
//]]>
</script>


<!-- page specific tags -->
</head>
<body class="project-exiv2 has-main-menu controller-messages action-show avatars-off">

<div id="wrapper">

<div class="flyout-menu js-flyout-menu">


        <div class="flyout-menu__search">
            <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
            <input type="hidden" name="messages" value="1" />
            <label class="search-magnifier search-magnifier--flyout" for="flyout-search">&#9906;</label>
            <input type="text" name="q" id="flyout-search" class="small js-search-input" placeholder="Search" />
</form>        </div>


        <h3>Project</h3>
        <span class="js-project-menu"></span>

    <h3>General</h3>
    <span class="js-general-menu"></span>

    <span class="js-sidebar flyout-menu__sidebar"></span>

    <h3>Profile</h3>
    <span class="js-profile-menu"></span>

</div>

<div id="wrapper2">
<div id="wrapper3">
<div id="top-menu">
    <div id="account">
        <ul><li><a class="login" href="/login">Sign in</a></li></ul>    </div>
    
    <ul><li><a class="home" href="/">Home</a></li><li><a class="projects" href="/projects">Projects</a></li><li><a class="help" href="https://www.redmine.org/guide">Help</a></li></ul></div>

<div id="header">

    <a href="#" class="mobile-toggle-button js-flyout-menu-toggle-button"></a>

    <div id="quick-search">
        <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
        <input type="hidden" name="scope" />
        <input type="hidden" name="messages" value="1" />
        <label for='q'>
          <a accesskey="4" href="/projects/exiv2/search">Search</a>:
        </label>
        <input type="text" name="q" id="q" size="20" class="small" accesskey="f" />
</form>        <div id="project-jump" class="drdn"><span class="drdn-trigger">Exiv2</span><div class="drdn-content"><div class="quick-search"><input type="text" name="q" id="projects-quick-search" value="" class="autocomplete" data-automcomplete-url="/projects/autocomplete.js?jump=boards" autocomplete="off" /></div><div class="drdn-items projects selection"></div><div class="drdn-items all-projects selection"><a href="/projects?jump=boards">All Projects</a></div></div></div>
    </div>

    <h1><span class="current-project">Exiv2</span></h1>

    <div id="main-menu" class="tabs">
        <ul><li><a class="overview" href="/projects/exiv2">Overview</a></li><li><a class="activity" href="/projects/exiv2/activity">Activity</a></li><li><a class="roadmap" href="/projects/exiv2/roadmap">Roadmap</a></li><li><a class="issues" href="/projects/exiv2/issues">Issues</a></li><li><a class="news" href="/projects/exiv2/news">News</a></li><li><a class="wiki" href="/projects/exiv2/wiki">Wiki</a></li><li><a class="boards selected" href="/projects/exiv2/boards">Forums</a></li><li><a class="repository" href="/projects/exiv2/repository">Repository</a></li></ul>
        <div class="tabs-buttons" style="display:none;">
            <button class="tab-left" onclick="moveTabLeft(this); return false;"></button>
            <button class="tab-right" onclick="moveTabRight(this); return false;"></button>
        </div>
    </div>
</div>

<div id="main" class="nosidebar">
    <div id="sidebar">
        
        
    </div>

    <div id="content">
        
        <p class="breadcrumb"><a href="/projects/exiv2/boards">Forums</a> » <a href="/projects/exiv2/boards/3">Forum</a> » </p>

<div class="contextual">
    
    
    
    
</div>

<h2>Can&#39;t locate ~/.exiv2 file</h2>

<div class="message">
<p><span class="author">Added by <a class="user active" href="/users/6160">Karsten Salewski</a> <a title="16 Jul 2017 11:53" href="/projects/exiv2/activity?from=2017-07-16">over 4 years</a> ago</span></p>
<div class="wiki">
<p>Hi all!</p>


	<p>I am just trying to add a lens to the exiv2 library. I found the following two articles.</p>


	<p><a class="external" href="http://dev.exiv2.org/projects/exiv2/wiki/Lens_Recognition_in_Exiv2_v026_(and_later)/">http://dev.exiv2.org/projects/exiv2/wiki/Lens_Recognition_in_Exiv2_v026_(and_later)/</a><br /><a class="external" href="http://dev.exiv2.org/boards/3/topics/2843">http://dev.exiv2.org/boards/3/topics/2843</a></p>


	<p>It seems I have to modify ~/.exiv2 file. However, I can't locate that file on my harddisk.<br />Does anybody knows where to find that file or where to get it?</p>


	<p>Many thanks in advance!</p>


	<p>Karsten</p>
</div>

</div>
<br />

<div id="replies">
<h3 class="comments icon icon-comments">Replies (9)</h3>
  <div class="message reply" id="message-2855">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/2854?r=2855#message-2855">RE: Can&#39;t locate ~/.exiv2 file</a>
    -
    Added by <a class="user active" href="/users/119">Robin Mills</a> <a title="16 Jul 2017 12:10" href="/projects/exiv2/activity?from=2017-07-16">over 4 years</a> ago
  </h4>
  <div class="wiki"><p>Karsten</p>


	<p>Just write the file with a text editor.  It's not present by default.  You can determine the path with this command:<pre>679 rmills@rmillsmbp:~/gnu/exiv2/team/releases $ exiv2 -vVg config_path
exiv2 0.26 001a00 (64 bit build)
config_path=/Users/rmills/.exiv2
680 rmills@rmillsmbp:~/gnu/exiv2/team/releases $</pre></p></div>
  
  </div>
  <div class="message reply" id="message-2856">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/2854?r=2856#message-2856">RE: Can&#39;t locate ~/.exiv2 file</a>
    -
    Added by <a class="user active" href="/users/6160">Karsten Salewski</a> <a title="16 Jul 2017 13:35" href="/projects/exiv2/activity?from=2017-07-16">over 4 years</a> ago
  </h4>
  <div class="wiki"><p>Hi Robin,</p>


	<p>thank you very much for the quick response!<br />I have just tried to apply it to my system. But actually I don't understand it. I can't map your answer to the files and folder structure on my system.<br />I am using openSuSE Leap 42.2. There is no ~/gnu folder. I've just installed exiv2 0.26</p>


	<p>I do find an exiv2 folder in /usr/share/doc/packages/<br />That directory also contains the exiftool directory.</p>


	<p>The exiv2 directory (/usr/share/doc/packages/exiv2) contains the two files: ChangeLog and cmd.txt</p>


	<p>Is that where the .exiv2 file needs to be stored?</p>


	<p>Regards,</p>


	<p>Karsten</p></div>
  
  </div>
  <div class="message reply" id="message-2857">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/2854?r=2857#message-2857">RE: Can&#39;t locate ~/.exiv2 file</a>
    -
    Added by <a class="user active" href="/users/6160">Karsten Salewski</a> <a title="16 Jul 2017 13:44" href="/projects/exiv2/activity?from=2017-07-16">over 4 years</a> ago
  </h4>
  <div class="wiki"><p>I also did:</p>


	<p>[code]<br />/usr/local/bin/exiv2 -vVg config_path<br />exiv2 0.26 001a00 (64 bit build)<br />config_path=/root/.exiv2<br />[/code]</p></div>
  
  </div>
  <div class="message reply" id="message-2858">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/2854?r=2858#message-2858">RE: Can&#39;t locate ~/.exiv2 file</a>
    -
    Added by <a class="user active" href="/users/119">Robin Mills</a> <a title="16 Jul 2017 13:54" href="/projects/exiv2/activity?from=2017-07-16">over 4 years</a> ago
  </h4>
  <div class="wiki"><p>Karsten</p>


	<p>You are trying to hard.  It's the file ~/.exiv2  (on windows it's slightly different), however the command <em><strong><code>$ exiv2 --verbose --version --grep config_path</code></strong></em> will tell you the exact path.  On the Mac, my home directory <em><strong><code>~</code></strong></em> is the path <em><strong><code>/Users/rmills</code></strong></em> (for me).</p>


	<p>Here are the contents of ~/.exiv2 on my computer:<pre>$ cat ~/.exiv2
[canon]
# 110=Samyang 35mm F1.4 AS UMC
# 247=Samyang 14mm f/2.8 AE ED AS IF UMC
# 65535=The lens in issue 1251

[nikon]
# 146=Robin's Sigma Lens

[pentax]
# 3 255 0 0=another pentax lens

[minolta]
# 255=a sony lens

[olympus]
None=something
$</pre>The file is in Windows .ini format.  I have a section for different cameras.  A <em><strong><code># </code></strong></em> is a comment.  So effectively, I have nothing in my file.  However I often modify the file for test purposes.</p></div>
  
  </div>
  <div class="message reply" id="message-2859">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/2854?r=2859#message-2859">RE: Can&#39;t locate ~/.exiv2 file</a>
    -
    Added by <a class="user active" href="/users/119">Robin Mills</a> <a title="16 Jul 2017 13:57" href="/projects/exiv2/activity?from=2017-07-16">over 4 years</a> ago
  </h4>
  <div class="wiki"><p>Edit the file /root/.exiv2</p>


	<p>Can you send me a test file using your lens and let me know which lens you are using.</p></div>
  
  </div>
  <div class="message reply" id="message-2860">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/2854?r=2860#message-2860">RE: Can&#39;t locate ~/.exiv2 file</a>
    -
    Added by <a class="user active" href="/users/6160">Karsten Salewski</a> <a title="16 Jul 2017 14:46" href="/projects/exiv2/activity?from=2017-07-16">over 4 years</a> ago
  </h4>
  <div class="wiki"><p>Thank you very much for your support, Robin.<br />I understand now where to store the .exiv2 file.<br />But I don't find the according attributes in the files.</p>


	<p>Maybe you can tell how this works.</p>


	<ol>
	<li>_IMG1478.jpg; Lens: Sigma, 3,5/180mm APO MACRO, Lens ID: "Sigma", Lens Type: "Sigma" <br />Darktable shows "Sigma Lens" in Lens info panel</li>
		<li>_IMG1588.jpg; Lens: Pentax SMC-FA 2.8/20mm, Lens ID: "smc PENTAX-FA 20mm F2.8", Lens Type: "smc PENTAX-FA 20mm F2.8" <br />Darktable shows "smc PENTAX-FA 20mm F2.8" in the info panel, which is correct!</li>
		<li>_IMG8987.jpg; Lens Pentax HD PENTAX-D FA 2,8/24-70mm, Lens ID: "HD PENTAX-D FA 24-70mm F2.8 ED SDM WR", Lens Type: "HD PENTAX-D FA 24-70mm F2.8 ED SDM WR" <br />Darktable shows "Unknown (0x083e)" in Lens info panel.</li>
	</ol>


	<p>I would like to change the 180mm and 24-70mm lens. However, will be sufficient if you can tell me how to setup the .exiv2 file for one example. I think I can do the other one myself then.</p>


	<p>Best Regards,</p>


	<p>Karsten</p></div>
  <div class="attachments">
<div class="contextual">
  
</div>
<table>
<tr>
  <td>
    <a class="icon icon-attachment" href="/attachments/1172">_IMG1478.jpg</a>    <span class="size">(655 KB)</span>
    <a class="icon-only icon-download" title="Download" href="/attachments/download/1172/_IMG1478.jpg">_IMG1478.jpg</a>  </td>
  <td></td>
  <td>
  </td>
  <td>
  </td>
</tr>
<tr>
  <td>
    <a class="icon icon-attachment" href="/attachments/1173">_IMG1588.jpg</a>    <span class="size">(520 KB)</span>
    <a class="icon-only icon-download" title="Download" href="/attachments/download/1173/_IMG1588.jpg">_IMG1588.jpg</a>  </td>
  <td></td>
  <td>
  </td>
  <td>
  </td>
</tr>
<tr>
  <td>
    <a class="icon icon-attachment" href="/attachments/1174">_IMG8987.jpg</a>    <span class="size">(876 KB)</span>
    <a class="icon-only icon-download" title="Download" href="/attachments/download/1174/_IMG8987.jpg">_IMG8987.jpg</a>  </td>
  <td></td>
  <td>
  </td>
  <td>
  </td>
</tr>
</table>
</div>

  </div>
  <div class="message reply" id="message-2861">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/2854?r=2861#message-2861">RE: Can&#39;t locate ~/.exiv2 file</a>
    -
    Added by <a class="user active" href="/users/119">Robin Mills</a> <a title="16 Jul 2017 16:19" href="/projects/exiv2/activity?from=2017-07-16">over 4 years</a> ago
  </h4>
  <div class="wiki"><p>I'm very surprised that you are having any difficulty with this.  The exiv2 config file (~/.exiv2) is a new feature of v0.26 and you're the first person who has discussed this on the forum.  I hope this feature is not causing difficulty for other users.</p>


	<p><em><strong>Step 1</strong> - Default behaviour</em></p>


<pre>707 rmills@rmillsmbp:~ $ rm -rf ~/.exiv2
708 rmills@rmillsmbp:~ $ exiv2 -pa --grep lenstype/i  ~/Downloads/*.jpg
/Users/rmills/Downloads/_IMG1478.jpg  Exif.PentaxDng.LensType                      Byte        4  Sigma Lens
/Users/rmills/Downloads/_IMG1588.jpg  Exif.PentaxDng.LensType                      Byte        4  smc PENTAX-FA 20mm F2.8
/Users/rmills/Downloads/_IMG8987.jpg  Exif.PentaxDng.LensType                      Byte        4  HD PENTAX-D FA 24-70mm F2.8 ED SDM WR
709 rmills@rmillsmbp:~ $ </pre>Exiv2 recognises the lens in _IMG1588.jpg.  However it's hardly knows what lens is used _IMG1478 and wrong about the lens in _IMG8987.jpg.

	<p><em><strong>Step 2</strong> - Find the lens identifiers</em></p>


<pre>709 rmills@rmillsmbp:~ $ exiv2 -pv --grep lenstype/i  ~/Downloads/*.jpg
/Users/rmills/Downloads/_IMG1478.jpg  0x003f PentaxDng    LensType                    Byte        4  3 0 0 0
/Users/rmills/Downloads/_IMG1588.jpg  0x003f PentaxDng    LensType                    Byte        4  6 9 0 0
/Users/rmills/Downloads/_IMG8987.jpg  0x003f PentaxDng    LensType                    Byte        4  8 62 0 0
710 rmills@rmillsmbp:~ $ </pre>

	<p><em><strong>Step 3</strong> - Update ~/.exiv2</em></p>


<pre>710 rmills@rmillsmbp:~ $ cat ~/.exiv2
[pentax]
3 0 0 0=Sigma, 3,5/180mm APO MACRO
8 62 0 0=HD PENTAX-D FA 24-70mm F2.8 ED SDM WR

711 rmills@rmillsmbp:~ $ </pre>

	<p><em><strong>Step 4</strong> - Run exiv2 again</em></p>


<pre>711 rmills@rmillsmbp:~ $ exiv2 -pa --grep lenstype/i  ~/Downloads/*.jpg
/Users/rmills/Downloads/_IMG1478.jpg  Exif.PentaxDng.LensType                      Byte        4  Sigma, 3,5/180mm APO MACRO
/Users/rmills/Downloads/_IMG1588.jpg  Exif.PentaxDng.LensType                      Byte        4  smc PENTAX-FA 20mm F2.8
/Users/rmills/Downloads/_IMG8987.jpg  Exif.PentaxDng.LensType                      Byte        4  HD PENTAX-D FA 24-70mm F2.8 ED SDM WR
712 rmills@rmillsmbp:~ $ </pre>

	<p><em><strong>Commentary</strong> Why does this work?</em></p>


	<p>Metadata in an image consists of tags and data.  The tag identifies the purpose of the data, and data can be a string, or number, or an array of numbers (and some other types).  A Pentax image does not contain a string with the name of the lens.  It contains a tag <em><strong>Exif.PentaxDng.LensType</strong></em> whose data is an array of integers (usually 4 of them).  The command <em><strong><code>$ exiv2 -pv --grep lenstype/i foo.jpg</code></strong></em> shows you the data in the tag <em><strong>Exif.PentaxDng.LensType</strong></em>.  Exiv2 uses the data to determine the lens.  However Exiv2 does not know about every lens ever made and cannot know about new lenses which appear on the market.</p>


	<p>The Exiv2 config file ~/.exiv2 was added in v0.26 for two purposes:</p>


	<p>1) To enable users to add a lens to exiv2 without having to wait for an update to the library.<br />2) To enable users to change a lens identification if Exiv2 does not have the correct value.  You'll be surprised to discover that it's quite common for camera manufacturers to have the same lens identifier used by more than 20 different lenses.</p>


	<p>I hope that makes sense and fixes everything for you.  Darktable uses exiv2 and will correctly identify your lenses when you use a version of darktable which uses exiv2 v0.26.</p></div>
  
  </div>
  <div class="message reply" id="message-2862">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/2854?r=2862#message-2862">RE: Can&#39;t locate ~/.exiv2 file</a>
    -
    Added by <a class="user active" href="/users/6160">Karsten Salewski</a> <a title="16 Jul 2017 17:06" href="/projects/exiv2/activity?from=2017-07-16">over 4 years</a> ago
  </h4>
  <div class="wiki"><p>Hi Robin,</p>


	<p>thank you very much for the support. It does work now as you explained. I also added the Sigma 24-70mm F2.8 EX DG HSM to the list ;-)<br />However, now I have to talk to the darktable guys when exiv2 2.6.0 will be integrated into darktable.<br />And also my Linux distribution does not contain V 2.6.0 yet.</p>


	<p>However, I understand what needs to be done to get it running. It just takes a little time until V 2.6.0 is fully integrated into darktable and opensuse.</p>


	<p>Best Regards and a good remaining week end to you!</p>


	<p>Karsten</p></div>
  
  </div>
  <div class="message reply" id="message-2863">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/2854?r=2863#message-2863">RE: Can&#39;t locate ~/.exiv2 file</a>
    -
    Added by <a class="user active" href="/users/119">Robin Mills</a> <a title="16 Jul 2017 17:22" href="/projects/exiv2/activity?from=2017-07-16">over 4 years</a> ago
  </h4>
  <div class="wiki"><p>If you're willing to build darktable from source code, you can have exiv2 v0.26 support today.  I checked the darktable web-site and 2.2.5 was released in June.  It might have Exiv2 v0.26 support.  However, I think a little patience will work just as well and everything will come together in September or so.  It never ceases to amaze me that open-source works.  The exiv2 code travels from my computer to one billion linux machines (and millions of Windows and MacOSX machines) in less than a year!  Amazing, humbling and a little scary.</p></div>
  
  </div>
</div>
<span class="pagination"><ul class="pages"></ul><span><span class="items">(1-9/9)</span> </span></span>



        
        <div style="clear:both;"></div>
    </div>
</div>
</div>

<div id="ajax-indicator" style="display:none;"><span>Loading...</span></div>
<div id="ajax-modal" style="display:none;"></div>

<div id="footer">
  <div class="bgl"><div class="bgr">
    Powered by <a href="https://www.redmine.org/">Redmine</a> &copy; 2006-2018 Jean-Philippe Lang
  </div></div>
</div>
</div>
</div>

</body>
</html>
