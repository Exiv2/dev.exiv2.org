<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<title>Writing Extended XMP - Exiv2</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="description" content="Redmine" />
<meta name="keywords" content="issue,bug,tracker" />
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="RKe7hXy7j+ESnZzvXH/TOvTDALYQnaNV9EQP/twOp6mm6hBqDsFD4Uf5g+PjqN8Jy1FUz+F+Au8JZJ92nzdAxg==" />
<link rel='shortcut icon' href='/favicon.ico?1550767427' />
<link rel="stylesheet" media="all" href="/stylesheets/jquery/jquery-ui-1.11.0.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/application.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/responsive.css?1550767427" />

<script src="/javascripts/jquery-1.11.1-ui-1.11.0-ujs-4.3.1.js?1550767427"></script>
<script src="/javascripts/application.js?1550767427"></script>
<script src="/javascripts/responsive.js?1550767427"></script>
<script>
//<![CDATA[
$(window).load(function(){ warnLeavingUnsaved('The current page contains unsaved text that will be lost if you leave this page.'); });
//]]>
</script>


<!-- page specific tags -->
</head>
<body class="project-exiv2 has-main-menu controller-messages action-show avatars-off">

<div id="wrapper">

<div class="flyout-menu js-flyout-menu">


        <div class="flyout-menu__search">
            <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
            <input type="hidden" name="messages" value="1" />
            <label class="search-magnifier search-magnifier--flyout" for="flyout-search">&#9906;</label>
            <input type="text" name="q" id="flyout-search" class="small js-search-input" placeholder="Search" />
</form>        </div>


        <h3>Project</h3>
        <span class="js-project-menu"></span>

    <h3>General</h3>
    <span class="js-general-menu"></span>

    <span class="js-sidebar flyout-menu__sidebar"></span>

    <h3>Profile</h3>
    <span class="js-profile-menu"></span>

</div>

<div id="wrapper2">
<div id="wrapper3">
<div id="top-menu">
    <div id="account">
        <ul><li><a class="login" href="/login">Sign in</a></li></ul>    </div>
    
    <ul><li><a class="home" href="/">Home</a></li><li><a class="projects" href="/projects">Projects</a></li><li><a class="help" href="https://www.redmine.org/guide">Help</a></li></ul></div>

<div id="header">

    <a href="#" class="mobile-toggle-button js-flyout-menu-toggle-button"></a>

    <div id="quick-search">
        <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
        <input type="hidden" name="scope" />
        <input type="hidden" name="messages" value="1" />
        <label for='q'>
          <a accesskey="4" href="/projects/exiv2/search">Search</a>:
        </label>
        <input type="text" name="q" id="q" size="20" class="small" accesskey="f" />
</form>        <div id="project-jump" class="drdn"><span class="drdn-trigger">Exiv2</span><div class="drdn-content"><div class="quick-search"><input type="text" name="q" id="projects-quick-search" value="" class="autocomplete" data-automcomplete-url="/projects/autocomplete.js?jump=boards" autocomplete="off" /></div><div class="drdn-items projects selection"></div><div class="drdn-items all-projects selection"><a href="/projects?jump=boards">All Projects</a></div></div></div>
    </div>

    <h1><span class="current-project">Exiv2</span></h1>

    <div id="main-menu" class="tabs">
        <ul><li><a class="overview" href="/projects/exiv2">Overview</a></li><li><a class="activity" href="/projects/exiv2/activity">Activity</a></li><li><a class="roadmap" href="/projects/exiv2/roadmap">Roadmap</a></li><li><a class="issues" href="/projects/exiv2/issues">Issues</a></li><li><a class="news" href="/projects/exiv2/news">News</a></li><li><a class="wiki" href="/projects/exiv2/wiki">Wiki</a></li><li><a class="boards selected" href="/projects/exiv2/boards">Forums</a></li><li><a class="repository" href="/projects/exiv2/repository">Repository</a></li></ul>
        <div class="tabs-buttons" style="display:none;">
            <button class="tab-left" onclick="moveTabLeft(this); return false;"></button>
            <button class="tab-right" onclick="moveTabRight(this); return false;"></button>
        </div>
    </div>
</div>

<div id="main" class="nosidebar">
    <div id="sidebar">
        
        
    </div>

    <div id="content">
        
        <p class="breadcrumb"><a href="/projects/exiv2/boards">Forums</a> » <a href="/projects/exiv2/boards/3">Forum</a> » </p>

<div class="contextual">
    
    
    
    
</div>

<h2>Writing Extended XMP</h2>

<div class="message">
<p><span class="author">Added by <a class="user active" href="/users/7095">Darren Hart</a> <a title="17 Apr 2018 05:43" href="/projects/exiv2/activity?from=2018-04-17">over 3 years</a> ago</span></p>
<div class="wiki">
<p>I am trying to create a stereoscopic photosphere from two 3D renderings according to the Google developer documentation here:<br /><a class="external" href="https://developers.google.com/vr/reference/cardboard-camera-vr-photo-format">https://developers.google.com/vr/reference/cardboard-camera-vr-photo-format</a></p>


	<p>I have exiv2 writing all the "standard section" values successfully, but am struggling with the "extended section".</p>


	<p>I have an external command file which I generate using base64 on the right eye image:</p>


<pre>
reg GImage http://ns.google.com/photos/1.0/image
set Xmp.GImage.Data XmpText "/9j................../9k=" 
</pre>

	<p>This fails with what I suppose is the expected:<br /><pre>
Exiv2 exception in modify action for file deck.vr.jpg:
Size of XMP JPEG segment is larger than 65535 bytes
</pre></p>


	<p>Due to the 65k limitation on the standard XMP section. I found the forum thread where support was added to read, delete, and insert for the HasExtendedXMP note, and the data spread across multiple sections. What I haven't found is a way to explicitly set the Xmp.GImage.Data "in the extended section", and have it properly create the HasExtendedXMP note and properly create the necessary 65k sections.</p>


	<p>Is this possible today?</p>
</div>

</div>
<br />

<div id="replies">
<h3 class="comments icon icon-comments">Replies (1)</h3>
  <div class="message reply" id="message-3125">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/3124?r=3125#message-3125">RE: Writing Extended XMP</a>
    -
    Added by <a class="user active" href="/users/119">Robin Mills</a> <a title="17 Apr 2018 08:23" href="/projects/exiv2/activity?from=2018-04-17">over 3 years</a> ago
  </h4>
  <div class="wiki"><p>Our support for Extended XMP is limited at the moment.   I will not accept bug reports about Extended XMP.</p>


	<p>Updating the code to support Adobe XMPsdk as an external library is "Work-in-progress".  At the moment, the script xmpsdk/buildXMPsdk.sh can build the 2013/2014 and 2016 editions from Adobe and ./configure has options to link appropriately:<pre>529 rmills@rmillsmbp:~/gnu/github/exiv2/exiv2 $ ./configure --help | grep xmpsdk
  --with-adobe[=OPT]  use --with-adobe for Adobe XMPsdk. OPT: 2016|2014|2013 default/--without-adobe is xmpsdk/src
530 rmills@rmillsmbp:~/gnu/github/exiv2/exiv2 $ </pre>I think options <code>-pX</code> and <code>-dX</code> respect extended XMP, however I don't recall saying that Extended XMP can be edited.  You could try the option <code>-iX-</code> (or <code>-iXX-</code>) to read from std-input.  Something like:<pre>$ cat blob.xmp | exiv -iX- foo.jpg</pre>Please understand that this is "Work-in-progress" and therefore it may, or may not, work for you. I haven't worked on this since September 2017 and hope this will make it into Exiv2 v0.27 for release later in 2018.  This will be discussed at the team meeting in my home in England in May.  <a class="external" href="https://github.com/Exiv2/exiv2/issues/225">https://github.com/Exiv2/exiv2/issues/225</a></p>


	<p>I don't believe there's any possibility that a command such as  <code>$ exiv2 set Xmp.GImage.Data XmpText "/9j................../9k= foo.jpg</code> can work without further effort to integrate newer versions of Adobe XMPsdk into Exiv2.</p>


	<p>I am pleased that you have raised this subject at this time.  If the team agrees to update Adobe XMPsdk for v0.27, this matter will receive more attention in the months ahead.  Here are my notes for the meeting next month:  <a class="external" href="http://dev.exiv2.org/news/3">http://dev.exiv2.org/news/3</a>  As you can see, there are many requests and only 3 active contributors.</p></div>
  
  </div>
</div>
<span class="pagination"><ul class="pages"></ul><span><span class="items">(1-1/1)</span> </span></span>



        
        <div style="clear:both;"></div>
    </div>
</div>
</div>

<div id="ajax-indicator" style="display:none;"><span>Loading...</span></div>
<div id="ajax-modal" style="display:none;"></div>

<div id="footer">
  <div class="bgl"><div class="bgr">
    Powered by <a href="https://www.redmine.org/">Redmine</a> &copy; 2006-2018 Jean-Philippe Lang
  </div></div>
</div>
</div>
</div>

</body>
</html>
