<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<title>Canon EF 24-105mm f/4L IS not recognized - Exiv2</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="description" content="Redmine" />
<meta name="keywords" content="issue,bug,tracker" />
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="LNNlOT3xvUGudwNJkMQ6+QFu9Dvp0LHWVj4uG31n+8/Ons7WT4txQfsTHEUvEzbKPvygQhgzEGyrHr6TPl4coA==" />
<link rel='shortcut icon' href='/favicon.ico?1550767427' />
<link rel="stylesheet" media="all" href="/stylesheets/jquery/jquery-ui-1.11.0.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/application.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/responsive.css?1550767427" />

<script src="/javascripts/jquery-1.11.1-ui-1.11.0-ujs-4.3.1.js?1550767427"></script>
<script src="/javascripts/application.js?1550767427"></script>
<script src="/javascripts/responsive.js?1550767427"></script>
<script>
//<![CDATA[
$(window).load(function(){ warnLeavingUnsaved('The current page contains unsaved text that will be lost if you leave this page.'); });
//]]>
</script>


<!-- page specific tags -->
</head>
<body class="project-exiv2 has-main-menu controller-messages action-show avatars-off">

<div id="wrapper">

<div class="flyout-menu js-flyout-menu">


        <div class="flyout-menu__search">
            <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
            <input type="hidden" name="messages" value="1" />
            <label class="search-magnifier search-magnifier--flyout" for="flyout-search">&#9906;</label>
            <input type="text" name="q" id="flyout-search" class="small js-search-input" placeholder="Search" />
</form>        </div>


        <h3>Project</h3>
        <span class="js-project-menu"></span>

    <h3>General</h3>
    <span class="js-general-menu"></span>

    <span class="js-sidebar flyout-menu__sidebar"></span>

    <h3>Profile</h3>
    <span class="js-profile-menu"></span>

</div>

<div id="wrapper2">
<div id="wrapper3">
<div id="top-menu">
    <div id="account">
        <ul><li><a class="login" href="/login">Sign in</a></li></ul>    </div>
    
    <ul><li><a class="home" href="/">Home</a></li><li><a class="projects" href="/projects">Projects</a></li><li><a class="help" href="https://www.redmine.org/guide">Help</a></li></ul></div>

<div id="header">

    <a href="#" class="mobile-toggle-button js-flyout-menu-toggle-button"></a>

    <div id="quick-search">
        <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
        <input type="hidden" name="scope" />
        <input type="hidden" name="messages" value="1" />
        <label for='q'>
          <a accesskey="4" href="/projects/exiv2/search">Search</a>:
        </label>
        <input type="text" name="q" id="q" size="20" class="small" accesskey="f" />
</form>        <div id="project-jump" class="drdn"><span class="drdn-trigger">Exiv2</span><div class="drdn-content"><div class="quick-search"><input type="text" name="q" id="projects-quick-search" value="" class="autocomplete" data-automcomplete-url="/projects/autocomplete.js?jump=boards" autocomplete="off" /></div><div class="drdn-items projects selection"></div><div class="drdn-items all-projects selection"><a href="/projects?jump=boards">All Projects</a></div></div></div>
    </div>

    <h1><span class="current-project">Exiv2</span></h1>

    <div id="main-menu" class="tabs">
        <ul><li><a class="overview" href="/projects/exiv2">Overview</a></li><li><a class="activity" href="/projects/exiv2/activity">Activity</a></li><li><a class="roadmap" href="/projects/exiv2/roadmap">Roadmap</a></li><li><a class="issues" href="/projects/exiv2/issues">Issues</a></li><li><a class="news" href="/projects/exiv2/news">News</a></li><li><a class="wiki" href="/projects/exiv2/wiki">Wiki</a></li><li><a class="boards selected" href="/projects/exiv2/boards">Forums</a></li><li><a class="repository" href="/projects/exiv2/repository">Repository</a></li></ul>
        <div class="tabs-buttons" style="display:none;">
            <button class="tab-left" onclick="moveTabLeft(this); return false;"></button>
            <button class="tab-right" onclick="moveTabRight(this); return false;"></button>
        </div>
    </div>
</div>

<div id="main" class="nosidebar">
    <div id="sidebar">
        
        
    </div>

    <div id="content">
        
        <p class="breadcrumb"><a href="/projects/exiv2/boards">Forums</a> » <a href="/projects/exiv2/boards/3">Forum</a> » </p>

<div class="contextual">
    
    
    
    
</div>

<h2>Canon EF 24-105mm f/4L IS not recognized</h2>

<div class="message">
<p><span class="author">Added by <a class="user active" href="/users/3903">Bert Blockx</a> <a title="02 Aug 2013 03:36" href="/projects/exiv2/activity?from=2013-08-02">over 8 years</a> ago</span></p>
<div class="wiki">
<p>In Darktable the lens is not recognized.</p>


	<p>Exiv2 v0.23 001700 (64 bit build):</p>


	<p>Exif.CanonCs.LensType                        Short       1  (0)<br />Exif.CanonCs.Lens                            Short       3  24.0 - 105.0 mm<br />Exif.CanonCf.LensAFStopButton                Short       1  2048</p>


	<p>Exiftool v9.04:</p>


	<p>Lens Type                       : Canon EF 24-105mm f/4L IS<br />USM Lens Electronic MF          : Turns on after one-shot AF<br />Lens AF Stop Button             : AF stop<br />Lens                            : 24.0 - 105.0 mm<br />Lens ID                         : Canon EF 24-105mm f/4L IS<br />Lens                            : 24.0 - 105.0 mm (35 mm equivalent: 24.0 - 105.1 mm)</p>


	<p>Camera used is Canon 1Ds Mark II and the file format is RAW (CR2).</p>


	<p>Best regards,<br />  Bert</p>
</div>

</div>
<br />

<div id="replies">
<h3 class="comments icon icon-comments">Replies (5)</h3>
  <div class="message reply" id="message-1580">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/1579?r=1580#message-1580">RE: Canon EF 24-105mm f/4L IS not recognized</a>
    -
    Added by <a class="user active" href="/users/119">Robin Mills</a> <a title="02 Aug 2013 05:25" href="/projects/exiv2/activity?from=2013-08-02">over 8 years</a> ago
  </h4>
  <div class="wiki"><p>Bert</p>


	<p>It's very possible that we have this on the trunk - and will be available in our 0.24 release which will be published shortly (possibly this weekend).  Looking in the code:<pre>
637 rmills@rmillsmpb:~/gnu/exiv2/trunk/src $ grep "Canon\ EF\ 24" *.cpp | grep 105
canonmn.cpp:        { 237, "Canon EF 24-105mm f/4L IS"                                  },
canonmn.cpp:        { 493, "Canon EF 24-105mm f/4L IS USM"                              },
638 rmills@rmillsmpb:~/gnu/exiv2/trunk/src $ 
</pre>It looks as though we have this lens.  Can you attach an image to this topic and I'll test it.</p>


	<p>Robin</p></div>
  
  </div>
  <div class="message reply" id="message-1581">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/1579?r=1581#message-1581">RE: Canon EF 24-105mm f/4L IS not recognized</a>
    -
    Added by <a class="user active" href="/users/3903">Bert Blockx</a> <a title="02 Aug 2013 08:28" href="/projects/exiv2/activity?from=2013-08-02">over 8 years</a> ago
  </h4>
  <div class="wiki"><p>Robin,</p>


	<p>As the raw file is rather big, I have placed it in Ubuntu One.</p>


	<p><a class="external" href="http://ubuntuone.com/5OKI8i81YpdbCNujc39Keo">http://ubuntuone.com/5OKI8i81YpdbCNujc39Keo</a></p>


	<p>Bert</p></div>
  
  </div>
  <div class="message reply" id="message-1584">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/1579?r=1584#message-1584">RE: Canon EF 24-105mm f/4L IS not recognized</a>
    -
    Added by <a class="user active" href="/users/119">Robin Mills</a> <a title="02 Aug 2013 10:24" href="/projects/exiv2/activity?from=2013-08-02">over 8 years</a> ago
  </h4>
  <div class="wiki"><p>Thanks Bert for not dumping a big fat file on our server.  I attach the file  FromRobin1579.txt output by the command below.  I've also filtered the output for CanonCs.<br /><pre>
696 rmills@rmillsmpb:~/Downloads $ exiv2 -pa *.CR2 &gt; ~/temp/FromRobin1579.txt
697 rmills@rmillsmpb:~/Downloads $ exiv2 -V
exiv2 0.24 001800 (64 bit build)
Copyright (C) 2004-2013 Andreas Huggel.

695 rmills@rmillsmpb:~/Downloads $ exiv2 -pa *.CR2 | grep CanonCs
Exif.CanonCs.Macro                           Short       1  Off
Exif.CanonCs.Selftimer                       Short       1  Off
Exif.CanonCs.Quality                         Short       1  RAW
Exif.CanonCs.FlashMode                       Short       1  Off
Exif.CanonCs.DriveMode                       Short       1  Continuous
Exif.CanonCs.FocusMode                       Short       1  One shot AF
Exif.CanonCs.ImageSize                       Short       1  Large
Exif.CanonCs.EasyMode                        Short       1  Manual
Exif.CanonCs.DigitalZoom                     Short       1  None
Exif.CanonCs.Contrast                        Short       1  Normal
Exif.CanonCs.Saturation                      Short       1  (32767)
Exif.CanonCs.Sharpness                       Short       1  (32767)
Exif.CanonCs.ISOSpeed                        Short       1  (32767)
Exif.CanonCs.MeteringMode                    Short       1  Evaluative
Exif.CanonCs.FocusType                       Short       1  Not known
Exif.CanonCs.AFPoint                         Short       1  (0)
Exif.CanonCs.ExposureProgram                 Short       1  Aperture priority (Av)
Exif.CanonCs.LensType                        Short       1  (0)
Exif.CanonCs.Lens                            Short       3  24.0 - 105.0 mm
Exif.CanonCs.MaxAperture                     Short       1  F4
Exif.CanonCs.MinAperture                     Short       1  F23
Exif.CanonCs.FlashActivity                   Short       1  Did not fire
Exif.CanonCs.FlashDetails                    Short       1  
Exif.CanonCs.FocusContinuous                 Short       1  (65535)
Exif.CanonCs.AESetting                       Short       1  (65535)
Exif.CanonCs.ImageStabilization              Short       1  (65535)
Exif.CanonCs.DisplayAperture                 Short       1  0
Exif.CanonCs.ZoomSourceWidth                 Short       1  0
Exif.CanonCs.ZoomTargetWidth                 Short       1  0
Exif.CanonCs.SpotMeteringMode                Short       1  (65535)
Exif.CanonCs.PhotoEffect                     Short       1  (65535)
Exif.CanonCs.ManualFlashOutput               Short       1  n/a
Exif.CanonCs.ColorTone                       Short       1  32767
696 rmills@rmillsmpb:~/Downloads $ </pre>We're doing better than 0.23, and perhaps not as good as exiftool.  I'm happy to hear your thoughts.  My colleague Niels is the Exiv2 team member who usually deals with maker note matters and I'll ask him to comment.</p>


	<p>Robin</p></div>
  <div class="attachments">
<div class="contextual">
  
</div>
<table>
<tr>
  <td>
    <a class="icon icon-attachment" href="/attachments/516">FromRobin1579.txt</a>    <span class="size">(13.1 KB)</span>
    <a class="icon-only icon-download" title="Download" href="/attachments/download/516/FromRobin1579.txt">FromRobin1579.txt</a>  </td>
  <td></td>
  <td>
  </td>
  <td>
  </td>
</tr>
</table>
</div>

  </div>
  <div class="message reply" id="message-1585">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/1579?r=1585#message-1585">RE: Canon EF 24-105mm f/4L IS not recognized</a>
    -
    Added by <a class="user active" href="/users/134">Niels Kristian Bech Jensen</a> <a title="02 Aug 2013 11:07" href="/projects/exiv2/activity?from=2013-08-02">over 8 years</a> ago
  </h4>
  <div class="wiki"><p>The problem seems to be that Canon encodes the LensType tag in different ways on different camera models. The various versions of EOS 1D mark 'something' are known to give problems. It is a non-trivial change to support them all.</p>


	<p>Best regards,<br />Niels Kristian Bech Jensen</p></div>
  
  </div>
  <div class="message reply" id="message-1586">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/1579?r=1586#message-1586">RE: Canon EF 24-105mm f/4L IS not recognized</a>
    -
    Added by <a class="user active" href="/users/3903">Bert Blockx</a> <a title="02 Aug 2013 12:12" href="/projects/exiv2/activity?from=2013-08-02">over 8 years</a> ago
  </h4>
  <div class="wiki"><p>You're correct about the LensType tag.<br />I've checked with my other lenses and it always returns LensType 0.<br />It does mean that darktable uses (0) as lensname for every lens I use with my Canon 1Ds II.</p>


	<p>Using exiftool gives me the correct lenstype.<br />I think they look at the other exif tags (Lens, min &#38; max focal length) to determine which lens is being used.</p></div>
  
  </div>
</div>
<span class="pagination"><ul class="pages"></ul><span><span class="items">(1-5/5)</span> </span></span>



        
        <div style="clear:both;"></div>
    </div>
</div>
</div>

<div id="ajax-indicator" style="display:none;"><span>Loading...</span></div>
<div id="ajax-modal" style="display:none;"></div>

<div id="footer">
  <div class="bgl"><div class="bgr">
    Powered by <a href="https://www.redmine.org/">Redmine</a> &copy; 2006-2018 Jean-Philippe Lang
  </div></div>
</div>
</div>
</div>

</body>
</html>
