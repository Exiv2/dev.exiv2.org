<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<title>[ANN] organize tool - Exiv2</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="description" content="Redmine" />
<meta name="keywords" content="issue,bug,tracker" />
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="2C8HH6aff0yeNNA4jXW3mwmpZJR7TXbFD/CqQt+0Ibo6Yqzw1OWzTMtQzzQyoruoNjsw7Yqu13/y0DrKnI3G1Q==" />
<link rel='shortcut icon' href='/favicon.ico?1550767427' />
<link rel="stylesheet" media="all" href="/stylesheets/jquery/jquery-ui-1.11.0.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/application.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/responsive.css?1550767427" />

<script src="/javascripts/jquery-1.11.1-ui-1.11.0-ujs-4.3.1.js?1550767427"></script>
<script src="/javascripts/application.js?1550767427"></script>
<script src="/javascripts/responsive.js?1550767427"></script>
<script>
//<![CDATA[
$(window).load(function(){ warnLeavingUnsaved('The current page contains unsaved text that will be lost if you leave this page.'); });
//]]>
</script>


<!-- page specific tags -->
</head>
<body class="project-exiv2 has-main-menu controller-messages action-show avatars-off">

<div id="wrapper">

<div class="flyout-menu js-flyout-menu">


        <div class="flyout-menu__search">
            <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
            <input type="hidden" name="messages" value="1" />
            <label class="search-magnifier search-magnifier--flyout" for="flyout-search">&#9906;</label>
            <input type="text" name="q" id="flyout-search" class="small js-search-input" placeholder="Search" />
</form>        </div>


        <h3>Project</h3>
        <span class="js-project-menu"></span>

    <h3>General</h3>
    <span class="js-general-menu"></span>

    <span class="js-sidebar flyout-menu__sidebar"></span>

    <h3>Profile</h3>
    <span class="js-profile-menu"></span>

</div>

<div id="wrapper2">
<div id="wrapper3">
<div id="top-menu">
    <div id="account">
        <ul><li><a class="login" href="/login">Sign in</a></li></ul>    </div>
    
    <ul><li><a class="home" href="/">Home</a></li><li><a class="projects" href="/projects">Projects</a></li><li><a class="help" href="https://www.redmine.org/guide">Help</a></li></ul></div>

<div id="header">

    <a href="#" class="mobile-toggle-button js-flyout-menu-toggle-button"></a>

    <div id="quick-search">
        <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
        <input type="hidden" name="scope" />
        <input type="hidden" name="messages" value="1" />
        <label for='q'>
          <a accesskey="4" href="/projects/exiv2/search">Search</a>:
        </label>
        <input type="text" name="q" id="q" size="20" class="small" accesskey="f" />
</form>        <div id="project-jump" class="drdn"><span class="drdn-trigger">Exiv2</span><div class="drdn-content"><div class="quick-search"><input type="text" name="q" id="projects-quick-search" value="" class="autocomplete" data-automcomplete-url="/projects/autocomplete.js?jump=boards" autocomplete="off" /></div><div class="drdn-items projects selection"></div><div class="drdn-items all-projects selection"><a href="/projects?jump=boards">All Projects</a></div></div></div>
    </div>

    <h1><span class="current-project">Exiv2</span></h1>

    <div id="main-menu" class="tabs">
        <ul><li><a class="overview" href="/projects/exiv2">Overview</a></li><li><a class="activity" href="/projects/exiv2/activity">Activity</a></li><li><a class="roadmap" href="/projects/exiv2/roadmap">Roadmap</a></li><li><a class="issues" href="/projects/exiv2/issues">Issues</a></li><li><a class="news" href="/projects/exiv2/news">News</a></li><li><a class="wiki" href="/projects/exiv2/wiki">Wiki</a></li><li><a class="boards selected" href="/projects/exiv2/boards">Forums</a></li><li><a class="repository" href="/projects/exiv2/repository">Repository</a></li></ul>
        <div class="tabs-buttons" style="display:none;">
            <button class="tab-left" onclick="moveTabLeft(this); return false;"></button>
            <button class="tab-right" onclick="moveTabRight(this); return false;"></button>
        </div>
    </div>
</div>

<div id="main" class="nosidebar">
    <div id="sidebar">
        
        
    </div>

    <div id="content">
        
        <p class="breadcrumb"><a href="/projects/exiv2/boards">Forums</a> » <a href="/projects/exiv2/boards/3">Forum</a> » </p>

<div class="contextual">
    
    
    
    
</div>

<h2>[ANN] organize tool</h2>

<div class="message">
<p><span class="author">Added by <a class="user active" href="/users/3">Brad Schick</a> <a title="31 Jan 2009 23:19" href="/projects/exiv2/activity?from=2009-01-31">almost 13 years</a> ago</span></p>
<div class="wiki">
<p>'organize' is a command-line tool that creates organized directories of photos and other media files. Photos can be easily organized by metadata into a directory structure of your choosing. It is built on Exiv2 and currently supports a fairly wide selection of exif, iptc, and file metadata (xmp could be added if there is demand).</p>


	<p>I created this tool after looking around for an existing solution and finding no great options. My own personal photo library had become a jumble of 15,000+ files in a hodge-podge directory structure. With this new tool I ran the following:</p>
	<pre><code>organize /var/photos /var/photos2 @year-@month/@day</code></pre>


	<p>And a few minutes later had an organized library with photos and videos grouped first by year-month and then by day of the month (with duplicates filtered out). On windows it would be very similar:</p>
	<pre><code>organize c:\users\public\pictures c:\users\public\pictures2 @year-@month\@day</code></pre>


	<p>There are currently no prepackaged binaries, but I will try to get some uploaded soon. The tool is fairly easy to build on Windows and Unix like systems. It builds separately from the rest of Exiv2 because it has an extra dependency on the C++ boost library. To build the tool, first make sure you have boost installed, then build exiv2, and then build the organize tool. On Windows there is a project file in exiv2\msvc\organize, and for Unix systems there is a makefile in exiv2\contrib\organize (in both cases you may need to tweak the include and lib dirs to point to boost on your system).</p>


	<p>Below is the tool's help output to give you a better idea of what is does. Let me know if you find is useful or have suggestions.</p>


<pre>
Usage: organize [options] source-dir dest-dir pattern

  Creates groups of files in new directories defined by a metadata 'pattern'.
  Files are copied, moved, or linked from 'source-dir' to 'dest-dir'.
  The destination directory should not be within the source directory.

Options:
  -m [ --move ]            move files rather than copy
  -s [ --symlink ]         symlink files rather than copy (posix only)
  -o [ --order ] arg       order and types of metadata to read
                           e=exif, i=iptc, f=file (default: eif)
  -u [ --unsorted ] arg    special directory to store unsorted files (default:
                           unsorted)
  -d [ --dups ] arg        special directory to store files with duplicate
                           names (default: duplicates)
  -f [ --force ]           overwrite duplicate files instead of using special
                           directory
  -r [ --rename ]          rename duplicate files instead of using special
                           directory
  -i [ --ignore ]          ignore both unsorted and duplicate files instead of
                           using special directories
  --ignore-unsorted        ignore unsorted files instead of using special
                           directory
  --ignore-dups            ignore duplicate files instead of using special
                           directory
  --verify                 verify copied or moved files and exit if incorrect
  -x [ --exclude ] arg     exclude directories and files that contain arg (case
                           sensitive on all platforms)
  -l [ --limit-depth ] arg limit recursion to specified depth (0 disables
                           recursion)
  -v [ --verbose ]         prints operations as they happen
  -n [ --dry-run ]         do not make actual changes (implies verbose)
  -h [ --help ]            show this help message then exit
  -V [ --version ]         show program version then exit

Pattern values:
  @date   date captured (2009-01-19)
  @year   year captured (2009)
  @month  month captured (01)
  @day    day captured (19)
  @time   time captured (14-35-27)
  @hour   hour captured (14)
  @min    minute captured (35)
  @sec    second captured (27)
  @dim    pixel dimension (2272-1704)
  @x      pixel width (2272)
  @y      pixel height (1704)
  @make   device make (Canon)
  @model  device model (Canon PowerShot S40)
  @speed  shutter speed (1-60)
  @aper   aperture (F3.2)
  @iso    iso speed (400)
  @focal  focal length (8.6 mm)
  @dist   subject distance (1.03 m)
  @meter  meter mode (multi-segment)
  @macro  macro mode (Off)
  @orient orientation (top_left)
  @lens   lens name (Tamron 90mm f-2.8)
  @key    first keyword (Family)

Examples:
  `organize -m mess clean @year-@month'
     Moves files from 'mess' into directories of 'clean' according to
     year-month the file was captured (clean/2006-11/...)

  `organize -o ie source find width-@x/height-@y'
     Copies files into directories according first to pixel width then pixel
     height. Check iptc then exif metadata (find/width-2272/height-1704/...)

  `organize -lf source find @aper/@hour'
     Force create symlinks in directories according first to aperture then
     hour captured (find/F3.2/15/...)
</pre>

	<p>Edit: Updated to latest --help output</p>
</div>

</div>
<br />

<div id="replies">
<h3 class="comments icon icon-comments">Replies (9)</h3>
  <div class="message reply" id="message-57">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/44?r=57#message-57">RE: [ANN] organize tool</a>
    -
    Added by Anonymous <a title="09 Feb 2009 23:51" href="/projects/exiv2/activity?from=2009-02-09">almost 13 years</a> ago
  </h4>
  <div class="wiki"><p>This is a very useful tool which meets a real need.  Congratulations to Brad for this achievement.</p>


	<p>Brad and I have collaborated to improve the exiv2/msvc build machinery.  A new solution exiv2+organize.sln has been added to enable organize.exe to be build at the same time as building the rest of the exiv2 family of DLLs, static and dynamic libraries.  The existing solution exiv2.sln is unchanged.</p>


	<p>The details of how to build exiv2 (with or without organize) are explained in exiv2/msvc/README-MSVC.txt</p>


	<p>Robin</p></div>
  
  </div>
  <div class="message reply" id="message-61">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/44?r=61#message-61">RE: [ANN] organize tool</a>
    -
    Added by Anonymous <a title="11 Feb 2009 07:21" href="/projects/exiv2/activity?from=2009-02-11">almost 13 years</a> ago
  </h4>
  <div class="wiki"><p>It's very excellent tool! I love it.<br />With this tool, I can rearrange my photos by many perspective.<br />Just one point, I hope adding @lensname pattern value.<br />Anyway, thank you for your good job!</p></div>
  
  </div>
  <div class="message reply" id="message-113">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/44?r=113#message-113">RE: [ANN] organize tool</a>
    -
    Added by <a class="user active" href="/users/3">Brad Schick</a> <a title="08 Mar 2009 00:35" href="/projects/exiv2/activity?from=2009-03-08">over 12 years</a> ago
  </h4>
  <div class="wiki"><p>Thanks, glad you like the tool. I just committed code that adds the following additional metadata values:</p>


<pre>
@macro  macro mode (Off)
@orient orientation (top_left)
@lens   lens name (Tamron 90mm f-2.8)
</pre>

	<p>This was an easy change thanks to new code Andreas added to the exiv2 library. If anyone needs them, the following would be easy for me to add as well: </p>
	<pre><code>flashBias, exposureMode, sceneMode, imageQuality, and whiteBalance</code></pre></div>
  
  </div>
  <div class="message reply" id="message-182">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/44?r=182#message-182">RE: [ANN] organize tool</a>
    -
    Added by <a class="user active" href="/users/3">Brad Schick</a> <a title="30 Jun 2009 22:19" href="/projects/exiv2/activity?from=2009-06-30">over 12 years</a> ago
  </h4>
  <div class="wiki"><p>A few people have written emails asking for a Windows binary. I've attached that to this post. Just unzip and run, no installation required.</p></div>
  <div class="attachments">
<div class="contextual">
  
</div>
<table>
<tr>
  <td>
    <a class="icon icon-attachment" href="/attachments/99">organize.zip</a>    <span class="size">(734 KB)</span>
    <a class="icon-only icon-download" title="Download" href="/attachments/download/99/organize.zip">organize.zip</a>  </td>
  <td>32bit Windows Binary</td>
  <td>
  </td>
  <td>
  </td>
</tr>
</table>
</div>

  </div>
  <div class="message reply" id="message-183">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/44?r=183#message-183">RE: [ANN] organize tool</a>
    -
    Added by <a class="user active" href="/users/53">Andreas Huggel</a> <a title="30 Jun 2009 23:36" href="/projects/exiv2/activity?from=2009-06-30">over 12 years</a> ago
  </h4>
  <div class="wiki"><p>Thanks. I do plan to include the organize binary in the Windows package, once I get it to cross-compile on Linux with the build script that I use for the Windows package...</p>


	<p>-ahu.</p></div>
  
  </div>
  <div class="message reply" id="message-334">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/44?r=334#message-334">RE: [ANN] organize tool</a>
    -
    Added by <a class="user active" href="/users/323">Arjh Smith</a> <a title="31 Dec 2009 01:59" href="/projects/exiv2/activity?from=2009-12-31">almost 12 years</a> ago
  </h4>
  <div class="wiki"><p>Hi Brad,</p>


	<p>Would you be able to add the "Comment" field from EXIF that is customized from the camera directly ?</p>


	<p>When you have multiple people using the same camera models. This is a great field to plug in some specific info about the shooter... either their initials or the Short Event Name.. things can really be automated by using that field.</p>


	<p>Along with that I have a need to use the Shutter Count and Serial Number fields to Rename the files.</p>


	<p>Do you think it would be possible to rename based on these fields ? This way I could have Folders based on the Camera Model_Serial Number and everything from them would be stored there permanently.</p>


	<p>Arjh</p></div>
  
  </div>
  <div class="message reply" id="message-1598">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/44?r=1598#message-1598">RE: [ANN] organize tool</a>
    -
    Added by <a class="user active" href="/users/3935">Anchal Nigam</a> <a title="17 Aug 2013 18:25" href="/projects/exiv2/activity?from=2013-08-17">over 8 years</a> ago
  </h4>
  <div class="wiki"><p>This sounds awesome. Two questions:</p>


	<ol>
	<li>Where do I download it from?</li>
		<li>How are you checking for duplicates?</li>
	</ol></div>
  
  </div>
  <div class="message reply" id="message-1599">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/44?r=1599#message-1599">RE: [ANN] organize tool</a>
    -
    Added by <a class="user active" href="/users/119">Robin Mills</a> <a title="18 Aug 2013 02:43" href="/projects/exiv2/activity?from=2013-08-18">over 8 years</a> ago
  </h4>
  <div class="wiki"><p>Anchal</p>


	<p>This code is in our tar-ball (and on the trunk) in the directory contrib/organize.  A Makefile is provided.  You can also build with Visual Studio using the solution msvc/exiv2+organize.sln and this is documented in msvc/README-MSVC.txt.  This code is a contribution and not routinely built and tested by the Exiv2 team.</p>


	<p>I've never studied the organize code, so I cannot answer specific questions.  I have quickly looked at variable 'dups' in contrib/organize/organize.cpp.  I think duplicates are files with identical names (eg IMG_1234.JPG) in different directories.  When you have the code built, I'm sure you can run this on a safe copy of your photos and find out.  When you do, please update this thread to share your discoveries with the community.</p>


	<p>Robin</p></div>
  
  </div>
  <div class="message reply" id="message-1600">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/44?r=1600#message-1600">RE: [ANN] organize tool</a>
    -
    Added by <a class="user active" href="/users/3935">Anchal Nigam</a> <a title="18 Aug 2013 20:21" href="/projects/exiv2/activity?from=2013-08-18">over 8 years</a> ago
  </h4>
  <div class="wiki"><p>Okay thanks. I'll look and report my findings.</p></div>
  
  </div>
</div>
<span class="pagination"><ul class="pages"></ul><span><span class="items">(1-9/9)</span> </span></span>



        
        <div style="clear:both;"></div>
    </div>
</div>
</div>

<div id="ajax-indicator" style="display:none;"><span>Loading...</span></div>
<div id="ajax-modal" style="display:none;"></div>

<div id="footer">
  <div class="bgl"><div class="bgr">
    Powered by <a href="https://www.redmine.org/">Redmine</a> &copy; 2006-2018 Jean-Philippe Lang
  </div></div>
</div>
</div>
</div>

</body>
</html>
