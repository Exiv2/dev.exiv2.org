<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<title>New member (old question?) - Exiv2</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="description" content="Redmine" />
<meta name="keywords" content="issue,bug,tracker" />
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="aLWwnJO3ISXRWjUvosyssHpDWYzgPTlb3ezk7ilmY1SK+Btz4c3tJYQ+KiMdG6CDRdEN9RHemOEgzHRmal+EOw==" />
<link rel='shortcut icon' href='/favicon.ico?1550767427' />
<link rel="stylesheet" media="all" href="/stylesheets/jquery/jquery-ui-1.11.0.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/application.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/responsive.css?1550767427" />

<script src="/javascripts/jquery-1.11.1-ui-1.11.0-ujs-4.3.1.js?1550767427"></script>
<script src="/javascripts/application.js?1550767427"></script>
<script src="/javascripts/responsive.js?1550767427"></script>
<script>
//<![CDATA[
$(window).load(function(){ warnLeavingUnsaved('The current page contains unsaved text that will be lost if you leave this page.'); });
//]]>
</script>


<!-- page specific tags -->
</head>
<body class="project-exiv2 has-main-menu controller-messages action-show avatars-off">

<div id="wrapper">

<div class="flyout-menu js-flyout-menu">


        <div class="flyout-menu__search">
            <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
            <input type="hidden" name="messages" value="1" />
            <label class="search-magnifier search-magnifier--flyout" for="flyout-search">&#9906;</label>
            <input type="text" name="q" id="flyout-search" class="small js-search-input" placeholder="Search" />
</form>        </div>


        <h3>Project</h3>
        <span class="js-project-menu"></span>

    <h3>General</h3>
    <span class="js-general-menu"></span>

    <span class="js-sidebar flyout-menu__sidebar"></span>

    <h3>Profile</h3>
    <span class="js-profile-menu"></span>

</div>

<div id="wrapper2">
<div id="wrapper3">
<div id="top-menu">
    <div id="account">
        <ul><li><a class="login" href="/login">Sign in</a></li></ul>    </div>
    
    <ul><li><a class="home" href="/">Home</a></li><li><a class="projects" href="/projects">Projects</a></li><li><a class="help" href="https://www.redmine.org/guide">Help</a></li></ul></div>

<div id="header">

    <a href="#" class="mobile-toggle-button js-flyout-menu-toggle-button"></a>

    <div id="quick-search">
        <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
        <input type="hidden" name="scope" />
        <input type="hidden" name="messages" value="1" />
        <label for='q'>
          <a accesskey="4" href="/projects/exiv2/search">Search</a>:
        </label>
        <input type="text" name="q" id="q" size="20" class="small" accesskey="f" />
</form>        <div id="project-jump" class="drdn"><span class="drdn-trigger">Exiv2</span><div class="drdn-content"><div class="quick-search"><input type="text" name="q" id="projects-quick-search" value="" class="autocomplete" data-automcomplete-url="/projects/autocomplete.js?jump=boards" autocomplete="off" /></div><div class="drdn-items projects selection"></div><div class="drdn-items all-projects selection"><a href="/projects?jump=boards">All Projects</a></div></div></div>
    </div>

    <h1><span class="current-project">Exiv2</span></h1>

    <div id="main-menu" class="tabs">
        <ul><li><a class="overview" href="/projects/exiv2">Overview</a></li><li><a class="activity" href="/projects/exiv2/activity">Activity</a></li><li><a class="roadmap" href="/projects/exiv2/roadmap">Roadmap</a></li><li><a class="issues" href="/projects/exiv2/issues">Issues</a></li><li><a class="news" href="/projects/exiv2/news">News</a></li><li><a class="wiki" href="/projects/exiv2/wiki">Wiki</a></li><li><a class="boards selected" href="/projects/exiv2/boards">Forums</a></li><li><a class="repository" href="/projects/exiv2/repository">Repository</a></li></ul>
        <div class="tabs-buttons" style="display:none;">
            <button class="tab-left" onclick="moveTabLeft(this); return false;"></button>
            <button class="tab-right" onclick="moveTabRight(this); return false;"></button>
        </div>
    </div>
</div>

<div id="main" class="nosidebar">
    <div id="sidebar">
        
        
    </div>

    <div id="content">
        
        <p class="breadcrumb"><a href="/projects/exiv2/boards">Forums</a> » <a href="/projects/exiv2/boards/3">Forum</a> » </p>

<div class="contextual">
    
    
    
    
</div>

<h2>New member (old question?)</h2>

<div class="message">
<p><span class="author">Added by <a class="user active" href="/users/2275">Thomas Sharpless</a> <a title="19 Apr 2011 06:43" href="/projects/exiv2/activity?from=2011-04-19">over 10 years</a> ago</span></p>
<div class="wiki">
<p>Hi all,</p>


	<p>Have joined because I want to use exiv2 in my panoramic perspective tool, Panini, a c++ app based on Qt (open source).  I build it (and have built exiv2 and expat) with MinGW under Windows.  No problem with that.</p>


	<p>But I do have some questions about how to make exiv2 find some of the information I need -- basically everything that would help identify the lens.  Exiftool finds a lot of relevant stuff (especially in Canon files, my main interest at present) that I can't seem to get at with exiv2.  In particular it decodes lens ID to a very useful string.</p>


	<p>Since I'm brand new to exiv2 I would appreciate any pointers to docs or advice on how to get more and better info.  If it turns out to be needed, I expect I could contribute some improvements to exiv2, but of course not right away.</p>


	<p>Cheers,  Tom</p>
</div>

</div>
<br />

<div id="replies">
<h3 class="comments icon icon-comments">Replies (7)</h3>
  <div class="message reply" id="message-905">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/904?r=905#message-905">RE: New member (old question?)</a>
    -
    Added by <a class="user active" href="/users/2275">Thomas Sharpless</a> <a title="19 Apr 2011 09:43" href="/projects/exiv2/activity?from=2011-04-19">over 10 years</a> ago
  </h4>
  <div class="wiki"><p>PS  The info I really want is focal plane resolution (3 tags), which is part of the Exif IFD and does exist in my Canon files.  However exiv2 does not find it; I've tried both (name) and (tag, group) ExifKey c'tors.</p>


	<p>Also, on my system both key c'tors crash when given a nonexistent name string, rather than throwing an exception.  Is this a build option issue? (I'm using the dll).</p>


	<p>-- Tom</p></div>
  
  </div>
  <div class="message reply" id="message-906">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/904?r=906#message-906">RE: New member (old question?)</a>
    -
    Added by <a class="user active" href="/users/53">Andreas Huggel</a> <a title="19 Apr 2011 17:30" href="/projects/exiv2/activity?from=2011-04-19">over 10 years</a> ago
  </h4>
  <div class="wiki"><blockquote>

	<p>Exiftool finds a lot of relevant stuff (especially in Canon files, my main interest at present) that I can't seem to get at with exiv2. In particular it decodes lens ID to a very useful string.</p>


</blockquote>

	<p>Exiv2 provides the same string and probably derives it in a similar way. Some information on how to get a lens id string is here: <a class="external" href="http://dev.exiv2.org/boards/3/topics/719">http://dev.exiv2.org/boards/3/topics/719</a> <br />If you find your lens is decoded in Exiftool but not in Exiv2, it is most likely because the Exiv2 lookup table is not up-to-date. See e.g., <a class="issue tracker-2 status-5 priority-4 priority-default closed" title="Feature: Support of Sigma 17-50 2.8 OS HSM (Closed)" href="/issues/712">#712</a> for details on how to deal with this situation. (Follow the link to the revision to see how to add a news lens to the table).<br />The difficulty with Canon lenses is that the numeric id alone does not necessarily uniquely identify a lens and in some cases there seems to be no way to do so.</p>


<blockquote>

	<p>The info I really want is focal plane resolution (3 tags), which is part of the Exif IFD and does exist in my Canon files. However exiv2 does not find it; I've tried both (name) and (tag, group) ExifKey c'tors.</p>


</blockquote>

	<p>Use the exiv2 command line tool for a quick way to check what tags Exiv2 really sees and use the option to show unknown tags if necessary. All Exif IFD tags are decoded, unless there is a problem with the data, but then you'd get a warning or error on stderr.</p>


<blockquote>

	<p>Also, on my system both key c'tors crash when given a nonexistent name string, rather than throwing an exception. Is this a build option issue? (I'm using the dll).</p>


</blockquote>

	<p>These should definitely be exceptions, there is no build option to opt for crashes :) Again, try the command line tool (-M'set Exif.Some.Tag 1234') as a reference. If that also crashes, please report a bug.</p>


	<p>-ahu.</p></div>
  
  </div>
  <div class="message reply" id="message-908">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/904?r=908#message-908">RE: New member (old question?)</a>
    -
    Added by <a class="user active" href="/users/2275">Thomas Sharpless</a> <a title="20 Apr 2011 07:31" href="/projects/exiv2/activity?from=2011-04-20">over 10 years</a> ago
  </h4>
  <div class="wiki"><p>Thanks Andreas</p>


	<p>I built exiv2 with msvc9, too, as a check for something fishy with MinGW.  Both builds behave the same in command line tests.<br />Your suggested test for throw failure:<br />  >exiv2 -M'set Exif.Some.Tag 1234' IMG_3126.JPG<br />  -M option 1: Invalid command line<br />  exiv2: Error parsing -M option arguments<br />  Usage: exiv2 [ options ] [ action ] file ...</p>


	<p>Exiv2 still fails to find FocalPlaneXResolution, etc. in the EXIF IFD.  Attached one listing from exiv2 and one from exiftool, which does report those tags.  I gather this is fixable, but it is not yet clear to me how.</p>


	<p>Regards, Tom</p></div>
  <div class="attachments">
<div class="contextual">
  
</div>
<table>
<tr>
  <td>
    <a class="icon icon-attachment" href="/attachments/246">exiv2-msvc-IMG_3126.txt</a>    <span class="size">(18.4 KB)</span>
    <a class="icon-only icon-download" title="Download" href="/attachments/download/246/exiv2-msvc-IMG_3126.txt">exiv2-msvc-IMG_3126.txt</a>  </td>
  <td></td>
  <td>
  </td>
  <td>
  </td>
</tr>
<tr>
  <td>
    <a class="icon icon-attachment" href="/attachments/247">exiftool-IMG_3136.txt</a>    <span class="size">(22.6 KB)</span>
    <a class="icon-only icon-download" title="Download" href="/attachments/download/247/exiftool-IMG_3136.txt">exiftool-IMG_3136.txt</a>  </td>
  <td></td>
  <td>
  </td>
  <td>
  </td>
</tr>
</table>
</div>

  </div>
  <div class="message reply" id="message-909">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/904?r=909#message-909">RE: New member (old question?)</a>
    -
    Added by <a class="user active" href="/users/53">Andreas Huggel</a> <a title="20 Apr 2011 08:44" href="/projects/exiv2/activity?from=2011-04-20">over 10 years</a> ago
  </h4>
  <div class="wiki"><p>Hi Tom,</p>


<blockquote>

	<p>Your suggested test for throw failure:</p>


<blockquote>

	<p>exiv2 -M'set Exif.Some.Tag 1234' IMG_3126.JPG</p>


</blockquote>

	<p>-M option 1: Invalid command line<br />exiv2: Error parsing -M option arguments<br />Usage: exiv2 [ options ] [ action ] file ...</p>


</blockquote>

	<p>So it doesn't crash. But strangely, that's not the error I expected. Below is what I see on my Mac here, why do you get a different error on Windows? Something is not right. Does it make a difference if you use double quotes instead of single quotes?</p>


<pre>
ahuggel@andreas-huggels-macbook-pro&gt; exiv2 -M'set Exif.Some.Tag 1234' 20050625_082910.jpg 
-M option 1: Invalid key `Exif.Some.Tag'
exiv2: Error parsing -M option arguments
Usage: exiv2 [ options ] [ action ] file ...
</pre>

<blockquote>

	<p>Exiv2 still fails to find FocalPlaneXResolution, etc. in the EXIF IFD.  Attached one listing from exiv2 and one from exiftool, which does report those tags.  I gather this is fixable, but it is not yet clear to me how.</p>


</blockquote>

	<p>Near the end of the attached file, I see FocalPlaneXResolution on line 254:</p>


<pre>
Exif.Photo.FocalPlaneXResolution             Rational    1  5715.55
Exif.Photo.FocalPlaneYResolution             Rational    1  5808.4
Exif.Photo.FocalPlaneResolutionUnit          Short       1  inch
</pre>

	<p>Andreas</p></div>
  
  </div>
  <div class="message reply" id="message-910">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/904?r=910#message-910">RE: New member (old question?)</a>
    -
    Added by <a class="user active" href="/users/2275">Thomas Sharpless</a> <a title="20 Apr 2011 11:40" href="/projects/exiv2/activity?from=2011-04-20">over 10 years</a> ago
  </h4>
  <div class="wiki"><p>Hi Andreas</p>


	<p>With double quotes around the -M argument, the test command does return what you expect.</p>


	<p>I just didn't notice those focal plane resolution tags, I guess I assumed all Exif.Photo tags would print together.  And my program did not find them because it was using group name Image.</p>


	<p>Now I will be totally happy if I can get the following info as listed by exiftool:<br />[MakerNotes]    Lens Type                       : Canon EF 20-35mm f/3.5-4.5 USM or Tamron or Tokina Lens<br />[MakerNotes]    Long Focal                      : 17 mm<br />[MakerNotes]    Short Focal                     : 10 mm<br />[MakerNotes]    Focal Units                     : 1/mm<br />[MakerNotes]    Max Aperture                    : 4.2<br />[MakerNotes]    Min Aperture                    : 27<br />In this file the lens is indeed a Tokina 10-17 fisheye, rather than the Canon lens implied by the lens ID code.</p>


	<p>Regards, Tom</p></div>
  
  </div>
  <div class="message reply" id="message-911">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/904?r=911#message-911">RE: New member (old question?)</a>
    -
    Added by <a class="user active" href="/users/53">Andreas Huggel</a> <a title="20 Apr 2011 22:11" href="/projects/exiv2/activity?from=2011-04-20">over 10 years</a> ago
  </h4>
  <div class="wiki"><p>Hi Tom,</p>


	<p>Five of these six tags are from line 53 onwards in the attached file. Exiv2 translates the lens id wrongly in this example, but you may be lucky and the change in <a class="changeset" title="Added Tokina AT-X 107 AF DX Fish-eye 10-17mm f/3.5-4.5 lens (Milan Knizek)" href="/projects/exiv2/repository/exiv2/revisions/2474">r2474</a> that I committed last night was exactly for the lens you're using. If not feel free to submit a similar patch for this lens. Just check out the current trunk and try. As for the "Focal Units", that's a tag which Exiv2 doesn't know by name it seems. If you can figure out which tag it is (group, tag number) you can probably access it too.</p>


	<p>Andreas</p></div>
  
  </div>
  <div class="message reply" id="message-912">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/904?r=912#message-912">RE: New member (old question?)</a>
    -
    Added by <a class="user active" href="/users/133">Robin Mills</a> <a title="20 Apr 2011 22:27" href="/projects/exiv2/activity?from=2011-04-20">over 10 years</a> ago
  </h4>
  <div class="wiki"><p>Guys</p>


	<p>Whenever I'm confused by questions as as "Q:is the there a difference between ' and " in the command line?", I reach for my homemade utility "args" (modeled after a system utility on the Apollo workstation 1983-1991 RIP).</p>


	<p>#include &lt;stdio.h&gt;<br />int main(int argc, char* argv[])
{<br />    int i = 0 ;<br />    while ( i++ < argc ) printf("%-2d: %s\n",i,argv[i-1]) ;<br />    return 0 ;<br />}</p>


	<p>I find this especially useful in conjunction with find or xargs when I'm sometime uncertain about about the command(s) that will be executed.</p>


	<p>For example: find . -name "*.cpp" -size 0c -exec args rm -rf {} ";" is a non-destructive way of building confidence before issuing a potentially destructive command.</p>


	<p>Specifically, in the care of Windows, there most certainly is a considerable difference between " and ' which using the shell cmd.exe.  Using args.exe on Andreas' command:<br />c:\>args exiv2 -M'set Exif.Some.Tag 1234' 20050625_082910.jpg<br /> 0 args<br /> 1 exiv2<br /> 2 -M'set<br /> 3 Exif.Some.Tag<br /> 4 1234'<br /> 5 20050625_082910.jpg</p>


	<p>c:\><br />--- on the mac/bash (and cygwin/bash) ----<br />507 /Users/rmills/bin $ args exiv2 -M'set Exif.Some.Tag 1234' 20050625_082910.jpg<br />1 : args<br />2 : exiv2<br />3 : -Mset Exif.Some.Tag 1234<br />4 : 20050625_082910.jpg<br />508 /Users/rmills/bin $</p>


	<p>Big difference! cmd.exe treats ' as nothing special!  (gosh, you're kidding.  Nope, I never joke about such boring details).</p>


	<p>One way to present the command that is bash/cmd compatible is:<br />exiv2 "-Mset Exif.Some.Tag 1234" 20050625_082910.jpg</p>


	<p>I hope you find this useful.</p></div>
  
  </div>
</div>
<span class="pagination"><ul class="pages"></ul><span><span class="items">(1-7/7)</span> </span></span>



        
        <div style="clear:both;"></div>
    </div>
</div>
</div>

<div id="ajax-indicator" style="display:none;"><span>Loading...</span></div>
<div id="ajax-modal" style="display:none;"></div>

<div id="footer">
  <div class="bgl"><div class="bgr">
    Powered by <a href="https://www.redmine.org/">Redmine</a> &copy; 2006-2018 Jean-Philippe Lang
  </div></div>
</div>
</div>
</div>

</body>
</html>
