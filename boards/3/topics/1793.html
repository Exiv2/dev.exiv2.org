<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<title>IPTC checksum / digest - Exiv2</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="description" content="Redmine" />
<meta name="keywords" content="issue,bug,tracker" />
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="CTUvoJquEvGYAGiX22UC1m0Iyly3EenKAup0NLFSIO7reIRP6NTe8c1kd5tksg7lUpqeJUbySHD/yuS88mvHgQ==" />
<link rel='shortcut icon' href='/favicon.ico?1550767427' />
<link rel="stylesheet" media="all" href="/stylesheets/jquery/jquery-ui-1.11.0.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/application.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/responsive.css?1550767427" />

<script src="/javascripts/jquery-1.11.1-ui-1.11.0-ujs-4.3.1.js?1550767427"></script>
<script src="/javascripts/application.js?1550767427"></script>
<script src="/javascripts/responsive.js?1550767427"></script>
<script>
//<![CDATA[
$(window).load(function(){ warnLeavingUnsaved('The current page contains unsaved text that will be lost if you leave this page.'); });
//]]>
</script>


<!-- page specific tags -->
</head>
<body class="project-exiv2 has-main-menu controller-messages action-show avatars-off">

<div id="wrapper">

<div class="flyout-menu js-flyout-menu">


        <div class="flyout-menu__search">
            <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
            <input type="hidden" name="messages" value="1" />
            <label class="search-magnifier search-magnifier--flyout" for="flyout-search">&#9906;</label>
            <input type="text" name="q" id="flyout-search" class="small js-search-input" placeholder="Search" />
</form>        </div>


        <h3>Project</h3>
        <span class="js-project-menu"></span>

    <h3>General</h3>
    <span class="js-general-menu"></span>

    <span class="js-sidebar flyout-menu__sidebar"></span>

    <h3>Profile</h3>
    <span class="js-profile-menu"></span>

</div>

<div id="wrapper2">
<div id="wrapper3">
<div id="top-menu">
    <div id="account">
        <ul><li><a class="login" href="/login">Sign in</a></li></ul>    </div>
    
    <ul><li><a class="home" href="/">Home</a></li><li><a class="projects" href="/projects">Projects</a></li><li><a class="help" href="https://www.redmine.org/guide">Help</a></li></ul></div>

<div id="header">

    <a href="#" class="mobile-toggle-button js-flyout-menu-toggle-button"></a>

    <div id="quick-search">
        <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
        <input type="hidden" name="scope" />
        <input type="hidden" name="messages" value="1" />
        <label for='q'>
          <a accesskey="4" href="/projects/exiv2/search">Search</a>:
        </label>
        <input type="text" name="q" id="q" size="20" class="small" accesskey="f" />
</form>        <div id="project-jump" class="drdn"><span class="drdn-trigger">Exiv2</span><div class="drdn-content"><div class="quick-search"><input type="text" name="q" id="projects-quick-search" value="" class="autocomplete" data-automcomplete-url="/projects/autocomplete.js?jump=boards" autocomplete="off" /></div><div class="drdn-items projects selection"></div><div class="drdn-items all-projects selection"><a href="/projects?jump=boards">All Projects</a></div></div></div>
    </div>

    <h1><span class="current-project">Exiv2</span></h1>

    <div id="main-menu" class="tabs">
        <ul><li><a class="overview" href="/projects/exiv2">Overview</a></li><li><a class="activity" href="/projects/exiv2/activity">Activity</a></li><li><a class="roadmap" href="/projects/exiv2/roadmap">Roadmap</a></li><li><a class="issues" href="/projects/exiv2/issues">Issues</a></li><li><a class="news" href="/projects/exiv2/news">News</a></li><li><a class="wiki" href="/projects/exiv2/wiki">Wiki</a></li><li><a class="boards selected" href="/projects/exiv2/boards">Forums</a></li><li><a class="repository" href="/projects/exiv2/repository">Repository</a></li></ul>
        <div class="tabs-buttons" style="display:none;">
            <button class="tab-left" onclick="moveTabLeft(this); return false;"></button>
            <button class="tab-right" onclick="moveTabRight(this); return false;"></button>
        </div>
    </div>
</div>

<div id="main" class="nosidebar">
    <div id="sidebar">
        
        
    </div>

    <div id="content">
        
        <p class="breadcrumb"><a href="/projects/exiv2/boards">Forums</a> » <a href="/projects/exiv2/boards/3">Forum</a> » </p>

<div class="contextual">
    
    
    
    
</div>

<h2>IPTC checksum / digest</h2>

<div class="message">
<p><span class="author">Added by <a class="user active" href="/users/4190">Jim Easterbrook</a> <a title="06 Aug 2014 00:49" href="/projects/exiv2/activity?from=2014-08-06">over 7 years</a> ago</span></p>
<div class="wiki">
<p>I'd like to make some software I'm developing compliant with the Metadata Working Group "Guidelines for Handling Image Metadata" (<a class="external" href="http://www.metadataworkinggroup.org/specs/">http://www.metadataworkinggroup.org/specs/</a>).</p>


	<p>The guidelines say an MD5 checksum should be used to detect any changes to the IPTC-IIM block made by non-compliant software. I can't find any mention of such a checksum in the Exiv2 documentation. Is it possible to create or validate a checksum with Exiv2? Or does it do such checks internally? Or should I just not bother with the checksum?</p>


	<p>PS I'm using Exiv2 from Python via the GObject wrappers, just to complicate matters further.</p>
</div>

</div>
<br />

<div id="replies">
<h3 class="comments icon icon-comments">Replies (5)</h3>
  <div class="message reply" id="message-1794">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/1793?r=1794#message-1794">RE: IPTC checksum / digest</a>
    -
    Added by <a class="user active" href="/users/119">Robin Mills</a> <a title="06 Aug 2014 01:22" href="/projects/exiv2/activity?from=2014-08-06">over 7 years</a> ago
  </h4>
  <div class="wiki"><p>I don't think there's any code in Exiv2 to deal with this.  Our IPTC code was contributed by Brad and he may wish to comment.  For sure, our IPTC code pre-dates that Spec and therefore almost certainly does not comply.</p>


	<p>We could consider supporting this feature and changes to the IPTC data would always update the checksum.  If we did this, your choice of application language (python or whatever) would not be concerned and support would be automatic.  Currently the team has a full program of tasks to complete the v0.25 release in November 2014.  If you put forward the case, we could consider adding this in v0.26.</p>


	<p>As for your question "should I just not bother with the checksum?", I think the answer seems to be "yes".  Perhaps you can pursue this question with the MetaData Working Group and let us know their thoughts about this.</p></div>
  
  </div>
  <div class="message reply" id="message-1807">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/1793?r=1807#message-1807">RE: IPTC checksum / digest</a>
    -
    Added by <a class="user active" href="/users/3100">Phil Harvey</a> <a title="18 Aug 2014 05:25" href="/projects/exiv2/activity?from=2014-08-18">over 7 years</a> ago
  </h4>
  <div class="wiki"><p>The checksum should not be updated automatically when writing IPTC.  Updating the checksum would cause MWG-compliant readers to prefer the XMP over IPTC.  So it should only be updated if the XMP has been properly synchronized with the IPTC.  Deleting the checksum has the same effect, and should cause the reader to prefer XMP.  Technically, if you are writing IPTC without also updating the XMP, then you should ignore the checksum or write an invalid checksum so that readers will prefer the IPTC you have written.</p></div>
  
  </div>
  <div class="message reply" id="message-1808">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/1793?r=1808#message-1808">RE: IPTC checksum / digest</a>
    -
    Added by <a class="user active" href="/users/119">Robin Mills</a> <a title="18 Aug 2014 07:29" href="/projects/exiv2/activity?from=2014-08-18">over 7 years</a> ago
  </h4>
  <div class="wiki"><p>Well perhaps we should always invalidate the checksum when we update IPTC.  I don't know if updating XMP will cause the checksum to be recalculated and stored.  Andreas is going to resync our XMP code with the current Adobe XMPsdk next year.  Perhaps we can consider this matter as part of the project.  <a class="external" href="http://dev.exiv2.org/issues/941">http://dev.exiv2.org/issues/941</a>  I'll update <a class="issue tracker-2 status-5 priority-4 priority-default closed" title="Feature: Upgrade xmpsdk source to Adobe&#39;s current version (Closed)" href="/issues/941">#941</a> to reference this topic.</p></div>
  
  </div>
  <div class="message reply" id="message-1809">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/1793?r=1809#message-1809">RE: IPTC checksum / digest</a>
    -
    Added by <a class="user active" href="/users/3100">Phil Harvey</a> <a title="18 Aug 2014 09:09" href="/projects/exiv2/activity?from=2014-08-18">over 7 years</a> ago
  </h4>
  <div class="wiki"><p>ExifTool provides a mechanism for updating the checksum, but relies on the user to decide when to do this.  It should only be done when the IPTC and XMP are properly synchronized. There are a couple of argfiles in the ExifTool distribution that facilitate syncing IPTC from XMP and visa versa, so these argfiles update the IPTCDigest.  There should also be a mechanism to allow the checksum to be validated, as Jim mentioned, to facilitate conditional processing (with ExifTool it is done like this: exiftool -if '$iptcdigest eq $currentiptcdigest' ...).</p></div>
  
  </div>
  <div class="message reply" id="message-1998">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/1793?r=1998#message-1998">RE: IPTC checksum / digest</a>
    -
    Added by <a class="user active" href="/users/4035">Alan Pater</a> <a title="10 Apr 2015 12:09" href="/projects/exiv2/activity?from=2015-04-10">over 6 years</a> ago
  </h4>
  <div class="wiki"><p>convert.cpp has some functions to compute and compare exif, iptc, xmp digests and decide which fields need to be updated as a result.</p>
	<pre><code><a class="external" href="http://dev.exiv2.org/projects/exiv2/repository/entry/trunk/src/convert.cpp#L1245">http://dev.exiv2.org/projects/exiv2/repository/entry/trunk/src/convert.cpp#L1245</a></code></pre>


	<p>I came across when trying to sync the contents of the various DateTime fields using MWG guidelines. I'm not at a point yet where I compare the iptc to xmp digests.</p>
	<pre><code><a class="external" href="http://dev.exiv2.org/issues/864">http://dev.exiv2.org/issues/864</a></code></pre></div>
  
  </div>
</div>
<span class="pagination"><ul class="pages"></ul><span><span class="items">(1-5/5)</span> </span></span>



        
        <div style="clear:both;"></div>
    </div>
</div>
</div>

<div id="ajax-indicator" style="display:none;"><span>Loading...</span></div>
<div id="ajax-modal" style="display:none;"></div>

<div id="footer">
  <div class="bgl"><div class="bgr">
    Powered by <a href="https://www.redmine.org/">Redmine</a> &copy; 2006-2018 Jean-Philippe Lang
  </div></div>
</div>
</div>
</div>

</body>
</html>
