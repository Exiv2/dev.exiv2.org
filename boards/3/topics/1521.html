<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<title>Sigma lens not recognised by exiv2 - Exiv2</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="description" content="Redmine" />
<meta name="keywords" content="issue,bug,tracker" />
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="owLpYgtMpkm2kPqBGFZDPe20LrGDDjAaKaoMNXu/vvVBT0KNeTZqSeP05Y2ngU8O0iZ6yHLtkaDUipy9OIZZmg==" />
<link rel='shortcut icon' href='/favicon.ico?1550767427' />
<link rel="stylesheet" media="all" href="/stylesheets/jquery/jquery-ui-1.11.0.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/application.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/responsive.css?1550767427" />

<script src="/javascripts/jquery-1.11.1-ui-1.11.0-ujs-4.3.1.js?1550767427"></script>
<script src="/javascripts/application.js?1550767427"></script>
<script src="/javascripts/responsive.js?1550767427"></script>
<script>
//<![CDATA[
$(window).load(function(){ warnLeavingUnsaved('The current page contains unsaved text that will be lost if you leave this page.'); });
//]]>
</script>


<!-- page specific tags -->
</head>
<body class="project-exiv2 has-main-menu controller-messages action-show avatars-off">

<div id="wrapper">

<div class="flyout-menu js-flyout-menu">


        <div class="flyout-menu__search">
            <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
            <input type="hidden" name="messages" value="1" />
            <label class="search-magnifier search-magnifier--flyout" for="flyout-search">&#9906;</label>
            <input type="text" name="q" id="flyout-search" class="small js-search-input" placeholder="Search" />
</form>        </div>


        <h3>Project</h3>
        <span class="js-project-menu"></span>

    <h3>General</h3>
    <span class="js-general-menu"></span>

    <span class="js-sidebar flyout-menu__sidebar"></span>

    <h3>Profile</h3>
    <span class="js-profile-menu"></span>

</div>

<div id="wrapper2">
<div id="wrapper3">
<div id="top-menu">
    <div id="account">
        <ul><li><a class="login" href="/login">Sign in</a></li></ul>    </div>
    
    <ul><li><a class="home" href="/">Home</a></li><li><a class="projects" href="/projects">Projects</a></li><li><a class="help" href="https://www.redmine.org/guide">Help</a></li></ul></div>

<div id="header">

    <a href="#" class="mobile-toggle-button js-flyout-menu-toggle-button"></a>

    <div id="quick-search">
        <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
        <input type="hidden" name="scope" />
        <input type="hidden" name="messages" value="1" />
        <label for='q'>
          <a accesskey="4" href="/projects/exiv2/search">Search</a>:
        </label>
        <input type="text" name="q" id="q" size="20" class="small" accesskey="f" />
</form>        <div id="project-jump" class="drdn"><span class="drdn-trigger">Exiv2</span><div class="drdn-content"><div class="quick-search"><input type="text" name="q" id="projects-quick-search" value="" class="autocomplete" data-automcomplete-url="/projects/autocomplete.js?jump=boards" autocomplete="off" /></div><div class="drdn-items projects selection"></div><div class="drdn-items all-projects selection"><a href="/projects?jump=boards">All Projects</a></div></div></div>
    </div>

    <h1><span class="current-project">Exiv2</span></h1>

    <div id="main-menu" class="tabs">
        <ul><li><a class="overview" href="/projects/exiv2">Overview</a></li><li><a class="activity" href="/projects/exiv2/activity">Activity</a></li><li><a class="roadmap" href="/projects/exiv2/roadmap">Roadmap</a></li><li><a class="issues" href="/projects/exiv2/issues">Issues</a></li><li><a class="news" href="/projects/exiv2/news">News</a></li><li><a class="wiki" href="/projects/exiv2/wiki">Wiki</a></li><li><a class="boards selected" href="/projects/exiv2/boards">Forums</a></li><li><a class="repository" href="/projects/exiv2/repository">Repository</a></li></ul>
        <div class="tabs-buttons" style="display:none;">
            <button class="tab-left" onclick="moveTabLeft(this); return false;"></button>
            <button class="tab-right" onclick="moveTabRight(this); return false;"></button>
        </div>
    </div>
</div>

<div id="main" class="nosidebar">
    <div id="sidebar">
        
        
    </div>

    <div id="content">
        
        <p class="breadcrumb"><a href="/projects/exiv2/boards">Forums</a> » <a href="/projects/exiv2/boards/3">Forum</a> » </p>

<div class="contextual">
    
    
    
    
</div>

<h2>Sigma lens not recognised by exiv2</h2>

<div class="message">
<p><span class="author">Added by <a class="user active" href="/users/3808">Terence Duell</a> <a title="17 Apr 2013 22:25" href="/projects/exiv2/activity?from=2013-04-17">over 8 years</a> ago</span></p>
<div class="wiki">
<p>Hello All,<br />I am using a Sigma lens which is recognised by exiftool, but not by exiv2.<br />I access lensfun from Hugin, and Hugin uses exiv2, so my lens isn't known.<br />Is there a way to get exiv2 to recognise my lens?</p>


	<p>Here is some data...<br />[terry@localhost Gelli5]$ exiv2 -pt IMGP0267.JPG | grep -i lens<br />Exif.PentaxDng.LensType                      Byte        4  Unknown (0x081b)<br />Exif.PentaxDng.LensInfo                      Undefined  80  0 184 144 114 0 27 1 164 0 0 0 0 0 0 0 0 40 86 43 106 64 0 9 109 85 154 113 24 1 74 108 251 255 255 255 255 41 64 0 9 0 136 8 97 0 0 0 0 191 254 27 240 0 0 144 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0<br />[terry@localhost Gelli5]$ exiftool IMGP0267.JPG | grep -i lens<br />Lens Type                       : Sigma 18-200mm F3.5-6.3 II DC HSM<br />Lens F Stops                    : 8.5<br />Lens ID                         : Sigma 18-200mm F3.5-6.3 II DC HSM</p>


	<p>Cheers,<br />Terry</p>
</div>

</div>
<br />

<div id="replies">
<h3 class="comments icon icon-comments">Replies (32)</h3>
  <div class="message reply" id="message-1522">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/1521?r=1522#message-1522">RE: Sigma lens not recognised by exiv2</a>
    -
    Added by <a class="user active" href="/users/3290">Abhinav Badola</a> <a title="17 Apr 2013 22:42" href="/projects/exiv2/activity?from=2013-04-17">over 8 years</a> ago
  </h4>
  <div class="wiki"><p>Terence Duell wrote:</p>


<blockquote>

	<p>Hello All,<br />I am using a Sigma lens which is recognised by exiftool, but not by exiv2.<br />I access lensfun from Hugin, and Hugin uses exiv2, so my lens isn't known.<br />Is there a way to get exiv2 to recognise my lens?</p>


</blockquote>

	<p>Hi Terence,<br />I will see to it and patch Exiv2 with the required Lens info soon.<br />I hope you use Exiv2 via trunk.</p>


	<p>If you are in the middle of testing something and want immediate response from Exiv2 executable, then you can follow the following steps.</p>


	<p>[1]<br />Download exiv2 source code from -<br /><a class="external" href="http://www.exiv2.org/download.html">http://www.exiv2.org/download.html</a></p>


	<p>[2]<br />Then in the source file -<br />trunk/src/pentaxmn.cpp</p>


	<p>add the following line at line number 885</p>
	<pre><code>{ 0x081b, "Sigma 18-200mm F3.5-6.3 II DC HSM" },</code></pre>


	<p>[3]<br />Compile and install.</p>


	<p>I hope this will helps.</p></div>
  
  </div>
  <div class="message reply" id="message-1527">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/1521?r=1527#message-1527">RE: Sigma lens not recognised by exiv2</a>
    -
    Added by <a class="user active" href="/users/3808">Terence Duell</a> <a title="21 Apr 2013 22:29" href="/projects/exiv2/activity?from=2013-04-21">over 8 years</a> ago
  </h4>
  <div class="wiki"><p>Sorry for the late response. I did reply earlier but it doesn't seem to have made it to the forum.</p>


	<p>Unfortunately I use the Exiv2 package from the Fedora repository.<br />I was hoping that you used a data files for this, which would obviate the need to rebuild.<br />Looks like I have to wait on an update eventually appearing in the Fedora repo.</p>


	<p>Thanks for your help.</p>


	<p>Cheers,<br />Terry</p></div>
  
  </div>
  <div class="message reply" id="message-1528">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/1521?r=1528#message-1528">RE: Sigma lens not recognised by exiv2</a>
    -
    Added by <a class="user active" href="/users/134">Niels Kristian Bech Jensen</a> <a title="22 Apr 2013 20:55" href="/projects/exiv2/activity?from=2013-04-22">over 8 years</a> ago
  </h4>
  <div class="wiki"><p>This lens is supported in the trunk already.</p>


	<p>Regards,<br />Niels Kristian</p></div>
  
  </div>
  <div class="message reply" id="message-1529">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/1521?r=1529#message-1529">RE: Sigma lens not recognised by exiv2</a>
    -
    Added by <a class="user active" href="/users/119">Robin Mills</a> <a title="22 Apr 2013 21:02" href="/projects/exiv2/activity?from=2013-04-22">over 8 years</a> ago
  </h4>
  <div class="wiki"><p>Terry</p>


	<p>The suggestion to have a datafile to hold updates to the maker notes has been suggested - and it's a good idea.  We wouldn't change our primary architecture of having this "baked into the library", however it's a good idea to have a file such as exiv2.ini with additions.</p>


	<p>However, as you know, there are many more good ideas than we have time to pursue.  If you, or any of your friends, would like to join the team and develop this, you will be most welcome.  The wages aren't very good, but the rewards are great.</p>


	<p>Robin</p></div>
  
  </div>
  <div class="message reply" id="message-1530">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/1521?r=1530#message-1530">RE: Sigma lens not recognised by exiv2</a>
    -
    Added by <a class="user active" href="/users/3808">Terence Duell</a> <a title="22 Apr 2013 21:05" href="/projects/exiv2/activity?from=2013-04-22">over 8 years</a> ago
  </h4>
  <div class="wiki"><p>It isn't supported by exiv2-0.23-3.fc18.x86_64.<br />This is the version I have installed and used with my builds of Hugin, and the lens isn't recognised, as demonstrated in my original post.<br />Are you sure it wasn't added subsequent to my post?</p>


	<p>Cheers,<br />Terry</p></div>
  
  </div>
  <div class="message reply" id="message-1531">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/1521?r=1531#message-1531">RE: Sigma lens not recognised by exiv2</a>
    -
    Added by <a class="user active" href="/users/3808">Terence Duell</a> <a title="22 Apr 2013 21:18" href="/projects/exiv2/activity?from=2013-04-22">over 8 years</a> ago
  </h4>
  <div class="wiki"><p>The wages aren't very good on any of the open source projects :-)<br />My skills in making suggestions are much more highly developed that any skills I have in software development, particularly with the modern languages.<br />I currently do quite a bit of testing for Hugin, by building a Fedora package of the trunk and then testing the how it all works.<br />I'm not sure how much use it would be to you if I were to do Fedora test builds of the trunk, but that is a possibility.<br />I'll have a try at doing that and see how I go, it might be a way of checking out the support for my lens.</p>


	<p>Cheers,<br />Terry</p></div>
  
  </div>
  <div class="message reply" id="message-1532">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/1521?r=1532#message-1532">RE: Sigma lens not recognised by exiv2</a>
    -
    Added by <a class="user active" href="/users/119">Robin Mills</a> <a title="22 Apr 2013 21:48" href="/projects/exiv2/activity?from=2013-04-22">over 8 years</a> ago
  </h4>
  <div class="wiki"><p>Have a look at the code.  I didn't write it so I can say it is well structured, clear and beautiful without blushing.  Andreas and others have done a very good job.</p>


	<p>Building and running the test suite on Linux is quick and easy.  Tuan, a clever young guy in Singapore, wants to join us through Google Summer of Code and set up an Ubunu server last weekend on AWS.  So we're hoping to automate that shortly. Building on Windows is'nt difficult, however it's very time consuming.</p>


	<p>So have a look at the code and let me know your thoughts.  I'm happy to help you for the usual fee!</p>


	<p>If you are interested, please see the project spec for GSoC.  We're working on something cooool.</p>


	<p><a class="external" href="http://dev.exiv2.org/projects/exiv2/wiki/GSoC_2013_%22Cloud_Ready%22_Project_Specification">http://dev.exiv2.org/projects/exiv2/wiki/GSoC_2013_%22Cloud_Ready%22_Project_Specification</a></p>


	<p>Robin</p></div>
  
  </div>
  <div class="message reply" id="message-1533">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/1521?r=1533#message-1533">RE: Sigma lens not recognised by exiv2</a>
    -
    Added by <a class="user active" href="/users/3808">Terence Duell</a> <a title="22 Apr 2013 21:53" href="/projects/exiv2/activity?from=2013-04-22">over 8 years</a> ago
  </h4>
  <div class="wiki"><p>OK, I've got the trunk from the svn repo.<br />Using cmake, the makefile doesn't provide the option for "make package_source"...which would normally make a tgz or bz2 archive.<br />I need an archive for a Fedora rpmbuild.<br />Is there another way of doing this? Does a download get the current trunk, or just give you the latest release version?</p>


	<p>Cheers,<br />Terry</p></div>
  
  </div>
  <div class="message reply" id="message-1534">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/1521?r=1534#message-1534">RE: Sigma lens not recognised by exiv2</a>
    -
    Added by <a class="user active" href="/users/3808">Terence Duell</a> <a title="22 Apr 2013 21:58" href="/projects/exiv2/activity?from=2013-04-22">over 8 years</a> ago
  </h4>
  <div class="wiki"><p>Hello Robin,<br />Our posts just crossed.<br />Not much point in me looking at the code. I should have been more straightforward...most modern languages (such as cpp) are Greek to me :-)<br />I'll stick to test builds for Fedora, but I have to get an archive of the current trunk first.</p>


	<p>Cheers,<br />Terry</p></div>
  
  </div>
  <div class="message reply" id="message-1535">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/1521?r=1535#message-1535">RE: Sigma lens not recognised by exiv2</a>
    -
    Added by <a class="user active" href="/users/119">Robin Mills</a> <a title="22 Apr 2013 22:11" href="/projects/exiv2/activity?from=2013-04-22">over 8 years</a> ago
  </h4>
  <div class="wiki"><p>No problem.  Don't worry about the code.  I've just exported and zipped up the trunk (<a class="changeset" title="Update to r3018 to eliminate compiler warnings from GCC on Mac." href="/projects/exiv2/repository/exiv2/revisions/3020">r3020</a>) and put it at:</p>


	<p><a class="external" href="http://clanmills.com/files/terry.zip">http://clanmills.com/files/terry.zip</a> (11mb - mostly test files)</p>


	<p>You should be able to build with cmake or the autotools:</p>


	<p>1) CMake<br />$ cd terry<br />$ cmake .<br />$ make<br />$ make tests<br />$ sudo make install</p>


	<p>2) autotools<br />$ make config<br />$ ./configure<br />$ make<br />$ sudo make install<br />$ make samples<br />$ make tests</p>


	<p>There are longer notes on the wiki at:  <a class="external" href="http://dev.exiv2.org/projects/exiv2/wiki/How_do_I_build_Exiv2_on_the_XYZ_platform">http://dev.exiv2.org/projects/exiv2/wiki/How_do_I_build_Exiv2_on_the_XYZ_platform</a></p>


	<p>If you're stuck, puzzled or (gosh, there couldn't be anything wrong on our wiki) you find an error in the docs - please come back and let me help you.</p>


	<p>Robin</p></div>
  
  </div>
  <div class="message reply" id="message-1536">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/1521?r=1536#message-1536">RE: Sigma lens not recognised by exiv2</a>
    -
    Added by <a class="user active" href="/users/3808">Terence Duell</a> <a title="22 Apr 2013 22:28" href="/projects/exiv2/activity?from=2013-04-22">over 8 years</a> ago
  </h4>
  <div class="wiki"><p>Hello Robin,<br />I have the archive terry.zip, thanks.<br />You may have misunderstood what I have been saying.<br />I am going to try to build the current trunk within the Fedora rpmbuild environment, which will require an archive of the current trunk.<br />On this occasion I may be able to make that work with the archive terry.zip, but the usual approach to this would be for me to get the current trunk whenever there has been an change (update my local repo), then do</p>


	<p>cd build<br />cmake ..<br />make package_source</p>


	<p>then move the exiv2xxx.bz2 to my rpmbuild environment, update my .spec file and do an rpmbuild.</p>


	<p>I have no use for any builds that do not produce a Fedora package, and hence cannot be installed/unistalled/ etc by the package manager.</p>


	<p>I'll see how I go.</p>


	<p>Cheers,<br />Terry</p></div>
  
  </div>
  <div class="message reply" id="message-1537">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/1521?r=1537#message-1537">RE: Sigma lens not recognised by exiv2</a>
    -
    Added by <a class="user active" href="/users/119">Robin Mills</a> <a title="22 Apr 2013 22:38" href="/projects/exiv2/activity?from=2013-04-22">over 8 years</a> ago
  </h4>
  <div class="wiki"><p>Ah.  I'm not too sure what an rpmbuild is.  You can checkout the trunk with svn - and update/build to your heart's content.</p>


	<p>Our young friend Nehal in Hyderabad uses Fedora 17.  I'll ask him to join this thread if he's familiar with rpmbuilds</p>


	<p>$ svn checkout svn://dev.exiv2.org/svn/trunk</p>


	<p>see <a class="external" href="http://exiv2.org/download.html">http://exiv2.org/download.html</a> and the <em>"How To Build ... XYX platform"</em></p>


	<p>There are lots of nice SVN client's available if you don't like the command line.  Mind you if you know how to build, I'm sure you good in Konsole/Terminal/Xterm or whatever.  Just thought of a good name for a product "X term inator"</p>


	<p>Last shameless plug for our "hot project of 2013".  Have a little look.  You'll be impressed:<br /><a class="external" href="http://dev.exiv2.org/projects/exiv2/wiki/GSoC_2013_%22Cloud_Ready%22_Project_Specification">http://dev.exiv2.org/projects/exiv2/wiki/GSoC_2013_%22Cloud_Ready%22_Project_Specification</a></p>


	<p>Robin</p></div>
  
  </div>
  <div class="message reply" id="message-1538">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/1521?r=1538#message-1538">RE: Sigma lens not recognised by exiv2</a>
    -
    Added by <a class="user active" href="/users/3808">Terence Duell</a> <a title="22 Apr 2013 22:56" href="/projects/exiv2/activity?from=2013-04-22">over 8 years</a> ago
  </h4>
  <div class="wiki"><p>The current build system doesn't support a "make package_source", which is the vital missing bit.<br />I know all else about rpmbuild...I just need the exiv2 cmake (probably Makefile.in, not sure) to ensure the appropriate stuff is put in the Makefile, and I don't know how to make the required changes to do that.</p>


	<p>Cheers,<br />Terry</p></div>
  
  </div>
  <div class="message reply" id="message-1539">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/1521?r=1539#message-1539">RE: Sigma lens not recognised by exiv2</a>
    -
    Added by <a class="user active" href="/users/119">Robin Mills</a> <a title="22 Apr 2013 22:59" href="/projects/exiv2/activity?from=2013-04-22">over 8 years</a> ago
  </h4>
  <div class="wiki"><p>Terry</p>


	<p>I suspect you're on the West Coast like me.  I'm in San Jose, CA.   Let's call it a night.  Nehal answered a private email and said "I'll see what I can do.".  So let's sleep on this and re-engage this tomorrow.  If Nehal can't unpuzzle this, I'll try to help you when I get home from work.</p>


	<p>Robin</p></div>
  
  </div>
  <div class="message reply" id="message-1540">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/1521?r=1540#message-1540">RE: Sigma lens not recognised by exiv2</a>
    -
    Added by <a class="user active" href="/users/3808">Terence Duell</a> <a title="22 Apr 2013 23:03" href="/projects/exiv2/activity?from=2013-04-22">over 8 years</a> ago
  </h4>
  <div class="wiki"><p>OK.<br />(completely different TZ...Melbourne Aus.)</p>


	<p>Cheers,<br />Terry</p></div>
  
  </div>
  <div class="message reply" id="message-1541">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/1521?r=1541#message-1541">RE: Sigma lens not recognised by exiv2</a>
    -
    Added by <a class="user active" href="/users/119">Robin Mills</a> <a title="22 Apr 2013 23:06" href="/projects/exiv2/activity?from=2013-04-22">over 8 years</a> ago
  </h4>
  <div class="wiki"><p>Ah.  As a student, I was an intern in Melbourne and have friends in Geelong.</p>


	<p>So it's morning for you and afternoon in Hyderabad.  For sure it's bed-time for me (23:04).</p>


	<p>Good Luck.  Speak later.</p>


	<p>Robin</p></div>
  
  </div>
  <div class="message reply" id="message-1542">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/1521?r=1542#message-1542">RE: Sigma lens not recognised by exiv2</a>
    -
    Added by <a class="user active" href="/users/3762">Nehal J Wani</a> <a title="23 Apr 2013 01:27" href="/projects/exiv2/activity?from=2013-04-23">over 8 years</a> ago
  </h4>
  <div class="wiki"><p>Hi Terry!<br />  From what I have understood from your earlier posts, I believe that you want the archive of the latest source code and then give it to the rpmbuild environment. <br />You don't have to always update your local repo, build a source tarball and give it to rpmbuild, because the required archived source is already available on the exiv2.org site. The most current (23/04/13) working version is available here: [[<a class="external" href="http://www.exiv2.org/exiv2-0.23.tar.gz">http://www.exiv2.org/exiv2-0.23.tar.gz</a>]]. It is updated regularly. For all the previous versions, visit [[<a class="external" href="http://www.exiv2.org/archive.html">http://www.exiv2.org/archive.html</a>]] Now you can give this archive to the rpmbuild environment.</p></div>
  
  </div>
  <div class="message reply" id="message-1543">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/1521?r=1543#message-1543">RE: Sigma lens not recognised by exiv2</a>
    -
    Added by <a class="user active" href="/users/3762">Nehal J Wani</a> <a title="23 Apr 2013 03:25" href="/projects/exiv2/activity?from=2013-04-23">over 8 years</a> ago
  </h4>
  <div class="wiki"><p>Terry, I have attached the exiv2.spec file that was used to build exiv2-0.22-6.fc17.x86_64.</p>


	<p>Now, to build the rpms, I changed two values in the spec file.</p>


	<p>(i) Line 9: "Version: 0.22"  -> "Version: 0.23" <br />(ii) Line 104: "%{_libdir}/libexiv2.so.11*" -> "%{_libdir}/libexiv2.so.12*"</p>


	<p>Then issued the following commands:</p>


<pre>
$ mkdir test ; cd test
$ rpmdev-setuptree
$ cp ~/exiv2_old.spec ./rpmbuild/SPECS/exiv2.spec
$ cd ./rpmbuild/SPECS/
$ rpmlint exiv2.spec
$ rpmbuild -ba exiv2.spec
$ cd ../
$ ls ../RPMS/x86_64/
exiv2-0.23-6.fc17.x86_64.rpm  exiv2-debuginfo-0.23-6.fc17.x86_64.rpm  exiv2-devel-0.23-6.fc17.x86_64.rpm  exiv2-libs-0.23-6.fc17.x86_64.rpm
$ ls ../SRPMS/
exiv2-0.23-6.fc17.src.rpm
$ #Successful!
</pre></div>
  <div class="attachments">
<div class="contextual">
  
</div>
<table>
<tr>
  <td>
    <a class="icon icon-attachment" href="/attachments/500">exiv2_old.spec</a>    <span class="size">(5.45 KB)</span>
    <a class="icon-only icon-download" title="Download" href="/attachments/download/500/exiv2_old.spec">exiv2_old.spec</a>  </td>
  <td></td>
  <td>
  </td>
  <td>
  </td>
</tr>
</table>
</div>

  </div>
  <div class="message reply" id="message-1544">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/1521?r=1544#message-1544">RE: Sigma lens not recognised by exiv2</a>
    -
    Added by <a class="user active" href="/users/3762">Nehal J Wani</a> <a title="23 Apr 2013 03:31" href="/projects/exiv2/activity?from=2013-04-23">over 8 years</a> ago
  </h4>
  <div class="wiki"><p>Pardon me, I forgot add these (before rpmbuild):</p>


<pre>
$ cd ~/rpmbuild/SOURCES/
$ wget http://www.exiv2.org/exiv2-0.23.tar.gz ; cd ../SPECS
</pre></div>
  
  </div>
  <div class="message reply" id="message-1545">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/1521?r=1545#message-1545">RE: Sigma lens not recognised by exiv2</a>
    -
    Added by <a class="user active" href="/users/3808">Terence Duell</a> <a title="23 Apr 2013 15:40" href="/projects/exiv2/activity?from=2013-04-23">over 8 years</a> ago
  </h4>
  <div class="wiki"><p>Hello Nehal,<br />Thanks for the info, that has answered my previous question re the status of the download source. Often the download is the latest release version, not the current trunk, but in this case it seems it is the trunk. Hence I will use the download source tarball to build my Fedora rpm.<br />Updating your local repo and building a source tarball from that has the advantage that there is no confusion about the identity (version/release) of the source, which should be reflected in the rpm name to ensure updates are handled correctly by the package manager. An alternate is to build the download date into the release number, as we do with snapshots of the Hugin default trunk, as follows...</p>


	<p>Version: 2013.1.0<br />Release: 0.1.20130421hg%{?dist}</p>


	<p>I already have the .spec file and everything else I need, thanks</p>


	<p>Cheers,<br />Terry</p></div>
  
  </div>
  <div class="message reply" id="message-1546">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/1521?r=1546#message-1546">RE: Sigma lens not recognised by exiv2</a>
    -
    Added by <a class="user active" href="/users/3808">Terence Duell</a> <a title="23 Apr 2013 16:46" href="/projects/exiv2/activity?from=2013-04-23">over 8 years</a> ago
  </h4>
  <div class="wiki"><p>Hello Nehal,<br />I got the working version you suggested [[<a class="external" href="http://www.exiv2.org/exiv2-0.23.tar.gz">http://www.exiv2.org/exiv2-0.23.tar.gz</a>]]., and built a Fedora rpm OK, but that source isn't up-to-date.<br />It doesn't have the updated Pentax Sigma lens data.<br />Unless the download source is Really up to date (ie always built after every source change) then grabbing the download isn't a viable solution for building up-to-date binary packages.<br />I'll revert to attempting a build using the source code tarball that Robin provided.<br />I still think that the best long term solution is a change to the Makefile, which provides a "make package_source" option, which allows a tarball to be built from a local (updated) svn.<br />Unfortunately I really don't know enough about this business to make the necessary changes, which would probably be to config/Makefile.in and/or config/config.mk.in.<br />I can provide guidance via the Makefile that is generated for the Hugin project, which contains the following...</p>


	<ol>
	<li>Special rule for the target package_source<br />package_source:<br />    @$(CMAKE_COMMAND) -E cmake_echo_color --switch=$(COLOR) --cyan "Run CPack packaging tool for source..." <br />    /usr/bin/cpack --config ./CPackSourceConfig.cmake /home/terry/Hugin/trunk/BUILD/CPackSourceConfig.cmake<br />.PHONY : package_source</li>
	</ol>


	<p>but that isn't the whole story, there are some instructions somewhere put all this together out of some rules...but haven't been able to find them, yet!</p>


	<p>Cheers,<br />Terry</p></div>
  
  </div>
  <div class="message reply" id="message-1547">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/1521?r=1547#message-1547">RE: Sigma lens not recognised by exiv2</a>
    -
    Added by <a class="user active" href="/users/3808">Terence Duell</a> <a title="23 Apr 2013 17:53" href="/projects/exiv2/activity?from=2013-04-23">over 8 years</a> ago
  </h4>
  <div class="wiki"><p>This is all "up the creek" !<br />The archive Robin sent me (terry.zip) is incomplete (no configure) hence rpmbuild throws an error.<br />The download source is out of date, i.e. doesn't reflect recent changes. Robin's archive includes a pentaxmn.cpp, which includes the Sigma lens I am interested in, was modified on 13 Apr. The current download doesn't include that update, and the pentaxmn.cpp is dated 23 Mar 2012.</p>


	<p>Thanks to all for your help, but I think I'll give it all a miss.</p>


	<p>Cheers,<br />Terry</p></div>
  
  </div>
  <div class="message reply" id="message-1548">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/1521?r=1548#message-1548">RE: Sigma lens not recognised by exiv2</a>
    -
    Added by <a class="user active" href="/users/119">Robin Mills</a> <a title="23 Apr 2013 18:10" href="/projects/exiv2/activity?from=2013-04-23">over 8 years</a> ago
  </h4>
  <div class="wiki"><p>The tar ball is not incomplete.  You should do $ make config (as I documented above) to generate the configure script. terry.zip is svn3020.  Top of trunk.<br /><pre>
rmills@rmills-imac:~/temp/terry $ ls -alt ~/gnu/exiv2/trunk/src/pentaxmn.cpp
-rw-r--r--  1 rmills  staff  59596 Apr 19 09:47 /Users/rmills/gnu/exiv2/trunk/src/pentaxmn.cpp
rmills@rmills-imac:~/temp/terry $ ls -alt src/pentaxmn.cpp 
-rw-r--r--  1 rmills  staff  59596 Apr 13 20:34 src/pentaxmn.cpp

rmills@rmills-imac:~/temp/terry $ diff src/pentaxmn.cpp ~/gnu/exiv2/trunk/src/pentaxmn.cpp 
rmills@rmills-imac:~/temp/terry $ wc src/pentaxmn.cpp ~/gnu/exiv2/trunk/src/pentaxmn.cpp 
    1352    6804   59596 src/pentaxmn.cpp
    1352    6804   59596 /Users/rmills/gnu/exiv2/trunk/src/pentaxmn.cpp
    2704   13608  119192 total
rmills@rmills-imac:~/temp/terry $ md5 src/pentaxmn.cpp ~/gnu/exiv2/trunk/src/pentaxmn.cpp 
MD5 (src/pentaxmn.cpp) = f60757d7b9f716735a7eb5962fd7114e
MD5 (/Users/rmills/gnu/exiv2/trunk/src/pentaxmn.cpp) = f60757d7b9f716735a7eb5962fd7114e
rmills@rmills-imac:~/temp/terry $ 
</pre><br />Robin</p></div>
  
  </div>
  <div class="message reply" id="message-1549">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/1521?r=1549#message-1549">RE: Sigma lens not recognised by exiv2</a>
    -
    Added by <a class="user active" href="/users/119">Robin Mills</a> <a title="23 Apr 2013 18:46" href="/projects/exiv2/activity?from=2013-04-23">over 8 years</a> ago
  </h4>
  <div class="wiki"><p>Team (Abhinav, Nehal and Neils)<br />I've very proud of how you have contributed to this thread.   You'll see Terry has thanked us for trying to help him.  And we have helped him.  It's mid-night in Melbourne and Terry's clearly tired and frustrated.  My clock tells me he's been at this for about 20 hours.  A "bit of a stint", eh?</p>


	<p>Nehal:<br />I see you're a wizard on Fedora (which I've never used).  Is it possible to create a fresh top-of-trunk tar-ball - complete with ./configure.  With a little bit of good fortune, Terry will be up in running easily.</p>


	<p>Terry:<br />Can we regroup at the weekend and help you?  Perhaps one of us can "talk you down" on Skype with some screen sharing if necessary.</p>


	<p>Robin</p></div>
  
  </div>
  <div class="message reply" id="message-1550">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/1521?r=1550#message-1550">RE: Sigma lens not recognised by exiv2</a>
    -
    Added by <a class="user active" href="/users/3808">Terence Duell</a> <a title="24 Apr 2013 16:44" href="/projects/exiv2/activity?from=2013-04-24">over 8 years</a> ago
  </h4>
  <div class="wiki"><p>Hello Robin,</p>


	<p>Robin Mills wrote:</p>


<blockquote>

	<p>Team (Abhinav, Nehal and Neils)<br />I've very proud of how you have contributed to this thread.   You'll see Terry has thanked us for trying to help him.  And we have helped him.  It's mid-night in Melbourne and Terry's clearly tired and frustrated.  My clock tells me he's been at this for about 20 hours.  A "bit of a stint", eh?</p>


</blockquote>

	<p>I am very appreciative of the help that has been provided.</p>


<blockquote>

	<p>Nehal:<br />I see you're a wizard on Fedora (which I've never used).  Is it possible to create a fresh top-of-trunk tar-ball - complete with ./configure.  With a little bit of good fortune, Terry will be up in running easily.</p>


</blockquote>

	<p>On this point, as I have said, I think it is important for users to be able to get an up-to-date source tarball, to be able to build binary packages, as you currently do not have any way of incorporating updated/new lens data without a rebuild.</p>


<blockquote>

	<p>Terry:<br />Can we regroup at the weekend and help you?  Perhaps one of us can "talk you down" on Skype with some screen sharing if necessary.</p>


</blockquote>

	<p>I have now managed to successfully build Fedora rpms which install and appear to work OK on Fedora 18 x86_64.<br />I don't use anything other than basic email, so not much point in thinking about Skype. I don't think there is much more that I can, or need to do, at this stage.<br />You probably know all this...I think that the 'data file' approach would be great step forward. With the current arrangement, users who rely on installing Exiv2 from a distro repository, and I suspect that would be a lot of ordinary Linux users, can't take advantage of data updates until the distro releases an updated binary package, and that usually means someone has to give that process a nudge for it to happen and can take quite a while.<br />The ability to simply build a source tarball from a local trunk is a step towards simplifying the build of binary packages, which might be made available as 'snapshots'.<br />I would be happy to build Fedora rpms of snapshots to help the ordinary user, if there were somewhere that they could be hosted. I note that Fedora provide this site &lt;<a class="external" href="http://repos.fedorapeople.org/repos&amp;gt;">http://repos.fedorapeople.org/repos&amp;gt;</a>, but not quite sure how it all works, and suspect this may be where Fedora engineering get their material for package updates. Other distros probably do similar.<br />A side issues. I find the forum a bit difficult to work with. Email notifications of postings don't turn up until many hours after the post. Have you considered something like Google groups?</p>


	<p>Cheers,<br />Terry</p></div>
  
  </div>
</div>
<span class="pagination"><ul class="pages"><li class="previous"><span>« Previous</span></li><li class="current"><span>1</span></li><li class="page"><a href="/boards/3/topics/1521?page=2">2</a></li><li class="next page"><a accesskey="n" href="/boards/3/topics/1521?page=2">Next »</a></li></ul><span><span class="items">(1-25/32)</span> </span></span>



        
        <div style="clear:both;"></div>
    </div>
</div>
</div>

<div id="ajax-indicator" style="display:none;"><span>Loading...</span></div>
<div id="ajax-modal" style="display:none;"></div>

<div id="footer">
  <div class="bgl"><div class="bgr">
    Powered by <a href="https://www.redmine.org/">Redmine</a> &copy; 2006-2018 Jean-Philippe Lang
  </div></div>
</div>
</div>
</div>

</body>
</html>
