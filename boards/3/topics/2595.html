<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<title>metacopy -e a.tif b.tif - Exiv2</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="description" content="Redmine" />
<meta name="keywords" content="issue,bug,tracker" />
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="ixkYVCFG8DBy0Y6dFOWp1mhaS7JNf1v+puQ48fRg6ZZpVLO7Uzw8MCe1kZGrMqXlV8gfy7yc+kRbxKh5t1kO+Q==" />
<link rel='shortcut icon' href='/favicon.ico?1550767427' />
<link rel="stylesheet" media="all" href="/stylesheets/jquery/jquery-ui-1.11.0.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/application.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/responsive.css?1550767427" />

<script src="/javascripts/jquery-1.11.1-ui-1.11.0-ujs-4.3.1.js?1550767427"></script>
<script src="/javascripts/application.js?1550767427"></script>
<script src="/javascripts/responsive.js?1550767427"></script>
<script>
//<![CDATA[
$(window).load(function(){ warnLeavingUnsaved('The current page contains unsaved text that will be lost if you leave this page.'); });
//]]>
</script>


<!-- page specific tags -->
</head>
<body class="project-exiv2 has-main-menu controller-messages action-show avatars-off">

<div id="wrapper">

<div class="flyout-menu js-flyout-menu">


        <div class="flyout-menu__search">
            <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
            <input type="hidden" name="messages" value="1" />
            <label class="search-magnifier search-magnifier--flyout" for="flyout-search">&#9906;</label>
            <input type="text" name="q" id="flyout-search" class="small js-search-input" placeholder="Search" />
</form>        </div>


        <h3>Project</h3>
        <span class="js-project-menu"></span>

    <h3>General</h3>
    <span class="js-general-menu"></span>

    <span class="js-sidebar flyout-menu__sidebar"></span>

    <h3>Profile</h3>
    <span class="js-profile-menu"></span>

</div>

<div id="wrapper2">
<div id="wrapper3">
<div id="top-menu">
    <div id="account">
        <ul><li><a class="login" href="/login">Sign in</a></li></ul>    </div>
    
    <ul><li><a class="home" href="/">Home</a></li><li><a class="projects" href="/projects">Projects</a></li><li><a class="help" href="https://www.redmine.org/guide">Help</a></li></ul></div>

<div id="header">

    <a href="#" class="mobile-toggle-button js-flyout-menu-toggle-button"></a>

    <div id="quick-search">
        <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
        <input type="hidden" name="scope" />
        <input type="hidden" name="messages" value="1" />
        <label for='q'>
          <a accesskey="4" href="/projects/exiv2/search">Search</a>:
        </label>
        <input type="text" name="q" id="q" size="20" class="small" accesskey="f" />
</form>        <div id="project-jump" class="drdn"><span class="drdn-trigger">Exiv2</span><div class="drdn-content"><div class="quick-search"><input type="text" name="q" id="projects-quick-search" value="" class="autocomplete" data-automcomplete-url="/projects/autocomplete.js?jump=boards" autocomplete="off" /></div><div class="drdn-items projects selection"></div><div class="drdn-items all-projects selection"><a href="/projects?jump=boards">All Projects</a></div></div></div>
    </div>

    <h1><span class="current-project">Exiv2</span></h1>

    <div id="main-menu" class="tabs">
        <ul><li><a class="overview" href="/projects/exiv2">Overview</a></li><li><a class="activity" href="/projects/exiv2/activity">Activity</a></li><li><a class="roadmap" href="/projects/exiv2/roadmap">Roadmap</a></li><li><a class="issues" href="/projects/exiv2/issues">Issues</a></li><li><a class="news" href="/projects/exiv2/news">News</a></li><li><a class="wiki" href="/projects/exiv2/wiki">Wiki</a></li><li><a class="boards selected" href="/projects/exiv2/boards">Forums</a></li><li><a class="repository" href="/projects/exiv2/repository">Repository</a></li></ul>
        <div class="tabs-buttons" style="display:none;">
            <button class="tab-left" onclick="moveTabLeft(this); return false;"></button>
            <button class="tab-right" onclick="moveTabRight(this); return false;"></button>
        </div>
    </div>
</div>

<div id="main" class="nosidebar">
    <div id="sidebar">
        
        
    </div>

    <div id="content">
        
        <p class="breadcrumb"><a href="/projects/exiv2/boards">Forums</a> » <a href="/projects/exiv2/boards/3">Forum</a> » </p>

<div class="contextual">
    
    
    
    
</div>

<h2>metacopy -e a.tif b.tif</h2>

<div class="message">
<p><span class="author">Added by Anonymous <a title="14 Jun 2016 12:32" href="/projects/exiv2/activity?from=2016-06-14">over 5 years</a> ago</span></p>
<div class="wiki">
<p>It does not copy DPI information. a.tiff is 300 DPI. b.tiff is kept with 96 DPI. <br />I have tried with "-a" option, and does not work.</p>


	<p>But, it worked with JPG files.</p>


	<p>I can send the source TIF image (a.tif) in private, since it contains some "private information".</p>


	<p>Thanks for any help<br />Ritz</p>
</div>

</div>
<br />

<div id="replies">
<h3 class="comments icon icon-comments">Replies (12)</h3>
  <div class="message reply" id="message-2596">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/2595?r=2596#message-2596">RE: metacopy -e a.tif b.tif</a>
    -
    Added by <a class="user active" href="/users/119">Robin Mills</a> <a title="14 Jun 2016 13:53" href="/projects/exiv2/activity?from=2016-06-14">over 5 years</a> ago
  </h4>
  <div class="wiki"><p>Ritz</p>


	<p>I think that tag is protected from change.  There are tags that exiv2 considers to be part of the image and will not change them.  For example XDimension etc.  If those are changed, the image will be corrupted.  You'll find them listed in src/tiffimage.cpp#2441<pre>    bool isTiffImageTag(uint16_t tag, IfdId group)
    {
        //! List of TIFF image tags
        static const TiffImgTagStruct tiffImageTags[] = {
            { 0x00fe, ifd0Id }, // Exif.Image.NewSubfileType
...
            { 0x011a, ifd0Id }, // Exif.Image.XResolution
            { 0x011b, ifd0Id }, // Exif.Image.YResolution
...
            { 0x9217, ifd0Id }, // Exif.Image.SensingMethod
        };</pre>You can try commenting off Exif.Image.{X|Y}Resolution.  I'm a little surprised that {X|Y}Resolution are treated this way, perhaps the author was being cautious to cover the case when {X|Y}Dimension is expressed in units which are not pixels.</p>


	<p>If that doesn't fix, please share your tiff with Dropbox or something.  Or you can email it, or simply attach it to this issue and I will delete your file from this issues when I copy it to my machine.</p></div>
  
  </div>
  <div class="message reply" id="message-2597">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/2595?r=2597#message-2597">RE: metacopy -e a.tif b.tif</a>
    -
    Added by Anonymous <a title="22 Jun 2016 01:40" href="/projects/exiv2/activity?from=2016-06-22">over 5 years</a> ago
  </h4>
  <div class="wiki"><p>Hello... here the sample images (trying metacopy -a x.tif y.tif)... also, tried any other parameter, like -e or -c or -i...<br />I know that dimensions are different. But there should be a way to copy the DPI only.<br />I tried to use metacopy, but it does not copy the DPI information...</p>


	<p>Thanks in advance for any help ...</p>


	<p>Best Regards!<br />Ritz</p></div>
  <div class="attachments">
<div class="contextual">
  
</div>
<table>
<tr>
  <td>
    <a class="icon icon-attachment" href="/attachments/1015">x.tif</a>    <span class="size">(6.17 MB)</span>
    <a class="icon-only icon-download" title="Download" href="/attachments/download/1015/x.tif">x.tif</a>  </td>
  <td>source image</td>
  <td>
  </td>
  <td>
  </td>
</tr>
<tr>
  <td>
    <a class="icon icon-attachment" href="/attachments/1016">y.tif</a>    <span class="size">(1.81 MB)</span>
    <a class="icon-only icon-download" title="Download" href="/attachments/download/1016/y.tif">y.tif</a>  </td>
  <td>target image</td>
  <td>
  </td>
  <td>
  </td>
</tr>
</table>
</div>

  </div>
  <div class="message reply" id="message-2600">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/2595?r=2600#message-2600">RE: metacopy -e a.tif b.tif</a>
    -
    Added by <a class="user active" href="/users/119">Robin Mills</a> <a title="23 Jun 2016 11:29" href="/projects/exiv2/activity?from=2016-06-23">over 5 years</a> ago
  </h4>
  <div class="wiki"><p>Ritz</p>


	<p>You'll have to read the code in metacopy to see if it copies DPI information.  I did run a little test last week before offering the advice above about src/tiffimage.cpp#2441 isTiffImageTag() resulting in Exif.Image.XResolution being considered part of the image data and therefore protected.</p></div>
  
  </div>
  <div class="message reply" id="message-2601">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/2595?r=2601#message-2601">RE: metacopy -e a.tif b.tif</a>
    -
    Added by <a class="user active" href="/users/4008">T Modes</a> <a title="23 Jun 2016 15:12" href="/projects/exiv2/activity?from=2016-06-23">over 5 years</a> ago
  </h4>
  <div class="wiki"><p>Just one comment: you can not update XResolution or YResolution alone. You need also to consider/update ResolutionUnit.<br />And when you change ResolutionUnit you need also to update XPosition and YPosition otherwise you break cropped TIFF files.</p></div>
  
  </div>
  <div class="message reply" id="message-2604">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/2595?r=2604#message-2604">RE: metacopy -e a.tif b.tif</a>
    -
    Added by Anonymous <a title="24 Jun 2016 18:46" href="/projects/exiv2/activity?from=2016-06-24">over 5 years</a> ago
  </h4>
  <div class="wiki"><p>Hi Guys...I have tried many things... still, DPI is 96 (and it should be 300). Why is it too hard to change a "logic" unit in the file?. I have not found any solution on internet. My last try was this code:</p>
	<pre><code>Exiv2::BasicIo::AutoPtr io(new Exiv2::FileIo(output));<br />        Exiv2::TiffImage tiffImage(io, false);</code></pre>
	<pre><code>Exiv2::ExifData&#38; exifData = tiffImage.exifData();<br />        exifData["Exif.Image.ResolutionUnit"] = 2;<br />        exifData["Exif.Image.XResolution"] = Exiv2::Rational(300, 1);<br />        exifData["Exif.Image.YResolution"] = Exiv2::Rational(300, 1);<br />        exifData["Exif.Image.Make"] = "Just for testing";<br />        tiffImage.writeMetadata();</code></pre>


	<p>And of course, it only writes on this tag "Exif.Image.Make" properly. I have tried with other configurations</p>
	<pre><code>exifData["Exif.Image.XResolution"] = Exiv2::Rational(1, 300);<br />        exifData["Exif.Image.YResolution"] = Exiv2::Rational(1, 300);</code></pre>


	<p>Or just numbers</p>
	<pre><code>exifData["Exif.Image.XResolution"] = 300;<br />        exifData["Exif.Image.YResolution"] = 300;</code></pre>


	<p>Nothing Works...  also</p>
	<pre><code>exifData["Exif.Image.ResolutionUnit"] = 1;</code></pre>


	<p>I dont know any other c++ library for chaging the DPI information on a TIFF image. So, what should I do? just give up?</p>


	<p>Cheers<br />Ritz</p></div>
  
  </div>
  <div class="message reply" id="message-2605">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/2595?r=2605#message-2605">RE: metacopy -e a.tif b.tif</a>
    -
    Added by <a class="user active" href="/users/119">Robin Mills</a> <a title="24 Jun 2016 19:51" href="/projects/exiv2/activity?from=2016-06-24">over 5 years</a> ago
  </h4>
  <div class="wiki"><p>I have explained this several times.  You will have to modify isTiffImageTag() to stop that tag from being protected, then you will be able to modify it with a command such as<pre>$ exiv2 -M'set Exif.Image.XResolution 200/1 image-path</pre>I can't say off-hand whether metacopy.cpp will deal with Resolution.  This an open source project.  You get free source code and you are expected to modify the code if it doesn't do exactly what you want.  If metacopy doesn't work to your liking, you are expected to read the code and modify it.</p>


	<p>I also suggest that using words such as "please" and "thank you" might motivate me to give you more of my time.</p></div>
  
  </div>
  <div class="message reply" id="message-2606">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/2595?r=2606#message-2606">RE: metacopy -e a.tif b.tif</a>
    -
    Added by Anonymous <a title="24 Jun 2016 20:51" href="/projects/exiv2/activity?from=2016-06-24">over 5 years</a> ago
  </h4>
  <div class="wiki"><p>Hello Robin</p>


	<p>Thanks for your help. I dont understand the code at all. That's why I have not tried your approach. You are talking about commentting off some lines here:</p>
	<pre><code>static const TiffImgTagStruct tiffImageTags[] = {
            { 0x00fe, ifd0Id }, // Exif.Image.NewSubfileType
            { 0x00ff, ifd0Id }, // Exif.Image.SubfileType
            { 0x0100, ifd0Id }, // Exif.Image.ImageWidth
            { 0x0101, ifd0Id }, // Exif.Image.ImageLength
            { 0x0102, ifd0Id }, // Exif.Image.BitsPerSample
            { 0x0103, ifd0Id }, // Exif.Image.Compression
            { 0x0106, ifd0Id }, // Exif.Image.PhotometricInterpretation
            { 0x010a, ifd0Id }, // Exif.Image.FillOrder
            { 0x0111, ifd0Id }, // Exif.Image.StripOffsets
            { 0x0115, ifd0Id }, // Exif.Image.SamplesPerPixel
            { 0x0116, ifd0Id }, // Exif.Image.RowsPerStrip
            { 0x0117, ifd0Id }, // Exif.Image.StripByteCounts
            { 0x011a, ifd0Id }, // Exif.Image.XResolution
            { 0x011b, ifd0Id }, // Exif.Image.YResolution</code></pre>


	<p>Do you mean, comment these 2 lines? like this?:</p>
	<pre><code>//{ 0x011a, ifd0Id }, // Exif.Image.XResolution<br />            //{ 0x011b, ifd0Id }, // Exif.Image.YResolution</code></pre>


	<p>Thx again<br />Ritz</p></div>
  
  </div>
  <div class="message reply" id="message-2607">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/2595?r=2607#message-2607">RE: metacopy -e a.tif b.tif</a>
    -
    Added by <a class="user active" href="/users/119">Robin Mills</a> <a title="24 Jun 2016 21:19" href="/projects/exiv2/activity?from=2016-06-24">over 5 years</a> ago
  </h4>
  <div class="wiki"><p>You have the correct idea.  You have to comment off those two lines of code and rebuild exiv2.  Then you will be able to modify XResolution.</p>


	<p>On which platform are you working?  Linux, Mac, Windows?</p>


	<p>I'm having an early night (it's 22:20 in England).  Speak Saturday.</p></div>
  
  </div>
  <div class="message reply" id="message-2608">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/2595?r=2608#message-2608">RE: metacopy -e a.tif b.tif</a>
    -
    Added by Anonymous <a title="24 Jun 2016 23:12" href="/projects/exiv2/activity?from=2016-06-24">over 5 years</a> ago
  </h4>
  <div class="wiki"><p>Hello robin</p>


	<p>I am using windows10 ... by the way, I have commented 3 lines (also considering the hints of "T Modes"). </p>
	<pre><code>//{ 0x011a, ifd0Id }, // Exif.Image.XResolution<br />            //{ 0x011b, ifd0Id }, // Exif.Image.YResolution
            { 0x011c, ifd0Id }, // Exif.Image.PlanarConfiguration
            { 0x0122, ifd0Id }, // Exif.Image.GrayResponseUnit
            { 0x0123, ifd0Id }, // Exif.Image.GrayResponseCurve
            { 0x0124, ifd0Id }, // Exif.Image.T4Options
            { 0x0125, ifd0Id }, // Exif.Image.T6Options<br />            //{ 0x0128, ifd0Id }, // Exif.Image.ResolutionUnit</code></pre>


	<p>Now, the resolution unit is written. That's good. But still Xres and Yres are 96. "T Modes" told me that I should update XPosition and YPosition. But I dont see these tags.</p>


	<p>Cheers<br />Ritz</p></div>
  
  </div>
  <div class="message reply" id="message-2609">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/2595?r=2609#message-2609">RE: metacopy -e a.tif b.tif</a>
    -
    Added by Anonymous <a title="25 Jun 2016 02:07" href="/projects/exiv2/activity?from=2016-06-25">over 5 years</a> ago
  </h4>
  <div class="wiki"><p>Hello</p>


	<p>Well, I just read the metadata from other file, and write it into my tif file (as metacopy does) and now it Works (after commenting the 3 lines). I did not find the way to change the DPI only. But it Works for me by now.</p>


	<p>Thanks Robin and T Modes.<br />Best Regards!<br />Ritz</p></div>
  
  </div>
  <div class="message reply" id="message-2610">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/2595?r=2610#message-2610">RE: metacopy -e a.tif b.tif</a>
    -
    Added by <a class="user active" href="/users/119">Robin Mills</a> <a title="25 Jun 2016 06:33" href="/projects/exiv2/activity?from=2016-06-25">over 5 years</a> ago
  </h4>
  <div class="wiki"><p>Well done, Ritz and T.  I wake up to a beautiful sunny morning in England and delighted to read your happy news.  The code and the community are working perfectly.  Thanks for sharing your progress and success.<br /><img src="/attachments/download/1017/dsc_9221.jpg" alt="" /></p></div>
  <div class="attachments">
<div class="contextual">
  
</div>
<table>
<tr>
  <td>
    <a class="icon icon-attachment" href="/attachments/1017">dsc_9221.jpg</a>    <span class="size">(85.5 KB)</span>
    <a class="icon-only icon-download" title="Download" href="/attachments/download/1017/dsc_9221.jpg">dsc_9221.jpg</a>  </td>
  <td></td>
  <td>
  </td>
  <td>
  </td>
</tr>
</table>
</div>

  </div>
  <div class="message reply" id="message-2612">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/2595?r=2612#message-2612">RE: metacopy -e a.tif b.tif</a>
    -
    Added by Anonymous <a title="25 Jun 2016 12:50" href="/projects/exiv2/activity?from=2016-06-25">over 5 years</a> ago
  </h4>
  <div class="wiki"><p>Wow....nice pic! Have a nice day!<br />Ritz</p></div>
  
  </div>
</div>
<span class="pagination"><ul class="pages"></ul><span><span class="items">(1-12/12)</span> </span></span>



        
        <div style="clear:both;"></div>
    </div>
</div>
</div>

<div id="ajax-indicator" style="display:none;"><span>Loading...</span></div>
<div id="ajax-modal" style="display:none;"></div>

<div id="footer">
  <div class="bgl"><div class="bgr">
    Powered by <a href="https://www.redmine.org/">Redmine</a> &copy; 2006-2018 Jean-Philippe Lang
  </div></div>
</div>
</div>
</div>

</body>
</html>
