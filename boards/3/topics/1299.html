<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<title>Linking with Cygwin and Qt issue - Exiv2</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="description" content="Redmine" />
<meta name="keywords" content="issue,bug,tracker" />
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="1C6ttZFufA4pY6C0EG9FuI28fepBI90LuOrrcihed2g2YwZa4xSwDnwHv7ivuEmLsi4pk7DAfLFFynv6a2eQBw==" />
<link rel='shortcut icon' href='/favicon.ico?1550767427' />
<link rel="stylesheet" media="all" href="/stylesheets/jquery/jquery-ui-1.11.0.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/application.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/responsive.css?1550767427" />

<script src="/javascripts/jquery-1.11.1-ui-1.11.0-ujs-4.3.1.js?1550767427"></script>
<script src="/javascripts/application.js?1550767427"></script>
<script src="/javascripts/responsive.js?1550767427"></script>
<script>
//<![CDATA[
$(window).load(function(){ warnLeavingUnsaved('The current page contains unsaved text that will be lost if you leave this page.'); });
//]]>
</script>


<!-- page specific tags -->
</head>
<body class="project-exiv2 has-main-menu controller-messages action-show avatars-off">

<div id="wrapper">

<div class="flyout-menu js-flyout-menu">


        <div class="flyout-menu__search">
            <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
            <input type="hidden" name="messages" value="1" />
            <label class="search-magnifier search-magnifier--flyout" for="flyout-search">&#9906;</label>
            <input type="text" name="q" id="flyout-search" class="small js-search-input" placeholder="Search" />
</form>        </div>


        <h3>Project</h3>
        <span class="js-project-menu"></span>

    <h3>General</h3>
    <span class="js-general-menu"></span>

    <span class="js-sidebar flyout-menu__sidebar"></span>

    <h3>Profile</h3>
    <span class="js-profile-menu"></span>

</div>

<div id="wrapper2">
<div id="wrapper3">
<div id="top-menu">
    <div id="account">
        <ul><li><a class="login" href="/login">Sign in</a></li></ul>    </div>
    
    <ul><li><a class="home" href="/">Home</a></li><li><a class="projects" href="/projects">Projects</a></li><li><a class="help" href="https://www.redmine.org/guide">Help</a></li></ul></div>

<div id="header">

    <a href="#" class="mobile-toggle-button js-flyout-menu-toggle-button"></a>

    <div id="quick-search">
        <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
        <input type="hidden" name="scope" />
        <input type="hidden" name="messages" value="1" />
        <label for='q'>
          <a accesskey="4" href="/projects/exiv2/search">Search</a>:
        </label>
        <input type="text" name="q" id="q" size="20" class="small" accesskey="f" />
</form>        <div id="project-jump" class="drdn"><span class="drdn-trigger">Exiv2</span><div class="drdn-content"><div class="quick-search"><input type="text" name="q" id="projects-quick-search" value="" class="autocomplete" data-automcomplete-url="/projects/autocomplete.js?jump=boards" autocomplete="off" /></div><div class="drdn-items projects selection"></div><div class="drdn-items all-projects selection"><a href="/projects?jump=boards">All Projects</a></div></div></div>
    </div>

    <h1><span class="current-project">Exiv2</span></h1>

    <div id="main-menu" class="tabs">
        <ul><li><a class="overview" href="/projects/exiv2">Overview</a></li><li><a class="activity" href="/projects/exiv2/activity">Activity</a></li><li><a class="roadmap" href="/projects/exiv2/roadmap">Roadmap</a></li><li><a class="issues" href="/projects/exiv2/issues">Issues</a></li><li><a class="news" href="/projects/exiv2/news">News</a></li><li><a class="wiki" href="/projects/exiv2/wiki">Wiki</a></li><li><a class="boards selected" href="/projects/exiv2/boards">Forums</a></li><li><a class="repository" href="/projects/exiv2/repository">Repository</a></li></ul>
        <div class="tabs-buttons" style="display:none;">
            <button class="tab-left" onclick="moveTabLeft(this); return false;"></button>
            <button class="tab-right" onclick="moveTabRight(this); return false;"></button>
        </div>
    </div>
</div>

<div id="main" class="nosidebar">
    <div id="sidebar">
        
        
    </div>

    <div id="content">
        
        <p class="breadcrumb"><a href="/projects/exiv2/boards">Forums</a> » <a href="/projects/exiv2/boards/3">Forum</a> » </p>

<div class="contextual">
    
    
    
    
</div>

<h2>Linking with Cygwin and Qt issue</h2>

<div class="message">
<p><span class="author">Added by <a class="user active" href="/users/3670">Dominik Pietrzak</a> <a title="05 Nov 2012 05:37" href="/projects/exiv2/activity?from=2012-11-05">about 9 years</a> ago</span></p>
<div class="wiki">
<p>Dear all,</p>


	<p>Is it possible to link Exiv2 library with Qt under Cygwin<br />I have read the following manual:<br /><a class="external" href="http://clanmills.com/exiv2/cygwin.shtml">http://clanmills.com/exiv2/cygwin.shtml</a><br />It describes building  under Cygwin. Now it would be very nice if we could link against Qt...<br />Did anyone tried/managed to do this?</p>


	<p>Maybe you could give me some advices how should I proceed in order to obtain such operation?</p>


	<p>Even better, is it possible to build static library under Windows so we could have <strong>exiv2.lib</strong> file? (that would solve most of the painful linking problems, I guess)</p>
</div>

</div>
<br />

<div id="replies">
<h3 class="comments icon icon-comments">Replies (4)</h3>
  <div class="message reply" id="message-1300">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/1299?r=1300#message-1300">RE: Linking with Cygwin and Qt issue</a>
    -
    Added by <a class="user active" href="/users/119">Robin Mills</a> <a title="05 Nov 2012 09:46" href="/projects/exiv2/activity?from=2012-11-05">about 9 years</a> ago
  </h4>
  <div class="wiki"><p>Dominick</p>


	<p>I wrote an article about this a couple of years ago:<br /><a class="external" href="http://clanmills.com/exiv2/qt.shtml">http://clanmills.com/exiv2/qt.shtml</a></p>


	<p>I could only get this to work using MinGW.  I said:</p>


<blockquote>

	<p>_Mac and Linux will link "out of the box". Windows appears to require the MinGW build. Cygwin does not seem to work. Cygwin will successfully link, however your executable will be unable to open any image in the exiv2 library thus rendering your executable impotent.</p>


</blockquote>

	<p>_</p>


	<p>Recently, somebody post the following "Success: sharing the process of compiling the latest Exiv2 on Win7 (MinGW) + linking from Qt" on the Forum:<br /><a class="external" href="http://dev.exiv2.org/boards/3/topics/1259">http://dev.exiv2.org/boards/3/topics/1259</a></p>


	<p>I successfully used the Qt DevStudio Plugin on a project that didn't use exiv2.  I don't see any reason why you can't link Qt/Exiv2 with DevStudio.  You will have to build exiv2 with DevStudio.</p>


	<p>I think you should be able to define the GCC toolchain correctly in Qt/Creator and link the cygwin built libexiv2.a.  Just because I gave up on this doesn't mean it is impossible.  I successfully adopted the MinGW road.  However given more tenacity, it should work.  It might be that something simple like linking cygwin1.dll is required. You could ask on a Qt Forum about linking with libraries built with Cygwin built libraries.</p>


	<p>Robin</p></div>
  
  </div>
  <div class="message reply" id="message-1301">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/1299?r=1301#message-1301">RE: Linking with Cygwin and Qt issue</a>
    -
    Added by <a class="user active" href="/users/119">Robin Mills</a> <a title="05 Nov 2012 11:43" href="/projects/exiv2/activity?from=2012-11-05">about 9 years</a> ago
  </h4>
  <div class="wiki"><p>Dominik</p>


	<p>You can build and link static exiv2 libraries as follows:<br /><pre>
$ cd &lt;exiv2dir&gt;
$ make config 
$ ./configure --disable-shared --enable-static  
$ make
$ find . -name "*.a" -exec ls -alt {} \;
-rw-r--r-- 1 rmills Domain Users 4851224 Nov  5 11:29 ./src/.libs/libexiv2.a          &lt;--- Here's your library
-rw-r--r-- 1 rmills Domain Users 531236 Nov  5 11:28 ./xmpsdk/src/.libs/libxmpsdk.a

$ find . -name exiv2.exe -exec ls -alt {} \;
-rwxr-xr-x 1 rmills None 3650263 Nov  5 11:29 ./bin/exiv2.exe  &lt;--- here's exiv2.exe statically linked
</pre></p>


	<p>This will use the shared library version of expat, zlib and some other libraries.  You can see this in a couple of ways:</p>


	<p>$ bin/exiv2.exe -v -V       # --verbose --Version <br />... will list build information and show you the libraries loaded in memory<br />exiv2 -v -V option is new for 0.24, so is only available at present by building from the the trunk.</p>


	<p>$ cygcheck bin/exiv2<br />... will reveal information about cygwin's view of your executable</p>


	<p>If you want to link with static versions of expat and zlib, you can build those from source and exiv2.exe will link them.  However I've never been suspicious of linking with the shared versions of expat and zlib which are installed by cygwin.</p>


<pre>
$ bin/exiv2.exe -v -V
exiv2 0.23 001700 (32 bit build)
...
GCC=4.5.3,DEBUG=0,DLL=0,Bits=4: module=C:\Users\rmills\gnu\exiv2\test.cmake\bin\exiv2.exe
GCC=4.5.3,DEBUG=0,DLL=0,Bits=4: module=C:\Windows\SysWOW64\ntdll.dll
GCC=4.5.3,DEBUG=0,DLL=0,Bits=4: module=C:\Windows\syswow64\kernel32.dll
GCC=4.5.3,DEBUG=0,DLL=0,Bits=4: module=C:\Windows\syswow64\KERNELBASE.dll
GCC=4.5.3,DEBUG=0,DLL=0,Bits=4: module=C:\cygwin\bin\cygwin1.dll
GCC=4.5.3,DEBUG=0,DLL=0,Bits=4: module=C:\cygwin\bin\cyggcc_s-1.dll
GCC=4.5.3,DEBUG=0,DLL=0,Bits=4: module=C:\cygwin\bin\cygstdc++-6.dll
GCC=4.5.3,DEBUG=0,DLL=0,Bits=4: module=C:\Windows\syswow64\PSAPI.DLL
GCC=4.5.3,DEBUG=0,DLL=0,Bits=4: module=C:\cygwin\usr\local\bin\cygexpat-1.dll
GCC=4.5.3,DEBUG=0,DLL=0,Bits=4: module=C:\cygwin\usr\local\bin\cygiconv-2.dll
GCC=4.5.3,DEBUG=0,DLL=0,Bits=4: module=C:\cygwin\usr\local\bin\cygintl-8.dll
builder=GCC=4.5.3,DEBUG=0,DLL=0,Bits=4:
GCC=4.5.3,DEBUG=0,DLL=0,Bits=4: executable=C:\Users\rmills\gnu\exiv2\test.cmake\bin\exiv2.exe
GCC=4.5.3,DEBUG=0,DLL=0,Bits=4: date="Nov  5 2012",time=11:29:14

$ cygcheck bin/exiv2.exe
C:\Users\rmills\gnu\exiv2\test.cmake\bin\exiv2.exe
  C:\cygwin\bin\cygwin1.dll
    C:\Windows\system32\KERNEL32.dll
      C:\Windows\system32\API-MS-Win-Core-RtlSupport-L1-1-0.dll
      C:\Windows\system32\ntdll.dll
      C:\Windows\system32\KERNELBASE.dll
      C:\Windows\system32\API-MS-Win-Core-ProcessThreads-L1-1-0.dll
      ...
  C:\cygwin\bin\cyggcc_s-1.dll
  C:\cygwin\bin\cygstdc++-6.dll
  C:\Windows\system32\PSAPI.DLL
  C:\cygwin\usr\local\bin\cygexpat-1.dll
  C:\cygwin\usr\local\bin\cygiconv-2.dll
  C:\cygwin\usr\local\bin\cygintl-8.dll
$
</pre></div>
  
  </div>
  <div class="message reply" id="message-1302">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/1299?r=1302#message-1302">RE: Linking with Cygwin and Qt issue</a>
    -
    Added by <a class="user active" href="/users/119">Robin Mills</a> <a title="06 Nov 2012 17:32" href="/projects/exiv2/activity?from=2012-11-06">about 9 years</a> ago
  </h4>
  <div class="wiki"><p>Dominik</p>


	<p>I was a little bored at work today while waiting for builds and went to look at the Qt Website.  Qt appear to provide Windows support with DevStudio (various editions) and MinGW.  They don't appear to offer Cygwin support.  The exiv2 library (and sample applications) are supported on MingW/Linux/MSVC/Cygwin (and more platforms using CMake).</p>


	<p>So, I'm puzzled.  Qt/MinGW/exiv2 and Qt/MSVC/exiv2 work, supported and are documented.  Why are you asking about exiv2/qt/cygwin support when the obstacle is Qt and not exiv2?</p>


	<p>Robin</p></div>
  
  </div>
  <div class="message reply" id="message-1303">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/1299?r=1303#message-1303">RE: Linking with Cygwin and Qt issue</a>
    -
    Added by <a class="user active" href="/users/3670">Dominik Pietrzak</a> <a title="08 Nov 2012 05:50" href="/projects/exiv2/activity?from=2012-11-08">about 9 years</a> ago
  </h4>
  <div class="wiki"><p>Dear Robin,<br />thank you again for the involvement.<br />You are totally right it is a problem Qt and Cygwin, NOT Exiv2 and Cygwin :)<br />Sorry for bothering.</p></div>
  
  </div>
</div>
<span class="pagination"><ul class="pages"></ul><span><span class="items">(1-4/4)</span> </span></span>



        
        <div style="clear:both;"></div>
    </div>
</div>
</div>

<div id="ajax-indicator" style="display:none;"><span>Loading...</span></div>
<div id="ajax-modal" style="display:none;"></div>

<div id="footer">
  <div class="bgl"><div class="bgr">
    Powered by <a href="https://www.redmine.org/">Redmine</a> &copy; 2006-2018 Jean-Philippe Lang
  </div></div>
</div>
</div>
</div>

</body>
</html>
