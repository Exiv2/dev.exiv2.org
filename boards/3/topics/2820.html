<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<title>lens Pentax HD 18-50 RE not in Photo.LensModel tag - Exiv2</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="description" content="Redmine" />
<meta name="keywords" content="issue,bug,tracker" />
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="2di4WV0iibr9nOgD5LA69qshDg3UUgaGPtb92Zl3VAQ7lRO2L1hFuqj49w9bZzbFlLNadCWxpzzD9m1R2k6zaw==" />
<link rel='shortcut icon' href='/favicon.ico?1550767427' />
<link rel="stylesheet" media="all" href="/stylesheets/jquery/jquery-ui-1.11.0.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/application.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/responsive.css?1550767427" />

<script src="/javascripts/jquery-1.11.1-ui-1.11.0-ujs-4.3.1.js?1550767427"></script>
<script src="/javascripts/application.js?1550767427"></script>
<script src="/javascripts/responsive.js?1550767427"></script>
<script>
//<![CDATA[
$(window).load(function(){ warnLeavingUnsaved('The current page contains unsaved text that will be lost if you leave this page.'); });
//]]>
</script>


<!-- page specific tags -->
</head>
<body class="project-exiv2 has-main-menu controller-messages action-show avatars-off">

<div id="wrapper">

<div class="flyout-menu js-flyout-menu">


        <div class="flyout-menu__search">
            <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
            <input type="hidden" name="messages" value="1" />
            <label class="search-magnifier search-magnifier--flyout" for="flyout-search">&#9906;</label>
            <input type="text" name="q" id="flyout-search" class="small js-search-input" placeholder="Search" />
</form>        </div>


        <h3>Project</h3>
        <span class="js-project-menu"></span>

    <h3>General</h3>
    <span class="js-general-menu"></span>

    <span class="js-sidebar flyout-menu__sidebar"></span>

    <h3>Profile</h3>
    <span class="js-profile-menu"></span>

</div>

<div id="wrapper2">
<div id="wrapper3">
<div id="top-menu">
    <div id="account">
        <ul><li><a class="login" href="/login">Sign in</a></li></ul>    </div>
    
    <ul><li><a class="home" href="/">Home</a></li><li><a class="projects" href="/projects">Projects</a></li><li><a class="help" href="https://www.redmine.org/guide">Help</a></li></ul></div>

<div id="header">

    <a href="#" class="mobile-toggle-button js-flyout-menu-toggle-button"></a>

    <div id="quick-search">
        <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
        <input type="hidden" name="scope" />
        <input type="hidden" name="messages" value="1" />
        <label for='q'>
          <a accesskey="4" href="/projects/exiv2/search">Search</a>:
        </label>
        <input type="text" name="q" id="q" size="20" class="small" accesskey="f" />
</form>        <div id="project-jump" class="drdn"><span class="drdn-trigger">Exiv2</span><div class="drdn-content"><div class="quick-search"><input type="text" name="q" id="projects-quick-search" value="" class="autocomplete" data-automcomplete-url="/projects/autocomplete.js?jump=boards" autocomplete="off" /></div><div class="drdn-items projects selection"></div><div class="drdn-items all-projects selection"><a href="/projects?jump=boards">All Projects</a></div></div></div>
    </div>

    <h1><span class="current-project">Exiv2</span></h1>

    <div id="main-menu" class="tabs">
        <ul><li><a class="overview" href="/projects/exiv2">Overview</a></li><li><a class="activity" href="/projects/exiv2/activity">Activity</a></li><li><a class="roadmap" href="/projects/exiv2/roadmap">Roadmap</a></li><li><a class="issues" href="/projects/exiv2/issues">Issues</a></li><li><a class="news" href="/projects/exiv2/news">News</a></li><li><a class="wiki" href="/projects/exiv2/wiki">Wiki</a></li><li><a class="boards selected" href="/projects/exiv2/boards">Forums</a></li><li><a class="repository" href="/projects/exiv2/repository">Repository</a></li></ul>
        <div class="tabs-buttons" style="display:none;">
            <button class="tab-left" onclick="moveTabLeft(this); return false;"></button>
            <button class="tab-right" onclick="moveTabRight(this); return false;"></button>
        </div>
    </div>
</div>

<div id="main" class="nosidebar">
    <div id="sidebar">
        
        
    </div>

    <div id="content">
        
        <p class="breadcrumb"><a href="/projects/exiv2/boards">Forums</a> » <a href="/projects/exiv2/boards/3">Forum</a> » </p>

<div class="contextual">
    
    
    
    
</div>

<h2>lens Pentax HD 18-50 RE not in Photo.LensModel tag</h2>

<div class="message">
<p><span class="author">Added by <a class="user active" href="/users/5087">J M</a> <a title="19 Mar 2017 17:56" href="/projects/exiv2/activity?from=2017-03-19">over 4 years</a> ago</span></p>
<div class="wiki">
<p>Hi,</p>


	<p>I use a Pentax camera with the 18-50 HD RE lens.<br />Here are exif data issued from exiv2 -pt:<br />Exif.Image.NewSubfileType                    Long        1  Thumbnail/Preview image<br />Exif.Image.ImageWidth                        Long        1  160<br />Exif.Image.ImageLength                       Long        1  120<br />Exif.Image.BitsPerSample                     Short       3  8 8 8<br />Exif.Image.Compression                       Short       1  Non compressé<br />Exif.Image.PhotometricInterpretation         Short       1  RGB<br />Exif.Image.Make                              Ascii      20  PENTAX             <br />Exif.Image.Model                             Ascii      20  PENTAX K-01        <br />Exif.Image.StripOffsets                      Long        1  104480<br />Exif.Image.Orientation                       Short       1  haut, gauche<br />Exif.Image.SamplesPerPixel                   Short       1  3<br />Exif.Image.RowsPerStrip                      Long        1  120<br />Exif.Image.StripByteCounts                   Long        1  57600<br />Exif.Image.XResolution                       Rational    1  300<br />Exif.Image.YResolution                       Rational    1  300<br />Exif.Image.PlanarConfiguration               Short       1  1<br />Exif.Image.ResolutionUnit                    Short       1  Pouce<br />Exif.Image.Software                          Ascii      24  K-01 Ver 1.05          <br />Exif.Image.DateTime                          Ascii      20  2017:03:19 18:40:34<br />Exif.Image.SubIFDs                           Long        2  103370 103776<br />Exif.SubImage1.NewSubfileType                Long        1  Primary image<br />Exif.SubImage1.ImageWidth                    Long        1  4960<br />Exif.SubImage1.ImageLength                   Long        1  3300<br />Exif.SubImage1.BitsPerSample                 Short       1  12<br />Exif.SubImage1.Compression                   Short       1  JPEG<br />Exif.SubImage1.PhotometricInterpretation     Short       1  Matrice de filtre de couleur<br />Exif.SubImage1.StripOffsets                  Long        1  162080<br />Exif.SubImage1.SamplesPerPixel               Short       1  1<br />Exif.SubImage1.RowsPerStrip                  Long        1  3300<br />Exif.SubImage1.StripByteCounts               Long        1  11009939<br />Exif.SubImage1.XResolution                   Rational    1  300<br />Exif.SubImage1.YResolution                   Rational    1  300<br />Exif.SubImage1.PlanarConfiguration           Short       1  1<br />Exif.SubImage1.ResolutionUnit                Short       1  Pouce<br />Exif.SubImage1.CFARepeatPatternDim           Short       2  2 2<br />Exif.SubImage1.CFAPattern                    Byte        4  0 1 1 2<br />Exif.SubImage1.CFALayout                     Short       1  Rectangular (or square) layout<br />Exif.SubImage1.BlackLevelRepeatDim           Short       2  2 2<br />Exif.SubImage1.BlackLevel                    Long        4  0 0 0 0<br />Exif.SubImage1.WhiteLevel                    Long        1  4078<br />Exif.SubImage1.DefaultScale                  Rational    2  1/1 1/1<br />Exif.SubImage1.DefaultCropOrigin             Long        2  4 4<br />Exif.SubImage1.DefaultCropSize               Long        2  4928 3264<br />Exif.SubImage1.BayerGreenSplit               Long        1  0<br />Exif.SubImage1.AntiAliasStrength             Rational    1  1/1<br />Exif.SubImage1.ActiveArea                    Long        4  20 8 3292 4944<br />Exif.SubImage2.NewSubfileType                Long        1  Thumbnail/Preview image<br />Exif.SubImage2.ImageWidth                    Long        1  4928<br />Exif.SubImage2.ImageLength                   Long        1  3264<br />Exif.SubImage2.BitsPerSample                 Short       3  8 8 8<br />Exif.SubImage2.Compression                   Short       1  JPEG<br />Exif.SubImage2.PhotometricInterpretation     Short       1  YCbCr<br />Exif.SubImage2.StripOffsets                  Long        1  11172032<br />Exif.SubImage2.SamplesPerPixel               Short       1  3<br />Exif.SubImage2.RowsPerStrip                  Long        1  3264<br />Exif.SubImage2.StripByteCounts               Long        1  1133824<br />Exif.SubImage2.XResolution                   Rational    1  300<br />Exif.SubImage2.YResolution                   Rational    1  300<br />Exif.SubImage2.PlanarConfiguration           Short       1  1<br />Exif.SubImage2.ResolutionUnit                Short       1  Pouce<br />Exif.SubImage2.WhitePoint                    Rational    2  313/1000 329/1000<br />Exif.SubImage2.PrimaryChromaticities         Rational    6  64/100 33/100 30/100 60/100 15/100 6/100<br />Exif.SubImage2.YCbCrCoefficients             Rational    3  299/1000 587/1000 114/1000<br />Exif.SubImage2.YCbCrSubSampling              Short       2  2 1<br />Exif.SubImage2.YCbCrPositioning              Short       1  Co-sited<br />Exif.Image.Copyright                         Ascii      14  Julien MOREAU<br />Exif.Image.ExifTag                           Long        1  104122<br />Exif.Photo.ExposureTime                      Rational    1  1.6 s<br />Exif.Photo.FNumber                           Rational    1  F6.3<br />Exif.Photo.ExposureProgram                   Short       1  Priorité ouverture<br />Exif.Photo.ISOSpeedRatings                   Short       1  100<br />Exif.Photo.DateTimeOriginal                  Ascii      20  2017:03:19 18:40:34<br />Exif.Photo.DateTimeDigitized                 Ascii      20  2017:03:19 18:40:34<br />Exif.Photo.ExposureBiasValue                 SRational   1  0 EV<br />Exif.Photo.MeteringMode                      Short       1  Multi-segments<br />Exif.Photo.Flash                             Short       1  Non, inhibé<br />Exif.Photo.FocalLength                       Rational    1  39.0 mm<br />Exif.Photo.SensingMethod                     Short       1  Mono-CCD<br />Exif.Photo.CustomRendered                    Short       1  Processus normal<br />Exif.Photo.ExposureMode                      Short       1  Automatique<br />Exif.Photo.WhiteBalance                      Short       1  Manuel<br />Exif.Photo.FocalLengthIn35mmFilm             Short       1  58.0 mm<br />Exif.Photo.SceneCaptureType                  Short       1  Standard<br />Exif.Photo.Contrast                          Short       1  Dur<br />Exif.Photo.Saturation                        Short       1  Élevée<br />Exif.Photo.Sharpness                         Short       1  Dur<br />Exif.Photo.SubjectDistanceRange              Short       1  Plan large<br />Exif.Image.GPSTag                            Long        1  104440<br />Exif.GPSInfo.GPSVersionID                    Byte        4  2.3.0.0<br />Exif.Image.DNGVersion                        Byte        4  1 1 0 0<br />Exif.Image.DNGBackwardVersion                Byte        4  1 1 0 0<br />Exif.Image.UniqueCameraModel                 Ascii      12  PENTAX K-01<br />Exif.Image.ColorMatrix1                      SRational   9  64609/65536 -32000/65536 -5299/65536 -22911/65536 64449/65536 28093/65536 -1175/65536 2455/65536 44907/65536<br />Exif.Image.ColorMatrix2                      SRational   9  55672/65536 -16824/65536 -7456/65536 -26184/65536 80617/65536 12325/65536 -6455/65536 11315/65536 43018/65536<br />Exif.Image.AnalogBalance                     Rational    3  256/256 256/256 256/256<br />Exif.Image.AsShotNeutral                     Rational    3  256/593 256/256 256/351<br />Exif.Image.BaselineExposure                  SRational   1  -33194/65536<br />Exif.Image.BaselineNoise                     Rational    1  1/1<br />Exif.Image.BaselineSharpness                 Rational    1  1/1<br />Exif.Image.LinearResponseLimit               Rational    1  1/1<br />Exif.Image.DNGPrivateData                    Byte      102400  (Valeur binaire supprimée)<br />Exif.MakerNote.Offset                        Long        1  894<br />Exif.MakerNote.ByteOrder                     Ascii       3  MM<br />Exif.PentaxDng.Version                       Byte        4  9.0.0.0<br />Exif.PentaxDng.Mode                          Short       1  Automatique<br />Exif.PentaxDng.PreviewResolution             Short       2  640x480<br />Exif.PentaxDng.PreviewLength                 Long        1  36530<br />Exif.PentaxDng.PreviewOffset                 Long        1  32258<br />Exif.PentaxDng.ModelID                       Long        1  K-01<br />Exif.PentaxDng.Date                          Undefined   4  2017:03:19<br />Exif.PentaxDng.Time                          Undefined   3  18:40:34<br />Exif.PentaxDng.Quality                       Short       1  BRUT<br />Exif.PentaxDng.Flash                         Short       2  Off, Did not fire<br />Exif.PentaxDng.Focus                         Short       1  Manuel<br />Exif.PentaxDng.AFPoint                       Short       1  Aucun<br />Exif.PentaxDng.ExposureTime                  Long        1  1600 ms<br />Exif.PentaxDng.FNumber                       Short       1  F6.3<br />Exif.PentaxDng.ISO                           Short       1  100<br />Exif.PentaxDng.ExposureCompensation          SShort      1  0 EV<br />Exif.PentaxDng.MeteringMode                  Short       1  Multi-segments<br />Exif.PentaxDng.AutoBracketing                Short       2  0 EV (No extended bracketing)<br />Exif.PentaxDng.WhiteBalance                  Short       1  Nuageux<br />Exif.PentaxDng.FocalLength                   Long        1  39.0 mm<br />Exif.PentaxDng.Saturation                    Short       1  Plutôt élevé<br />Exif.PentaxDng.Contrast                      Short       1  Élevée<br />Exif.PentaxDng.Sharpness                     Short       1  Plutôt dur<br />Exif.PentaxDng.DSPFirmwareVersion            Undefined   4  254 250 231 239<br />Exif.PentaxDng.EffectiveLV                   Short       1  4736<br />Exif.PentaxDng.PictureMode                   Byte        3  Priorité ouverture<br />Exif.PentaxDng.DriveMode                     Byte        4  Single-frame<br />Exif.PentaxDng.ColorSpace                    Short       1  sRGB<br />Exif.PentaxDng.ImageAreaOffset               Short       2  8 20<br />Exif.PentaxDng.RawImageSize                  Short       2  4936 3272<br />Exif.PentaxDng.PreviewImageBorders           Byte        4  28 28 0 0<br />Exif.PentaxDng.LensType                      Byte        4  HD PENTAX-DA 18-50mm F4-5.6 DC WR RE<br />Exif.PentaxDng.Temperature                   SByte       1  36 C<br />Exif.PentaxDng.AELock                        Short       1  Désactivé<br />Exif.PentaxDng.NoiseReduction                Short       1  Désactivé<br />Exif.PentaxDng.FlashExposureCompensation     SLong       1  -1 EV<br />Exif.PentaxDng.ImageTone                     Short       1  Bright<br />Exif.PentaxDng.ShakeReduction                Byte        4  0 5 0 78<br />Exif.PentaxDng.ShutterCount                  Undefined   4  234 54 255 11<br />Exif.PentaxDng.DynamicRangeExpansion         Undefined   4  Désactivé<br />Exif.PentaxDng.HighISONoiseReduction         Byte        2  Désactivé<br />Exif.PentaxDng.BlackPoint                    Short       4  0 0 0 0<br />Exif.PentaxDng.WhitePoint                    Short       4  18976 8192 8192 11232<br />Exif.PentaxDng.ShotInfo                      Undefined  25  5 0 0 10 0 0 0 0 32 0 24 0 0 0 0 116 111 32 64 7 0 0 2 112 0<br />Exif.PentaxDng.AEInfo                        Undefined  21  77 77 62 111 32 64 0 248 64 0 2 6 0 0 0 0 104 105 144 164 2<br />Exif.PentaxDng.LensInfo                      Undefined  80  0 184 48 98 0 199 0 0 0 0 0 0 0 0 0 0 40 86 27 0 180 37 149 32 252 153 88 52 1 75 116 251 255 255 255 199 33 181 38 147 0 154 200 0 0 0 32 0 191 189 199 248 0 0 0 48 127 14 0 0 193 0 0 0 3 239 168 8 192 103 240 21 234 3 133 0 0 0 0 3<br />Exif.PentaxDng.FlashInfo                     Undefined  32  0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 10 15 63 0 0 0 0 0 0 0 0 0 0 0 0 0<br />Exif.PentaxDng.CameraInfo                    Long        5  77560 20120505 2 1 7010437<br />Exif.PentaxDng.BatteryInfo                   Undefined  18  242 80 3 58 3 38 0 0 0 0 0 0 0 0 0 0 0 0<br />Exif.PentaxDng.AFInfo                        Undefined  20  0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0<br />Exif.PentaxDng.ColorInfo                     Undefined  18  32 131 31 100 31 125 32 156 33 72 32 246 31 51 31 10 0 0<br />Exif.PentaxDng.SerialNumber                  Ascii      20  4328339<br />Exif.Image.CalibrationIlluminant1            Short       1  17<br />Exif.Image.CalibrationIlluminant2            Short       1  21</p>


	<p>We can see that no Exif.Photo.LensModel exist, but the information can be found in specific Pentax tag Exif.PentaxDng.LensType (and value is HD PENTAX-DA 18-50mm F4-5.6 DC WR RE).<br />Why is it not duplicated in Exif.Photo.LensModel tag?<br />Shall I ask for an issue for Exiv2?<br />Or if I write code based on Exiv2 to find the lens model, I need to do specific search for manufacturers special tags?</p>


	<p>Thanks</p>
</div>

</div>
<br />

<div id="replies">
<h3 class="comments icon icon-comments">Replies (2)</h3>
  <div class="message reply" id="message-2821">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/2820?r=2821#message-2821">RE: lens Pentax HD 18-50 RE not in Photo.LensModel tag</a>
    -
    Added by <a class="user active" href="/users/119">Robin Mills</a> <a title="19 Mar 2017 21:12" href="/projects/exiv2/activity?from=2017-03-19">over 4 years</a> ago
  </h4>
  <div class="wiki"><p>JM:</p>


	<p>Can you attach your file to this issue please.</p>


	<p>There are a several Exif tags involved <a class="external" href="http://www.exiv2.org/tags.html">http://www.exiv2.org/tags.html</a> :<pre>
0xa433    42035    Photo    Exif.Photo.LensMake    Ascii    This tag records the lens manufactor as an ASCII string.
0xa434    42036    Photo    Exif.Photo.LensModel    Ascii    This tag records the lens's model name and model number as an ASCII string.
</pre>These tags have not been defined in your file.</p>


	<p>However, the lens is defined here: <pre>Exif.PentaxDng.LensType Byte 4 HD PENTAX-DA 18-50mm F4-5.6 DC WR RE</pre>I cannot find documentation for PentaxDng.  It's not on <a class="external" href="http://exiv2.org">http://exiv2.org</a> nor <a class="external" href="http://www.sno.phy.queensu.ca/~phil/exiftool/">http://www.sno.phy.queensu.ca/~phil/exiftool/</a>  The code defining those tags is stored in pentaxmn.cpp:<pre>     const TagInfo PentaxMakerNote::tagInfo_[]</pre></p>


	<p>So the answer to your question: <em>"why is it not duplicated in "Exif.Photo.LensModel?"</em>, it is because Exiv2 reports what it finds in the file and does not manufacture data.</p>


	<p>If the tags Exif.Photo.LensMake and Exif.Photo.LensModel are important to your work flow, you can easily write a bash script to create this data in your images in your library.</p>


	<p>It would be possible to add a function to pentaxmn.cpp (or more likely to tiffimage.cpp) to create "Exif.Photo.LensModel" and add it to the metadata.  This code doesn't exist because I don't believe this has ever been discussed!  Exif.PentaxDng.LensType is stored in Exif.Photo.MakerNote which is TIFF formatted data.  The class TiffVisitor parses embedded TIFF data.  You should discover the function that is called by TiffVisitor when PentaxDng.LensType is encountered.  At that moment, you should create Exif.Photo.LensModel and you're done.  Please note that Exif.PentaxDng.LensType is a 4 byte integer and tags Exif.Photo.LensModel and Exif.Photo.LensType are strings.</p>


	<p>If you'd like to submit a patch for this, I'll be happy to review and submit.  We're in the final steps of releasing Exiv2 v0.26, so this feature won't appear until v0.27.  If you need assistance/mentoring with the patch, I'll be happy to help you once v0.26 has been released.  However, I hope you'll prefer (and accept) my explanation that Exiv2 doesn't manufacture data.</p></div>
  
  </div>
  <div class="message reply" id="message-2822">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/2820?r=2822#message-2822">RE: lens Pentax HD 18-50 RE not in Photo.LensModel tag</a>
    -
    Added by <a class="user active" href="/users/5087">J M</a> <a title="22 Mar 2017 20:22" href="/projects/exiv2/activity?from=2017-03-22">over 4 years</a> ago
  </h4>
  <div class="wiki"><p>Thanks for explanations.<br />I accept that Exiv2 does not create data, it reports what it finds.</p>


	<p>I added the original file in the case it may be useful for anybody.</p></div>
  <div class="attachments">
<div class="contextual">
  
</div>
<table>
<tr>
  <td>
    <a class="icon icon-attachment" href="/attachments/1146">IMGP1670.DNG</a>    <span class="size">(11.7 MB)</span>
    <a class="icon-only icon-download" title="Download" href="/attachments/download/1146/IMGP1670.DNG">IMGP1670.DNG</a>  </td>
  <td></td>
  <td>
  </td>
  <td>
  </td>
</tr>
</table>
</div>

  </div>
</div>
<span class="pagination"><ul class="pages"></ul><span><span class="items">(1-2/2)</span> </span></span>



        
        <div style="clear:both;"></div>
    </div>
</div>
</div>

<div id="ajax-indicator" style="display:none;"><span>Loading...</span></div>
<div id="ajax-modal" style="display:none;"></div>

<div id="footer">
  <div class="bgl"><div class="bgr">
    Powered by <a href="https://www.redmine.org/">Redmine</a> &copy; 2006-2018 Jean-Philippe Lang
  </div></div>
</div>
</div>
</div>

</body>
</html>
