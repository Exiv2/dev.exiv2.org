<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<title>MSVC 2003 internal compiler error - Exiv2</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="description" content="Redmine" />
<meta name="keywords" content="issue,bug,tracker" />
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="7faeFFbqhGOdCHcCf/YtAEvOwesH3LH+BdXuHLN1334PuzX7JJBIY8hsaA7AISEzdFyVkvY/EET49X6U8Ew4EQ==" />
<link rel='shortcut icon' href='/favicon.ico?1550767427' />
<link rel="stylesheet" media="all" href="/stylesheets/jquery/jquery-ui-1.11.0.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/application.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/responsive.css?1550767427" />

<script src="/javascripts/jquery-1.11.1-ui-1.11.0-ujs-4.3.1.js?1550767427"></script>
<script src="/javascripts/application.js?1550767427"></script>
<script src="/javascripts/responsive.js?1550767427"></script>
<script>
//<![CDATA[
$(window).load(function(){ warnLeavingUnsaved('The current page contains unsaved text that will be lost if you leave this page.'); });
//]]>
</script>


<!-- page specific tags -->
</head>
<body class="project-exiv2 has-main-menu controller-messages action-show avatars-off">

<div id="wrapper">

<div class="flyout-menu js-flyout-menu">


        <div class="flyout-menu__search">
            <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
            <input type="hidden" name="messages" value="1" />
            <label class="search-magnifier search-magnifier--flyout" for="flyout-search">&#9906;</label>
            <input type="text" name="q" id="flyout-search" class="small js-search-input" placeholder="Search" />
</form>        </div>


        <h3>Project</h3>
        <span class="js-project-menu"></span>

    <h3>General</h3>
    <span class="js-general-menu"></span>

    <span class="js-sidebar flyout-menu__sidebar"></span>

    <h3>Profile</h3>
    <span class="js-profile-menu"></span>

</div>

<div id="wrapper2">
<div id="wrapper3">
<div id="top-menu">
    <div id="account">
        <ul><li><a class="login" href="/login">Sign in</a></li></ul>    </div>
    
    <ul><li><a class="home" href="/">Home</a></li><li><a class="projects" href="/projects">Projects</a></li><li><a class="help" href="https://www.redmine.org/guide">Help</a></li></ul></div>

<div id="header">

    <a href="#" class="mobile-toggle-button js-flyout-menu-toggle-button"></a>

    <div id="quick-search">
        <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
        <input type="hidden" name="scope" />
        <input type="hidden" name="messages" value="1" />
        <label for='q'>
          <a accesskey="4" href="/projects/exiv2/search">Search</a>:
        </label>
        <input type="text" name="q" id="q" size="20" class="small" accesskey="f" />
</form>        <div id="project-jump" class="drdn"><span class="drdn-trigger">Exiv2</span><div class="drdn-content"><div class="quick-search"><input type="text" name="q" id="projects-quick-search" value="" class="autocomplete" data-automcomplete-url="/projects/autocomplete.js?jump=boards" autocomplete="off" /></div><div class="drdn-items projects selection"></div><div class="drdn-items all-projects selection"><a href="/projects?jump=boards">All Projects</a></div></div></div>
    </div>

    <h1><span class="current-project">Exiv2</span></h1>

    <div id="main-menu" class="tabs">
        <ul><li><a class="overview" href="/projects/exiv2">Overview</a></li><li><a class="activity" href="/projects/exiv2/activity">Activity</a></li><li><a class="roadmap" href="/projects/exiv2/roadmap">Roadmap</a></li><li><a class="issues" href="/projects/exiv2/issues">Issues</a></li><li><a class="news" href="/projects/exiv2/news">News</a></li><li><a class="wiki" href="/projects/exiv2/wiki">Wiki</a></li><li><a class="boards selected" href="/projects/exiv2/boards">Forums</a></li><li><a class="repository" href="/projects/exiv2/repository">Repository</a></li></ul>
        <div class="tabs-buttons" style="display:none;">
            <button class="tab-left" onclick="moveTabLeft(this); return false;"></button>
            <button class="tab-right" onclick="moveTabRight(this); return false;"></button>
        </div>
    </div>
</div>

<div id="main" class="nosidebar">
    <div id="sidebar">
        
        
    </div>

    <div id="content">
        
        <p class="breadcrumb"><a href="/projects/exiv2/boards">Forums</a> » <a href="/projects/exiv2/boards/3">Forum</a> » </p>

<div class="contextual">
    
    
    
    
</div>

<h2>MSVC 2003 internal compiler error</h2>

<div class="message">
<p><span class="author">Added by <a class="user active" href="/users/318">Fulvio Senore</a> <a title="24 Dec 2010 07:07" href="/projects/exiv2/activity?from=2010-12-24">almost 11 years</a> ago</span></p>
<div class="wiki">
<p>I use Visual Studio 2003 and I have a program that uses exiv2 v0.19 without problems.</p>


	<p>Today I decided to test v0.21 and I was unable to build it. I get 3 error like the following:</p>


	<p>e:\C_Prg\exiv2-0.21\src\value.hpp(1234) : fatal error C1001: INTERNAL COMPILER ERROR</p>


	<p>when I compile exiv2lib. Moreover I had to define SUPPRESS_WARNINGS to avoid a lot of errors in TIFF handling files.</p>


	<p>Do you think that it will be possible to build exiv2 with VS 2003 again?</p>


	<p>Thanks in advance.</p>


	<p>Fulvio Senore</p>
</div>

</div>
<br />

<div id="replies">
<h3 class="comments icon icon-comments">Replies (12)</h3>
  <div class="message reply" id="message-731">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/730?r=731#message-731">RE: MSVC 2003 internal compiler error</a>
    -
    Added by <a class="user active" href="/users/133">Robin Mills</a> <a title="24 Dec 2010 08:45" href="/projects/exiv2/activity?from=2010-12-24">almost 11 years</a> ago
  </h4>
  <div class="wiki"><p>Fulvio</p>


	<p>You're right.  VS2003 dies on the code.  How odd.  Here's the message:</p>


	<p>c:\gnu.master\exiv2\src\value.hpp(1234) : fatal error C1001: INTERNAL COMPILER ERROR<br />        (compiler file 'msc1.cpp', line 2701) <br />         Please choose the Technical Support command on the Visual C++ <br />         Help menu, or open the Technical Support help file for more information</p>


	<p>I've recently created the directory msvc64 which contains the build environment for VS2005/08/10 and builds for both 32bit and 64bit.  Microsoft provide a free "Express" edition of Dev Studio.  Can you use msvc64+Express instead of VS2003 to build exiv2lib?  You should be able to build exiv2 with "Express" and link the binaries with VS2003 for your application development.</p>


	<p>Robin</p></div>
  
  </div>
  <div class="message reply" id="message-732">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/730?r=732#message-732">RE: MSVC 2003 internal compiler error</a>
    -
    Added by <a class="user active" href="/users/53">Andreas Huggel</a> <a title="24 Dec 2010 19:50" href="/projects/exiv2/activity?from=2010-12-24">almost 11 years</a> ago
  </h4>
  <div class="wiki"><p>I have to admit that I didn't test with VS2003 before releasing 0.21. Will see if I can revive my old laptop and find out what's wrong.</p>


	<p>Andreas</p></div>
  
  </div>
  <div class="message reply" id="message-734">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/730?r=734#message-734">RE: MSVC 2003 internal compiler error</a>
    -
    Added by <a class="user active" href="/users/133">Robin Mills</a> <a title="25 Dec 2010 03:12" href="/projects/exiv2/activity?from=2010-12-25">almost 11 years</a> ago
  </h4>
  <div class="wiki"><p>Andreas: Please don't spend time on this. I downloaded the free "Express" edition of DevStudio 2010 yesterday and built the libraries. I updated exiv2\msvc64\ReadMe.txt approporiately. Of course these notes are in SVN and not (yet) in the download.</p>


	<p>Fulvio: Are you happy?</p></div>
  
  </div>
  <div class="message reply" id="message-735">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/730?r=735#message-735">RE: MSVC 2003 internal compiler error</a>
    -
    Added by <a class="user active" href="/users/318">Fulvio Senore</a> <a title="25 Dec 2010 10:49" href="/projects/exiv2/activity?from=2010-12-25">almost 11 years</a> ago
  </h4>
  <div class="wiki"><p>Robin: I can build exiv2 with a newer version of the compiler, but I suppose that from VS2003 I will only be able to link to a DLL version of the library.<br />I don't think that it will be possible to link exiv2 statically, am I right? This means that I would have to ship a dll together with the program: not a big problem, but I'd rather link everything statically to have a single executable.</p>


	<p>I should have upgraded my copy of Visual Studio, but it looks like it is too late: I think that now it is only possible to buy VS 2010, but it creates programs that require at least Windows XP SP3. I'd rather create programs that run on older version of Windows. I should have bought VS 2008 when it was still available.</p>


	<p>I don't know what causes VS 2003 to fail, but if it were easy to fix I think that it would be nice to do it. Another advantage of VS 2003 shows up if you need to build the release version with the default setting that requires runtime DLLs. VS 2003 is the last version that does not require the Visual C++ redistributable to be installed to run the program. With VS 2003 it is enough to have the runtime DLLs in the same folder as the program.<br />This is useful for a program that you run from a memory stick on many computers, for example: those programs are not installed so you cannot be sure that the host computers have the runtime installed.<br />There are hacks to circumvent this problem, but they are hacks.</p>


	<p>Once I had the same problem in a program that uses boost smart pointers. I was able to solve it by splitting the source file in two different ones. It looks like VS 2003 cannot handle very complex situations when using templates, and splitting the file reduced the complexity of the compilation.</p>


	<p>Anyway, I realize that you probably do not have much free time so it is probably best to use it for other purposes.</p>


	<p>Fulvio</p></div>
  
  </div>
  <div class="message reply" id="message-736">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/730?r=736#message-736">RE: MSVC 2003 internal compiler error</a>
    -
    Added by <a class="user active" href="/users/133">Robin Mills</a> <a title="25 Dec 2010 13:34" href="/projects/exiv2/activity?from=2010-12-25">almost 11 years</a> ago
  </h4>
  <div class="wiki"><p>I think you'll be able to compile static libraries with VS2010 and link them from your VS2003 application.  Have you tried this?</p></div>
  
  </div>
  <div class="message reply" id="message-737">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/730?r=737#message-737">RE: MSVC 2003 internal compiler error</a>
    -
    Added by <a class="user active" href="/users/318">Fulvio Senore</a> <a title="25 Dec 2010 15:00" href="/projects/exiv2/activity?from=2010-12-25">almost 11 years</a> ago
  </h4>
  <div class="wiki"><p>That would surprise me. Compiled code calls a lot of helper functions in the C++ runtime code, and that code is likely to have changed from version to version.</p>


	<p>Anyway, I will try and I will report the result of the test.</p>


	<p>Fulvio</p></div>
  
  </div>
  <div class="message reply" id="message-738">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/730?r=738#message-738">RE: MSVC 2003 internal compiler error</a>
    -
    Added by <a class="user active" href="/users/53">Andreas Huggel</a> <a title="25 Dec 2010 15:31" href="/projects/exiv2/activity?from=2010-12-25">almost 11 years</a> ago
  </h4>
  <div class="wiki"><p>Can you try to pinpoint exactly where the errors occur for each type of problem (that within SUPPRESS_WARNINGS is probably always the same)? For starters list the line for each problem, like in the first post above.<br />Some changes in the code between 0.20 (which I believe had been tested with VS2003) and 0.21 apparently trigger these. We may be able to find workarounds for this code, that has happened before.</p>


	<p>Andreas</p></div>
  
  </div>
  <div class="message reply" id="message-739">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/730?r=739#message-739">RE: MSVC 2003 internal compiler error</a>
    -
    Added by <a class="user active" href="/users/318">Fulvio Senore</a> <a title="26 Dec 2010 07:05" href="/projects/exiv2/activity?from=2010-12-26">almost 11 years</a> ago
  </h4>
  <div class="wiki"><p>I installed an old VS 2008 trial and I built the library, then I linked that library to a VS 2003 program: the result was a lot of linker errors so mixing Visual Studio versions does not work for static linking.</p>


	<p>I downloaded version 0.20 and I can confirm that it compiles OK with VS 2003.</p>


	<p>Here is the full list of compilation errors, just let me know if you need more information or testing:</p>


	<p>value.cpp<br />e:\C_Prg\exiv2-0.21\src\value.hpp(1234) : fatal error C1001: INTERNAL COMPILER ERROR<br />        (compiler file 'msc1.cpp', line 2708) <br />         Please choose the Technical Support command on the Visual C++ <br />         Help menu, or open the Technical Support help file for more information<br />tiffvisitor.cpp<br />\C_Prg\exiv2-0.21\src\tiffvisitor.cpp(1348) : error C2678: binary '<<' : no operator found which takes a left-hand operand of type 'Exiv2::LogMsg' (or there is no acceptable conversion)<br />\C_Prg\exiv2-0.21\src\tiffvisitor.cpp(1358) : error C2678: binary '<<' : no operator found which takes a left-hand operand of type 'Exiv2::LogMsg' (or there is no acceptable conversion)<br />\C_Prg\exiv2-0.21\src\tiffvisitor.cpp(1374) : error C2678: binary '<<' : no operator found which takes a left-hand operand of type 'Exiv2::LogMsg' (or there is no acceptable conversion)<br />\C_Prg\exiv2-0.21\src\tiffvisitor.cpp(1469) : error C2678: binary '<<' : no operator found which takes a left-hand operand of type 'Exiv2::LogMsg' (or there is no acceptable conversion)<br />\C_Prg\exiv2-0.21\src\tiffvisitor.cpp(1481) : error C2678: binary '<<' : no operator found which takes a left-hand operand of type 'Exiv2::LogMsg' (or there is no acceptable conversion)<br />\C_Prg\exiv2-0.21\src\tiffvisitor.cpp(1498) : error C2678: binary '<<' : no operator found which takes a left-hand operand of type 'Exiv2::LogMsg' (or there is no acceptable conversion)<br />\C_Prg\exiv2-0.21\src\tiffvisitor.cpp(1512) : error C2678: binary '<<' : no operator found which takes a left-hand operand of type 'Exiv2::LogMsg' (or there is no acceptable conversion)<br />tiffcomposite.cpp<br />\C_Prg\exiv2-0.21\src\tiffcomposite.cpp(402) : error C2678: binary '<<' : no operator found which takes a left-hand operand of type 'Exiv2::LogMsg' (or there is no acceptable conversion)<br />\C_Prg\exiv2-0.21\src\tiffcomposite.cpp(411) : error C2678: binary '<<' : no operator found which takes a left-hand operand of type 'Exiv2::LogMsg' (or there is no acceptable conversion)<br />\C_Prg\exiv2-0.21\src\tiffcomposite.cpp(420) : error C2678: binary '<<' : no operator found which takes a left-hand operand of type 'Exiv2::LogMsg' (or there is no acceptable conversion)<br />\C_Prg\exiv2-0.21\src\tiffcomposite.cpp(439) : error C2678: binary '<<' : no operator found which takes a left-hand operand of type 'Exiv2::LogMsg' (or there is no acceptable conversion)<br />\C_Prg\exiv2-0.21\src\tiffcomposite.cpp(450) : error C2678: binary '<<' : no operator found which takes a left-hand operand of type 'Exiv2::LogMsg' (or there is no acceptable conversion)<br />\C_Prg\exiv2-0.21\src\tiffcomposite.cpp(469) : error C2678: binary '<<' : no operator found which takes a left-hand operand of type 'Exiv2::LogMsg' (or there is no acceptable conversion)<br />\C_Prg\exiv2-0.21\src\tiffcomposite.cpp(478) : error C2678: binary '<<' : no operator found which takes a left-hand operand of type 'Exiv2::LogMsg' (or there is no acceptable conversion)<br />\C_Prg\exiv2-0.21\src\tiffcomposite.cpp(495) : error C2678: binary '<<' : no operator found which takes a left-hand operand of type 'Exiv2::LogMsg' (or there is no acceptable conversion)<br />exif.cpp<br />e:\C_Prg\exiv2-0.21\src\value.hpp(1234) : fatal error C1001: INTERNAL COMPILER ERROR<br />        (compiler file 'msc1.cpp', line 2708) <br />         Please choose the Technical Support command on the Visual C++ <br />         Help menu, or open the Technical Support help file for more information<br />crwimage.cpp<br />e:\C_Prg\exiv2-0.21\src\value.hpp(1234) : fatal error C1001: INTERNAL COMPILER ERROR<br />        (compiler file 'msc1.cpp', line 2708) <br />         Please choose the Technical Support command on the Visual C++ <br />         Help menu, or open the Technical Support help file for more information</p></div>
  
  </div>
  <div class="message reply" id="message-740">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/730?r=740#message-740">RE: MSVC 2003 internal compiler error</a>
    -
    Added by <a class="user active" href="/users/53">Andreas Huggel</a> <a title="27 Dec 2010 09:53" href="/projects/exiv2/activity?from=2010-12-27">almost 11 years</a> ago
  </h4>
  <div class="wiki"><p>Added a simple workaround for the internal compiler issue with <a class="changeset" title="Split constructor into two as a workaround for a MSVC 7.1 bug." href="/projects/exiv2/repository/exiv2/revisions/2414">r2414</a>. The other one is a bit more tricky...</p>


	<p>Andreas</p></div>
  
  </div>
  <div class="message reply" id="message-741">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/730?r=741#message-741">RE: MSVC 2003 internal compiler error</a>
    -
    Added by <a class="user active" href="/users/318">Fulvio Senore</a> <a title="28 Dec 2010 09:39" href="/projects/exiv2/activity?from=2010-12-28">almost 11 years</a> ago
  </h4>
  <div class="wiki"><p>I checked out SVN trunk and I have been able to compile the library after defining SUPPRESS_WARNINGS.</p>


	<p>Thank you!</p>


	<p>Fulvio</p></div>
  
  </div>
  <div class="message reply" id="message-742">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/730?r=742#message-742">RE: MSVC 2003 internal compiler error</a>
    -
    Added by <a class="user active" href="/users/53">Andreas Huggel</a> <a title="28 Dec 2010 15:43" href="/projects/exiv2/activity?from=2010-12-28">almost 11 years</a> ago
  </h4>
  <div class="wiki"><p>Good! <a class="changeset" title="#476, #614: Simplified LogMsg. It&#39;s not quite as elegant as before anymore but should be much mor..." href="/projects/exiv2/repository/exiv2/revisions/2415">r2415</a> also makes changes to the logging class, I believe it is more portable now but haven't tried with MSVC 2003 yet. <br />Can you please svn update and try once more without SUPPRESS_WARNINGS?</p>


	<p>Andreas</p></div>
  
  </div>
  <div class="message reply" id="message-743">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/730?r=743#message-743">RE: MSVC 2003 internal compiler error</a>
    -
    Added by <a class="user active" href="/users/318">Fulvio Senore</a> <a title="29 Dec 2010 01:02" href="/projects/exiv2/activity?from=2010-12-29">almost 11 years</a> ago
  </h4>
  <div class="wiki"><p>I updated with svn and now I can compile without SUPPRESS_WARNING.</p>


	<p>Thank you for your quick help!</p>


	<p>Fulvio</p></div>
  
  </div>
</div>
<span class="pagination"><ul class="pages"></ul><span><span class="items">(1-12/12)</span> </span></span>



        
        <div style="clear:both;"></div>
    </div>
</div>
</div>

<div id="ajax-indicator" style="display:none;"><span>Loading...</span></div>
<div id="ajax-modal" style="display:none;"></div>

<div id="footer">
  <div class="bgl"><div class="bgr">
    Powered by <a href="https://www.redmine.org/">Redmine</a> &copy; 2006-2018 Jean-Philippe Lang
  </div></div>
</div>
</div>
</div>

</body>
</html>
