<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<title>Textcoding UCS2 Exif.Image.XP - Exiv2</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="description" content="Redmine" />
<meta name="keywords" content="issue,bug,tracker" />
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="9jZosHKIzxSmpfedE6qvG8+Bg2MvcOlJKw43ULrzIMMUe8NfAPIDFPPB6JGsfaMo8BPXGt6TSPPWLqfY+crHrA==" />
<link rel='shortcut icon' href='/favicon.ico?1550767427' />
<link rel="stylesheet" media="all" href="/stylesheets/jquery/jquery-ui-1.11.0.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/application.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/responsive.css?1550767427" />

<script src="/javascripts/jquery-1.11.1-ui-1.11.0-ujs-4.3.1.js?1550767427"></script>
<script src="/javascripts/application.js?1550767427"></script>
<script src="/javascripts/responsive.js?1550767427"></script>
<script>
//<![CDATA[
$(window).load(function(){ warnLeavingUnsaved('The current page contains unsaved text that will be lost if you leave this page.'); });
//]]>
</script>


<!-- page specific tags -->
</head>
<body class="project-exiv2 has-main-menu controller-messages action-show avatars-off">

<div id="wrapper">

<div class="flyout-menu js-flyout-menu">


        <div class="flyout-menu__search">
            <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
            <input type="hidden" name="messages" value="1" />
            <label class="search-magnifier search-magnifier--flyout" for="flyout-search">&#9906;</label>
            <input type="text" name="q" id="flyout-search" class="small js-search-input" placeholder="Search" />
</form>        </div>


        <h3>Project</h3>
        <span class="js-project-menu"></span>

    <h3>General</h3>
    <span class="js-general-menu"></span>

    <span class="js-sidebar flyout-menu__sidebar"></span>

    <h3>Profile</h3>
    <span class="js-profile-menu"></span>

</div>

<div id="wrapper2">
<div id="wrapper3">
<div id="top-menu">
    <div id="account">
        <ul><li><a class="login" href="/login">Sign in</a></li></ul>    </div>
    
    <ul><li><a class="home" href="/">Home</a></li><li><a class="projects" href="/projects">Projects</a></li><li><a class="help" href="https://www.redmine.org/guide">Help</a></li></ul></div>

<div id="header">

    <a href="#" class="mobile-toggle-button js-flyout-menu-toggle-button"></a>

    <div id="quick-search">
        <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
        <input type="hidden" name="scope" />
        <input type="hidden" name="messages" value="1" />
        <label for='q'>
          <a accesskey="4" href="/projects/exiv2/search">Search</a>:
        </label>
        <input type="text" name="q" id="q" size="20" class="small" accesskey="f" />
</form>        <div id="project-jump" class="drdn"><span class="drdn-trigger">Exiv2</span><div class="drdn-content"><div class="quick-search"><input type="text" name="q" id="projects-quick-search" value="" class="autocomplete" data-automcomplete-url="/projects/autocomplete.js?jump=boards" autocomplete="off" /></div><div class="drdn-items projects selection"></div><div class="drdn-items all-projects selection"><a href="/projects?jump=boards">All Projects</a></div></div></div>
    </div>

    <h1><span class="current-project">Exiv2</span></h1>

    <div id="main-menu" class="tabs">
        <ul><li><a class="overview" href="/projects/exiv2">Overview</a></li><li><a class="activity" href="/projects/exiv2/activity">Activity</a></li><li><a class="roadmap" href="/projects/exiv2/roadmap">Roadmap</a></li><li><a class="issues" href="/projects/exiv2/issues">Issues</a></li><li><a class="news" href="/projects/exiv2/news">News</a></li><li><a class="wiki" href="/projects/exiv2/wiki">Wiki</a></li><li><a class="boards selected" href="/projects/exiv2/boards">Forums</a></li><li><a class="repository" href="/projects/exiv2/repository">Repository</a></li></ul>
        <div class="tabs-buttons" style="display:none;">
            <button class="tab-left" onclick="moveTabLeft(this); return false;"></button>
            <button class="tab-right" onclick="moveTabRight(this); return false;"></button>
        </div>
    </div>
</div>

<div id="main" class="nosidebar">
    <div id="sidebar">
        
        
    </div>

    <div id="content">
        
        <p class="breadcrumb"><a href="/projects/exiv2/boards">Forums</a> » <a href="/projects/exiv2/boards/3">Forum</a> » </p>

<div class="contextual">
    
    
    
    
</div>

<h2>Textcoding UCS2 Exif.Image.XP</h2>

<div class="message">
<p><span class="author">Added by <a class="user active" href="/users/644">Ge Bu</a> <a title="21 May 2010 16:22" href="/projects/exiv2/activity?from=2010-05-21">over 11 years</a> ago</span></p>
<div class="wiki">
<p>Keys Exif.Image.XP (Author, Keywords, ...) use UCS2 encoding of text. Is it solved in exiv2? Is there any switch to set it? Is it possible non-ascii chars š, ž, ш, ч, ...?</p>
</div>

</div>
<br />

<div id="replies">
<h3 class="comments icon icon-comments">Replies (8)</h3>
  <div class="message reply" id="message-532">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/531?r=532#message-532">RE: Textcoding UCS2 Exif.Image.XP</a>
    -
    Added by <a class="user active" href="/users/133">Robin Mills</a> <a title="21 May 2010 17:05" href="/projects/exiv2/activity?from=2010-05-21">over 11 years</a> ago
  </h4>
  <div class="wiki"><p>Ge</p>


	<p>I believe exiv2 will handle Unicode.  However I'm going to leave Andreas to answer about this (and your other question).   I'm the windows (and mac) build engineer for the project.  Andreas lives in South East Asia and I'm sure he'll give you a reply when he gets out of bed.</p></div>
  
  </div>
  <div class="message reply" id="message-534">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/531?r=534#message-534">RE: Textcoding UCS2 Exif.Image.XP</a>
    -
    Added by <a class="user active" href="/users/644">Ge Bu</a> <a title="22 May 2010 05:52" href="/projects/exiv2/activity?from=2010-05-22">over 11 years</a> ago
  </h4>
  <div class="wiki"><p>I think, that exiv2 can correctly read UCS 2 in these keys, because I can see (display, print) what I set in Windows by Windows explorer. But I´m not able to correctly write.</p></div>
  
  </div>
  <div class="message reply" id="message-535">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/531?r=535#message-535">RE: Textcoding UCS2 Exif.Image.XP</a>
    -
    Added by <a class="user active" href="/users/53">Andreas Huggel</a> <a title="23 May 2010 02:25" href="/projects/exiv2/activity?from=2010-05-23">over 11 years</a> ago
  </h4>
  <div class="wiki"><p>Ge Bu wrote:</p>


<blockquote>

	<p>I think, that exiv2 can correctly read UCS 2 in these keys, because I can see (display, print) what I set in Windows by Windows explorer. But I´m not able to correctly write.</p>


</blockquote>

	<p>That's exactly how it is. There is a pretty-print function to convert the UCS2 text in these fields to Unicode. But there is no help when it comes to writing the fields with the command-line exiv2 tool. Since the default type is Byte, it expects a series of numbers in the set command, which is admittedly not very user-friendly. You could of course write your own program and convert the text to USC2 before setting these tag values. I can point you to some existing library code that may serve as an example if you like.</p>


	<p>Andreas</p></div>
  
  </div>
  <div class="message reply" id="message-536">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/531?r=536#message-536">RE: Textcoding UCS2 Exif.Image.XP</a>
    -
    Added by <a class="user active" href="/users/644">Ge Bu</a> <a title="23 May 2010 15:27" href="/projects/exiv2/activity?from=2010-05-23">over 11 years</a> ago
  </h4>
  <div class="wiki"><p>Thanks for answer, but I think I´m not able to code it :(.<br />It is possible to write these tags by Windows Explorer.<br />I tried exiv2 because it can manage tags (Exif, IPTC, XMP) in one file and apply to all pictures. I use only author and keywords. Many other tools are too complicated.<br />Now I found Zoner Media Explorer where I can manage these things too throug one user-friedly dialogue. I will use it. But this software clean Exif.Image.XP tags :(. It works under Linux through wine.</p></div>
  
  </div>
  <div class="message reply" id="message-561">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/531?r=561#message-561">RE: Textcoding UCS2 Exif.Image.XP</a>
    -
    Added by <a class="user active" href="/users/339">Steve Wright</a> <a title="20 Jul 2010 10:18" href="/projects/exiv2/activity?from=2010-07-20">over 11 years</a> ago
  </h4>
  <div class="wiki"><p>As I noted in my reply in Ge Bu's other thread on this topic, the UCS2 Windows wants is actually composed of the corresponding ASCII code numbers for each character in your string, interspersed with zeros and spaces, and trailed-off by three zeros (which tells Windows where the end of the string is, I presume). Believe me, I Google'd under every rock and around every tree in the Unicode forest before it occurred to me to start from the other end and write something into a file <em>using</em> Explorer, then parse the unformatted string using Exiv2 on the command line, and try to match the numbers with some known code pattern. It turned out it was ASCII. But ASCII without spaces produced garbage text in the Properties>Summary window for whichever XP tag you care to name, so I went back to my Exiv2 output and noticed there were zeros and spaces in between the ascii numbers XP had produced. I re-formatted a string to suit, pasted it into an <strong>exiv2 <del>M"set Exif.Image.XPComment"</strong> command, and it worked -</del> no garbage text and the full string in plain alphabetical English (or Latin1 if you prefer).</p>


	<p>The rest of my investigations are in the other thread.</p>


	<p>Steve Wright</p>


	<p>Attached you will find, as a text file in a .zip archive, the still-buggy BASH script I mentioned in passing in the other thread.</p></div>
  <div class="attachments">
<div class="contextual">
  
</div>
<table>
<tr>
  <td>
    <a class="icon icon-attachment" href="/attachments/184">breakncode-i.sh.zip</a>    <span class="size">(280 Bytes)</span>
    <a class="icon-only icon-download" title="Download" href="/attachments/download/184/breakncode-i.sh.zip">breakncode-i.sh.zip</a>  </td>
  <td></td>
  <td>
  </td>
  <td>
  </td>
</tr>
</table>
</div>

  </div>
  <div class="message reply" id="message-562">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/531?r=562#message-562">RE: Textcoding UCS2 Exif.Image.XP</a>
    -
    Added by <a class="user active" href="/users/133">Robin Mills</a> <a title="20 Jul 2010 21:54" href="/projects/exiv2/activity?from=2010-07-20">over 11 years</a> ago
  </h4>
  <div class="wiki"><p>Steve</p>


	<p>Thanks for doing this detective work.  I must admit to 2 thoughts - which totally contradict each other.  One is skepticism at what you've said and the other (like most native English speakers) is a phobia for almost anything to do with Unicode!  Maybe one day I'll overcome my fears, read you script and do a little bit of googling and thinking - and then maybe this will all make sense.  Until then, however I'll take you word for this and thank you for taking the time to come back and report your findings.</p>


	<p>Thank you very much.</p>


	<p>Robin</p></div>
  
  </div>
  <div class="message reply" id="message-564">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/531?r=564#message-564">RE: Textcoding UCS2 Exif.Image.XP</a>
    -
    Added by <a class="user active" href="/users/339">Steve Wright</a> <a title="22 Jul 2010 11:53" href="/projects/exiv2/activity?from=2010-07-22">over 11 years</a> ago
  </h4>
  <div class="wiki"><p>A sharp eye often catches things it can't explain or adequately describe.</p>


	<p>Robin: maybe you can tell me how it is that the C++ library files for iconv that Andreas worked into the tag-parsing code in Exiv2 have CS1259 text encoding in them, while the executable for BASH and other shells definitely doesn't. This is one of the things that reminds me of how much time I wasted learning CLI BASIC and AppleScript in Classic Mac (the former on the Apple IIe's at my high-school as well) instead of C+ at the very least.</p>


	<p>If the binary could be re-compiled to include CS1259, which every indication tells me is the encoding M$ uses for storing these "XP tags" in files, dead-on and full-stop, then a script to "translate" plain text to the ASCII codes needed would, likely as not as I see it, need to involve the specific and peculiar formatting that Windows requires when writing these tags via Exiv2.</p>


	<p>Evidently Mr Harvey's "competitive" exif/iptc editor, ExifTool, does the "translation" on the fly. I'd like to think it an oversight on Andreas' part to wrap one into his project, but if he had, then this thread may never have been necessary. It's nice to find things out about folks, however it might happen, even if the inspiration is a shared head-scratcher like the "Byte" field type for the XP tags.</p>


	<p>Steve Wright</p></div>
  
  </div>
  <div class="message reply" id="message-566">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/531?r=566#message-566">RE: Textcoding UCS2 Exif.Image.XP</a>
    -
    Added by <a class="user active" href="/users/133">Robin Mills</a> <a title="22 Jul 2010 19:18" href="/projects/exiv2/activity?from=2010-07-22">over 11 years</a> ago
  </h4>
  <div class="wiki"><p>Goodness, I don't know - I've already confessed my phobia for Unicode.  However, you've thrown down the gauntlet and I think I'll do a little digging about on this.  I'm off running this weekend - so it's likely to be one night next week after work.  I've often wondered "how do you use Unicode from bash/terminal?"  It's time for me to figure that out.  A trip to LinuxQuestions and forums.macosxhints.com seems in order.</p>


	<p>Whatever you were doing with Macs at school I'm sure has put you on the road to somewhere.  I believe Classic Mac (OS 7 and earlier) to be almost as good as Windows 3.0.  I started using the Mac in 1998 at 8.1 and always called in MacOS3.1.  Snow Leopard (MacOSX 10.6) is totally awesome - especially the 64 bit, rock-solid Unix.  I also use Windows 7 and Ubuntu 10.4 every day - however my desktop at home and in the office is a Mac.</p>


	<p>Naturally, I deny all knowledge of Phil Harvey and would never confess to occasionally using ExifTool.  He's done a good job - and so of course has our friend Andreas.  Remarkably, I've hardly investigated Andreas' code - which is beautifully laid out and documented.  My contribution to this project has been to provide the MSVC build environment - and to answer questions on the forum.</p>


	<p>If you'd like to talk UNICODE/UCS/iconv stuff in detail, let's take the conversation off-line <a class="email" href="mailto:robin@clanmills.com">robin@clanmills.com</a> and I'll report a summary back here later.  Discussing my lack of knowledge of unicode is something I'd prefer to do privately!</p></div>
  
  </div>
</div>
<span class="pagination"><ul class="pages"></ul><span><span class="items">(1-8/8)</span> </span></span>



        
        <div style="clear:both;"></div>
    </div>
</div>
</div>

<div id="ajax-indicator" style="display:none;"><span>Loading...</span></div>
<div id="ajax-modal" style="display:none;"></div>

<div id="footer">
  <div class="bgl"><div class="bgr">
    Powered by <a href="https://www.redmine.org/">Redmine</a> &copy; 2006-2018 Jean-Philippe Lang
  </div></div>
</div>
</div>
</div>

</body>
</html>
