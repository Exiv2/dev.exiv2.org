<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<title>Identified (but un-delete-able) XMP key data. - Exiv2</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="description" content="Redmine" />
<meta name="keywords" content="issue,bug,tracker" />
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="q9ov0oxyodlhIlstdttkeiqY5joKkN3yKkhnfgehhJ5Jl4Q9/ght2TRGRCHJDGhJFQqyQ/tzfEjXaPf2RJhj8Q==" />
<link rel='shortcut icon' href='/favicon.ico?1550767427' />
<link rel="stylesheet" media="all" href="/stylesheets/jquery/jquery-ui-1.11.0.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/application.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/responsive.css?1550767427" />

<script src="/javascripts/jquery-1.11.1-ui-1.11.0-ujs-4.3.1.js?1550767427"></script>
<script src="/javascripts/application.js?1550767427"></script>
<script src="/javascripts/responsive.js?1550767427"></script>
<script>
//<![CDATA[
$(window).load(function(){ warnLeavingUnsaved('The current page contains unsaved text that will be lost if you leave this page.'); });
//]]>
</script>


<!-- page specific tags -->
</head>
<body class="project-exiv2 has-main-menu controller-messages action-show avatars-off">

<div id="wrapper">

<div class="flyout-menu js-flyout-menu">


        <div class="flyout-menu__search">
            <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
            <input type="hidden" name="messages" value="1" />
            <label class="search-magnifier search-magnifier--flyout" for="flyout-search">&#9906;</label>
            <input type="text" name="q" id="flyout-search" class="small js-search-input" placeholder="Search" />
</form>        </div>


        <h3>Project</h3>
        <span class="js-project-menu"></span>

    <h3>General</h3>
    <span class="js-general-menu"></span>

    <span class="js-sidebar flyout-menu__sidebar"></span>

    <h3>Profile</h3>
    <span class="js-profile-menu"></span>

</div>

<div id="wrapper2">
<div id="wrapper3">
<div id="top-menu">
    <div id="account">
        <ul><li><a class="login" href="/login">Sign in</a></li></ul>    </div>
    
    <ul><li><a class="home" href="/">Home</a></li><li><a class="projects" href="/projects">Projects</a></li><li><a class="help" href="https://www.redmine.org/guide">Help</a></li></ul></div>

<div id="header">

    <a href="#" class="mobile-toggle-button js-flyout-menu-toggle-button"></a>

    <div id="quick-search">
        <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
        <input type="hidden" name="scope" />
        <input type="hidden" name="messages" value="1" />
        <label for='q'>
          <a accesskey="4" href="/projects/exiv2/search">Search</a>:
        </label>
        <input type="text" name="q" id="q" size="20" class="small" accesskey="f" />
</form>        <div id="project-jump" class="drdn"><span class="drdn-trigger">Exiv2</span><div class="drdn-content"><div class="quick-search"><input type="text" name="q" id="projects-quick-search" value="" class="autocomplete" data-automcomplete-url="/projects/autocomplete.js?jump=boards" autocomplete="off" /></div><div class="drdn-items projects selection"></div><div class="drdn-items all-projects selection"><a href="/projects?jump=boards">All Projects</a></div></div></div>
    </div>

    <h1><span class="current-project">Exiv2</span></h1>

    <div id="main-menu" class="tabs">
        <ul><li><a class="overview" href="/projects/exiv2">Overview</a></li><li><a class="activity" href="/projects/exiv2/activity">Activity</a></li><li><a class="roadmap" href="/projects/exiv2/roadmap">Roadmap</a></li><li><a class="issues" href="/projects/exiv2/issues">Issues</a></li><li><a class="news" href="/projects/exiv2/news">News</a></li><li><a class="wiki" href="/projects/exiv2/wiki">Wiki</a></li><li><a class="boards selected" href="/projects/exiv2/boards">Forums</a></li><li><a class="repository" href="/projects/exiv2/repository">Repository</a></li></ul>
        <div class="tabs-buttons" style="display:none;">
            <button class="tab-left" onclick="moveTabLeft(this); return false;"></button>
            <button class="tab-right" onclick="moveTabRight(this); return false;"></button>
        </div>
    </div>
</div>

<div id="main" class="nosidebar">
    <div id="sidebar">
        
        
    </div>

    <div id="content">
        
        <p class="breadcrumb"><a href="/projects/exiv2/boards">Forums</a> » <a href="/projects/exiv2/boards/3">Forum</a> » </p>

<div class="contextual">
    
    
    
    
</div>

<h2>Identified (but un-delete-able) XMP key data.</h2>

<div class="message">
<p><span class="author">Added by <a class="user active" href="/users/339">Steve Wright</a> <a title="25 Jan 2010 07:24" href="/projects/exiv2/activity?from=2010-01-25">almost 12 years</a> ago</span></p>
<div class="wiki">
<p>All:</p>


	<p>I copied two JPEG files from some older Mac-authored data CDs, and wanted to purge as many of the out-of-date metadata as I could before opening them with any of my current image editors etc. I challenged myself by choosing to start with the XMP fields. I've run into one key that exiv2 (from the command-line) seems to have trouble deleting. The line reads:</p>
	<pre><code>Xmp.mediapro.People                          XmpBag      1  <a class="email" href="mailto:silversleeves@digiverse.net">silversleeves@digiverse.net</a></code></pre>


	<p>The command I'm using to delete the key is:</p>
	<pre><code>exiv2 -M"del Xmp.mediapro.People" modify trin08.jpg <br />(filename truncated for convenience)</code></pre>


	<p>And the error I'm getting is</p>


	<p>-M option 1: Invalid key `Xmp.mediapro.People'</p>


	<p>Which of course is as true as it goes, since this particular key doesn't appear in any of the lists. exiv2 can read it by name, however, so there must be another method by which it can be deleted without having to "lay waste" to the whole XMP packet.</p>


	<p>Any suggestions?</p>


	<p>SIlversleeves</p>
</div>

</div>
<br />

<div id="replies">
<h3 class="comments icon icon-comments">Replies (26)</h3>
  <div class="message reply" id="message-351">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/350?r=351#message-351">RE: Identified (but un-delete-able) XMP key data.</a>
    -
    Added by <a class="user active" href="/users/53">Andreas Huggel</a> <a title="25 Jan 2010 07:54" href="/projects/exiv2/activity?from=2010-01-25">almost 12 years</a> ago
  </h4>
  <div class="wiki"><p>Does it work if you add -M'reg mediapro myNamespace/' to the command to register the namespace? (I'm not sure if instead of myNamespace/ you need to use the actual URL for that namespace as it is defined in the image)</p>


	<p>Andreas</p></div>
  
  </div>
  <div class="message reply" id="message-352">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/350?r=352#message-352">RE: Identified (but un-delete-able) XMP key data.</a>
    -
    Added by <a class="user active" href="/users/339">Steve Wright</a> <a title="25 Jan 2010 08:19" href="/projects/exiv2/activity?from=2010-01-25">almost 12 years</a> ago
  </h4>
  <div class="wiki"><p>Andreas,</p>


	<p>Too late now for this particular JPEG file. I "bit the bullet" and deleted the key via Photoshop. But the other file I copied from the Mac disk was, I recall, similarly tagged (I was using iView Media Pro quite a bit in those days). So I'll keep your suggestion in mind when I work on that other file.</p>


	<p>I just got the URL for iView/MS Expression Media from one of the latter company's online docs. It's <a class="external" href="http://ns.iview-multimedia.com/mediapro/1.0/">http://ns.iview-multimedia.com/mediapro/1.0/</a> .<br />That's sure to help in the future, as I say. Hope it helps others, too.</p>


	<p>Thanks again for the prompt reply.</p>


	<p>Silversleeves</p></div>
  
  </div>
  <div class="message reply" id="message-353">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/350?r=353#message-353">RE: Identified (but un-delete-able) XMP key data.</a>
    -
    Added by <a class="user active" href="/users/339">Steve Wright</a> <a title="26 Jan 2010 09:13" href="/projects/exiv2/activity?from=2010-01-26">almost 12 years</a> ago
  </h4>
  <div class="wiki"><p>Andreas,</p>


	<p>I was curious to see if your registering the namespace did indeed enable exiv2 to remove the "assets" in the XMP packet written by iView/Expression Media 2. So I found a JPEG that had one written in, not "People" (what iView calls "Contact") but "Event" (their name for the IPTC <em>Application2</em> tag "FixtureId"). I tried -M"reg mediapro <a class="external" href="http://ns.iview-multimedia.com/mediapro/1.0/">http://ns.iview-multimedia.com/mediapro/1.0/</a>" followed by the name of the file, and it didn't return an error. However, when I typed in the command <br />  exiv2 -M"del Xmp.mediapro.Event" foo.jpg<br />I got the same error as above (Invalid key). I'm thinking it may be a matter of syntax. When you use <strong>reg</strong>, are those supposed to be single quotes, or were you just in a hurry with your reply?</p>


	<p>Silversleeves.</p></div>
  
  </div>
  <div class="message reply" id="message-355">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/350?r=355#message-355">RE: Identified (but un-delete-able) XMP key data.</a>
    -
    Added by <a class="user active" href="/users/53">Andreas Huggel</a> <a title="27 Jan 2010 22:55" href="/projects/exiv2/activity?from=2010-01-27">almost 12 years</a> ago
  </h4>
  <div class="wiki"><p>Silversleeves,<br />Try with both commands in the same run of exiv2, e.g.,</p>


<pre>
exiv2 -M"reg mediapro http://ns.iview-multimedia.com/mediapro/1.0/" -M"del Xmp.mediapro.Event" foo.jpg
</pre>

	<p>Andreas</p></div>
  
  </div>
  <div class="message reply" id="message-358">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/350?r=358#message-358">RE: Identified (but un-delete-able) XMP key data.</a>
    -
    Added by <a class="user active" href="/users/339">Steve Wright</a> <a title="29 Jan 2010 12:51" href="/projects/exiv2/activity?from=2010-01-29">almost 12 years</a> ago
  </h4>
  <div class="wiki"><p>Andreas,</p>


	<p>Both commands on the same line appear to work. I also tried to delete another iView-originated XMP "asset" in the same JPEG file without including the -M"reg..." command before it, and it gave me the "Invalid Key" error. Is this 'normal' behavior for exiv2 when it comes to adding or deleting a key it doesn't recognize?</p>


	<p>Silversleeves</p></div>
  
  </div>
  <div class="message reply" id="message-361">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/350?r=361#message-361">RE: Identified (but un-delete-able) XMP key data.</a>
    -
    Added by <a class="user active" href="/users/53">Andreas Huggel</a> <a title="29 Jan 2010 22:46" href="/projects/exiv2/activity?from=2010-01-29">almost 12 years</a> ago
  </h4>
  <div class="wiki"><p>Yes, that's perfectly normal. Exiv2 doesn't know the namespace, so you need to tell it about its existance or it will complain. And since it has no external database to store and remember such information, you need to tell it on the same command line or in the same command file that contains the actual commands that you want to perform.</p>


	<p>Andreas</p></div>
  
  </div>
  <div class="message reply" id="message-373">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/350?r=373#message-373">RE: Identified (but un-delete-able) XMP key data.</a>
    -
    Added by <a class="user active" href="/users/339">Steve Wright</a> <a title="03 Feb 2010 14:00" href="/projects/exiv2/activity?from=2010-02-03">almost 12 years</a> ago
  </h4>
  <div class="wiki"><p>Andreas,</p>


	<p>As I'm sure I'm not the only exiv2 user who also uses MS Expression Media or its predecessor, iView Media Pro, is it at all possible that some time in the near future the XMP schemas for these apps could be added to exiv2's capabilities/"internal list"? If it's a matter of knowing the parameters etc., I could share as much information as I come across to facilitate this addition. It may mean something as simple as emailing a fully-annotated image file (which is to say, one with all the fields unique to Expression Media written into it) and your looking at the "raw hex" or the XML of the entries and puzzling out how best to make exiv2 write to and/or delete the field data.</p>


	<p>This puts me in mind of another request I made, when I was still using a Mac, to Thorsten Lemke, author and maintainer of GraphicConverter X. I asked that an iView (it was still only iView at the time) field, "People," be added to his application's list of IPTC tags. Little did I know that in the IPTC 4 standard, "People" is actually known as "Contact."</p>


	<p>This seems to be more than somewhat different. Nonetheless, I hope you'll give it some thought.</p>


	<p>S.</p></div>
  
  </div>
  <div class="message reply" id="message-395">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/350?r=395#message-395">RE: Identified (but un-delete-able) XMP key data.</a>
    -
    Added by <a class="user active" href="/users/339">Steve Wright</a> <a title="10 Feb 2010 00:47" href="/projects/exiv2/activity?from=2010-02-10">almost 12 years</a> ago
  </h4>
  <div class="wiki"><p>Andreas,</p>


	<p>I've been giving some thought to the possibility of making a patch to the list of valid XMP data keys, adding the ones peculiar to iView and its MS successor, Expression Media. Which files should I look at to modify? And how many entries should I be looking for in those files?</p>


	<p>Apropos of not much at all: I contrived an analogy for coding "half-way," doing one thing, leaving out two other things that were necessary to make the one thing work, and watching a minor error like this cascade to the point where even the unmodified files don't compile/integrate. Think of it as "trying to spell CAT with just the A."</p>


	<p>S.</p>


	<p>Steve Wright wrote:</p>


<blockquote>

	<p>Andreas,</p>


	<p>As I'm sure I'm not the only exiv2 user who also uses MS Expression Media or its predecessor, iView Media Pro, is it at all possible that some time in the near future the XMP schemas for these apps could be added to exiv2's capabilities/"internal list"? If it's a matter of knowing the parameters etc., I could share as much information as I come across to facilitate this addition. It may mean something as simple as emailing a fully-annotated image file (which is to say, one with all the fields unique to Expression Media written into it) and your looking at the "raw hex" or the XML of the entries and puzzling out how best to make exiv2 write to and/or delete the field data.</p>


	<p>This puts me in mind of another request I made, when I was still using a Mac, to Thorsten Lemke, author and maintainer of GraphicConverter X. I asked that an iView (it was still only iView at the time) field, "People," be added to his application's list of IPTC tags. Little did I know that in the IPTC 4 standard, "People" is actually known as "Contact."</p>


	<p>This seems to be more than somewhat different. Nonetheless, I hope you'll give it some thought.</p>


	<p>S.</p>


</blockquote></div>
  
  </div>
  <div class="message reply" id="message-396">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/350?r=396#message-396">RE: Identified (but un-delete-able) XMP key data.</a>
    -
    Added by <a class="user active" href="/users/53">Andreas Huggel</a> <a title="10 Feb 2010 03:17" href="/projects/exiv2/activity?from=2010-02-10">almost 12 years</a> ago
  </h4>
  <div class="wiki"><blockquote>

	<p>I've been giving some thought to the possibility of making a patch to the list of valid XMP data keys, adding the ones peculiar to iView and its MS successor, Expression Media. Which files should I look at to modify? And how many entries should I be looking for in those files?</p>


</blockquote>

	<p>Only <code>properties.cpp</code> needs modifications. You can look at the definitions for an existing namespace and do something similar. E.g., look for the 3 occurences of 'Kipi' in that file.</p>


	<p>Andreas</p></div>
  
  </div>
  <div class="message reply" id="message-397">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/350?r=397#message-397">RE: Identified (but un-delete-able) XMP key data.</a>
    -
    Added by <a class="user active" href="/users/339">Steve Wright</a> <a title="11 Feb 2010 23:41" href="/projects/exiv2/activity?from=2010-02-11">almost 12 years</a> ago
  </h4>
  <div class="wiki"><p>Andreas,</p>


	<p>I couldn't find 'kipi' (being an off-again-on-again KDE user I know what it is), so I used one of the Photoshop constants as a base and referred back when there seemed to be a key type discrepancy or mismatch. I started off by annotating a JPEG with as many tags as could fit of all three field types (EXIF, IPTC, and XMP). Then I ran an exiv2 -pa command on the file, redirecting the output to a plain text file. From there I was able to copy the names for the constants and the fields. I stuck them at the end in the "class member definitions" section, then pasted in an edited bunch of constants (with my own definitions for any of the ones that didn't have counterparts/analogues elsewhere), also at the end.</p>


	<p>Attached you'll find the final edit of properties.cpp I worked on. You've probably got better code checkers than just g++, so I'll leave it to you to check for validity, etc.</p>


	<p>S.</p></div>
  <div class="attachments">
<div class="contextual">
  
</div>
<table>
<tr>
  <td>
    <a class="icon icon-attachment" href="/attachments/144">properties.cpp.c</a>    <span class="size">(130 KB)</span>
    <a class="icon-only icon-download" title="Download" href="/attachments/download/144/properties.cpp.c">properties.cpp.c</a>  </td>
  <td></td>
  <td>
  </td>
  <td>
  </td>
</tr>
</table>
</div>

  </div>
  <div class="message reply" id="message-398">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/350?r=398#message-398">RE: Identified (but un-delete-able) XMP key data.</a>
    -
    Added by <a class="user active" href="/users/53">Andreas Huggel</a> <a title="12 Feb 2010 08:13" href="/projects/exiv2/activity?from=2010-02-12">almost 12 years</a> ago
  </h4>
  <div class="wiki"><p>Steve,</p>


	<p>Thanks for the modified file. Can you please also add the namespaces to the xmpNsInfo[] array? Then I can add it.</p>


	<p>Andreas</p></div>
  
  </div>
  <div class="message reply" id="message-399">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/350?r=399#message-399">RE: Identified (but un-delete-able) XMP key data.</a>
    -
    Added by <a class="user active" href="/users/339">Steve Wright</a> <a title="12 Feb 2010 15:47" href="/projects/exiv2/activity?from=2010-02-12">almost 12 years</a> ago
  </h4>
  <div class="wiki"><p>Andreas,</p>


	<p>Done and done. I wondered where those URL-style namespaces went.</p>


	<p>The modified file has a slightly-different name to distinguish it from the first so-called "final draft" (an oxymoron in itself).</p>


	<p>S.</p></div>
  <div class="attachments">
<div class="contextual">
  
</div>
<table>
<tr>
  <td>
    <a class="icon icon-attachment" href="/attachments/145">properties.cpp-nsinfoadded.c</a>    <span class="size">(130 KB)</span>
    <a class="icon-only icon-download" title="Download" href="/attachments/download/145/properties.cpp-nsinfoadded.c">properties.cpp-nsinfoadded.c</a>  </td>
  <td></td>
  <td>
  </td>
  <td>
  </td>
</tr>
</table>
</div>

  </div>
  <div class="message reply" id="message-400">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/350?r=400#message-400">RE: Identified (but un-delete-able) XMP key data.</a>
    -
    Added by <a class="user active" href="/users/339">Steve Wright</a> <a title="12 Feb 2010 15:58" href="/projects/exiv2/activity?from=2010-02-12">almost 12 years</a> ago
  </h4>
  <div class="wiki"><p>Tangential but as I was thinking about it, I thought I'd mention it.</p>


	<p>A curious thing happens when you add data to the "IPTC Country Code' field in Expression Media. It gets written to the file as "Iptc.Application2.ExpirationTime," which, of course, causes exiv2 to complain that there is an "Unsupported time format" in the file. No doubt: IPTC Country Codes are as often as not two or three <strong>alpha</strong> characters in length: nowhere near a "time format" by any stretch of the imagination. I don't know whether, or if, you could write something into exiv2 that could cross-check the data length of Iptc.Application2.ExpirationTime against the presence of XMP fields of the iView or MSXM2 "group," but it might head off another newbie user's thread along the lines of <em>"Getting 'Unsupported Time Format' errors and don't know why."</em></p>


	<p>S.</p></div>
  
  </div>
  <div class="message reply" id="message-408">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/350?r=408#message-408">RE: Identified (but un-delete-able) XMP key data.</a>
    -
    Added by <a class="user active" href="/users/53">Andreas Huggel</a> <a title="17 Feb 2010 06:03" href="/projects/exiv2/activity?from=2010-02-17">almost 12 years</a> ago
  </h4>
  <div class="wiki"><p>Steve,</p>


	<p>Thanks again for your contribution. I've checked in the changes with <a class="changeset" title="Added iView Media Pro and MS Expression Media XMP schemas. (Steve Wright)" href="/projects/exiv2/repository/exiv2/revisions/2031">r2031</a>. If you still have the code checked-out from the repository around somewhere, you can run 'svn update' in the exiv2 top directory, re-compile and try it out. Just a few more questions:</p>


	<ul>
	<li>Is it correct that the two namespaces have exactly the same properties?</li>
		<li>Could you please upload one or two samples here with metadata of both types?</li>
		<li>Do you want this contribution attributed to 'Steve Wright' or 'Silversleeves' (or any other name) in the <a href="http://www.exiv2.org/changelog.html" class="external">ChangeLog</a> for the next release?</li>
	</ul>


	<p>Andreas</p></div>
  
  </div>
  <div class="message reply" id="message-409">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/350?r=409#message-409">RE: Identified (but un-delete-able) XMP key data.</a>
    -
    Added by <a class="user active" href="/users/339">Steve Wright</a> <a title="17 Feb 2010 09:15" href="/projects/exiv2/activity?from=2010-02-17">almost 12 years</a> ago
  </h4>
  <div class="wiki"><p>Andreas,</p>


	<p>Answering your questions in order:</p>


	<ul>
	<li>Nearly so. I think I put in a Microsoft one for expressionmedia and the old indie one for mediapro. If I didn't I'll make that correction asap. <br />What you have here is one of those occasions where M$ bought out a smaller company on the skids. Unlike the practise that got Microsoft summonsed by American state attorneys-general and the Federal Department of Justice, though, in this case the folks running the independent outfit closed up shop voluntarily. At any rate, Microsoft kept the field names and their parameters, and only changed the "label" and the namespace to reflect the change in ownership of the application as intellectual property. </li>
		<li>Sure thing.</li>
		<li>Silversleeves, please. Though more often I use the three-letter "BZT" (the Z said in the OED/French fashion, <em>"zed"</em>), Silversleeves will be fine.</li>
	</ul>


	<p>S.</p></div>
  
  </div>
  <div class="message reply" id="message-410">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/350?r=410#message-410">RE: Identified (but un-delete-able) XMP key data.</a>
    -
    Added by <a class="user active" href="/users/339">Steve Wright</a> <a title="17 Feb 2010 10:13" href="/projects/exiv2/activity?from=2010-02-17">almost 12 years</a> ago
  </h4>
  <div class="wiki"><p>Andreas,</p>


	<p>Hope you don't mind a .zip file. There's a readme inside describing its contents.</p>


	<p>S.</p></div>
  <div class="attachments">
<div class="contextual">
  
</div>
<table>
<tr>
  <td>
    <a class="icon icon-attachment" href="/attachments/148">sample.zip</a>    <span class="size">(577 KB)</span>
    <a class="icon-only icon-download" title="Download" href="/attachments/download/148/sample.zip">sample.zip</a>  </td>
  <td></td>
  <td>
  </td>
  <td>
  </td>
</tr>
</table>
</div>

  </div>
  <div class="message reply" id="message-411">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/350?r=411#message-411">RE: Identified (but un-delete-able) XMP key data.</a>
    -
    Added by <a class="user active" href="/users/339">Steve Wright</a> <a title="18 Feb 2010 02:22" href="/projects/exiv2/activity?from=2010-02-18">almost 12 years</a> ago
  </h4>
  <div class="wiki"><p>Andreas,</p>


	<p>After writing the readme for that .zip, I looked at the iView-generated XML in a text editor and found out they were <em>sans</em> namespace URLs for the app-specific data fields. This is the same zip, plus Photoshop CS1-made XM+P+ files corresponding to each picture in the archive. Now the line from the readme about "...will be just as good a source of the necessary changes as I am," means what I intended it to. I'd forgotten that one of the reasons Adobe applications can't make use of iView/MSXM XMLs is because the latter excludes namespace lines (just the thing we both wanted to see at this stage).</p>


	<p>S.</p></div>
  <div class="attachments">
<div class="contextual">
  
</div>
<table>
<tr>
  <td>
    <a class="icon icon-attachment" href="/attachments/149">sample.zip</a>    <span class="size">(579 KB)</span>
    <a class="icon-only icon-download" title="Download" href="/attachments/download/149/sample.zip">sample.zip</a>  </td>
  <td></td>
  <td>
  </td>
  <td>
  </td>
</tr>
</table>
</div>

  </div>
  <div class="message reply" id="message-412">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/350?r=412#message-412">RE: Identified (but un-delete-able) XMP key data.</a>
    -
    Added by <a class="user active" href="/users/53">Andreas Huggel</a> <a title="19 Feb 2010 08:19" href="/projects/exiv2/activity?from=2010-02-19">almost 12 years</a> ago
  </h4>
  <div class="wiki"><p>Thanks for all this info.</p>


	<p>In the attached files I can only find the Event property from the two namespaces in questions:</p>


<pre>
$ exiv2 -px *.xmp *.jpg *.exv | grep -e mediapro -e expressionmedia
Trolley.xmp           Xmp.mediapro.Event                           XmpText    16  Vacation Weekend
Trolley.xmp           Xmp.expressionmedia.Event                    XmpText    16  Vacation Weekend
ProvincetownTrolley19.10.2006-1152.jpg  Xmp.mediapro.Event                           XmpText    16  Vacation Weekend
ProvincetownTrolley19.10.2006-1152.jpg  Xmp.expressionmedia.Event                    XmpText    16  Vacation Weekend
ProvincetownTrolley19.10.2006-1152.exv  Xmp.mediapro.Event                           XmpText    16  Vacation Weekend
ProvincetownTrolley19.10.2006-1152.exv  Xmp.expressionmedia.Event                    XmpText    16  Vacation Weekend
</pre>

	<p>But that can now be deleted easily:</p>


<pre>
$ exiv2 -v -M'del Xmp.expressionmedia.Event' Trolley.xmp
File 1/1: Trolley.xmp
Del Xmp.expressionmedia.Event
$ exiv2 -v -M'del Xmp.mediapro.Event' Trolley.xmp
File 1/1: Trolley.xmp
Del Xmp.mediapro.Event
</pre>

	<p>As for the XML file, its contents are simply not in XMP format.</p>


	<p>Andreas</p></div>
  
  </div>
  <div class="message reply" id="message-413">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/350?r=413#message-413">RE: Identified (but un-delete-able) XMP key data.</a>
    -
    Added by <a class="user active" href="/users/339">Steve Wright</a> <a title="19 Feb 2010 12:38" href="/projects/exiv2/activity?from=2010-02-19">almost 12 years</a> ago
  </h4>
  <div class="wiki"><p>Andreas,</p>


	<p>I ran the bikini pic again through MSXM2, adding a Catalog Set, Status and Contact. This time I'll upload just the pic.<br />Why the bikini pic, someone else's work, instead of the trolley pic which was my own (Olympus DC-M40 on very conservative settings)?<br />Because I happen to have established lists of catalog sets, "People" definitions and two Status entries, and the Trolley pic doesn't fit any of the above.</p>


	<p>S.</p></div>
  <div class="attachments">
<div class="contextual">
  
</div>
<table>
<tr>
  <td>
    <a class="icon icon-attachment" href="/attachments/150">bv9190-421-206.jpg</a>    <span class="size">(74.6 KB)</span>
    <a class="icon-only icon-download" title="Download" href="/attachments/download/150/bv9190-421-206.jpg">bv9190-421-206.jpg</a>  </td>
  <td></td>
  <td>
  </td>
  <td>
  </td>
</tr>
</table>
</div>

  </div>
  <div class="message reply" id="message-557">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/350?r=557#message-557">RE: Identified (but un-delete-able) XMP key data.</a>
    -
    Added by <a class="user active" href="/users/339">Steve Wright</a> <a title="15 Jul 2010 08:21" href="/projects/exiv2/activity?from=2010-07-15">over 11 years</a> ago
  </h4>
  <div class="wiki"><p>Andreas,</p>


	<p>In one respect, adding the iView/MSXM XMP elements may have been an exercise in futility. Last week, I concocted a special User Field (Custom Field in the GUI app) called "GarbageField". I made value entries, and tried to delete them via Exiv2 on the command line. Then I re-sync'ed the annotations on the appropriate files in Expression Media, and the field values came back, even though an 'exiv2 -pa' showed them as gone. So I looked at one of the JPEG files in a hex editor. Sure enough, in the ASCII column, just below the end of the XMP packet, there were the exact same values as strings. Which leads me to believe that, somewhere along the line, either iView Multimedia, LLC or Microsoft deemed it necessary that files with Custom Fields should only have those field values removed by way of their application/s.</p>


	<p>The same is also so for the more commonly-used Catalog Sets value strings (I just checked on that using, again, a bikini pic for which I had set and 'running' catalog set values in my iView catalogs and the same hex viewer/editor). And, ironically and probably most disappointingly of all, the "People" tag that was discussed in the first few posts in this thread.</p>


	<p>So unless there is by some means familiar to you a way to remove these 'stubborn' strings that appear outside the XMP packet bedises the more ordinary "del Xmp.expressionmedia.thisnthat", it would probably be courteous somewhere along the line to make mention of the fact that some iView/MSXM strings don't trash completely when deleted via Exiv2.</p>


	<p>Steve Wright</p></div>
  
  </div>
  <div class="message reply" id="message-558">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/350?r=558#message-558">RE: Identified (but un-delete-able) XMP key data.</a>
    -
    Added by <a class="user active" href="/users/53">Andreas Huggel</a> <a title="15 Jul 2010 23:07" href="/projects/exiv2/activity?from=2010-07-15">over 11 years</a> ago
  </h4>
  <div class="wiki"><p>Hi Steve,</p>


	<p>Can you please send me (or attach) a picture with this kind of extra data, before any modification with Exiv2 was done to it. I'd like to also look at in in a hex editor.</p>


	<p>Thanks,<br />Andreas</p></div>
  
  </div>
  <div class="message reply" id="message-559">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/350?r=559#message-559">RE: Identified (but un-delete-able) XMP key data.</a>
    -
    Added by <a class="user active" href="/users/339">Steve Wright</a> <a title="17 Jul 2010 12:21" href="/projects/exiv2/activity?from=2010-07-17">over 11 years</a> ago
  </h4>
  <div class="wiki"><p>Good as done.'</p>


	<p>Included are my own "dumps" from HxD v1.7.7 in Windows XP.</p>


	<p>The picture is a keeper, too, as I hope you'll agree.</p>


	<p>Steve W.</p></div>
  <div class="attachments">
<div class="contextual">
  
</div>
<table>
<tr>
  <td>
    <a class="icon icon-attachment" href="/attachments/183">msxm-tagged-jpeg.zip</a>    <span class="size">(586 KB)</span>
    <a class="icon-only icon-download" title="Download" href="/attachments/download/183/msxm-tagged-jpeg.zip">msxm-tagged-jpeg.zip</a>  </td>
  <td></td>
  <td>
  </td>
  <td>
  </td>
</tr>
</table>
</div>

  </div>
  <div class="message reply" id="message-655">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/350?r=655#message-655">RE: Identified (but un-delete-able) XMP key data.</a>
    -
    Added by <a class="user active" href="/users/339">Steve Wright</a> <a title="16 Sep 2010 22:25" href="/projects/exiv2/activity?from=2010-09-16">about 11 years</a> ago
  </h4>
  <div class="wiki"><p>Andreas,</p>


	<p>Any progress on this, or do the "surfer dudes" who wrote the original app and devised the means of "burying" this information for later "recall" -- I personally don't credit M$ with being that clever (not with initials SB still on the payroll) -- have you stumped?</p>


	<p>Steve Wright</p></div>
  
  </div>
  <div class="message reply" id="message-659">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/350?r=659#message-659">RE: Identified (but un-delete-able) XMP key data.</a>
    -
    Added by <a class="user active" href="/users/53">Andreas Huggel</a> <a title="17 Sep 2010 00:58" href="/projects/exiv2/activity?from=2010-09-17">about 11 years</a> ago
  </h4>
  <div class="wiki"><p>This one fell through the cracks. I haven't looked at it yet. Will put it higher on the list...</p>


	<p>Andreas</p></div>
  
  </div>
  <div class="message reply" id="message-678">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/350?r=678#message-678">RE: Identified (but un-delete-able) XMP key data.</a>
    -
    Added by <a class="user active" href="/users/339">Steve Wright</a> <a title="10 Oct 2010 07:41" href="/projects/exiv2/activity?from=2010-10-10">about 11 years</a> ago
  </h4>
  <div class="wiki"><p>It looks like you might want to take a look at "extract and import" (to .exv files). I just created one, then viewed it in a hex editor. It had the "below-the-packet" stuff that the iView MP guys (or Microsoft, can't tell which) coded into the app to stymie deletion of some data by any other means than MSXM. This is the same place the app 'stows' the custom field data...</p>


	<p>...though in my case this morning it was just repetition of pretty ordinary PS IFD stuff and/or standard IPTCv4 data.</p>


	<p>I'll run a "delete all" on this same JPEG and check it to see if this 'parroted' stuff below the usual XMP packet's bottom end is still left behind in 0.20 as it was in 0.19. I suspect it will be, but it's a place to start at any rate.</p>


	<p>Steve W</p></div>
  
  </div>
</div>
<span class="pagination"><ul class="pages"><li class="previous"><span>« Previous</span></li><li class="current"><span>1</span></li><li class="page"><a href="/boards/3/topics/350?page=2">2</a></li><li class="next page"><a accesskey="n" href="/boards/3/topics/350?page=2">Next »</a></li></ul><span><span class="items">(1-25/26)</span> </span></span>



        
        <div style="clear:both;"></div>
    </div>
</div>
</div>

<div id="ajax-indicator" style="display:none;"><span>Loading...</span></div>
<div id="ajax-modal" style="display:none;"></div>

<div id="footer">
  <div class="bgl"><div class="bgr">
    Powered by <a href="https://www.redmine.org/">Redmine</a> &copy; 2006-2018 Jean-Philippe Lang
  </div></div>
</div>
</div>
</div>

</body>
</html>
