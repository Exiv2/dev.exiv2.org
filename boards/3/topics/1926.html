<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<title>Error opening file where the directory has accents - Exiv2</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="description" content="Redmine" />
<meta name="keywords" content="issue,bug,tracker" />
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="ORcj0h/+squf/pC5UahCll0GOLq+Jz6akz1mJ9/f5AzbWog9bYR+q8qaj7Xuf06lYpRsw0/EnyBuHfavnOYDYw==" />
<link rel='shortcut icon' href='/favicon.ico?1550767427' />
<link rel="stylesheet" media="all" href="/stylesheets/jquery/jquery-ui-1.11.0.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/application.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/responsive.css?1550767427" />

<script src="/javascripts/jquery-1.11.1-ui-1.11.0-ujs-4.3.1.js?1550767427"></script>
<script src="/javascripts/application.js?1550767427"></script>
<script src="/javascripts/responsive.js?1550767427"></script>
<script>
//<![CDATA[
$(window).load(function(){ warnLeavingUnsaved('The current page contains unsaved text that will be lost if you leave this page.'); });
//]]>
</script>


<!-- page specific tags -->
</head>
<body class="project-exiv2 has-main-menu controller-messages action-show avatars-off">

<div id="wrapper">

<div class="flyout-menu js-flyout-menu">


        <div class="flyout-menu__search">
            <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
            <input type="hidden" name="messages" value="1" />
            <label class="search-magnifier search-magnifier--flyout" for="flyout-search">&#9906;</label>
            <input type="text" name="q" id="flyout-search" class="small js-search-input" placeholder="Search" />
</form>        </div>


        <h3>Project</h3>
        <span class="js-project-menu"></span>

    <h3>General</h3>
    <span class="js-general-menu"></span>

    <span class="js-sidebar flyout-menu__sidebar"></span>

    <h3>Profile</h3>
    <span class="js-profile-menu"></span>

</div>

<div id="wrapper2">
<div id="wrapper3">
<div id="top-menu">
    <div id="account">
        <ul><li><a class="login" href="/login">Sign in</a></li></ul>    </div>
    
    <ul><li><a class="home" href="/">Home</a></li><li><a class="projects" href="/projects">Projects</a></li><li><a class="help" href="https://www.redmine.org/guide">Help</a></li></ul></div>

<div id="header">

    <a href="#" class="mobile-toggle-button js-flyout-menu-toggle-button"></a>

    <div id="quick-search">
        <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
        <input type="hidden" name="scope" />
        <input type="hidden" name="messages" value="1" />
        <label for='q'>
          <a accesskey="4" href="/projects/exiv2/search">Search</a>:
        </label>
        <input type="text" name="q" id="q" size="20" class="small" accesskey="f" />
</form>        <div id="project-jump" class="drdn"><span class="drdn-trigger">Exiv2</span><div class="drdn-content"><div class="quick-search"><input type="text" name="q" id="projects-quick-search" value="" class="autocomplete" data-automcomplete-url="/projects/autocomplete.js?jump=boards" autocomplete="off" /></div><div class="drdn-items projects selection"></div><div class="drdn-items all-projects selection"><a href="/projects?jump=boards">All Projects</a></div></div></div>
    </div>

    <h1><span class="current-project">Exiv2</span></h1>

    <div id="main-menu" class="tabs">
        <ul><li><a class="overview" href="/projects/exiv2">Overview</a></li><li><a class="activity" href="/projects/exiv2/activity">Activity</a></li><li><a class="roadmap" href="/projects/exiv2/roadmap">Roadmap</a></li><li><a class="issues" href="/projects/exiv2/issues">Issues</a></li><li><a class="news" href="/projects/exiv2/news">News</a></li><li><a class="wiki" href="/projects/exiv2/wiki">Wiki</a></li><li><a class="boards selected" href="/projects/exiv2/boards">Forums</a></li><li><a class="repository" href="/projects/exiv2/repository">Repository</a></li></ul>
        <div class="tabs-buttons" style="display:none;">
            <button class="tab-left" onclick="moveTabLeft(this); return false;"></button>
            <button class="tab-right" onclick="moveTabRight(this); return false;"></button>
        </div>
    </div>
</div>

<div id="main" class="nosidebar">
    <div id="sidebar">
        
        
    </div>

    <div id="content">
        
        <p class="breadcrumb"><a href="/projects/exiv2/boards">Forums</a> » <a href="/projects/exiv2/boards/3">Forum</a> » </p>

<div class="contextual">
    
    
    
    
</div>

<h2>Error opening file where the directory has accents</h2>

<div class="message">
<p><span class="author">Added by <a class="user active" href="/users/224">Adonai Canez</a> <a title="18 Mar 2015 01:48" href="/projects/exiv2/activity?from=2015-03-18">over 6 years</a> ago</span></p>
<div class="wiki">
<p>When I wrote my program in 2011 exiv2 opened files with directories that had accents, but this new version not open these files.<br />What could be wrong?</p>


	<p>std::string directory;<br />image = Exiv2::ImageFactory::open(directory.c_str());</p>


	<p>directory ---> C:\directory_ã\imagem.jpeg</p>
</div>

</div>
<br />

<div id="replies">
<h3 class="comments icon icon-comments">Replies (6)</h3>
  <div class="message reply" id="message-1927">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/1926?r=1927#message-1927">RE: Error opening file where the directory has accents</a>
    -
    Added by <a class="user active" href="/users/119">Robin Mills</a> <a title="18 Mar 2015 10:41" href="/projects/exiv2/activity?from=2015-03-18">over 6 years</a> ago
  </h4>
  <div class="wiki"><p>Adonai</p>


	<p>Thank you for reporting this.  I am surprised by this because I don't believe there have been changes to the basicio file handling code for a few years.</p>


	<p>It will help greatly to find out when this change may have occurred.  I've built 0.23 and 0.24 from the tar-bundle on exiv2, and built the trunk.  I've built an MSVC 32bit static build which should run OK on XP and higher.  <a class="external" href="http://clanmills.com/files/exiv2-32bit.zip">http://clanmills.com/files/exiv2-32bit.zip</a></p>


	<p>Can you download and execute each the following commands.   Please post the output here.<pre>
cd ... trunk
............trunk/&gt; exiv2 -vV
............trunk/&gt; exiv2 -pa c:\&lt;your directory with accent&gt;\foo.jpeg
</pre>Please do this test for the three builds.</p></div>
  
  </div>
  <div class="message reply" id="message-1928">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/1926?r=1928#message-1928">RE: Error opening file where the directory has accents</a>
    -
    Added by <a class="user active" href="/users/119">Robin Mills</a> <a title="18 Mar 2015 18:06" href="/projects/exiv2/activity?from=2015-03-18">over 6 years</a> ago
  </h4>
  <div class="wiki"><p>The file seems to have disappeared from clanmills.com so I've restored it.  And I attach a copy to this report.</p></div>
  <div class="attachments">
<div class="contextual">
  
</div>
<table>
<tr>
  <td>
    <a class="icon icon-attachment" href="/attachments/735">exiv2-32bits.zip</a>    <span class="size">(1.98 MB)</span>
    <a class="icon-only icon-download" title="Download" href="/attachments/download/735/exiv2-32bits.zip">exiv2-32bits.zip</a>  </td>
  <td></td>
  <td>
  </td>
  <td>
  </td>
</tr>
</table>
</div>

  </div>
  <div class="message reply" id="message-1945">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/1926?r=1945#message-1945">RE: Error opening file where the directory has accents</a>
    -
    Added by <a class="user active" href="/users/360">Thomas Beutlich</a> <a title="24 Mar 2015 22:42" href="/projects/exiv2/activity?from=2015-03-24">over 6 years</a> ago
  </h4>
  <div class="wiki"><p>I tried to reproduce the problem on WinXP with the three provided binaries and the same directory name as stated above, but failed. It all worked as expected. Robin, did you build your binaries with <code>EXV_UNICODE_PATH</code> defined? It would be nice to have this information in the -vV output.</p></div>
  
  </div>
  <div class="message reply" id="message-1946">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/1926?r=1946#message-1946">RE: Error opening file where the directory has accents</a>
    -
    Added by <a class="user active" href="/users/119">Robin Mills</a> <a title="24 Mar 2015 23:01" href="/projects/exiv2/activity?from=2015-03-24">over 6 years</a> ago
  </h4>
  <div class="wiki"><p>Thomas</p>


	<p>I'm having difficulty understanding the meaning of your message.  Are you saying that you have reproduced the reported issue with the binaries I provided last week?</p>


	<p>You are right.  I should output EXV_UNICODE_PATH in the exiv2 -vV output.  Those 32-bit builds were build with msvc2003 using Visual Studio 2003.  I can't remember if the default for UNICODE_PATH.  Can you open a new issue "Bug" with the title "Error opening file where the directory has accents".  Assign the issue to me.  I'll change src/version.cpp to report UNICODE_PATH and do a built with it set and ask you to test again.</p>


	<p>Or ... you are welcome to open the "Bug" and do the work yourself.  I'm very happy to accept your assistance.</p>


	<p>Robin</p></div>
  
  </div>
  <div class="message reply" id="message-1955">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/1926?r=1955#message-1955">RE: Error opening file where the directory has accents</a>
    -
    Added by <a class="user active" href="/users/224">Adonai Canez</a> <a title="25 Mar 2015 13:30" href="/projects/exiv2/activity?from=2015-03-25">over 6 years</a> ago
  </h4>
  <div class="wiki"><p>Hello Robin, <br />Sorry for the delay in response.<br /> <br />I performed the tests and all worked correctly. Only the file name is displayed incorrect</p>


	<p>I think my problem is that I needed to compile the exiv2 with mingw32 (<a class="external" href="http://sourceforge.net/projects/mingw/">http://sourceforge.net/projects/mingw/</a>) version 4.8.1 and Qt 5.1 I compiled with mingw-w64 (http ://sourceforge.net/projects/mingw-w64) version 4.9.2 both 32-bit version.</p>


	<p>I would like to be able to compile exiv2 with the 4.9.2 version of mingw-w64, but gives errors.<br />Have you tested with mingw-w64?</p>


	<p>D:\>exiv2-trunk.exe d:\ã\foto.jpg<br />File name       : d:\π\foto.jpg<br />File size       : 210704 Bytes<br />MIME type       : image/jpeg<br />Image size      : 1024 x 768<br />Camera make     : NIKON<br />Camera model    : COOLPIX L100<br />Image timestamp : 2014:08:01 15:35:23<br />Image number    :<br />Exposure time   : 1/386 s<br />Aperture        : F7<br />Exposure bias   : 0 EV<br />Flash           : No, compulsory<br />Flash bias      :<br />Focal length    : 5.0 mm (35 mm equivalent: 28.0 mm)<br />Subject distance:<br />ISO speed       : 80<br />Exposure mode   : Auto<br />Metering mode   : Multi-segment<br />Macro mode      :<br />Image quality   : NORMAL<br />Exif Resolution : 1024 x 768<br />White balance   : AUTO<br />Thumbnail       : image/jpeg, 4360 Bytes<br />Copyright       :<br />Exif comment    :</p></div>
  
  </div>
  <div class="message reply" id="message-1956">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/1926?r=1956#message-1956">RE: Error opening file where the directory has accents</a>
    -
    Added by <a class="user active" href="/users/119">Robin Mills</a> <a title="25 Mar 2015 15:38" href="/projects/exiv2/activity?from=2015-03-25">over 6 years</a> ago
  </h4>
  <div class="wiki"><p>Out buildserver builds MinGW 32 and 64 bits all the time.  It's currently using 4.8.3.</p>


	<p>Nehal reported trouble with 4.9 and Thomas looked at it (and your issue) in the last couple of days.  <a class="external" href="http://dev.exiv2.org/boards/3/topics/1869?r=1944#message-1944">http://dev.exiv2.org/boards/3/topics/1869?r=1944#message-1944</a></p>


	<p>Being a native english speaker, I have trouble with UNICODE/accents and everything outside the ascii 32-127 range!  When you say <em>Only the file name is displayed incorrect</em>, I'm not sure what you mean.  I'm willing to open an issue about this and ask Thomas to investigate.  He's a German and if more familiar with this kind of thing.</p>


	<p>MinGW is my least favourite build environment because I don't used .  There are build notes here:  <a class="external" href="http://dev.exiv2.org/projects/exiv2/wiki/How_do_I_build_Exiv2_on_the_XYZ_platform">http://dev.exiv2.org/projects/exiv2/wiki/How_do_I_build_Exiv2_on_the_XYZ_platform</a>  and additional information about MinGW here:  <a class="external" href="http://clanmills.com/exiv2/mingw.shtml">http://clanmills.com/exiv2/mingw.shtml</a></p>


	<p>If you are using Qt, I think you have to use MinGW.  Unless you have another compelling reason to use MinGW, I encourage you to use Cygwin or MSVC.  If you're really stuck with getting the build, I can zip one of a build from the buildserver for you to use.</p></div>
  
  </div>
</div>
<span class="pagination"><ul class="pages"></ul><span><span class="items">(1-6/6)</span> </span></span>



        
        <div style="clear:both;"></div>
    </div>
</div>
</div>

<div id="ajax-indicator" style="display:none;"><span>Loading...</span></div>
<div id="ajax-modal" style="display:none;"></div>

<div id="footer">
  <div class="bgl"><div class="bgr">
    Powered by <a href="https://www.redmine.org/">Redmine</a> &copy; 2006-2018 Jean-Philippe Lang
  </div></div>
</div>
</div>
</div>

</body>
</html>
