<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<title>ISO speed readout &amp; low-light cameras - Exiv2</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="description" content="Redmine" />
<meta name="keywords" content="issue,bug,tracker" />
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="1g7jJfromqkW5P+X8dkzPO8k7TtZ9X2f6vGcXJeobmE0Q0jKiJJWqUOA4JtODj8P0La5QqgW3CUX0QzU1JGJDg==" />
<link rel='shortcut icon' href='/favicon.ico?1550767427' />
<link rel="stylesheet" media="all" href="/stylesheets/jquery/jquery-ui-1.11.0.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/application.css?1550767427" />
<link rel="stylesheet" media="all" href="/stylesheets/responsive.css?1550767427" />

<script src="/javascripts/jquery-1.11.1-ui-1.11.0-ujs-4.3.1.js?1550767427"></script>
<script src="/javascripts/application.js?1550767427"></script>
<script src="/javascripts/responsive.js?1550767427"></script>
<script>
//<![CDATA[
$(window).load(function(){ warnLeavingUnsaved('The current page contains unsaved text that will be lost if you leave this page.'); });
//]]>
</script>


<!-- page specific tags -->
</head>
<body class="project-exiv2 has-main-menu controller-messages action-show avatars-off">

<div id="wrapper">

<div class="flyout-menu js-flyout-menu">


        <div class="flyout-menu__search">
            <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
            <input type="hidden" name="messages" value="1" />
            <label class="search-magnifier search-magnifier--flyout" for="flyout-search">&#9906;</label>
            <input type="text" name="q" id="flyout-search" class="small js-search-input" placeholder="Search" />
</form>        </div>


        <h3>Project</h3>
        <span class="js-project-menu"></span>

    <h3>General</h3>
    <span class="js-general-menu"></span>

    <span class="js-sidebar flyout-menu__sidebar"></span>

    <h3>Profile</h3>
    <span class="js-profile-menu"></span>

</div>

<div id="wrapper2">
<div id="wrapper3">
<div id="top-menu">
    <div id="account">
        <ul><li><a class="login" href="/login">Sign in</a></li></ul>    </div>
    
    <ul><li><a class="home" href="/">Home</a></li><li><a class="projects" href="/projects">Projects</a></li><li><a class="help" href="https://www.redmine.org/guide">Help</a></li></ul></div>

<div id="header">

    <a href="#" class="mobile-toggle-button js-flyout-menu-toggle-button"></a>

    <div id="quick-search">
        <form action="/projects/exiv2/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
        <input type="hidden" name="scope" />
        <input type="hidden" name="messages" value="1" />
        <label for='q'>
          <a accesskey="4" href="/projects/exiv2/search">Search</a>:
        </label>
        <input type="text" name="q" id="q" size="20" class="small" accesskey="f" />
</form>        <div id="project-jump" class="drdn"><span class="drdn-trigger">Exiv2</span><div class="drdn-content"><div class="quick-search"><input type="text" name="q" id="projects-quick-search" value="" class="autocomplete" data-automcomplete-url="/projects/autocomplete.js?jump=boards" autocomplete="off" /></div><div class="drdn-items projects selection"></div><div class="drdn-items all-projects selection"><a href="/projects?jump=boards">All Projects</a></div></div></div>
    </div>

    <h1><span class="current-project">Exiv2</span></h1>

    <div id="main-menu" class="tabs">
        <ul><li><a class="overview" href="/projects/exiv2">Overview</a></li><li><a class="activity" href="/projects/exiv2/activity">Activity</a></li><li><a class="roadmap" href="/projects/exiv2/roadmap">Roadmap</a></li><li><a class="issues" href="/projects/exiv2/issues">Issues</a></li><li><a class="news" href="/projects/exiv2/news">News</a></li><li><a class="wiki" href="/projects/exiv2/wiki">Wiki</a></li><li><a class="boards selected" href="/projects/exiv2/boards">Forums</a></li><li><a class="repository" href="/projects/exiv2/repository">Repository</a></li></ul>
        <div class="tabs-buttons" style="display:none;">
            <button class="tab-left" onclick="moveTabLeft(this); return false;"></button>
            <button class="tab-right" onclick="moveTabRight(this); return false;"></button>
        </div>
    </div>
</div>

<div id="main" class="nosidebar">
    <div id="sidebar">
        
        
    </div>

    <div id="content">
        
        <p class="breadcrumb"><a href="/projects/exiv2/boards">Forums</a> » <a href="/projects/exiv2/boards/3">Forum</a> » </p>

<div class="contextual">
    
    
    
    
</div>

<h2>ISO speed readout &amp; low-light cameras</h2>

<div class="message">
<p><span class="author">Added by <a class="user active" href="/users/4411">Spex Duplex</a> <a title="22 Apr 2015 09:44" href="/projects/exiv2/activity?from=2015-04-22">over 6 years</a> ago</span></p>
<div class="wiki">
<p>Are there plans to enhance the ISO readout according to Annex G of the EXIF 2.3 spec? I'm faced with that ISO 65535 value often enough to slowly get annoyed by it, and seemingly the EXIF 2.3 spec is aware of that issue and proposes a slightly different way to obtain the ISO value of the recorded image.</p>


	<p>If something like this is implemented, should it enhance the existing isoSpeed() function or, due possible compatibility conflicts, should a new function be used for that?</p>
</div>

</div>
<br />

<div id="replies">
<h3 class="comments icon icon-comments">Replies (4)</h3>
  <div class="message reply" id="message-2028">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/2027?r=2028#message-2028">RE: ISO speed readout &amp; low-light cameras</a>
    -
    Added by <a class="user active" href="/users/119">Robin Mills</a> <a title="22 Apr 2015 10:08" href="/projects/exiv2/activity?from=2015-04-22">over 6 years</a> ago
  </h4>
  <div class="wiki"><p>We have no plan to work on that at the moment as we are currently preparing to release v0.25.  I've opened a Feature Request <a class="issue tracker-2 status-5 priority-4 priority-default closed" title="Feature: ISO speed readout &amp; low-light cameras (Closed)" href="/issues/1060">#1060</a></p>


	<p>You'll see that I have set the target for this as v0.26 - however that is a target and not a commitment.  Exiv2 is an open source project.  If your heart is set on having this feature, I encourage you to join the team and work with us to implement, test and document the necessary code.</p></div>
  
  </div>
  <div class="message reply" id="message-2029">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/2027?r=2029#message-2029">RE: ISO speed readout &amp; low-light cameras</a>
    -
    Added by <a class="user active" href="/users/4411">Spex Duplex</a> <a title="22 Apr 2015 14:36" href="/projects/exiv2/activity?from=2015-04-22">over 6 years</a> ago
  </h4>
  <div class="wiki"><p>Ok, thanks Robin.</p>


	<p>I have a technical question (which also relies a bit on the actual spec): The best bet is probably to enhance the isoSpeed() function. Should the existing code be run first, and only if the result is existing and == 65535, the additional Exif.Photo.SensivityType based code run, or the other way around?</p>


	<p>To my knowledge there are only a few cameras (so far) capable of pulling off ISOs beyond that boundary: Nikon D3s, D4, D4s, Sony A7s, Canon 5D3, 6D, 1Dx, and probably more incoming in the future. The ones I tried seem to handle things via the Exif.Photo.SensivityType (using the REI field in the end), so having that handled properly should yield proper ISO values beyond the current 64k limit (no idea if propietary fields allow for more already). A quick hack in that regard seems to work and shows proper values in Darktable, for example.</p>


	<p>Also, the spec defines multiple fields having the same value for various values of Exif.Photo.SensivityType (if I understood that correctly). Should that be validated in the code or just the first / random field being taken instead?</p>


	<p>As for the testing I suppose the best bet is to manipulate the EXIF of an image to contain >64k ISO data, some of that in a correct and some of that in an incorrect way so the well-behavedness of the code can be checked.</p></div>
  
  </div>
  <div class="message reply" id="message-2030">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/2027?r=2030#message-2030">RE: ISO speed readout &amp; low-light cameras</a>
    -
    Added by <a class="user active" href="/users/119">Robin Mills</a> <a title="22 Apr 2015 15:29" href="/projects/exiv2/activity?from=2015-04-22">over 6 years</a> ago
  </h4>
  <div class="wiki"><p>Spex</p>


	<p>I'll confess.  I don't know what you're talking about.  I looked at the 2.3 Spec earlier and didn't know what it was talking about either!  I'm neither a Metadata Engineer, nor a Photographer.  I'm a Software/Build/Test Engineer.  <a class="external" href="http://dev.exiv2.org/projects/exiv2/wiki/_Robin_Mills_">http://dev.exiv2.org/projects/exiv2/wiki/_Robin_Mills_</a></p>


	<p>If you really need help with this, I'll add Phil (of ExifTool fame) to the watchers for this issue and Phil will probably illuminate us all on the subject.</p>


	<p>The testing is rather easy.  We add one or more test files.  We run any commands we want on your file and compare the output to last time.  If it's producing the reference result, we say it's passed.  Typically, you'd want to do something like:  $ exiv2 -pa -g Sensitivity spexsfile.jpg.  For example, I added code yesterday to test my fixes for <a class="issue tracker-1 status-5 priority-4 priority-default closed" title="Bug: xml:lang should be treated case insensitive (Closed)" href="/issues/1058">#1058</a> <a class="changeset" title="#1058.  xml:lang case insensitive.  Working well.  Added regression detector." href="/projects/exiv2/repository/exiv2/revisions/3713">r3713</a> <pre>    num=1058
    filename=exiv2-bug$num.jpg
    printf "$num " &gt;&#38;3
    echo '------&gt;' Bug $num '&lt;-------' &gt;&#38;2
    copyTestFile exiv2-empty.jpg $filename
    # Add titles in 2 languages and one default
    runTest exiv2 -M'set Xmp.dc.title lang="de-DE" GERMAN'  $filename
    runTest exiv2 -M'set Xmp.dc.title lang="en-GB" BRITISH' $filename
    runTest exiv2 -M'set Xmp.dc.title Everybody else'       $filename
    runTest exiv2 -px                                       $filename
    # Remove languages, test case for the language
    runTest exiv2 -M'set Xmp.dc.title lang="DE-de" german'  $filename
    runTest exiv2 -M'set Xmp.dc.title lang="EN-gb"'         $filename
    runTest exiv2 -M'set Xmp.dc.title'                      $filename
    runTest exiv2 -px                                       $filename</pre>I refer to this kind of test as a 'regression detector' because the test suite will report an exception if exiv2 suddenly reverts to its old (and incorrect) behaviour.  It will of course also report if the output changes in any way.  One other point to consider is that we want to keep our test images small.  So if you have a good test image, use samples/metacopy to copy the metadata into an image "container" that has no image.  The metadata's good and that's all we want to test.  If you send me a big fat image, I'll use metacopy to put it on a diet before I submit to our repository.</p></div>
  
  </div>
  <div class="message reply" id="message-2075">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="/boards/3/topics/2027?r=2075#message-2075">RE: ISO speed readout &amp; low-light cameras</a>
    -
    Added by <a class="user active" href="/users/4411">Spex Duplex</a> <a title="10 May 2015 08:04" href="/projects/exiv2/activity?from=2015-05-10">over 6 years</a> ago
  </h4>
  <div class="wiki"><p>Ok, thanks for all the references/tips. I added some patches/files to the issue tracker (<a class="issue tracker-2 status-5 priority-4 priority-default closed" title="Feature: ISO speed readout &amp; low-light cameras (Closed)" href="/issues/1060">#1060</a>), including tests checking for possible corner cases (probably missed a good few of them, though).</p></div>
  
  </div>
</div>
<span class="pagination"><ul class="pages"></ul><span><span class="items">(1-4/4)</span> </span></span>



        
        <div style="clear:both;"></div>
    </div>
</div>
</div>

<div id="ajax-indicator" style="display:none;"><span>Loading...</span></div>
<div id="ajax-modal" style="display:none;"></div>

<div id="footer">
  <div class="bgl"><div class="bgr">
    Powered by <a href="https://www.redmine.org/">Redmine</a> &copy; 2006-2018 Jean-Philippe Lang
  </div></div>
</div>
</div>
</div>

</body>
</html>
